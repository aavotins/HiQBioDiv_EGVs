<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Ecogeographical variables | High-resolution ecogeographical variables for species distribution modelling describing Latvia, 2024</title>
  <meta name="description" content="<p>Description of the geodata used and the geoprocessing workflows employed to
create ecogeographical variables (EGVs) for species distribution modelling
describing Latvia, 2024.</p>" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Ecogeographical variables | High-resolution ecogeographical variables for species distribution modelling describing Latvia, 2024" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>Description of the geodata used and the geoprocessing workflows employed to
create ecogeographical variables (EGVs) for species distribution modelling
describing Latvia, 2024.</p>" />
  <meta name="github-repo" content="aavotins/HiQBioDiv_EGVs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Ecogeographical variables | High-resolution ecogeographical variables for species distribution modelling describing Latvia, 2024" />
  
  <meta name="twitter:description" content="<p>Description of the geodata used and the geoprocessing workflows employed to
create ecogeographical variables (EGVs) for species distribution modelling
describing Latvia, 2024.</p>" />
  

<meta name="author" content="Andris Avotiņš" />


<meta name="date" content="2025-10-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Ch05.html"/>
<link rel="next" href="Ch07.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">HiQBioDiv EGVs</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-this-material"><i class="fa fa-check"></i>About this material</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="Ch01.html"><a href="Ch01.html"><i class="fa fa-check"></i><b>1</b> Terminology and acronyms</a></li>
<li class="chapter" data-level="2" data-path="Ch02.html"><a href="Ch02.html"><i class="fa fa-check"></i><b>2</b> Utilities</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Ch02.html"><a href="Ch02.html#Ch02.01"><i class="fa fa-check"></i><b>2.1</b> R package egvtools</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="Ch02.html"><a href="Ch02.html#Ch02.01.01"><i class="fa fa-check"></i><b>2.1.1</b> Reproduction only functions</a></li>
<li class="chapter" data-level="2.1.2" data-path="Ch02.html"><a href="Ch02.html#Ch02.01.02"><i class="fa fa-check"></i><b>2.1.2</b> General purpose functions</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="Ch02.html"><a href="Ch02.html#Ch02.02"><i class="fa fa-check"></i><b>2.2</b> Other utility functions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Ch03.html"><a href="Ch03.html"><i class="fa fa-check"></i><b>3</b> Templates and utilities</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Ch03.html"><a href="Ch03.html#Ch03.01"><i class="fa fa-check"></i><b>3.1</b> Vector data</a></li>
<li class="chapter" data-level="3.2" data-path="Ch03.html"><a href="Ch03.html#Ch03.02"><i class="fa fa-check"></i><b>3.2</b> Raster data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Ch04.html"><a href="Ch04.html"><i class="fa fa-check"></i><b>4</b> Raw geodata</a>
<ul>
<li class="chapter" data-level="4.1" data-path="Ch04.html"><a href="Ch04.html#Ch04.01"><i class="fa fa-check"></i><b>4.1</b> State Forest Service’s State Forest Registry</a></li>
<li class="chapter" data-level="4.2" data-path="Ch04.html"><a href="Ch04.html#Ch04.02"><i class="fa fa-check"></i><b>4.2</b> Rural Support Service’s information on declared fields</a></li>
<li class="chapter" data-level="4.3" data-path="Ch04.html"><a href="Ch04.html#Ch04.03"><i class="fa fa-check"></i><b>4.3</b> Melioration Cadaster</a></li>
<li class="chapter" data-level="4.4" data-path="Ch04.html"><a href="Ch04.html#Ch04.04"><i class="fa fa-check"></i><b>4.4</b> TopographicMap</a></li>
<li class="chapter" data-level="4.5" data-path="Ch04.html"><a href="Ch04.html#Ch04.05"><i class="fa fa-check"></i><b>4.5</b> Corine Land Cover 2018</a></li>
<li class="chapter" data-level="4.6" data-path="Ch04.html"><a href="Ch04.html#Ch04.06"><i class="fa fa-check"></i><b>4.6</b> Publicly available LVM data</a></li>
<li class="chapter" data-level="4.7" data-path="Ch04.html"><a href="Ch04.html#Ch04.07"><i class="fa fa-check"></i><b>4.7</b> Soil data</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="Ch04.html"><a href="Ch04.html#Ch04.07.01"><i class="fa fa-check"></i><b>4.7.1</b> Soil chemistry</a></li>
<li class="chapter" data-level="4.7.2" data-path="Ch04.html"><a href="Ch04.html#Ch04.07.02"><i class="fa fa-check"></i><b>4.7.2</b> Soil texture: Europe</a></li>
<li class="chapter" data-level="4.7.3" data-path="Ch04.html"><a href="Ch04.html#Ch04.07.03"><i class="fa fa-check"></i><b>4.7.3</b> Soil texture: Farmland</a></li>
<li class="chapter" data-level="4.7.4" data-path="Ch04.html"><a href="Ch04.html#Ch04.07.04"><i class="fa fa-check"></i><b>4.7.4</b> Soil texture: Quaternary</a></li>
<li class="chapter" data-level="4.7.5" data-path="Ch04.html"><a href="Ch04.html#Ch04.07.05"><i class="fa fa-check"></i><b>4.7.5</b> Organic soils: SILAVA</a></li>
<li class="chapter" data-level="4.7.6" data-path="Ch04.html"><a href="Ch04.html#Ch04.07.06"><i class="fa fa-check"></i><b>4.7.6</b> Organic soils: LU</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="Ch04.html"><a href="Ch04.html#Ch04.08"><i class="fa fa-check"></i><b>4.8</b> Dynamic World data</a></li>
<li class="chapter" data-level="4.9" data-path="Ch04.html"><a href="Ch04.html#Ch04.09"><i class="fa fa-check"></i><b>4.9</b> The Global Forest Watch</a></li>
<li class="chapter" data-level="4.10" data-path="Ch04.html"><a href="Ch04.html#Ch04.10"><i class="fa fa-check"></i><b>4.10</b> Palsar</a></li>
<li class="chapter" data-level="4.11" data-path="Ch04.html"><a href="Ch04.html#Ch04.11"><i class="fa fa-check"></i><b>4.11</b> CHELSA v2.1</a></li>
<li class="chapter" data-level="4.12" data-path="Ch04.html"><a href="Ch04.html#Ch04.12"><i class="fa fa-check"></i><b>4.12</b> HydroClim data</a></li>
<li class="chapter" data-level="4.13" data-path="Ch04.html"><a href="Ch04.html#Ch04.13"><i class="fa fa-check"></i><b>4.13</b> Sentinel-2 indices</a></li>
<li class="chapter" data-level="4.14" data-path="Ch04.html"><a href="Ch04.html#Ch04.14"><i class="fa fa-check"></i><b>4.14</b> Waste and garbage disposal sites, landfills</a></li>
<li class="chapter" data-level="4.15" data-path="Ch04.html"><a href="Ch04.html#Ch04.15"><i class="fa fa-check"></i><b>4.15</b> Digital elevation/terrain models</a></li>
<li class="chapter" data-level="4.16" data-path="Ch04.html"><a href="Ch04.html#Ch04.16"><i class="fa fa-check"></i><b>4.16</b> Latvian Exclusive Economic Zone polygon</a></li>
<li class="chapter" data-level="4.17" data-path="Ch04.html"><a href="Ch04.html#Ch04.17"><i class="fa fa-check"></i><b>4.17</b> Bogs and Mires: EDI</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Ch05.html"><a href="Ch05.html"><i class="fa fa-check"></i><b>5</b> Geodata products</a>
<ul>
<li class="chapter" data-level="5.1" data-path="Ch05.html"><a href="Ch05.html#Ch05.01"><i class="fa fa-check"></i><b>5.1</b> Terrain products</a></li>
<li class="chapter" data-level="5.2" data-path="Ch05.html"><a href="Ch05.html#Ch05.02"><i class="fa fa-check"></i><b>5.2</b> Soil texture product</a></li>
<li class="chapter" data-level="5.3" data-path="Ch05.html"><a href="Ch05.html#Ch05.03"><i class="fa fa-check"></i><b>5.3</b> Landscape classification</a></li>
<li class="chapter" data-level="5.4" data-path="Ch05.html"><a href="Ch05.html#Ch05.04"><i class="fa fa-check"></i><b>5.4</b> Landscape diversity</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="Ch05.html"><a href="Ch05.html#Ch05.04.01"><i class="fa fa-check"></i><b>5.4.1</b> Landscape in general diversity</a></li>
<li class="chapter" data-level="5.4.2" data-path="Ch05.html"><a href="Ch05.html#Ch05.04.02"><i class="fa fa-check"></i><b>5.4.2</b> Forest diversity</a></li>
<li class="chapter" data-level="5.4.3" data-path="Ch05.html"><a href="Ch05.html#Ch05.04.03"><i class="fa fa-check"></i><b>5.4.3</b> Farmland diversity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Ch06.html"><a href="Ch06.html"><i class="fa fa-check"></i><b>6</b> Ecogeographical variables</a>
<ul>
<li class="chapter" data-level="6.1" data-path="Ch06.html"><a href="Ch06.html#ch06.001"><i class="fa fa-check"></i><b>6.1</b> Climate_CHELSAv2.1-bio1_cell</a></li>
<li class="chapter" data-level="6.2" data-path="Ch06.html"><a href="Ch06.html#ch06.002"><i class="fa fa-check"></i><b>6.2</b> Climate_CHELSAv2.1-bio10_cell</a></li>
<li class="chapter" data-level="6.3" data-path="Ch06.html"><a href="Ch06.html#ch06.003"><i class="fa fa-check"></i><b>6.3</b> Climate_CHELSAv2.1-bio11_cell</a></li>
<li class="chapter" data-level="6.4" data-path="Ch06.html"><a href="Ch06.html#ch06.004"><i class="fa fa-check"></i><b>6.4</b> Climate_CHELSAv2.1-bio12_cell</a></li>
<li class="chapter" data-level="6.5" data-path="Ch06.html"><a href="Ch06.html#ch06.005"><i class="fa fa-check"></i><b>6.5</b> Climate_CHELSAv2.1-bio13_cell</a></li>
<li class="chapter" data-level="6.6" data-path="Ch06.html"><a href="Ch06.html#ch06.006"><i class="fa fa-check"></i><b>6.6</b> Climate_CHELSAv2.1-bio14_cell</a></li>
<li class="chapter" data-level="6.7" data-path="Ch06.html"><a href="Ch06.html#ch06.007"><i class="fa fa-check"></i><b>6.7</b> Climate_CHELSAv2.1-bio15_cell</a></li>
<li class="chapter" data-level="6.8" data-path="Ch06.html"><a href="Ch06.html#ch06.008"><i class="fa fa-check"></i><b>6.8</b> Climate_CHELSAv2.1-bio16_cell</a></li>
<li class="chapter" data-level="6.9" data-path="Ch06.html"><a href="Ch06.html#ch06.009"><i class="fa fa-check"></i><b>6.9</b> Climate_CHELSAv2.1-bio17_cell</a></li>
<li class="chapter" data-level="6.10" data-path="Ch06.html"><a href="Ch06.html#ch06.010"><i class="fa fa-check"></i><b>6.10</b> Climate_CHELSAv2.1-bio18_cell</a></li>
<li class="chapter" data-level="6.11" data-path="Ch06.html"><a href="Ch06.html#ch06.011"><i class="fa fa-check"></i><b>6.11</b> Climate_CHELSAv2.1-bio19_cell</a></li>
<li class="chapter" data-level="6.12" data-path="Ch06.html"><a href="Ch06.html#ch06.012"><i class="fa fa-check"></i><b>6.12</b> Climate_CHELSAv2.1-bio2_cell</a></li>
<li class="chapter" data-level="6.13" data-path="Ch06.html"><a href="Ch06.html#ch06.013"><i class="fa fa-check"></i><b>6.13</b> Climate_CHELSAv2.1-bio3_cell</a></li>
<li class="chapter" data-level="6.14" data-path="Ch06.html"><a href="Ch06.html#ch06.014"><i class="fa fa-check"></i><b>6.14</b> Climate_CHELSAv2.1-bio4_cell</a></li>
<li class="chapter" data-level="6.15" data-path="Ch06.html"><a href="Ch06.html#ch06.015"><i class="fa fa-check"></i><b>6.15</b> Climate_CHELSAv2.1-bio5_cell</a></li>
<li class="chapter" data-level="6.16" data-path="Ch06.html"><a href="Ch06.html#ch06.016"><i class="fa fa-check"></i><b>6.16</b> Climate_CHELSAv2.1-bio6_cell</a></li>
<li class="chapter" data-level="6.17" data-path="Ch06.html"><a href="Ch06.html#ch06.017"><i class="fa fa-check"></i><b>6.17</b> Climate_CHELSAv2.1-bio7_cell</a></li>
<li class="chapter" data-level="6.18" data-path="Ch06.html"><a href="Ch06.html#ch06.018"><i class="fa fa-check"></i><b>6.18</b> Climate_CHELSAv2.1-bio8_cell</a></li>
<li class="chapter" data-level="6.19" data-path="Ch06.html"><a href="Ch06.html#ch06.019"><i class="fa fa-check"></i><b>6.19</b> Climate_CHELSAv2.1-bio9_cell</a></li>
<li class="chapter" data-level="6.20" data-path="Ch06.html"><a href="Ch06.html#ch06.020"><i class="fa fa-check"></i><b>6.20</b> Climate_CHELSAv2.1-clt-max_cell</a></li>
<li class="chapter" data-level="6.21" data-path="Ch06.html"><a href="Ch06.html#ch06.021"><i class="fa fa-check"></i><b>6.21</b> Climate_CHELSAv2.1-clt-mean_cell</a></li>
<li class="chapter" data-level="6.22" data-path="Ch06.html"><a href="Ch06.html#ch06.022"><i class="fa fa-check"></i><b>6.22</b> Climate_CHELSAv2.1-clt-min_cell</a></li>
<li class="chapter" data-level="6.23" data-path="Ch06.html"><a href="Ch06.html#ch06.023"><i class="fa fa-check"></i><b>6.23</b> Climate_CHELSAv2.1-clt-range_cell</a></li>
<li class="chapter" data-level="6.24" data-path="Ch06.html"><a href="Ch06.html#ch06.024"><i class="fa fa-check"></i><b>6.24</b> Climate_CHELSAv2.1-cmi-max_cell</a></li>
<li class="chapter" data-level="6.25" data-path="Ch06.html"><a href="Ch06.html#ch06.025"><i class="fa fa-check"></i><b>6.25</b> Climate_CHELSAv2.1-cmi-mean_cell</a></li>
<li class="chapter" data-level="6.26" data-path="Ch06.html"><a href="Ch06.html#ch06.026"><i class="fa fa-check"></i><b>6.26</b> Climate_CHELSAv2.1-cmi-min_cell</a></li>
<li class="chapter" data-level="6.27" data-path="Ch06.html"><a href="Ch06.html#ch06.027"><i class="fa fa-check"></i><b>6.27</b> Climate_CHELSAv2.1-cmi-range_cell</a></li>
<li class="chapter" data-level="6.28" data-path="Ch06.html"><a href="Ch06.html#ch06.028"><i class="fa fa-check"></i><b>6.28</b> Climate_CHELSAv2.1-fcf_cell</a></li>
<li class="chapter" data-level="6.29" data-path="Ch06.html"><a href="Ch06.html#ch06.029"><i class="fa fa-check"></i><b>6.29</b> Climate_CHELSAv2.1-fgd_cell</a></li>
<li class="chapter" data-level="6.30" data-path="Ch06.html"><a href="Ch06.html#ch06.030"><i class="fa fa-check"></i><b>6.30</b> Climate_CHELSAv2.1-gdd0_cell</a></li>
<li class="chapter" data-level="6.31" data-path="Ch06.html"><a href="Ch06.html#ch06.031"><i class="fa fa-check"></i><b>6.31</b> Climate_CHELSAv2.1-gdd10_cell</a></li>
<li class="chapter" data-level="6.32" data-path="Ch06.html"><a href="Ch06.html#ch06.032"><i class="fa fa-check"></i><b>6.32</b> Climate_CHELSAv2.1-gdd5_cell</a></li>
<li class="chapter" data-level="6.33" data-path="Ch06.html"><a href="Ch06.html#ch06.033"><i class="fa fa-check"></i><b>6.33</b> Climate_CHELSAv2.1-gddlgd0_cell</a></li>
<li class="chapter" data-level="6.34" data-path="Ch06.html"><a href="Ch06.html#ch06.034"><i class="fa fa-check"></i><b>6.34</b> Climate_CHELSAv2.1-gddlgd10_cell</a></li>
<li class="chapter" data-level="6.35" data-path="Ch06.html"><a href="Ch06.html#ch06.035"><i class="fa fa-check"></i><b>6.35</b> Climate_CHELSAv2.1-gddlgd5_cell</a></li>
<li class="chapter" data-level="6.36" data-path="Ch06.html"><a href="Ch06.html#ch06.036"><i class="fa fa-check"></i><b>6.36</b> Climate_CHELSAv2.1-gdgfgd0_cell</a></li>
<li class="chapter" data-level="6.37" data-path="Ch06.html"><a href="Ch06.html#ch06.037"><i class="fa fa-check"></i><b>6.37</b> Climate_CHELSAv2.1-gdgfgd10_cell</a></li>
<li class="chapter" data-level="6.38" data-path="Ch06.html"><a href="Ch06.html#ch06.038"><i class="fa fa-check"></i><b>6.38</b> Climate_CHELSAv2.1-gdgfgd5_cell</a></li>
<li class="chapter" data-level="6.39" data-path="Ch06.html"><a href="Ch06.html#ch06.039"><i class="fa fa-check"></i><b>6.39</b> Climate_CHELSAv2.1-gsl_cell</a></li>
<li class="chapter" data-level="6.40" data-path="Ch06.html"><a href="Ch06.html#ch06.040"><i class="fa fa-check"></i><b>6.40</b> Climate_CHELSAv2.1-gsp_cell</a></li>
<li class="chapter" data-level="6.41" data-path="Ch06.html"><a href="Ch06.html#ch06.041"><i class="fa fa-check"></i><b>6.41</b> Climate_CHELSAv2.1-gst_cell</a></li>
<li class="chapter" data-level="6.42" data-path="Ch06.html"><a href="Ch06.html#ch06.042"><i class="fa fa-check"></i><b>6.42</b> Climate_CHELSAv2.1-hurs-max_cell</a></li>
<li class="chapter" data-level="6.43" data-path="Ch06.html"><a href="Ch06.html#ch06.043"><i class="fa fa-check"></i><b>6.43</b> Climate_CHELSAv2.1-hurs-mean_cell</a></li>
<li class="chapter" data-level="6.44" data-path="Ch06.html"><a href="Ch06.html#ch06.044"><i class="fa fa-check"></i><b>6.44</b> Climate_CHELSAv2.1-hurs-min_cell</a></li>
<li class="chapter" data-level="6.45" data-path="Ch06.html"><a href="Ch06.html#ch06.045"><i class="fa fa-check"></i><b>6.45</b> Climate_CHELSAv2.1-hurs-range_cell</a></li>
<li class="chapter" data-level="6.46" data-path="Ch06.html"><a href="Ch06.html#ch06.046"><i class="fa fa-check"></i><b>6.46</b> Climate_CHELSAv2.1-lgd_cell</a></li>
<li class="chapter" data-level="6.47" data-path="Ch06.html"><a href="Ch06.html#ch06.047"><i class="fa fa-check"></i><b>6.47</b> Climate_CHELSAv2.1-ngd0_cell</a></li>
<li class="chapter" data-level="6.48" data-path="Ch06.html"><a href="Ch06.html#ch06.048"><i class="fa fa-check"></i><b>6.48</b> Climate_CHELSAv2.1-ngd10_cell</a></li>
<li class="chapter" data-level="6.49" data-path="Ch06.html"><a href="Ch06.html#ch06.049"><i class="fa fa-check"></i><b>6.49</b> Climate_CHELSAv2.1-ngd5_cell</a></li>
<li class="chapter" data-level="6.50" data-path="Ch06.html"><a href="Ch06.html#ch06.050"><i class="fa fa-check"></i><b>6.50</b> Climate_CHELSAv2.1-npp_cell</a></li>
<li class="chapter" data-level="6.51" data-path="Ch06.html"><a href="Ch06.html#ch06.051"><i class="fa fa-check"></i><b>6.51</b> Climate_CHELSAv2.1-pet-penman-max_cell</a></li>
<li class="chapter" data-level="6.52" data-path="Ch06.html"><a href="Ch06.html#ch06.052"><i class="fa fa-check"></i><b>6.52</b> Climate_CHELSAv2.1-pet-penman-mean_cell</a></li>
<li class="chapter" data-level="6.53" data-path="Ch06.html"><a href="Ch06.html#ch06.053"><i class="fa fa-check"></i><b>6.53</b> Climate_CHELSAv2.1-pet-penman-min_cell</a></li>
<li class="chapter" data-level="6.54" data-path="Ch06.html"><a href="Ch06.html#ch06.054"><i class="fa fa-check"></i><b>6.54</b> Climate_CHELSAv2.1-pet-penman-range_cell</a></li>
<li class="chapter" data-level="6.55" data-path="Ch06.html"><a href="Ch06.html#ch06.055"><i class="fa fa-check"></i><b>6.55</b> Climate_CHELSAv2.1-rsds-max_cell</a></li>
<li class="chapter" data-level="6.56" data-path="Ch06.html"><a href="Ch06.html#ch06.056"><i class="fa fa-check"></i><b>6.56</b> Climate_CHELSAv2.1-rsds-mean_cell</a></li>
<li class="chapter" data-level="6.57" data-path="Ch06.html"><a href="Ch06.html#ch06.057"><i class="fa fa-check"></i><b>6.57</b> Climate_CHELSAv2.1-rsds-min_cell</a></li>
<li class="chapter" data-level="6.58" data-path="Ch06.html"><a href="Ch06.html#ch06.058"><i class="fa fa-check"></i><b>6.58</b> Climate_CHELSAv2.1-rsds-range_cell</a></li>
<li class="chapter" data-level="6.59" data-path="Ch06.html"><a href="Ch06.html#ch06.059"><i class="fa fa-check"></i><b>6.59</b> Climate_CHELSAv2.1-scd_cell</a></li>
<li class="chapter" data-level="6.60" data-path="Ch06.html"><a href="Ch06.html#ch06.060"><i class="fa fa-check"></i><b>6.60</b> Climate_CHELSAv2.1-sfcWind-max_cell</a></li>
<li class="chapter" data-level="6.61" data-path="Ch06.html"><a href="Ch06.html#ch06.061"><i class="fa fa-check"></i><b>6.61</b> Climate_CHELSAv2.1-sfcWind-mean_cell</a></li>
<li class="chapter" data-level="6.62" data-path="Ch06.html"><a href="Ch06.html#ch06.062"><i class="fa fa-check"></i><b>6.62</b> Climate_CHELSAv2.1-sfcWind-min_cell</a></li>
<li class="chapter" data-level="6.63" data-path="Ch06.html"><a href="Ch06.html#ch06.063"><i class="fa fa-check"></i><b>6.63</b> Climate_CHELSAv2.1-sfcWind-range_cell</a></li>
<li class="chapter" data-level="6.64" data-path="Ch06.html"><a href="Ch06.html#ch06.064"><i class="fa fa-check"></i><b>6.64</b> Climate_CHELSAv2.1-swb_cell</a></li>
<li class="chapter" data-level="6.65" data-path="Ch06.html"><a href="Ch06.html#ch06.065"><i class="fa fa-check"></i><b>6.65</b> Climate_CHELSAv2.1-swe_cell</a></li>
<li class="chapter" data-level="6.66" data-path="Ch06.html"><a href="Ch06.html#ch06.066"><i class="fa fa-check"></i><b>6.66</b> Climate_CHELSAv2.1-vpd-max_cell</a></li>
<li class="chapter" data-level="6.67" data-path="Ch06.html"><a href="Ch06.html#ch06.067"><i class="fa fa-check"></i><b>6.67</b> Climate_CHELSAv2.1-vpd-mean_cell</a></li>
<li class="chapter" data-level="6.68" data-path="Ch06.html"><a href="Ch06.html#ch06.068"><i class="fa fa-check"></i><b>6.68</b> Climate_CHELSAv2.1-vpd-min_cell</a></li>
<li class="chapter" data-level="6.69" data-path="Ch06.html"><a href="Ch06.html#ch06.069"><i class="fa fa-check"></i><b>6.69</b> Climate_CHELSAv2.1-vpd-range_cell</a></li>
<li class="chapter" data-level="6.70" data-path="Ch06.html"><a href="Ch06.html#ch06.070"><i class="fa fa-check"></i><b>6.70</b> HydroClim_01-max_cell</a></li>
<li class="chapter" data-level="6.71" data-path="Ch06.html"><a href="Ch06.html#ch06.071"><i class="fa fa-check"></i><b>6.71</b> HydroClim_02-max_cell</a></li>
<li class="chapter" data-level="6.72" data-path="Ch06.html"><a href="Ch06.html#ch06.072"><i class="fa fa-check"></i><b>6.72</b> HydroClim_03-max_cell</a></li>
<li class="chapter" data-level="6.73" data-path="Ch06.html"><a href="Ch06.html#ch06.073"><i class="fa fa-check"></i><b>6.73</b> HydroClim_04-max_cell</a></li>
<li class="chapter" data-level="6.74" data-path="Ch06.html"><a href="Ch06.html#ch06.074"><i class="fa fa-check"></i><b>6.74</b> HydroClim_05-max_cell</a></li>
<li class="chapter" data-level="6.75" data-path="Ch06.html"><a href="Ch06.html#ch06.075"><i class="fa fa-check"></i><b>6.75</b> HydroClim_06-min_cell</a></li>
<li class="chapter" data-level="6.76" data-path="Ch06.html"><a href="Ch06.html#ch06.076"><i class="fa fa-check"></i><b>6.76</b> HydroClim_07-max_cell</a></li>
<li class="chapter" data-level="6.77" data-path="Ch06.html"><a href="Ch06.html#ch06.077"><i class="fa fa-check"></i><b>6.77</b> HydroClim_08-max_cell</a></li>
<li class="chapter" data-level="6.78" data-path="Ch06.html"><a href="Ch06.html#ch06.078"><i class="fa fa-check"></i><b>6.78</b> HydroClim_09-min_cell</a></li>
<li class="chapter" data-level="6.79" data-path="Ch06.html"><a href="Ch06.html#ch06.079"><i class="fa fa-check"></i><b>6.79</b> HydroClim_10-max_cell</a></li>
<li class="chapter" data-level="6.80" data-path="Ch06.html"><a href="Ch06.html#ch06.080"><i class="fa fa-check"></i><b>6.80</b> HydroClim_11-min_cell</a></li>
<li class="chapter" data-level="6.81" data-path="Ch06.html"><a href="Ch06.html#ch06.081"><i class="fa fa-check"></i><b>6.81</b> HydroClim_12-max_cell</a></li>
<li class="chapter" data-level="6.82" data-path="Ch06.html"><a href="Ch06.html#ch06.082"><i class="fa fa-check"></i><b>6.82</b> HydroClim_13-max_cell</a></li>
<li class="chapter" data-level="6.83" data-path="Ch06.html"><a href="Ch06.html#ch06.083"><i class="fa fa-check"></i><b>6.83</b> HydroClim_14-max_cell</a></li>
<li class="chapter" data-level="6.84" data-path="Ch06.html"><a href="Ch06.html#ch06.084"><i class="fa fa-check"></i><b>6.84</b> HydroClim_15-max_cell</a></li>
<li class="chapter" data-level="6.85" data-path="Ch06.html"><a href="Ch06.html#ch06.085"><i class="fa fa-check"></i><b>6.85</b> HydroClim_16-max_cell</a></li>
<li class="chapter" data-level="6.86" data-path="Ch06.html"><a href="Ch06.html#ch06.086"><i class="fa fa-check"></i><b>6.86</b> HydroClim_17-max_cell</a></li>
<li class="chapter" data-level="6.87" data-path="Ch06.html"><a href="Ch06.html#ch06.087"><i class="fa fa-check"></i><b>6.87</b> HydroClim_18-max_cell</a></li>
<li class="chapter" data-level="6.88" data-path="Ch06.html"><a href="Ch06.html#ch06.088"><i class="fa fa-check"></i><b>6.88</b> HydroClim_19-max_cell</a></li>
<li class="chapter" data-level="6.89" data-path="Ch06.html"><a href="Ch06.html#ch06.089"><i class="fa fa-check"></i><b>6.89</b> Distance_Builtup_cell</a></li>
<li class="chapter" data-level="6.90" data-path="Ch06.html"><a href="Ch06.html#ch06.090"><i class="fa fa-check"></i><b>6.90</b> Distance_ForestInside_cell</a></li>
<li class="chapter" data-level="6.91" data-path="Ch06.html"><a href="Ch06.html#ch06.091"><i class="fa fa-check"></i><b>6.91</b> Distance_GrasslandPermanent_cell</a></li>
<li class="chapter" data-level="6.92" data-path="Ch06.html"><a href="Ch06.html#ch06.092"><i class="fa fa-check"></i><b>6.92</b> Distance_Landfill_cell</a></li>
<li class="chapter" data-level="6.93" data-path="Ch06.html"><a href="Ch06.html#ch06.093"><i class="fa fa-check"></i><b>6.93</b> Distance_Sea_cell</a></li>
<li class="chapter" data-level="6.94" data-path="Ch06.html"><a href="Ch06.html#ch06.094"><i class="fa fa-check"></i><b>6.94</b> Distance_Trees_cell</a></li>
<li class="chapter" data-level="6.95" data-path="Ch06.html"><a href="Ch06.html#ch06.095"><i class="fa fa-check"></i><b>6.95</b> Distance_Waste_cell</a></li>
<li class="chapter" data-level="6.96" data-path="Ch06.html"><a href="Ch06.html#ch06.096"><i class="fa fa-check"></i><b>6.96</b> Distance_Water_cell</a></li>
<li class="chapter" data-level="6.97" data-path="Ch06.html"><a href="Ch06.html#ch06.097"><i class="fa fa-check"></i><b>6.97</b> Distance_WaterInside_cell</a></li>
<li class="chapter" data-level="6.98" data-path="Ch06.html"><a href="Ch06.html#ch06.098"><i class="fa fa-check"></i><b>6.98</b> Diversity_Farmland_r500</a></li>
<li class="chapter" data-level="6.99" data-path="Ch06.html"><a href="Ch06.html#ch06.099"><i class="fa fa-check"></i><b>6.99</b> Diversity_Farmland_r1250</a></li>
<li class="chapter" data-level="6.100" data-path="Ch06.html"><a href="Ch06.html#ch06.100"><i class="fa fa-check"></i><b>6.100</b> Diversity_Farmland_r3000</a></li>
<li class="chapter" data-level="6.101" data-path="Ch06.html"><a href="Ch06.html#ch06.101"><i class="fa fa-check"></i><b>6.101</b> Diversity_Farmland_r10000</a></li>
<li class="chapter" data-level="6.102" data-path="Ch06.html"><a href="Ch06.html#ch06.102"><i class="fa fa-check"></i><b>6.102</b> Diversity_Forest_r500</a></li>
<li class="chapter" data-level="6.103" data-path="Ch06.html"><a href="Ch06.html#ch06.103"><i class="fa fa-check"></i><b>6.103</b> Diversity_Forest_r1250</a></li>
<li class="chapter" data-level="6.104" data-path="Ch06.html"><a href="Ch06.html#ch06.104"><i class="fa fa-check"></i><b>6.104</b> Diversity_Forest_r3000</a></li>
<li class="chapter" data-level="6.105" data-path="Ch06.html"><a href="Ch06.html#ch06.105"><i class="fa fa-check"></i><b>6.105</b> Diversity_Forest_r10000</a></li>
<li class="chapter" data-level="6.106" data-path="Ch06.html"><a href="Ch06.html#ch06.106"><i class="fa fa-check"></i><b>6.106</b> Diversity_Total_r500</a></li>
<li class="chapter" data-level="6.107" data-path="Ch06.html"><a href="Ch06.html#ch06.107"><i class="fa fa-check"></i><b>6.107</b> Diversity_Total_r1250</a></li>
<li class="chapter" data-level="6.108" data-path="Ch06.html"><a href="Ch06.html#ch06.108"><i class="fa fa-check"></i><b>6.108</b> Diversity_Total_r3000</a></li>
<li class="chapter" data-level="6.109" data-path="Ch06.html"><a href="Ch06.html#ch06.109"><i class="fa fa-check"></i><b>6.109</b> Diversity_Total_r10000</a></li>
<li class="chapter" data-level="6.110" data-path="Ch06.html"><a href="Ch06.html#ch06.110"><i class="fa fa-check"></i><b>6.110</b> Edges_Bogs-Trees_cell</a></li>
<li class="chapter" data-level="6.111" data-path="Ch06.html"><a href="Ch06.html#ch06.111"><i class="fa fa-check"></i><b>6.111</b> Edges_Bogs-Trees_r500</a></li>
<li class="chapter" data-level="6.112" data-path="Ch06.html"><a href="Ch06.html#ch06.112"><i class="fa fa-check"></i><b>6.112</b> Edges_Bogs-Trees_r1250</a></li>
<li class="chapter" data-level="6.113" data-path="Ch06.html"><a href="Ch06.html#ch06.113"><i class="fa fa-check"></i><b>6.113</b> Edges_Bogs-Trees_r3000</a></li>
<li class="chapter" data-level="6.114" data-path="Ch06.html"><a href="Ch06.html#ch06.114"><i class="fa fa-check"></i><b>6.114</b> Edges_Bogs-Trees_r10000</a></li>
<li class="chapter" data-level="6.115" data-path="Ch06.html"><a href="Ch06.html#ch06.115"><i class="fa fa-check"></i><b>6.115</b> Edges_Bogs-Water_cell</a></li>
<li class="chapter" data-level="6.116" data-path="Ch06.html"><a href="Ch06.html#ch06.116"><i class="fa fa-check"></i><b>6.116</b> Edges_Bogs-Water_r500</a></li>
<li class="chapter" data-level="6.117" data-path="Ch06.html"><a href="Ch06.html#ch06.117"><i class="fa fa-check"></i><b>6.117</b> Edges_Bogs-Water_r1250</a></li>
<li class="chapter" data-level="6.118" data-path="Ch06.html"><a href="Ch06.html#ch06.118"><i class="fa fa-check"></i><b>6.118</b> Edges_Bogs-Water_r3000</a></li>
<li class="chapter" data-level="6.119" data-path="Ch06.html"><a href="Ch06.html#ch06.119"><i class="fa fa-check"></i><b>6.119</b> Edges_Bogs-Water_r10000</a></li>
<li class="chapter" data-level="6.120" data-path="Ch06.html"><a href="Ch06.html#ch06.120"><i class="fa fa-check"></i><b>6.120</b> Edges_Farmland-Builtup_cell</a></li>
<li class="chapter" data-level="6.121" data-path="Ch06.html"><a href="Ch06.html#ch06.121"><i class="fa fa-check"></i><b>6.121</b> Edges_Farmland-Builtup_r500</a></li>
<li class="chapter" data-level="6.122" data-path="Ch06.html"><a href="Ch06.html#ch06.122"><i class="fa fa-check"></i><b>6.122</b> Edges_Farmland-Builtup_r1250</a></li>
<li class="chapter" data-level="6.123" data-path="Ch06.html"><a href="Ch06.html#ch06.123"><i class="fa fa-check"></i><b>6.123</b> Edges_Farmland-Builtup_r3000</a></li>
<li class="chapter" data-level="6.124" data-path="Ch06.html"><a href="Ch06.html#ch06.124"><i class="fa fa-check"></i><b>6.124</b> Edges_Farmland-Builtup_r10000</a></li>
<li class="chapter" data-level="6.125" data-path="Ch06.html"><a href="Ch06.html#ch06.125"><i class="fa fa-check"></i><b>6.125</b> Edges_Trees-Builtup_cell</a></li>
<li class="chapter" data-level="6.126" data-path="Ch06.html"><a href="Ch06.html#ch06.126"><i class="fa fa-check"></i><b>6.126</b> Edges_Trees-Builtup_r500</a></li>
<li class="chapter" data-level="6.127" data-path="Ch06.html"><a href="Ch06.html#ch06.127"><i class="fa fa-check"></i><b>6.127</b> Edges_Trees-Builtup_r1250</a></li>
<li class="chapter" data-level="6.128" data-path="Ch06.html"><a href="Ch06.html#ch06.128"><i class="fa fa-check"></i><b>6.128</b> Edges_Trees-Builtup_r3000</a></li>
<li class="chapter" data-level="6.129" data-path="Ch06.html"><a href="Ch06.html#ch06.129"><i class="fa fa-check"></i><b>6.129</b> Edges_Trees-Builtup_r10000</a></li>
<li class="chapter" data-level="6.130" data-path="Ch06.html"><a href="Ch06.html#ch06.130"><i class="fa fa-check"></i><b>6.130</b> Edges_CropsFallow_cell</a></li>
<li class="chapter" data-level="6.131" data-path="Ch06.html"><a href="Ch06.html#ch06.131"><i class="fa fa-check"></i><b>6.131</b> Edges_CropsFallow_r500</a></li>
<li class="chapter" data-level="6.132" data-path="Ch06.html"><a href="Ch06.html#ch06.132"><i class="fa fa-check"></i><b>6.132</b> Edges_CropsFallow_r1250</a></li>
<li class="chapter" data-level="6.133" data-path="Ch06.html"><a href="Ch06.html#ch06.133"><i class="fa fa-check"></i><b>6.133</b> Edges_CropsFallow_r3000</a></li>
<li class="chapter" data-level="6.134" data-path="Ch06.html"><a href="Ch06.html#ch06.134"><i class="fa fa-check"></i><b>6.134</b> Edges_CropsFallow_r10000</a></li>
<li class="chapter" data-level="6.135" data-path="Ch06.html"><a href="Ch06.html#ch06.135"><i class="fa fa-check"></i><b>6.135</b> Edges_FarmlandShrubs-Trees_cell</a></li>
<li class="chapter" data-level="6.136" data-path="Ch06.html"><a href="Ch06.html#ch06.136"><i class="fa fa-check"></i><b>6.136</b> Edges_FarmlandShrubs-Trees_r500</a></li>
<li class="chapter" data-level="6.137" data-path="Ch06.html"><a href="Ch06.html#ch06.137"><i class="fa fa-check"></i><b>6.137</b> Edges_FarmlandShrubs-Trees_r1250</a></li>
<li class="chapter" data-level="6.138" data-path="Ch06.html"><a href="Ch06.html#ch06.138"><i class="fa fa-check"></i><b>6.138</b> Edges_FarmlandShrubs-Trees_r3000</a></li>
<li class="chapter" data-level="6.139" data-path="Ch06.html"><a href="Ch06.html#ch06.139"><i class="fa fa-check"></i><b>6.139</b> Edges_FarmlandShrubs-Trees_r10000</a></li>
<li class="chapter" data-level="6.140" data-path="Ch06.html"><a href="Ch06.html#ch06.140"><i class="fa fa-check"></i><b>6.140</b> Edges_Grasslands_cell</a></li>
<li class="chapter" data-level="6.141" data-path="Ch06.html"><a href="Ch06.html#ch06.141"><i class="fa fa-check"></i><b>6.141</b> Edges_Grasslands_r500</a></li>
<li class="chapter" data-level="6.142" data-path="Ch06.html"><a href="Ch06.html#ch06.142"><i class="fa fa-check"></i><b>6.142</b> Edges_Grasslands_r1250</a></li>
<li class="chapter" data-level="6.143" data-path="Ch06.html"><a href="Ch06.html#ch06.143"><i class="fa fa-check"></i><b>6.143</b> Edges_Grasslands_r3000</a></li>
<li class="chapter" data-level="6.144" data-path="Ch06.html"><a href="Ch06.html#ch06.144"><i class="fa fa-check"></i><b>6.144</b> Edges_Grasslands_r10000</a></li>
<li class="chapter" data-level="6.145" data-path="Ch06.html"><a href="Ch06.html#ch06.145"><i class="fa fa-check"></i><b>6.145</b> Edges_OldForests_cell</a></li>
<li class="chapter" data-level="6.146" data-path="Ch06.html"><a href="Ch06.html#ch06.146"><i class="fa fa-check"></i><b>6.146</b> Edges_OldForests_r500</a></li>
<li class="chapter" data-level="6.147" data-path="Ch06.html"><a href="Ch06.html#ch06.147"><i class="fa fa-check"></i><b>6.147</b> Edges_OldForests_r1250</a></li>
<li class="chapter" data-level="6.148" data-path="Ch06.html"><a href="Ch06.html#ch06.148"><i class="fa fa-check"></i><b>6.148</b> Edges_OldForests_r3000</a></li>
<li class="chapter" data-level="6.149" data-path="Ch06.html"><a href="Ch06.html#ch06.149"><i class="fa fa-check"></i><b>6.149</b> Edges_OldForests_r10000</a></li>
<li class="chapter" data-level="6.150" data-path="Ch06.html"><a href="Ch06.html#ch06.150"><i class="fa fa-check"></i><b>6.150</b> Edges_Roads_cell</a></li>
<li class="chapter" data-level="6.151" data-path="Ch06.html"><a href="Ch06.html#ch06.151"><i class="fa fa-check"></i><b>6.151</b> Edges_Roads_r500</a></li>
<li class="chapter" data-level="6.152" data-path="Ch06.html"><a href="Ch06.html#ch06.152"><i class="fa fa-check"></i><b>6.152</b> Edges_Roads_r1250</a></li>
<li class="chapter" data-level="6.153" data-path="Ch06.html"><a href="Ch06.html#ch06.153"><i class="fa fa-check"></i><b>6.153</b> Edges_Roads_r3000</a></li>
<li class="chapter" data-level="6.154" data-path="Ch06.html"><a href="Ch06.html#ch06.154"><i class="fa fa-check"></i><b>6.154</b> Edges_Roads_r10000</a></li>
<li class="chapter" data-level="6.155" data-path="Ch06.html"><a href="Ch06.html#ch06.155"><i class="fa fa-check"></i><b>6.155</b> Edges_Trees_cell</a></li>
<li class="chapter" data-level="6.156" data-path="Ch06.html"><a href="Ch06.html#ch06.156"><i class="fa fa-check"></i><b>6.156</b> Edges_Trees_r500</a></li>
<li class="chapter" data-level="6.157" data-path="Ch06.html"><a href="Ch06.html#ch06.157"><i class="fa fa-check"></i><b>6.157</b> Edges_Trees_r1250</a></li>
<li class="chapter" data-level="6.158" data-path="Ch06.html"><a href="Ch06.html#ch06.158"><i class="fa fa-check"></i><b>6.158</b> Edges_Trees_r3000</a></li>
<li class="chapter" data-level="6.159" data-path="Ch06.html"><a href="Ch06.html#ch06.159"><i class="fa fa-check"></i><b>6.159</b> Edges_Trees_r10000</a></li>
<li class="chapter" data-level="6.160" data-path="Ch06.html"><a href="Ch06.html#ch06.160"><i class="fa fa-check"></i><b>6.160</b> Edges_Water_cell</a></li>
<li class="chapter" data-level="6.161" data-path="Ch06.html"><a href="Ch06.html#ch06.161"><i class="fa fa-check"></i><b>6.161</b> Edges_Water_r500</a></li>
<li class="chapter" data-level="6.162" data-path="Ch06.html"><a href="Ch06.html#ch06.162"><i class="fa fa-check"></i><b>6.162</b> Edges_Water_r1250</a></li>
<li class="chapter" data-level="6.163" data-path="Ch06.html"><a href="Ch06.html#ch06.163"><i class="fa fa-check"></i><b>6.163</b> Edges_Water_r3000</a></li>
<li class="chapter" data-level="6.164" data-path="Ch06.html"><a href="Ch06.html#ch06.164"><i class="fa fa-check"></i><b>6.164</b> Edges_Water_r10000</a></li>
<li class="chapter" data-level="6.165" data-path="Ch06.html"><a href="Ch06.html#ch06.165"><i class="fa fa-check"></i><b>6.165</b> Edges_Water-Farmland_cell</a></li>
<li class="chapter" data-level="6.166" data-path="Ch06.html"><a href="Ch06.html#ch06.166"><i class="fa fa-check"></i><b>6.166</b> Edges_Water-Farmland_r500</a></li>
<li class="chapter" data-level="6.167" data-path="Ch06.html"><a href="Ch06.html#ch06.167"><i class="fa fa-check"></i><b>6.167</b> Edges_Water-Farmland_r1250</a></li>
<li class="chapter" data-level="6.168" data-path="Ch06.html"><a href="Ch06.html#ch06.168"><i class="fa fa-check"></i><b>6.168</b> Edges_Water-Farmland_r3000</a></li>
<li class="chapter" data-level="6.169" data-path="Ch06.html"><a href="Ch06.html#ch06.169"><i class="fa fa-check"></i><b>6.169</b> Edges_Water-Farmland_r10000</a></li>
<li class="chapter" data-level="6.170" data-path="Ch06.html"><a href="Ch06.html#ch06.170"><i class="fa fa-check"></i><b>6.170</b> Edges_Water-Grassland_cell</a></li>
<li class="chapter" data-level="6.171" data-path="Ch06.html"><a href="Ch06.html#ch06.171"><i class="fa fa-check"></i><b>6.171</b> Edges_Water-Grassland_r500</a></li>
<li class="chapter" data-level="6.172" data-path="Ch06.html"><a href="Ch06.html#ch06.172"><i class="fa fa-check"></i><b>6.172</b> Edges_Water-Grassland_r1250</a></li>
<li class="chapter" data-level="6.173" data-path="Ch06.html"><a href="Ch06.html#ch06.173"><i class="fa fa-check"></i><b>6.173</b> Edges_Water-Grassland_r3000</a></li>
<li class="chapter" data-level="6.174" data-path="Ch06.html"><a href="Ch06.html#ch06.174"><i class="fa fa-check"></i><b>6.174</b> Edges_Water-Grassland_r10000</a></li>
<li class="chapter" data-level="6.175" data-path="Ch06.html"><a href="Ch06.html#ch06.175"><i class="fa fa-check"></i><b>6.175</b> Edges_ReedSedgeRushBeds-Water_cell</a></li>
<li class="chapter" data-level="6.176" data-path="Ch06.html"><a href="Ch06.html#ch06.176"><i class="fa fa-check"></i><b>6.176</b> Edges_ReedSedgeRushBeds-Water_r500</a></li>
<li class="chapter" data-level="6.177" data-path="Ch06.html"><a href="Ch06.html#ch06.177"><i class="fa fa-check"></i><b>6.177</b> Edges_ReedSedgeRushBeds-Water_r1250</a></li>
<li class="chapter" data-level="6.178" data-path="Ch06.html"><a href="Ch06.html#ch06.178"><i class="fa fa-check"></i><b>6.178</b> Edges_ReedSedgeRushBeds-Water_r3000</a></li>
<li class="chapter" data-level="6.179" data-path="Ch06.html"><a href="Ch06.html#ch06.179"><i class="fa fa-check"></i><b>6.179</b> Edges_ReedSedgeRushBeds-Water_r10000</a></li>
<li class="chapter" data-level="6.180" data-path="Ch06.html"><a href="Ch06.html#ch06.180"><i class="fa fa-check"></i><b>6.180</b> FarmlandCrops_CropsAll_cell</a></li>
<li class="chapter" data-level="6.181" data-path="Ch06.html"><a href="Ch06.html#ch06.181"><i class="fa fa-check"></i><b>6.181</b> FarmlandCrops_CropsAll_r500</a></li>
<li class="chapter" data-level="6.182" data-path="Ch06.html"><a href="Ch06.html#ch06.182"><i class="fa fa-check"></i><b>6.182</b> FarmlandCrops_CropsAll_r1250</a></li>
<li class="chapter" data-level="6.183" data-path="Ch06.html"><a href="Ch06.html#ch06.183"><i class="fa fa-check"></i><b>6.183</b> FarmlandCrops_CropsAll_r3000</a></li>
<li class="chapter" data-level="6.184" data-path="Ch06.html"><a href="Ch06.html#ch06.184"><i class="fa fa-check"></i><b>6.184</b> FarmlandCrops_CropsAll_r10000</a></li>
<li class="chapter" data-level="6.185" data-path="Ch06.html"><a href="Ch06.html#ch06.185"><i class="fa fa-check"></i><b>6.185</b> FarmlandCrops_CropsHoed_cell</a></li>
<li class="chapter" data-level="6.186" data-path="Ch06.html"><a href="Ch06.html#ch06.186"><i class="fa fa-check"></i><b>6.186</b> FarmlandCrops_CropsHoed_r500</a></li>
<li class="chapter" data-level="6.187" data-path="Ch06.html"><a href="Ch06.html#ch06.187"><i class="fa fa-check"></i><b>6.187</b> FarmlandCrops_CropsHoed_r1250</a></li>
<li class="chapter" data-level="6.188" data-path="Ch06.html"><a href="Ch06.html#ch06.188"><i class="fa fa-check"></i><b>6.188</b> FarmlandCrops_CropsHoed_r3000</a></li>
<li class="chapter" data-level="6.189" data-path="Ch06.html"><a href="Ch06.html#ch06.189"><i class="fa fa-check"></i><b>6.189</b> FarmlandCrops_CropsHoed_r10000</a></li>
<li class="chapter" data-level="6.190" data-path="Ch06.html"><a href="Ch06.html#ch06.190"><i class="fa fa-check"></i><b>6.190</b> FarmlandCrops_CropsOther_cell</a></li>
<li class="chapter" data-level="6.191" data-path="Ch06.html"><a href="Ch06.html#ch06.191"><i class="fa fa-check"></i><b>6.191</b> FarmlandCrops_CropsOther_r500</a></li>
<li class="chapter" data-level="6.192" data-path="Ch06.html"><a href="Ch06.html#ch06.192"><i class="fa fa-check"></i><b>6.192</b> FarmlandCrops_CropsOther_r1250</a></li>
<li class="chapter" data-level="6.193" data-path="Ch06.html"><a href="Ch06.html#ch06.193"><i class="fa fa-check"></i><b>6.193</b> FarmlandCrops_CropsOther_r3000</a></li>
<li class="chapter" data-level="6.194" data-path="Ch06.html"><a href="Ch06.html#ch06.194"><i class="fa fa-check"></i><b>6.194</b> FarmlandCrops_CropsOther_r10000</a></li>
<li class="chapter" data-level="6.195" data-path="Ch06.html"><a href="Ch06.html#ch06.195"><i class="fa fa-check"></i><b>6.195</b> FarmlandCrops_CropsSpring_cell</a></li>
<li class="chapter" data-level="6.196" data-path="Ch06.html"><a href="Ch06.html#ch06.196"><i class="fa fa-check"></i><b>6.196</b> FarmlandCrops_CropsSpring_r500</a></li>
<li class="chapter" data-level="6.197" data-path="Ch06.html"><a href="Ch06.html#ch06.197"><i class="fa fa-check"></i><b>6.197</b> FarmlandCrops_CropsSpring_r1250</a></li>
<li class="chapter" data-level="6.198" data-path="Ch06.html"><a href="Ch06.html#ch06.198"><i class="fa fa-check"></i><b>6.198</b> FarmlandCrops_CropsSpring_r3000</a></li>
<li class="chapter" data-level="6.199" data-path="Ch06.html"><a href="Ch06.html#ch06.199"><i class="fa fa-check"></i><b>6.199</b> FarmlandCrops_CropsSpring_r10000</a></li>
<li class="chapter" data-level="6.200" data-path="Ch06.html"><a href="Ch06.html#ch06.200"><i class="fa fa-check"></i><b>6.200</b> FarmlandCrops_CropsWinter_cell</a></li>
<li class="chapter" data-level="6.201" data-path="Ch06.html"><a href="Ch06.html#ch06.201"><i class="fa fa-check"></i><b>6.201</b> FarmlandCrops_CropsWinter_r500</a></li>
<li class="chapter" data-level="6.202" data-path="Ch06.html"><a href="Ch06.html#ch06.202"><i class="fa fa-check"></i><b>6.202</b> FarmlandCrops_CropsWinter_r1250</a></li>
<li class="chapter" data-level="6.203" data-path="Ch06.html"><a href="Ch06.html#ch06.203"><i class="fa fa-check"></i><b>6.203</b> FarmlandCrops_CropsWinter_r3000</a></li>
<li class="chapter" data-level="6.204" data-path="Ch06.html"><a href="Ch06.html#ch06.204"><i class="fa fa-check"></i><b>6.204</b> FarmlandCrops_CropsWinter_r10000</a></li>
<li class="chapter" data-level="6.205" data-path="Ch06.html"><a href="Ch06.html#ch06.205"><i class="fa fa-check"></i><b>6.205</b> FarmlandCrops_RapeseedsSpring_cell</a></li>
<li class="chapter" data-level="6.206" data-path="Ch06.html"><a href="Ch06.html#ch06.206"><i class="fa fa-check"></i><b>6.206</b> FarmlandCrops_RapeseedsSpring_r500</a></li>
<li class="chapter" data-level="6.207" data-path="Ch06.html"><a href="Ch06.html#ch06.207"><i class="fa fa-check"></i><b>6.207</b> FarmlandCrops_RapeseedsSpring_r1250</a></li>
<li class="chapter" data-level="6.208" data-path="Ch06.html"><a href="Ch06.html#ch06.208"><i class="fa fa-check"></i><b>6.208</b> FarmlandCrops_RapeseedsSpring_r3000</a></li>
<li class="chapter" data-level="6.209" data-path="Ch06.html"><a href="Ch06.html#ch06.209"><i class="fa fa-check"></i><b>6.209</b> FarmlandCrops_RapeseedsSpring_r10000</a></li>
<li class="chapter" data-level="6.210" data-path="Ch06.html"><a href="Ch06.html#ch06.210"><i class="fa fa-check"></i><b>6.210</b> FarmlandCrops_RapeseedsWinter_cell</a></li>
<li class="chapter" data-level="6.211" data-path="Ch06.html"><a href="Ch06.html#ch06.211"><i class="fa fa-check"></i><b>6.211</b> FarmlandCrops_RapeseedsWinter_r500</a></li>
<li class="chapter" data-level="6.212" data-path="Ch06.html"><a href="Ch06.html#ch06.212"><i class="fa fa-check"></i><b>6.212</b> FarmlandCrops_RapeseedsWinter_r1250</a></li>
<li class="chapter" data-level="6.213" data-path="Ch06.html"><a href="Ch06.html#ch06.213"><i class="fa fa-check"></i><b>6.213</b> FarmlandCrops_RapeseedsWinter_r3000</a></li>
<li class="chapter" data-level="6.214" data-path="Ch06.html"><a href="Ch06.html#ch06.214"><i class="fa fa-check"></i><b>6.214</b> FarmlandCrops_RapeseedsWinter_r10000</a></li>
<li class="chapter" data-level="6.215" data-path="Ch06.html"><a href="Ch06.html#ch06.215"><i class="fa fa-check"></i><b>6.215</b> FarmlandGrassland_GrasslandsAbandoned_cell</a></li>
<li class="chapter" data-level="6.216" data-path="Ch06.html"><a href="Ch06.html#ch06.216"><i class="fa fa-check"></i><b>6.216</b> FarmlandGrassland_GrasslandsAbandoned_r500</a></li>
<li class="chapter" data-level="6.217" data-path="Ch06.html"><a href="Ch06.html#ch06.217"><i class="fa fa-check"></i><b>6.217</b> FarmlandGrassland_GrasslandsAbandoned_r1250</a></li>
<li class="chapter" data-level="6.218" data-path="Ch06.html"><a href="Ch06.html#ch06.218"><i class="fa fa-check"></i><b>6.218</b> FarmlandGrassland_GrasslandsAbandoned_r3000</a></li>
<li class="chapter" data-level="6.219" data-path="Ch06.html"><a href="Ch06.html#ch06.219"><i class="fa fa-check"></i><b>6.219</b> FarmlandGrassland_GrasslandsAbandoned_r10000</a></li>
<li class="chapter" data-level="6.220" data-path="Ch06.html"><a href="Ch06.html#ch06.220"><i class="fa fa-check"></i><b>6.220</b> FarmlandGrassland_GrasslandsAll_cell</a></li>
<li class="chapter" data-level="6.221" data-path="Ch06.html"><a href="Ch06.html#ch06.221"><i class="fa fa-check"></i><b>6.221</b> FarmlandGrassland_GrasslandsAll_r500</a></li>
<li class="chapter" data-level="6.222" data-path="Ch06.html"><a href="Ch06.html#ch06.222"><i class="fa fa-check"></i><b>6.222</b> FarmlandGrassland_GrasslandsAll_r1250</a></li>
<li class="chapter" data-level="6.223" data-path="Ch06.html"><a href="Ch06.html#ch06.223"><i class="fa fa-check"></i><b>6.223</b> FarmlandGrassland_GrasslandsAll_r3000</a></li>
<li class="chapter" data-level="6.224" data-path="Ch06.html"><a href="Ch06.html#ch06.224"><i class="fa fa-check"></i><b>6.224</b> FarmlandGrassland_GrasslandsAll_r10000</a></li>
<li class="chapter" data-level="6.225" data-path="Ch06.html"><a href="Ch06.html#ch06.225"><i class="fa fa-check"></i><b>6.225</b> FarmlandGrassland_GrasslandsPermanent_cell</a></li>
<li class="chapter" data-level="6.226" data-path="Ch06.html"><a href="Ch06.html#ch06.226"><i class="fa fa-check"></i><b>6.226</b> FarmlandGrassland_GrasslandsPermanent_r500</a></li>
<li class="chapter" data-level="6.227" data-path="Ch06.html"><a href="Ch06.html#ch06.227"><i class="fa fa-check"></i><b>6.227</b> FarmlandGrassland_GrasslandsPermanent_r1250</a></li>
<li class="chapter" data-level="6.228" data-path="Ch06.html"><a href="Ch06.html#ch06.228"><i class="fa fa-check"></i><b>6.228</b> FarmlandGrassland_GrasslandsPermanent_r3000</a></li>
<li class="chapter" data-level="6.229" data-path="Ch06.html"><a href="Ch06.html#ch06.229"><i class="fa fa-check"></i><b>6.229</b> FarmlandGrassland_GrasslandsPermanent_r10000</a></li>
<li class="chapter" data-level="6.230" data-path="Ch06.html"><a href="Ch06.html#ch06.230"><i class="fa fa-check"></i><b>6.230</b> FarmlandGrassland_GrasslandsTemporary_cell</a></li>
<li class="chapter" data-level="6.231" data-path="Ch06.html"><a href="Ch06.html#ch06.231"><i class="fa fa-check"></i><b>6.231</b> FarmlandGrassland_GrasslandsTemporary_r500</a></li>
<li class="chapter" data-level="6.232" data-path="Ch06.html"><a href="Ch06.html#ch06.232"><i class="fa fa-check"></i><b>6.232</b> FarmlandGrassland_GrasslandsTemporary_r1250</a></li>
<li class="chapter" data-level="6.233" data-path="Ch06.html"><a href="Ch06.html#ch06.233"><i class="fa fa-check"></i><b>6.233</b> FarmlandGrassland_GrasslandsTemporary_r3000</a></li>
<li class="chapter" data-level="6.234" data-path="Ch06.html"><a href="Ch06.html#ch06.234"><i class="fa fa-check"></i><b>6.234</b> FarmlandGrassland_GrasslandsTemporary_r10000</a></li>
<li class="chapter" data-level="6.235" data-path="Ch06.html"><a href="Ch06.html#ch06.235"><i class="fa fa-check"></i><b>6.235</b> FarmlandParcels_FieldsActive_cell</a></li>
<li class="chapter" data-level="6.236" data-path="Ch06.html"><a href="Ch06.html#ch06.236"><i class="fa fa-check"></i><b>6.236</b> FarmlandParcels_FieldsActive_r500</a></li>
<li class="chapter" data-level="6.237" data-path="Ch06.html"><a href="Ch06.html#ch06.237"><i class="fa fa-check"></i><b>6.237</b> FarmlandParcels_FieldsActive_r1250</a></li>
<li class="chapter" data-level="6.238" data-path="Ch06.html"><a href="Ch06.html#ch06.238"><i class="fa fa-check"></i><b>6.238</b> FarmlandParcels_FieldsActive_r3000</a></li>
<li class="chapter" data-level="6.239" data-path="Ch06.html"><a href="Ch06.html#ch06.239"><i class="fa fa-check"></i><b>6.239</b> FarmlandParcels_FieldsActive_r10000</a></li>
<li class="chapter" data-level="6.240" data-path="Ch06.html"><a href="Ch06.html#ch06.240"><i class="fa fa-check"></i><b>6.240</b> FarmlandPloughed_CropsFallow_cell</a></li>
<li class="chapter" data-level="6.241" data-path="Ch06.html"><a href="Ch06.html#ch06.241"><i class="fa fa-check"></i><b>6.241</b> FarmlandPloughed_CropsFallow_r500</a></li>
<li class="chapter" data-level="6.242" data-path="Ch06.html"><a href="Ch06.html#ch06.242"><i class="fa fa-check"></i><b>6.242</b> FarmlandPloughed_CropsFallow_r1250</a></li>
<li class="chapter" data-level="6.243" data-path="Ch06.html"><a href="Ch06.html#ch06.243"><i class="fa fa-check"></i><b>6.243</b> FarmlandPloughed_CropsFallow_r3000</a></li>
<li class="chapter" data-level="6.244" data-path="Ch06.html"><a href="Ch06.html#ch06.244"><i class="fa fa-check"></i><b>6.244</b> FarmlandPloughed_CropsFallow_r10000</a></li>
<li class="chapter" data-level="6.245" data-path="Ch06.html"><a href="Ch06.html#ch06.245"><i class="fa fa-check"></i><b>6.245</b> FarmlandPloughed_CropsFallowTempGrass_cell</a></li>
<li class="chapter" data-level="6.246" data-path="Ch06.html"><a href="Ch06.html#ch06.246"><i class="fa fa-check"></i><b>6.246</b> FarmlandPloughed_CropsFallowTempGrass_r500</a></li>
<li class="chapter" data-level="6.247" data-path="Ch06.html"><a href="Ch06.html#ch06.247"><i class="fa fa-check"></i><b>6.247</b> FarmlandPloughed_CropsFallowTempGrass_r1250</a></li>
<li class="chapter" data-level="6.248" data-path="Ch06.html"><a href="Ch06.html#ch06.248"><i class="fa fa-check"></i><b>6.248</b> FarmlandPloughed_CropsFallowTempGrass_r3000</a></li>
<li class="chapter" data-level="6.249" data-path="Ch06.html"><a href="Ch06.html#ch06.249"><i class="fa fa-check"></i><b>6.249</b> FarmlandPloughed_CropsFallowTempGrass_r10000</a></li>
<li class="chapter" data-level="6.250" data-path="Ch06.html"><a href="Ch06.html#ch06.250"><i class="fa fa-check"></i><b>6.250</b> FarmlandPloughed_Fallow_cell</a></li>
<li class="chapter" data-level="6.251" data-path="Ch06.html"><a href="Ch06.html#ch06.251"><i class="fa fa-check"></i><b>6.251</b> FarmlandPloughed_Fallow_r500</a></li>
<li class="chapter" data-level="6.252" data-path="Ch06.html"><a href="Ch06.html#ch06.252"><i class="fa fa-check"></i><b>6.252</b> FarmlandPloughed_Fallow_r1250</a></li>
<li class="chapter" data-level="6.253" data-path="Ch06.html"><a href="Ch06.html#ch06.253"><i class="fa fa-check"></i><b>6.253</b> FarmlandPloughed_Fallow_r3000</a></li>
<li class="chapter" data-level="6.254" data-path="Ch06.html"><a href="Ch06.html#ch06.254"><i class="fa fa-check"></i><b>6.254</b> FarmlandPloughed_Fallow_r10000</a></li>
<li class="chapter" data-level="6.255" data-path="Ch06.html"><a href="Ch06.html#ch06.255"><i class="fa fa-check"></i><b>6.255</b> FarmlandSubsidies_BiologicalSubsidies_cell</a></li>
<li class="chapter" data-level="6.256" data-path="Ch06.html"><a href="Ch06.html#ch06.256"><i class="fa fa-check"></i><b>6.256</b> FarmlandSubsidies_BiologicalSubsidies_r500</a></li>
<li class="chapter" data-level="6.257" data-path="Ch06.html"><a href="Ch06.html#ch06.257"><i class="fa fa-check"></i><b>6.257</b> FarmlandSubsidies_BiologicalSubsidies_r1250</a></li>
<li class="chapter" data-level="6.258" data-path="Ch06.html"><a href="Ch06.html#ch06.258"><i class="fa fa-check"></i><b>6.258</b> FarmlandSubsidies_BiologicalSubsidies_r3000</a></li>
<li class="chapter" data-level="6.259" data-path="Ch06.html"><a href="Ch06.html#ch06.259"><i class="fa fa-check"></i><b>6.259</b> FarmlandSubsidies_BiologicalSubsidies_r10000</a></li>
<li class="chapter" data-level="6.260" data-path="Ch06.html"><a href="Ch06.html#ch06.260"><i class="fa fa-check"></i><b>6.260</b> FarmlandTrees_PermanentCrops_cell</a></li>
<li class="chapter" data-level="6.261" data-path="Ch06.html"><a href="Ch06.html#ch06.261"><i class="fa fa-check"></i><b>6.261</b> FarmlandTrees_PermanentCrops_r500</a></li>
<li class="chapter" data-level="6.262" data-path="Ch06.html"><a href="Ch06.html#ch06.262"><i class="fa fa-check"></i><b>6.262</b> FarmlandTrees_PermanentCrops_r1250</a></li>
<li class="chapter" data-level="6.263" data-path="Ch06.html"><a href="Ch06.html#ch06.263"><i class="fa fa-check"></i><b>6.263</b> FarmlandTrees_PermanentCrops_r3000</a></li>
<li class="chapter" data-level="6.264" data-path="Ch06.html"><a href="Ch06.html#ch06.264"><i class="fa fa-check"></i><b>6.264</b> FarmlandTrees_PermanentCrops_r10000</a></li>
<li class="chapter" data-level="6.265" data-path="Ch06.html"><a href="Ch06.html#ch06.265"><i class="fa fa-check"></i><b>6.265</b> FarmlandTrees_ShortRotationCoppice_cell</a></li>
<li class="chapter" data-level="6.266" data-path="Ch06.html"><a href="Ch06.html#ch06.266"><i class="fa fa-check"></i><b>6.266</b> FarmlandTrees_ShortRotationCoppice_r500</a></li>
<li class="chapter" data-level="6.267" data-path="Ch06.html"><a href="Ch06.html#ch06.267"><i class="fa fa-check"></i><b>6.267</b> FarmlandTrees_ShortRotationCoppice_r1250</a></li>
<li class="chapter" data-level="6.268" data-path="Ch06.html"><a href="Ch06.html#ch06.268"><i class="fa fa-check"></i><b>6.268</b> FarmlandTrees_ShortRotationCoppice_r3000</a></li>
<li class="chapter" data-level="6.269" data-path="Ch06.html"><a href="Ch06.html#ch06.269"><i class="fa fa-check"></i><b>6.269</b> FarmlandTrees_ShortRotationCoppice_r10000</a></li>
<li class="chapter" data-level="6.270" data-path="Ch06.html"><a href="Ch06.html#ch06.270"><i class="fa fa-check"></i><b>6.270</b> ForestsAge_ClearcutsLowStands_cell</a></li>
<li class="chapter" data-level="6.271" data-path="Ch06.html"><a href="Ch06.html#ch06.271"><i class="fa fa-check"></i><b>6.271</b> ForestsAge_ClearcutsLowStands_r500</a></li>
<li class="chapter" data-level="6.272" data-path="Ch06.html"><a href="Ch06.html#ch06.272"><i class="fa fa-check"></i><b>6.272</b> ForestsAge_ClearcutsLowStands_r1250</a></li>
<li class="chapter" data-level="6.273" data-path="Ch06.html"><a href="Ch06.html#ch06.273"><i class="fa fa-check"></i><b>6.273</b> ForestsAge_ClearcutsLowStands_r3000</a></li>
<li class="chapter" data-level="6.274" data-path="Ch06.html"><a href="Ch06.html#ch06.274"><i class="fa fa-check"></i><b>6.274</b> ForestsAge_ClearcutsLowStands_r10000</a></li>
<li class="chapter" data-level="6.275" data-path="Ch06.html"><a href="Ch06.html#ch06.275"><i class="fa fa-check"></i><b>6.275</b> ForestsAge_Middle_cell</a></li>
<li class="chapter" data-level="6.276" data-path="Ch06.html"><a href="Ch06.html#ch06.276"><i class="fa fa-check"></i><b>6.276</b> ForestsAge_Middle_r500</a></li>
<li class="chapter" data-level="6.277" data-path="Ch06.html"><a href="Ch06.html#ch06.277"><i class="fa fa-check"></i><b>6.277</b> ForestsAge_Middle_r1250</a></li>
<li class="chapter" data-level="6.278" data-path="Ch06.html"><a href="Ch06.html#ch06.278"><i class="fa fa-check"></i><b>6.278</b> ForestsAge_Middle_r3000</a></li>
<li class="chapter" data-level="6.279" data-path="Ch06.html"><a href="Ch06.html#ch06.279"><i class="fa fa-check"></i><b>6.279</b> ForestsAge_Middle_r10000</a></li>
<li class="chapter" data-level="6.280" data-path="Ch06.html"><a href="Ch06.html#ch06.280"><i class="fa fa-check"></i><b>6.280</b> ForestsAge_Old_cell</a></li>
<li class="chapter" data-level="6.281" data-path="Ch06.html"><a href="Ch06.html#ch06.281"><i class="fa fa-check"></i><b>6.281</b> ForestsAge_Old_r500</a></li>
<li class="chapter" data-level="6.282" data-path="Ch06.html"><a href="Ch06.html#ch06.282"><i class="fa fa-check"></i><b>6.282</b> ForestsAge_Old_r1250</a></li>
<li class="chapter" data-level="6.283" data-path="Ch06.html"><a href="Ch06.html#ch06.283"><i class="fa fa-check"></i><b>6.283</b> ForestsAge_Old_r3000</a></li>
<li class="chapter" data-level="6.284" data-path="Ch06.html"><a href="Ch06.html#ch06.284"><i class="fa fa-check"></i><b>6.284</b> ForestsAge_Old_r10000</a></li>
<li class="chapter" data-level="6.285" data-path="Ch06.html"><a href="Ch06.html#ch06.285"><i class="fa fa-check"></i><b>6.285</b> ForestsAge_YoungTallStandsShrubs_cell</a></li>
<li class="chapter" data-level="6.286" data-path="Ch06.html"><a href="Ch06.html#ch06.286"><i class="fa fa-check"></i><b>6.286</b> ForestsAge_YoungTallStandsShrubs_r500</a></li>
<li class="chapter" data-level="6.287" data-path="Ch06.html"><a href="Ch06.html#ch06.287"><i class="fa fa-check"></i><b>6.287</b> ForestsAge_YoungTallStandsShrubs_r1250</a></li>
<li class="chapter" data-level="6.288" data-path="Ch06.html"><a href="Ch06.html#ch06.288"><i class="fa fa-check"></i><b>6.288</b> ForestsAge_YoungTallStandsShrubs_r3000</a></li>
<li class="chapter" data-level="6.289" data-path="Ch06.html"><a href="Ch06.html#ch06.289"><i class="fa fa-check"></i><b>6.289</b> ForestsAge_YoungTallStandsShrubs_r10000</a></li>
<li class="chapter" data-level="6.290" data-path="Ch06.html"><a href="Ch06.html#ch06.290"><i class="fa fa-check"></i><b>6.290</b> ForestsQuant_AgeProp-average_cell</a></li>
<li class="chapter" data-level="6.291" data-path="Ch06.html"><a href="Ch06.html#ch06.291"><i class="fa fa-check"></i><b>6.291</b> ForestsQuant_DominantDiameter-max_cell</a></li>
<li class="chapter" data-level="6.292" data-path="Ch06.html"><a href="Ch06.html#ch06.292"><i class="fa fa-check"></i><b>6.292</b> ForestsQuant_LargestDiameter-max_cell</a></li>
<li class="chapter" data-level="6.293" data-path="Ch06.html"><a href="Ch06.html#ch06.293"><i class="fa fa-check"></i><b>6.293</b> ForestsQuant_TimeSinceDisturbance-average_cell</a></li>
<li class="chapter" data-level="6.294" data-path="Ch06.html"><a href="Ch06.html#ch06.294"><i class="fa fa-check"></i><b>6.294</b> ForestsQuant_VolumeAspen-sum_cell</a></li>
<li class="chapter" data-level="6.295" data-path="Ch06.html"><a href="Ch06.html#ch06.295"><i class="fa fa-check"></i><b>6.295</b> ForestsQuant_VolumeBirch-sum_cell</a></li>
<li class="chapter" data-level="6.296" data-path="Ch06.html"><a href="Ch06.html#ch06.296"><i class="fa fa-check"></i><b>6.296</b> ForestsQuant_VolumeBlackAlder-sum_cell</a></li>
<li class="chapter" data-level="6.297" data-path="Ch06.html"><a href="Ch06.html#ch06.297"><i class="fa fa-check"></i><b>6.297</b> ForestsQuant_VolumeBorealDeciduousOther-sum_cell</a></li>
<li class="chapter" data-level="6.298" data-path="Ch06.html"><a href="Ch06.html#ch06.298"><i class="fa fa-check"></i><b>6.298</b> ForestsQuant_VolumeBorealDeciduousTotal-sum_cell</a></li>
<li class="chapter" data-level="6.299" data-path="Ch06.html"><a href="Ch06.html#ch06.299"><i class="fa fa-check"></i><b>6.299</b> ForestsQuant_VolumeConiferous-sum_cell</a></li>
<li class="chapter" data-level="6.300" data-path="Ch06.html"><a href="Ch06.html#ch06.300"><i class="fa fa-check"></i><b>6.300</b> ForestsQuant_VolumeOak-sum_cell</a></li>
<li class="chapter" data-level="6.301" data-path="Ch06.html"><a href="Ch06.html#ch06.301"><i class="fa fa-check"></i><b>6.301</b> ForestsQuant_VolumeOakMaple-sum_cell</a></li>
<li class="chapter" data-level="6.302" data-path="Ch06.html"><a href="Ch06.html#ch06.302"><i class="fa fa-check"></i><b>6.302</b> ForestsQuant_VolumePine-sum_cell</a></li>
<li class="chapter" data-level="6.303" data-path="Ch06.html"><a href="Ch06.html#ch06.303"><i class="fa fa-check"></i><b>6.303</b> ForestsQuant_VolumeSpruce-sum_cell</a></li>
<li class="chapter" data-level="6.304" data-path="Ch06.html"><a href="Ch06.html#ch06.304"><i class="fa fa-check"></i><b>6.304</b> ForestsQuant_VolumeTemperateDeciduousTotal-sum_cell</a></li>
<li class="chapter" data-level="6.305" data-path="Ch06.html"><a href="Ch06.html#ch06.305"><i class="fa fa-check"></i><b>6.305</b> ForestsQuant_VolumeTemperateWithoutOak-sum_cell</a></li>
<li class="chapter" data-level="6.306" data-path="Ch06.html"><a href="Ch06.html#ch06.306"><i class="fa fa-check"></i><b>6.306</b> ForestsQuant_VolumeTemperateWithoutOakMaple-sum_cell</a></li>
<li class="chapter" data-level="6.307" data-path="Ch06.html"><a href="Ch06.html#ch06.307"><i class="fa fa-check"></i><b>6.307</b> ForestsQuant_VolumeTotal-sum_cell</a></li>
<li class="chapter" data-level="6.308" data-path="Ch06.html"><a href="Ch06.html#ch06.308"><i class="fa fa-check"></i><b>6.308</b> ForestsSoil_EutrophicDrained_cell</a></li>
<li class="chapter" data-level="6.309" data-path="Ch06.html"><a href="Ch06.html#ch06.309"><i class="fa fa-check"></i><b>6.309</b> ForestsSoil_EutrophicDrained_r500</a></li>
<li class="chapter" data-level="6.310" data-path="Ch06.html"><a href="Ch06.html#ch06.310"><i class="fa fa-check"></i><b>6.310</b> ForestsSoil_EutrophicDrained_r1250</a></li>
<li class="chapter" data-level="6.311" data-path="Ch06.html"><a href="Ch06.html#ch06.311"><i class="fa fa-check"></i><b>6.311</b> ForestsSoil_EutrophicDrained_r3000</a></li>
<li class="chapter" data-level="6.312" data-path="Ch06.html"><a href="Ch06.html#ch06.312"><i class="fa fa-check"></i><b>6.312</b> ForestsSoil_EutrophicDrained_r10000</a></li>
<li class="chapter" data-level="6.313" data-path="Ch06.html"><a href="Ch06.html#ch06.313"><i class="fa fa-check"></i><b>6.313</b> ForestsSoil_EutrophicMineral_cell</a></li>
<li class="chapter" data-level="6.314" data-path="Ch06.html"><a href="Ch06.html#ch06.314"><i class="fa fa-check"></i><b>6.314</b> ForestsSoil_EutrophicMineral_r500</a></li>
<li class="chapter" data-level="6.315" data-path="Ch06.html"><a href="Ch06.html#ch06.315"><i class="fa fa-check"></i><b>6.315</b> ForestsSoil_EutrophicMineral_r1250</a></li>
<li class="chapter" data-level="6.316" data-path="Ch06.html"><a href="Ch06.html#ch06.316"><i class="fa fa-check"></i><b>6.316</b> ForestsSoil_EutrophicMineral_r3000</a></li>
<li class="chapter" data-level="6.317" data-path="Ch06.html"><a href="Ch06.html#ch06.317"><i class="fa fa-check"></i><b>6.317</b> ForestsSoil_EutrophicMineral_r10000</a></li>
<li class="chapter" data-level="6.318" data-path="Ch06.html"><a href="Ch06.html#ch06.318"><i class="fa fa-check"></i><b>6.318</b> ForestsSoil_EutrophicOrganic_cell</a></li>
<li class="chapter" data-level="6.319" data-path="Ch06.html"><a href="Ch06.html#ch06.319"><i class="fa fa-check"></i><b>6.319</b> ForestsSoil_EutrophicOrganic_r500</a></li>
<li class="chapter" data-level="6.320" data-path="Ch06.html"><a href="Ch06.html#ch06.320"><i class="fa fa-check"></i><b>6.320</b> ForestsSoil_EutrophicOrganic_r1250</a></li>
<li class="chapter" data-level="6.321" data-path="Ch06.html"><a href="Ch06.html#ch06.321"><i class="fa fa-check"></i><b>6.321</b> ForestsSoil_EutrophicOrganic_r3000</a></li>
<li class="chapter" data-level="6.322" data-path="Ch06.html"><a href="Ch06.html#ch06.322"><i class="fa fa-check"></i><b>6.322</b> ForestsSoil_EutrophicOrganic_r10000</a></li>
<li class="chapter" data-level="6.323" data-path="Ch06.html"><a href="Ch06.html#ch06.323"><i class="fa fa-check"></i><b>6.323</b> ForestsSoil_MesotrophicMineral_cell</a></li>
<li class="chapter" data-level="6.324" data-path="Ch06.html"><a href="Ch06.html#ch06.324"><i class="fa fa-check"></i><b>6.324</b> ForestsSoil_MesotrophicMineral_r500</a></li>
<li class="chapter" data-level="6.325" data-path="Ch06.html"><a href="Ch06.html#ch06.325"><i class="fa fa-check"></i><b>6.325</b> ForestsSoil_MesotrophicMineral_r1250</a></li>
<li class="chapter" data-level="6.326" data-path="Ch06.html"><a href="Ch06.html#ch06.326"><i class="fa fa-check"></i><b>6.326</b> ForestsSoil_MesotrophicMineral_r3000</a></li>
<li class="chapter" data-level="6.327" data-path="Ch06.html"><a href="Ch06.html#ch06.327"><i class="fa fa-check"></i><b>6.327</b> ForestsSoil_MesotrophicMineral_r10000</a></li>
<li class="chapter" data-level="6.328" data-path="Ch06.html"><a href="Ch06.html#ch06.328"><i class="fa fa-check"></i><b>6.328</b> ForestsSoil_OligotrophicDrained_cell</a></li>
<li class="chapter" data-level="6.329" data-path="Ch06.html"><a href="Ch06.html#ch06.329"><i class="fa fa-check"></i><b>6.329</b> ForestsSoil_OligotrophicDrained_r500</a></li>
<li class="chapter" data-level="6.330" data-path="Ch06.html"><a href="Ch06.html#ch06.330"><i class="fa fa-check"></i><b>6.330</b> ForestsSoil_OligotrophicDrained_r1250</a></li>
<li class="chapter" data-level="6.331" data-path="Ch06.html"><a href="Ch06.html#ch06.331"><i class="fa fa-check"></i><b>6.331</b> ForestsSoil_OligotrophicDrained_r3000</a></li>
<li class="chapter" data-level="6.332" data-path="Ch06.html"><a href="Ch06.html#ch06.332"><i class="fa fa-check"></i><b>6.332</b> ForestsSoil_OligotrophicDrained_r10000</a></li>
<li class="chapter" data-level="6.333" data-path="Ch06.html"><a href="Ch06.html#ch06.333"><i class="fa fa-check"></i><b>6.333</b> ForestsSoil_OligotrophicMineral_cell</a></li>
<li class="chapter" data-level="6.334" data-path="Ch06.html"><a href="Ch06.html#ch06.334"><i class="fa fa-check"></i><b>6.334</b> ForestsSoil_OligotrophicMineral_r500</a></li>
<li class="chapter" data-level="6.335" data-path="Ch06.html"><a href="Ch06.html#ch06.335"><i class="fa fa-check"></i><b>6.335</b> ForestsSoil_OligotrophicMineral_r1250</a></li>
<li class="chapter" data-level="6.336" data-path="Ch06.html"><a href="Ch06.html#ch06.336"><i class="fa fa-check"></i><b>6.336</b> ForestsSoil_OligotrophicMineral_r3000</a></li>
<li class="chapter" data-level="6.337" data-path="Ch06.html"><a href="Ch06.html#ch06.337"><i class="fa fa-check"></i><b>6.337</b> ForestsSoil_OligotrophicMineral_r10000</a></li>
<li class="chapter" data-level="6.338" data-path="Ch06.html"><a href="Ch06.html#ch06.338"><i class="fa fa-check"></i><b>6.338</b> ForestsSoil_OligotrophicOrganic_cell</a></li>
<li class="chapter" data-level="6.339" data-path="Ch06.html"><a href="Ch06.html#ch06.339"><i class="fa fa-check"></i><b>6.339</b> ForestsSoil_OligotrophicOrganic_r500</a></li>
<li class="chapter" data-level="6.340" data-path="Ch06.html"><a href="Ch06.html#ch06.340"><i class="fa fa-check"></i><b>6.340</b> ForestsSoil_OligotrophicOrganic_r1250</a></li>
<li class="chapter" data-level="6.341" data-path="Ch06.html"><a href="Ch06.html#ch06.341"><i class="fa fa-check"></i><b>6.341</b> ForestsSoil_OligotrophicOrganic_r3000</a></li>
<li class="chapter" data-level="6.342" data-path="Ch06.html"><a href="Ch06.html#ch06.342"><i class="fa fa-check"></i><b>6.342</b> ForestsSoil_OligotrophicOrganic_r10000</a></li>
<li class="chapter" data-level="6.343" data-path="Ch06.html"><a href="Ch06.html#ch06.343"><i class="fa fa-check"></i><b>6.343</b> ForestsTreesAge_BorealDeciduousOld_cell</a></li>
<li class="chapter" data-level="6.344" data-path="Ch06.html"><a href="Ch06.html#ch06.344"><i class="fa fa-check"></i><b>6.344</b> ForestsTreesAge_BorealDeciduousOld_r500</a></li>
<li class="chapter" data-level="6.345" data-path="Ch06.html"><a href="Ch06.html#ch06.345"><i class="fa fa-check"></i><b>6.345</b> ForestsTreesAge_BorealDeciduousOld_r1250</a></li>
<li class="chapter" data-level="6.346" data-path="Ch06.html"><a href="Ch06.html#ch06.346"><i class="fa fa-check"></i><b>6.346</b> ForestsTreesAge_BorealDeciduousOld_r3000</a></li>
<li class="chapter" data-level="6.347" data-path="Ch06.html"><a href="Ch06.html#ch06.347"><i class="fa fa-check"></i><b>6.347</b> ForestsTreesAge_BorealDeciduousOld_r10000</a></li>
<li class="chapter" data-level="6.348" data-path="Ch06.html"><a href="Ch06.html#ch06.348"><i class="fa fa-check"></i><b>6.348</b> ForestsTreesAge_BorealDeciduousYoung_cell</a></li>
<li class="chapter" data-level="6.349" data-path="Ch06.html"><a href="Ch06.html#ch06.349"><i class="fa fa-check"></i><b>6.349</b> ForestsTreesAge_BorealDeciduousYoung_r500</a></li>
<li class="chapter" data-level="6.350" data-path="Ch06.html"><a href="Ch06.html#ch06.350"><i class="fa fa-check"></i><b>6.350</b> ForestsTreesAge_BorealDeciduousYoung_r1250</a></li>
<li class="chapter" data-level="6.351" data-path="Ch06.html"><a href="Ch06.html#ch06.351"><i class="fa fa-check"></i><b>6.351</b> ForestsTreesAge_BorealDeciduousYoung_r3000</a></li>
<li class="chapter" data-level="6.352" data-path="Ch06.html"><a href="Ch06.html#ch06.352"><i class="fa fa-check"></i><b>6.352</b> ForestsTreesAge_BorealDeciduousYoung_r10000</a></li>
<li class="chapter" data-level="6.353" data-path="Ch06.html"><a href="Ch06.html#ch06.353"><i class="fa fa-check"></i><b>6.353</b> ForestsTreesAge_ConiferousOld_cell</a></li>
<li class="chapter" data-level="6.354" data-path="Ch06.html"><a href="Ch06.html#ch06.354"><i class="fa fa-check"></i><b>6.354</b> ForestsTreesAge_ConiferousOld_r500</a></li>
<li class="chapter" data-level="6.355" data-path="Ch06.html"><a href="Ch06.html#ch06.355"><i class="fa fa-check"></i><b>6.355</b> ForestsTreesAge_ConiferousOld_r1250</a></li>
<li class="chapter" data-level="6.356" data-path="Ch06.html"><a href="Ch06.html#ch06.356"><i class="fa fa-check"></i><b>6.356</b> ForestsTreesAge_ConiferousOld_r3000</a></li>
<li class="chapter" data-level="6.357" data-path="Ch06.html"><a href="Ch06.html#ch06.357"><i class="fa fa-check"></i><b>6.357</b> ForestsTreesAge_ConiferousOld_r10000</a></li>
<li class="chapter" data-level="6.358" data-path="Ch06.html"><a href="Ch06.html#ch06.358"><i class="fa fa-check"></i><b>6.358</b> ForestsTreesAge_ConiferousYoung_cell</a></li>
<li class="chapter" data-level="6.359" data-path="Ch06.html"><a href="Ch06.html#ch06.359"><i class="fa fa-check"></i><b>6.359</b> ForestsTreesAge_ConiferousYoung_r500</a></li>
<li class="chapter" data-level="6.360" data-path="Ch06.html"><a href="Ch06.html#ch06.360"><i class="fa fa-check"></i><b>6.360</b> ForestsTreesAge_ConiferousYoung_r1250</a></li>
<li class="chapter" data-level="6.361" data-path="Ch06.html"><a href="Ch06.html#ch06.361"><i class="fa fa-check"></i><b>6.361</b> ForestsTreesAge_ConiferousYoung_r3000</a></li>
<li class="chapter" data-level="6.362" data-path="Ch06.html"><a href="Ch06.html#ch06.362"><i class="fa fa-check"></i><b>6.362</b> ForestsTreesAge_ConiferousYoung_r10000</a></li>
<li class="chapter" data-level="6.363" data-path="Ch06.html"><a href="Ch06.html#ch06.363"><i class="fa fa-check"></i><b>6.363</b> ForestsTreesAge_MixedOld_cell</a></li>
<li class="chapter" data-level="6.364" data-path="Ch06.html"><a href="Ch06.html#ch06.364"><i class="fa fa-check"></i><b>6.364</b> ForestsTreesAge_MixedOld_r500</a></li>
<li class="chapter" data-level="6.365" data-path="Ch06.html"><a href="Ch06.html#ch06.365"><i class="fa fa-check"></i><b>6.365</b> ForestsTreesAge_MixedOld_r1250</a></li>
<li class="chapter" data-level="6.366" data-path="Ch06.html"><a href="Ch06.html#ch06.366"><i class="fa fa-check"></i><b>6.366</b> ForestsTreesAge_MixedOld_r3000</a></li>
<li class="chapter" data-level="6.367" data-path="Ch06.html"><a href="Ch06.html#ch06.367"><i class="fa fa-check"></i><b>6.367</b> ForestsTreesAge_MixedOld_r10000</a></li>
<li class="chapter" data-level="6.368" data-path="Ch06.html"><a href="Ch06.html#ch06.368"><i class="fa fa-check"></i><b>6.368</b> ForestsTreesAge_MixedYoung_cell</a></li>
<li class="chapter" data-level="6.369" data-path="Ch06.html"><a href="Ch06.html#ch06.369"><i class="fa fa-check"></i><b>6.369</b> ForestsTreesAge_MixedYoung_r500</a></li>
<li class="chapter" data-level="6.370" data-path="Ch06.html"><a href="Ch06.html#ch06.370"><i class="fa fa-check"></i><b>6.370</b> ForestsTreesAge_MixedYoung_r1250</a></li>
<li class="chapter" data-level="6.371" data-path="Ch06.html"><a href="Ch06.html#ch06.371"><i class="fa fa-check"></i><b>6.371</b> ForestsTreesAge_MixedYoung_r3000</a></li>
<li class="chapter" data-level="6.372" data-path="Ch06.html"><a href="Ch06.html#ch06.372"><i class="fa fa-check"></i><b>6.372</b> ForestsTreesAge_MixedYoung_r10000</a></li>
<li class="chapter" data-level="6.373" data-path="Ch06.html"><a href="Ch06.html#ch06.373"><i class="fa fa-check"></i><b>6.373</b> ForestsTreesAge_TemperateDeciduousOld_cell</a></li>
<li class="chapter" data-level="6.374" data-path="Ch06.html"><a href="Ch06.html#ch06.374"><i class="fa fa-check"></i><b>6.374</b> ForestsTreesAge_TemperateDeciduousOld_r500</a></li>
<li class="chapter" data-level="6.375" data-path="Ch06.html"><a href="Ch06.html#ch06.375"><i class="fa fa-check"></i><b>6.375</b> ForestsTreesAge_TemperateDeciduousOld_r1250</a></li>
<li class="chapter" data-level="6.376" data-path="Ch06.html"><a href="Ch06.html#ch06.376"><i class="fa fa-check"></i><b>6.376</b> ForestsTreesAge_TemperateDeciduousOld_r3000</a></li>
<li class="chapter" data-level="6.377" data-path="Ch06.html"><a href="Ch06.html#ch06.377"><i class="fa fa-check"></i><b>6.377</b> ForestsTreesAge_TemperateDeciduousOld_r10000</a></li>
<li class="chapter" data-level="6.378" data-path="Ch06.html"><a href="Ch06.html#ch06.378"><i class="fa fa-check"></i><b>6.378</b> ForestsTreesAge_TemperateDeciduousYoung_cell</a></li>
<li class="chapter" data-level="6.379" data-path="Ch06.html"><a href="Ch06.html#ch06.379"><i class="fa fa-check"></i><b>6.379</b> ForestsTreesAge_TemperateDeciduousYoung_r500</a></li>
<li class="chapter" data-level="6.380" data-path="Ch06.html"><a href="Ch06.html#ch06.380"><i class="fa fa-check"></i><b>6.380</b> ForestsTreesAge_TemperateDeciduousYoung_r1250</a></li>
<li class="chapter" data-level="6.381" data-path="Ch06.html"><a href="Ch06.html#ch06.381"><i class="fa fa-check"></i><b>6.381</b> ForestsTreesAge_TemperateDeciduousYoung_r3000</a></li>
<li class="chapter" data-level="6.382" data-path="Ch06.html"><a href="Ch06.html#ch06.382"><i class="fa fa-check"></i><b>6.382</b> ForestsTreesAge_TemperateDeciduousYoung_r10000</a></li>
<li class="chapter" data-level="6.383" data-path="Ch06.html"><a href="Ch06.html#ch06.383"><i class="fa fa-check"></i><b>6.383</b> ForestsTrees_BorealDeciduous_cell</a></li>
<li class="chapter" data-level="6.384" data-path="Ch06.html"><a href="Ch06.html#ch06.384"><i class="fa fa-check"></i><b>6.384</b> ForestsTrees_BorealDeciduous_r500</a></li>
<li class="chapter" data-level="6.385" data-path="Ch06.html"><a href="Ch06.html#ch06.385"><i class="fa fa-check"></i><b>6.385</b> ForestsTrees_BorealDeciduous_r1250</a></li>
<li class="chapter" data-level="6.386" data-path="Ch06.html"><a href="Ch06.html#ch06.386"><i class="fa fa-check"></i><b>6.386</b> ForestsTrees_BorealDeciduous_r3000</a></li>
<li class="chapter" data-level="6.387" data-path="Ch06.html"><a href="Ch06.html#ch06.387"><i class="fa fa-check"></i><b>6.387</b> ForestsTrees_BorealDeciduous_r10000</a></li>
<li class="chapter" data-level="6.388" data-path="Ch06.html"><a href="Ch06.html#ch06.388"><i class="fa fa-check"></i><b>6.388</b> ForestsTrees_Coniferous_cell</a></li>
<li class="chapter" data-level="6.389" data-path="Ch06.html"><a href="Ch06.html#ch06.389"><i class="fa fa-check"></i><b>6.389</b> ForestsTrees_Coniferous_r500</a></li>
<li class="chapter" data-level="6.390" data-path="Ch06.html"><a href="Ch06.html#ch06.390"><i class="fa fa-check"></i><b>6.390</b> ForestsTrees_Coniferous_r1250</a></li>
<li class="chapter" data-level="6.391" data-path="Ch06.html"><a href="Ch06.html#ch06.391"><i class="fa fa-check"></i><b>6.391</b> ForestsTrees_Coniferous_r3000</a></li>
<li class="chapter" data-level="6.392" data-path="Ch06.html"><a href="Ch06.html#ch06.392"><i class="fa fa-check"></i><b>6.392</b> ForestsTrees_Coniferous_r10000</a></li>
<li class="chapter" data-level="6.393" data-path="Ch06.html"><a href="Ch06.html#ch06.393"><i class="fa fa-check"></i><b>6.393</b> ForestsTrees_Mixed_cell</a></li>
<li class="chapter" data-level="6.394" data-path="Ch06.html"><a href="Ch06.html#ch06.394"><i class="fa fa-check"></i><b>6.394</b> ForestsTrees_Mixed_r500</a></li>
<li class="chapter" data-level="6.395" data-path="Ch06.html"><a href="Ch06.html#ch06.395"><i class="fa fa-check"></i><b>6.395</b> ForestsTrees_Mixed_r1250</a></li>
<li class="chapter" data-level="6.396" data-path="Ch06.html"><a href="Ch06.html#ch06.396"><i class="fa fa-check"></i><b>6.396</b> ForestsTrees_Mixed_r3000</a></li>
<li class="chapter" data-level="6.397" data-path="Ch06.html"><a href="Ch06.html#ch06.397"><i class="fa fa-check"></i><b>6.397</b> ForestsTrees_Mixed_r10000</a></li>
<li class="chapter" data-level="6.398" data-path="Ch06.html"><a href="Ch06.html#ch06.398"><i class="fa fa-check"></i><b>6.398</b> ForestsTrees_TemperateDeciduous_cell</a></li>
<li class="chapter" data-level="6.399" data-path="Ch06.html"><a href="Ch06.html#ch06.399"><i class="fa fa-check"></i><b>6.399</b> ForestsTrees_TemperateDeciduous_r500</a></li>
<li class="chapter" data-level="6.400" data-path="Ch06.html"><a href="Ch06.html#ch06.400"><i class="fa fa-check"></i><b>6.400</b> ForestsTrees_TemperateDeciduous_r1250</a></li>
<li class="chapter" data-level="6.401" data-path="Ch06.html"><a href="Ch06.html#ch06.401"><i class="fa fa-check"></i><b>6.401</b> ForestsTrees_TemperateDeciduous_r3000</a></li>
<li class="chapter" data-level="6.402" data-path="Ch06.html"><a href="Ch06.html#ch06.402"><i class="fa fa-check"></i><b>6.402</b> ForestsTrees_TemperateDeciduous_r10000</a></li>
<li class="chapter" data-level="6.403" data-path="Ch06.html"><a href="Ch06.html#ch06.403"><i class="fa fa-check"></i><b>6.403</b> General_AllotmentGardens_cell</a></li>
<li class="chapter" data-level="6.404" data-path="Ch06.html"><a href="Ch06.html#ch06.404"><i class="fa fa-check"></i><b>6.404</b> General_AllotmentGardens_r500</a></li>
<li class="chapter" data-level="6.405" data-path="Ch06.html"><a href="Ch06.html#ch06.405"><i class="fa fa-check"></i><b>6.405</b> General_AllotmentGardens_r1250</a></li>
<li class="chapter" data-level="6.406" data-path="Ch06.html"><a href="Ch06.html#ch06.406"><i class="fa fa-check"></i><b>6.406</b> General_AllotmentGardens_r3000</a></li>
<li class="chapter" data-level="6.407" data-path="Ch06.html"><a href="Ch06.html#ch06.407"><i class="fa fa-check"></i><b>6.407</b> General_AllotmentGardens_r10000</a></li>
<li class="chapter" data-level="6.408" data-path="Ch06.html"><a href="Ch06.html#ch06.408"><i class="fa fa-check"></i><b>6.408</b> General_BareSoilQuarry_cell</a></li>
<li class="chapter" data-level="6.409" data-path="Ch06.html"><a href="Ch06.html#ch06.409"><i class="fa fa-check"></i><b>6.409</b> General_BareSoilQuarry_r500</a></li>
<li class="chapter" data-level="6.410" data-path="Ch06.html"><a href="Ch06.html#ch06.410"><i class="fa fa-check"></i><b>6.410</b> General_BareSoilQuarry_r1250</a></li>
<li class="chapter" data-level="6.411" data-path="Ch06.html"><a href="Ch06.html#ch06.411"><i class="fa fa-check"></i><b>6.411</b> General_BareSoilQuarry_r3000</a></li>
<li class="chapter" data-level="6.412" data-path="Ch06.html"><a href="Ch06.html#ch06.412"><i class="fa fa-check"></i><b>6.412</b> General_BareSoilQuarry_r10000</a></li>
<li class="chapter" data-level="6.413" data-path="Ch06.html"><a href="Ch06.html#ch06.413"><i class="fa fa-check"></i><b>6.413</b> General_Builtup_cell</a></li>
<li class="chapter" data-level="6.414" data-path="Ch06.html"><a href="Ch06.html#ch06.414"><i class="fa fa-check"></i><b>6.414</b> General_Builtup_r500</a></li>
<li class="chapter" data-level="6.415" data-path="Ch06.html"><a href="Ch06.html#ch06.415"><i class="fa fa-check"></i><b>6.415</b> General_Builtup_r1250</a></li>
<li class="chapter" data-level="6.416" data-path="Ch06.html"><a href="Ch06.html#ch06.416"><i class="fa fa-check"></i><b>6.416</b> General_Builtup_r3000</a></li>
<li class="chapter" data-level="6.417" data-path="Ch06.html"><a href="Ch06.html#ch06.417"><i class="fa fa-check"></i><b>6.417</b> General_Builtup_r10000</a></li>
<li class="chapter" data-level="6.418" data-path="Ch06.html"><a href="Ch06.html#ch06.418"><i class="fa fa-check"></i><b>6.418</b> General_Farmland_cell</a></li>
<li class="chapter" data-level="6.419" data-path="Ch06.html"><a href="Ch06.html#ch06.419"><i class="fa fa-check"></i><b>6.419</b> General_Farmland_r500</a></li>
<li class="chapter" data-level="6.420" data-path="Ch06.html"><a href="Ch06.html#ch06.420"><i class="fa fa-check"></i><b>6.420</b> General_Farmland_r1250</a></li>
<li class="chapter" data-level="6.421" data-path="Ch06.html"><a href="Ch06.html#ch06.421"><i class="fa fa-check"></i><b>6.421</b> General_Farmland_r3000</a></li>
<li class="chapter" data-level="6.422" data-path="Ch06.html"><a href="Ch06.html#ch06.422"><i class="fa fa-check"></i><b>6.422</b> General_Farmland_r10000</a></li>
<li class="chapter" data-level="6.423" data-path="Ch06.html"><a href="Ch06.html#ch06.423"><i class="fa fa-check"></i><b>6.423</b> General_ForestsWithoutInventory_cell</a></li>
<li class="chapter" data-level="6.424" data-path="Ch06.html"><a href="Ch06.html#ch06.424"><i class="fa fa-check"></i><b>6.424</b> General_ForestsWithoutInventory_r500</a></li>
<li class="chapter" data-level="6.425" data-path="Ch06.html"><a href="Ch06.html#ch06.425"><i class="fa fa-check"></i><b>6.425</b> General_ForestsWithoutInventory_r1250</a></li>
<li class="chapter" data-level="6.426" data-path="Ch06.html"><a href="Ch06.html#ch06.426"><i class="fa fa-check"></i><b>6.426</b> General_ForestsWithoutInventory_r3000</a></li>
<li class="chapter" data-level="6.427" data-path="Ch06.html"><a href="Ch06.html#ch06.427"><i class="fa fa-check"></i><b>6.427</b> General_ForestsWithoutInventory_r10000</a></li>
<li class="chapter" data-level="6.428" data-path="Ch06.html"><a href="Ch06.html#ch06.428"><i class="fa fa-check"></i><b>6.428</b> General_GardensOrchards_cell</a></li>
<li class="chapter" data-level="6.429" data-path="Ch06.html"><a href="Ch06.html#ch06.429"><i class="fa fa-check"></i><b>6.429</b> General_GardensOrchards_r500</a></li>
<li class="chapter" data-level="6.430" data-path="Ch06.html"><a href="Ch06.html#ch06.430"><i class="fa fa-check"></i><b>6.430</b> General_GardensOrchards_r1250</a></li>
<li class="chapter" data-level="6.431" data-path="Ch06.html"><a href="Ch06.html#ch06.431"><i class="fa fa-check"></i><b>6.431</b> General_GardensOrchards_r3000</a></li>
<li class="chapter" data-level="6.432" data-path="Ch06.html"><a href="Ch06.html#ch06.432"><i class="fa fa-check"></i><b>6.432</b> General_GardensOrchards_r10000</a></li>
<li class="chapter" data-level="6.433" data-path="Ch06.html"><a href="Ch06.html#ch06.433"><i class="fa fa-check"></i><b>6.433</b> General_Roads_cell</a></li>
<li class="chapter" data-level="6.434" data-path="Ch06.html"><a href="Ch06.html#ch06.434"><i class="fa fa-check"></i><b>6.434</b> General_ShrubsOrchards_cell</a></li>
<li class="chapter" data-level="6.435" data-path="Ch06.html"><a href="Ch06.html#ch06.435"><i class="fa fa-check"></i><b>6.435</b> General_ShrubsOrchards_r500</a></li>
<li class="chapter" data-level="6.436" data-path="Ch06.html"><a href="Ch06.html#ch06.436"><i class="fa fa-check"></i><b>6.436</b> General_ShrubsOrchards_r1250</a></li>
<li class="chapter" data-level="6.437" data-path="Ch06.html"><a href="Ch06.html#ch06.437"><i class="fa fa-check"></i><b>6.437</b> General_ShrubsOrchards_r3000</a></li>
<li class="chapter" data-level="6.438" data-path="Ch06.html"><a href="Ch06.html#ch06.438"><i class="fa fa-check"></i><b>6.438</b> General_ShrubsOrchards_r10000</a></li>
<li class="chapter" data-level="6.439" data-path="Ch06.html"><a href="Ch06.html#ch06.439"><i class="fa fa-check"></i><b>6.439</b> General_ShrubsOrchardsGardens_cell</a></li>
<li class="chapter" data-level="6.440" data-path="Ch06.html"><a href="Ch06.html#ch06.440"><i class="fa fa-check"></i><b>6.440</b> General_ShrubsOrchardsGardens_r500</a></li>
<li class="chapter" data-level="6.441" data-path="Ch06.html"><a href="Ch06.html#ch06.441"><i class="fa fa-check"></i><b>6.441</b> General_ShrubsOrchardsGardens_r1250</a></li>
<li class="chapter" data-level="6.442" data-path="Ch06.html"><a href="Ch06.html#ch06.442"><i class="fa fa-check"></i><b>6.442</b> General_ShrubsOrchardsGardens_r3000</a></li>
<li class="chapter" data-level="6.443" data-path="Ch06.html"><a href="Ch06.html#ch06.443"><i class="fa fa-check"></i><b>6.443</b> General_ShrubsOrchardsGardens_r10000</a></li>
<li class="chapter" data-level="6.444" data-path="Ch06.html"><a href="Ch06.html#ch06.444"><i class="fa fa-check"></i><b>6.444</b> General_SwampsMiresBogsHelophytes_cell</a></li>
<li class="chapter" data-level="6.445" data-path="Ch06.html"><a href="Ch06.html#ch06.445"><i class="fa fa-check"></i><b>6.445</b> General_SwampsMiresBogsHelophytes_r500</a></li>
<li class="chapter" data-level="6.446" data-path="Ch06.html"><a href="Ch06.html#ch06.446"><i class="fa fa-check"></i><b>6.446</b> General_SwampsMiresBogsHelophytes_r1250</a></li>
<li class="chapter" data-level="6.447" data-path="Ch06.html"><a href="Ch06.html#ch06.447"><i class="fa fa-check"></i><b>6.447</b> General_SwampsMiresBogsHelophytes_r3000</a></li>
<li class="chapter" data-level="6.448" data-path="Ch06.html"><a href="Ch06.html#ch06.448"><i class="fa fa-check"></i><b>6.448</b> General_SwampsMiresBogsHelophytes_r10000</a></li>
<li class="chapter" data-level="6.449" data-path="Ch06.html"><a href="Ch06.html#ch06.449"><i class="fa fa-check"></i><b>6.449</b> General_Trees_cell</a></li>
<li class="chapter" data-level="6.450" data-path="Ch06.html"><a href="Ch06.html#ch06.450"><i class="fa fa-check"></i><b>6.450</b> General_Trees_r500</a></li>
<li class="chapter" data-level="6.451" data-path="Ch06.html"><a href="Ch06.html#ch06.451"><i class="fa fa-check"></i><b>6.451</b> General_Trees_r1250</a></li>
<li class="chapter" data-level="6.452" data-path="Ch06.html"><a href="Ch06.html#ch06.452"><i class="fa fa-check"></i><b>6.452</b> General_Trees_r3000</a></li>
<li class="chapter" data-level="6.453" data-path="Ch06.html"><a href="Ch06.html#ch06.453"><i class="fa fa-check"></i><b>6.453</b> General_Trees_r10000</a></li>
<li class="chapter" data-level="6.454" data-path="Ch06.html"><a href="Ch06.html#ch06.454"><i class="fa fa-check"></i><b>6.454</b> General_TreesOutsideForests_cell</a></li>
<li class="chapter" data-level="6.455" data-path="Ch06.html"><a href="Ch06.html#ch06.455"><i class="fa fa-check"></i><b>6.455</b> General_TreesOutsideForests_r500</a></li>
<li class="chapter" data-level="6.456" data-path="Ch06.html"><a href="Ch06.html#ch06.456"><i class="fa fa-check"></i><b>6.456</b> General_TreesOutsideForests_r1250</a></li>
<li class="chapter" data-level="6.457" data-path="Ch06.html"><a href="Ch06.html#ch06.457"><i class="fa fa-check"></i><b>6.457</b> General_TreesOutsideForests_r3000</a></li>
<li class="chapter" data-level="6.458" data-path="Ch06.html"><a href="Ch06.html#ch06.458"><i class="fa fa-check"></i><b>6.458</b> General_TreesOutsideForests_r10000</a></li>
<li class="chapter" data-level="6.459" data-path="Ch06.html"><a href="Ch06.html#ch06.459"><i class="fa fa-check"></i><b>6.459</b> General_Water_cell</a></li>
<li class="chapter" data-level="6.460" data-path="Ch06.html"><a href="Ch06.html#ch06.460"><i class="fa fa-check"></i><b>6.460</b> General_Water_r500</a></li>
<li class="chapter" data-level="6.461" data-path="Ch06.html"><a href="Ch06.html#ch06.461"><i class="fa fa-check"></i><b>6.461</b> General_Water_r1250</a></li>
<li class="chapter" data-level="6.462" data-path="Ch06.html"><a href="Ch06.html#ch06.462"><i class="fa fa-check"></i><b>6.462</b> General_Water_r3000</a></li>
<li class="chapter" data-level="6.463" data-path="Ch06.html"><a href="Ch06.html#ch06.463"><i class="fa fa-check"></i><b>6.463</b> General_Water_r10000</a></li>
<li class="chapter" data-level="6.464" data-path="Ch06.html"><a href="Ch06.html#ch06.464"><i class="fa fa-check"></i><b>6.464</b> Wetlands_Bogs_cell</a></li>
<li class="chapter" data-level="6.465" data-path="Ch06.html"><a href="Ch06.html#ch06.465"><i class="fa fa-check"></i><b>6.465</b> Wetlands_Bogs_r500</a></li>
<li class="chapter" data-level="6.466" data-path="Ch06.html"><a href="Ch06.html#ch06.466"><i class="fa fa-check"></i><b>6.466</b> Wetlands_Bogs_r1250</a></li>
<li class="chapter" data-level="6.467" data-path="Ch06.html"><a href="Ch06.html#ch06.467"><i class="fa fa-check"></i><b>6.467</b> Wetlands_Bogs_r3000</a></li>
<li class="chapter" data-level="6.468" data-path="Ch06.html"><a href="Ch06.html#ch06.468"><i class="fa fa-check"></i><b>6.468</b> Wetlands_Bogs_r10000</a></li>
<li class="chapter" data-level="6.469" data-path="Ch06.html"><a href="Ch06.html#ch06.469"><i class="fa fa-check"></i><b>6.469</b> Wetlands_Mires_cell</a></li>
<li class="chapter" data-level="6.470" data-path="Ch06.html"><a href="Ch06.html#ch06.470"><i class="fa fa-check"></i><b>6.470</b> Wetlands_Mires_r500</a></li>
<li class="chapter" data-level="6.471" data-path="Ch06.html"><a href="Ch06.html#ch06.471"><i class="fa fa-check"></i><b>6.471</b> Wetlands_Mires_r1250</a></li>
<li class="chapter" data-level="6.472" data-path="Ch06.html"><a href="Ch06.html#ch06.472"><i class="fa fa-check"></i><b>6.472</b> Wetlands_Mires_r3000</a></li>
<li class="chapter" data-level="6.473" data-path="Ch06.html"><a href="Ch06.html#ch06.473"><i class="fa fa-check"></i><b>6.473</b> Wetlands_Mires_r10000</a></li>
<li class="chapter" data-level="6.474" data-path="Ch06.html"><a href="Ch06.html#ch06.474"><i class="fa fa-check"></i><b>6.474</b> Wetlands_ReedSedgeRushBeds_cell</a></li>
<li class="chapter" data-level="6.475" data-path="Ch06.html"><a href="Ch06.html#ch06.475"><i class="fa fa-check"></i><b>6.475</b> Wetlands_ReedSedgeRushBeds_r500</a></li>
<li class="chapter" data-level="6.476" data-path="Ch06.html"><a href="Ch06.html#ch06.476"><i class="fa fa-check"></i><b>6.476</b> Wetlands_ReedSedgeRushBeds_r1250</a></li>
<li class="chapter" data-level="6.477" data-path="Ch06.html"><a href="Ch06.html#ch06.477"><i class="fa fa-check"></i><b>6.477</b> Wetlands_ReedSedgeRushBeds_r3000</a></li>
<li class="chapter" data-level="6.478" data-path="Ch06.html"><a href="Ch06.html#ch06.478"><i class="fa fa-check"></i><b>6.478</b> Wetlands_ReedSedgeRushBeds_r10000</a></li>
<li class="chapter" data-level="6.479" data-path="Ch06.html"><a href="Ch06.html#ch06.479"><i class="fa fa-check"></i><b>6.479</b> EO_NDMI-LYmed-average_cell</a></li>
<li class="chapter" data-level="6.480" data-path="Ch06.html"><a href="Ch06.html#ch06.480"><i class="fa fa-check"></i><b>6.480</b> EO_NDMI-LYmedian-iqr_cell</a></li>
<li class="chapter" data-level="6.481" data-path="Ch06.html"><a href="Ch06.html#ch06.481"><i class="fa fa-check"></i><b>6.481</b> EO_NDMI-STiqr-median_cell</a></li>
<li class="chapter" data-level="6.482" data-path="Ch06.html"><a href="Ch06.html#ch06.482"><i class="fa fa-check"></i><b>6.482</b> EO_NDMI-STmedian-average_cell</a></li>
<li class="chapter" data-level="6.483" data-path="Ch06.html"><a href="Ch06.html#ch06.483"><i class="fa fa-check"></i><b>6.483</b> EO_NDMI-STmedian-iqr_cell</a></li>
<li class="chapter" data-level="6.484" data-path="Ch06.html"><a href="Ch06.html#ch06.484"><i class="fa fa-check"></i><b>6.484</b> EO_NDMI-STp25-min_cell</a></li>
<li class="chapter" data-level="6.485" data-path="Ch06.html"><a href="Ch06.html#ch06.485"><i class="fa fa-check"></i><b>6.485</b> EO_NDMI-STp75-max_cell</a></li>
<li class="chapter" data-level="6.486" data-path="Ch06.html"><a href="Ch06.html#ch06.486"><i class="fa fa-check"></i><b>6.486</b> EO_NDVI-LYmedian-average_cell</a></li>
<li class="chapter" data-level="6.487" data-path="Ch06.html"><a href="Ch06.html#ch06.487"><i class="fa fa-check"></i><b>6.487</b> EO_NDVI-LYmedian-iqr_cell</a></li>
<li class="chapter" data-level="6.488" data-path="Ch06.html"><a href="Ch06.html#ch06.488"><i class="fa fa-check"></i><b>6.488</b> EO_NDVI-STiqr-median_cell</a></li>
<li class="chapter" data-level="6.489" data-path="Ch06.html"><a href="Ch06.html#ch06.489"><i class="fa fa-check"></i><b>6.489</b> EO_NDVI-STmedian-average_cell</a></li>
<li class="chapter" data-level="6.490" data-path="Ch06.html"><a href="Ch06.html#ch06.490"><i class="fa fa-check"></i><b>6.490</b> EO_NDVI-STmedian-iqr_cell</a></li>
<li class="chapter" data-level="6.491" data-path="Ch06.html"><a href="Ch06.html#ch06.491"><i class="fa fa-check"></i><b>6.491</b> EO_NDVI-STp25-min_cell</a></li>
<li class="chapter" data-level="6.492" data-path="Ch06.html"><a href="Ch06.html#ch06.492"><i class="fa fa-check"></i><b>6.492</b> EO_NDVI-STp75-max_cell</a></li>
<li class="chapter" data-level="6.493" data-path="Ch06.html"><a href="Ch06.html#ch06.493"><i class="fa fa-check"></i><b>6.493</b> EO_NDWI-LYmedian-average_cell</a></li>
<li class="chapter" data-level="6.494" data-path="Ch06.html"><a href="Ch06.html#ch06.494"><i class="fa fa-check"></i><b>6.494</b> EO_NDWI-LYmedian-iqr_cell</a></li>
<li class="chapter" data-level="6.495" data-path="Ch06.html"><a href="Ch06.html#ch06.495"><i class="fa fa-check"></i><b>6.495</b> EO_NDWI-STiqr-median_cell</a></li>
<li class="chapter" data-level="6.496" data-path="Ch06.html"><a href="Ch06.html#ch06.496"><i class="fa fa-check"></i><b>6.496</b> EO_NDWI-STmedian-average_cell</a></li>
<li class="chapter" data-level="6.497" data-path="Ch06.html"><a href="Ch06.html#ch06.497"><i class="fa fa-check"></i><b>6.497</b> EO_NDWI-STmedian-iqr_cell</a></li>
<li class="chapter" data-level="6.498" data-path="Ch06.html"><a href="Ch06.html#ch06.498"><i class="fa fa-check"></i><b>6.498</b> EO_NDWI-STp25-min_cell</a></li>
<li class="chapter" data-level="6.499" data-path="Ch06.html"><a href="Ch06.html#ch06.499"><i class="fa fa-check"></i><b>6.499</b> EO_NDWI-STp75-max_cell</a></li>
<li class="chapter" data-level="6.500" data-path="Ch06.html"><a href="Ch06.html#ch06.500"><i class="fa fa-check"></i><b>6.500</b> SoilChemistry_ESDAC-CN_cell</a></li>
<li class="chapter" data-level="6.501" data-path="Ch06.html"><a href="Ch06.html#ch06.501"><i class="fa fa-check"></i><b>6.501</b> SoilChemistry_ESDAC-CaCo3_cell</a></li>
<li class="chapter" data-level="6.502" data-path="Ch06.html"><a href="Ch06.html#ch06.502"><i class="fa fa-check"></i><b>6.502</b> SoilChemistry_ESDAC-K_cell</a></li>
<li class="chapter" data-level="6.503" data-path="Ch06.html"><a href="Ch06.html#ch06.503"><i class="fa fa-check"></i><b>6.503</b> SoilChemistry_ESDAC-N_cell</a></li>
<li class="chapter" data-level="6.504" data-path="Ch06.html"><a href="Ch06.html#ch06.504"><i class="fa fa-check"></i><b>6.504</b> SoilChemistry_ESDAC-P_cell</a></li>
<li class="chapter" data-level="6.505" data-path="Ch06.html"><a href="Ch06.html#ch06.505"><i class="fa fa-check"></i><b>6.505</b> SoilChemistry_ESDAC-phH2O_cell</a></li>
<li class="chapter" data-level="6.506" data-path="Ch06.html"><a href="Ch06.html#ch06.506"><i class="fa fa-check"></i><b>6.506</b> SoilTexture_Clay_cell</a></li>
<li class="chapter" data-level="6.507" data-path="Ch06.html"><a href="Ch06.html#ch06.507"><i class="fa fa-check"></i><b>6.507</b> SoilTexture_Clay_r500</a></li>
<li class="chapter" data-level="6.508" data-path="Ch06.html"><a href="Ch06.html#ch06.508"><i class="fa fa-check"></i><b>6.508</b> SoilTexture_Clay_r1250</a></li>
<li class="chapter" data-level="6.509" data-path="Ch06.html"><a href="Ch06.html#ch06.509"><i class="fa fa-check"></i><b>6.509</b> SoilTexture_Clay_r3000</a></li>
<li class="chapter" data-level="6.510" data-path="Ch06.html"><a href="Ch06.html#ch06.510"><i class="fa fa-check"></i><b>6.510</b> SoilTexture_Clay_r10000</a></li>
<li class="chapter" data-level="6.511" data-path="Ch06.html"><a href="Ch06.html#ch06.511"><i class="fa fa-check"></i><b>6.511</b> SoilTexture_Organic_cell</a></li>
<li class="chapter" data-level="6.512" data-path="Ch06.html"><a href="Ch06.html#ch06.512"><i class="fa fa-check"></i><b>6.512</b> SoilTexture_Organic_r500</a></li>
<li class="chapter" data-level="6.513" data-path="Ch06.html"><a href="Ch06.html#ch06.513"><i class="fa fa-check"></i><b>6.513</b> SoilTexture_Organic_r1250</a></li>
<li class="chapter" data-level="6.514" data-path="Ch06.html"><a href="Ch06.html#ch06.514"><i class="fa fa-check"></i><b>6.514</b> SoilTexture_Organic_r3000</a></li>
<li class="chapter" data-level="6.515" data-path="Ch06.html"><a href="Ch06.html#ch06.515"><i class="fa fa-check"></i><b>6.515</b> SoilTexture_Organic_r10000</a></li>
<li class="chapter" data-level="6.516" data-path="Ch06.html"><a href="Ch06.html#ch06.516"><i class="fa fa-check"></i><b>6.516</b> SoilTexture_Sand_cell</a></li>
<li class="chapter" data-level="6.517" data-path="Ch06.html"><a href="Ch06.html#ch06.517"><i class="fa fa-check"></i><b>6.517</b> SoilTexture_Sand_r500</a></li>
<li class="chapter" data-level="6.518" data-path="Ch06.html"><a href="Ch06.html#ch06.518"><i class="fa fa-check"></i><b>6.518</b> SoilTexture_Sand_r1250</a></li>
<li class="chapter" data-level="6.519" data-path="Ch06.html"><a href="Ch06.html#ch06.519"><i class="fa fa-check"></i><b>6.519</b> SoilTexture_Sand_r3000</a></li>
<li class="chapter" data-level="6.520" data-path="Ch06.html"><a href="Ch06.html#ch06.520"><i class="fa fa-check"></i><b>6.520</b> SoilTexture_Sand_r10000</a></li>
<li class="chapter" data-level="6.521" data-path="Ch06.html"><a href="Ch06.html#ch06.521"><i class="fa fa-check"></i><b>6.521</b> SoilTexture_Silt_cell</a></li>
<li class="chapter" data-level="6.522" data-path="Ch06.html"><a href="Ch06.html#ch06.522"><i class="fa fa-check"></i><b>6.522</b> SoilTexture_Silt_r500</a></li>
<li class="chapter" data-level="6.523" data-path="Ch06.html"><a href="Ch06.html#ch06.523"><i class="fa fa-check"></i><b>6.523</b> SoilTexture_Silt_r1250</a></li>
<li class="chapter" data-level="6.524" data-path="Ch06.html"><a href="Ch06.html#ch06.524"><i class="fa fa-check"></i><b>6.524</b> SoilTexture_Silt_r3000</a></li>
<li class="chapter" data-level="6.525" data-path="Ch06.html"><a href="Ch06.html#ch06.525"><i class="fa fa-check"></i><b>6.525</b> SoilTexture_Silt_r10000</a></li>
<li class="chapter" data-level="6.526" data-path="Ch06.html"><a href="Ch06.html#ch06.526"><i class="fa fa-check"></i><b>6.526</b> Terrain_ASL-average_cell</a></li>
<li class="chapter" data-level="6.527" data-path="Ch06.html"><a href="Ch06.html#ch06.527"><i class="fa fa-check"></i><b>6.527</b> Terrain_Aspect-average_cell</a></li>
<li class="chapter" data-level="6.528" data-path="Ch06.html"><a href="Ch06.html#ch06.528"><i class="fa fa-check"></i><b>6.528</b> Terrain_Aspect-iqr_cell</a></li>
<li class="chapter" data-level="6.529" data-path="Ch06.html"><a href="Ch06.html#ch06.529"><i class="fa fa-check"></i><b>6.529</b> Terrain_DiS-area_cell</a></li>
<li class="chapter" data-level="6.530" data-path="Ch06.html"><a href="Ch06.html#ch06.530"><i class="fa fa-check"></i><b>6.530</b> Terrain_DiS-area_r500</a></li>
<li class="chapter" data-level="6.531" data-path="Ch06.html"><a href="Ch06.html#ch06.531"><i class="fa fa-check"></i><b>6.531</b> Terrain_DiS-area_r1250</a></li>
<li class="chapter" data-level="6.532" data-path="Ch06.html"><a href="Ch06.html#ch06.532"><i class="fa fa-check"></i><b>6.532</b> Terrain_DiS-area_r3000</a></li>
<li class="chapter" data-level="6.533" data-path="Ch06.html"><a href="Ch06.html#ch06.533"><i class="fa fa-check"></i><b>6.533</b> Terrain_DiS-area_r10000</a></li>
<li class="chapter" data-level="6.534" data-path="Ch06.html"><a href="Ch06.html#ch06.534"><i class="fa fa-check"></i><b>6.534</b> Terrain_DiS-max_cell</a></li>
<li class="chapter" data-level="6.535" data-path="Ch06.html"><a href="Ch06.html#ch06.535"><i class="fa fa-check"></i><b>6.535</b> Terrain_DiS-mean_cell</a></li>
<li class="chapter" data-level="6.536" data-path="Ch06.html"><a href="Ch06.html#ch06.536"><i class="fa fa-check"></i><b>6.536</b> Terrain_Slope-average_cell</a></li>
<li class="chapter" data-level="6.537" data-path="Ch06.html"><a href="Ch06.html#ch06.537"><i class="fa fa-check"></i><b>6.537</b> Terrain_Slope-iqr_cell</a></li>
<li class="chapter" data-level="6.538" data-path="Ch06.html"><a href="Ch06.html#ch06.538"><i class="fa fa-check"></i><b>6.538</b> Terrain_TWI-average_cell</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Ch07.html"><a href="Ch07.html"><i class="fa fa-check"></i><b>7</b> Data access</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">High-resolution ecogeographical variables for species distribution modelling describing Latvia, 2024</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Ch06" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> Ecogeographical variables<a href="Ch06.html#Ch06" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This section names and provides description (R code with its explanation in
procedure) of every one of the 538 EGVs created.</p>
<p>For better undestanding of the relatedness of these vairable, refer to flowchart below
(Fig. <a href="Ch06.html#fig:flowchart">6.1</a>).
Names used in figure correspond to EGV layer names and follow naming convention:
[group]<em>[specific name]</em>[scale], where:</p>
<ul>
<li><p>group is broader collection of EGVs describing the same fenomena, ecosystem, coming from the same source, etc.;</p></li>
<li><p>specific name shortly describes landscape class and/or metrics used in creation of the layer;</p></li>
<li><p>scale is one of: cell, 500, 1250, 3000, 10000 m around the center of analysis cell. The resolution of every EGV is 1 ha, larger scales are summarised to it.</p></li>
</ul>
<div class="figure"><span style="display:block;" id="fig:flowchart"></span>
<img src="Figures/EGV_FlowChartY_eps_krasains_300dpi_2.png" alt="Relationships of ecogeographical variables created." width="100%" />
<p class="caption">
Figure 6.1: Relationships of ecogeographical variables created.
</p>
</div>
<p><br></p>
<p>In cover fraction and edge variables, we first calculated values at the analysis
cell resolution and then used {exactextract} to summarise values from larger scales.
This package uses pixel area weight to calculate weighted summary statistic, thus the
error created due to aggregation is negligible, particularly at larger scales, but
reduces computation time thousunds up to even hundreds of thousands times compared
to input resolution (10 m). To further speed up the procedures, we used “sparse”
mode in <code>egvtools::radius_function</code>, thus summarising zonal statistics every 300 m for
3000 m radius buffers and every 1000 m for 10000 m buffers, obtaining near linear
reduction in time relative to the number of zones (nine fold and 100 fold further
computation time reduction), while loosing less than 0.001 % of variability altogether.</p>
<p>We used slightly different approach with diversity metrics - first we calculated
Shanons diversity index at 25 ha raster grid cells as there is nearly no variability
of landscape classes at 1 ha grid cells. Further on we calculated arithmetic mean as
zonal statictics value (“sparse” mode with <code>egvtools::radius_function</code>), but we
did not create this EGV at the analysis cells scale.</p>
<div id="ch06.001" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Climate_CHELSAv2.1-bio1_cell<a href="Ch06.html#ch06.001" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio1_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_1</code></p>
<p><strong>English name:</strong> Mean annual daily mean air temperature (°C) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vidējā ikdienas gaisa temperatūra (°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="Ch06.html#cb42-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb42-2"><a href="Ch06.html#cb42-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb42-3"><a href="Ch06.html#cb42-3" tabindex="-1"></a></span>
<span id="cb42-4"><a href="Ch06.html#cb42-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb42-5"><a href="Ch06.html#cb42-5" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio1_cell.tif&quot;</span></span>
<span id="cb42-6"><a href="Ch06.html#cb42-6" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_1&quot;</span></span>
<span id="cb42-7"><a href="Ch06.html#cb42-7" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio1_cell.tif&quot;</span></span>
<span id="cb42-8"><a href="Ch06.html#cb42-8" tabindex="-1"></a></span>
<span id="cb42-9"><a href="Ch06.html#cb42-9" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb42-10"><a href="Ch06.html#cb42-10" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb42-11"><a href="Ch06.html#cb42-11" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb42-12"><a href="Ch06.html#cb42-12" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb42-13"><a href="Ch06.html#cb42-13" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb42-14"><a href="Ch06.html#cb42-14" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb42-15"><a href="Ch06.html#cb42-15" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb42-16"><a href="Ch06.html#cb42-16" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb42-17"><a href="Ch06.html#cb42-17" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb42-18"><a href="Ch06.html#cb42-18" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb42-19"><a href="Ch06.html#cb42-19" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb42-20"><a href="Ch06.html#cb42-20" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb42-21"><a href="Ch06.html#cb42-21" tabindex="-1"></a></span>
<span id="cb42-22"><a href="Ch06.html#cb42-22" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb42-23"><a href="Ch06.html#cb42-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb42-24"><a href="Ch06.html#cb42-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb42-25"><a href="Ch06.html#cb42-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb42-26"><a href="Ch06.html#cb42-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb42-27"><a href="Ch06.html#cb42-27" tabindex="-1"></a></span>
<span id="cb42-28"><a href="Ch06.html#cb42-28" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio1_cell.tif&quot;</span></span>
<span id="cb42-29"><a href="Ch06.html#cb42-29" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb42-30"><a href="Ch06.html#cb42-30" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb42-31"><a href="Ch06.html#cb42-31" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb42-32"><a href="Ch06.html#cb42-32" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb42-33"><a href="Ch06.html#cb42-33" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb42-34"><a href="Ch06.html#cb42-34" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb42-35"><a href="Ch06.html#cb42-35" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb42-36"><a href="Ch06.html#cb42-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb42-37"><a href="Ch06.html#cb42-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb42-38"><a href="Ch06.html#cb42-38" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb42-39"><a href="Ch06.html#cb42-39" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb42-40"><a href="Ch06.html#cb42-40" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_1.png" width="100%" /></p>
</div>
<div id="ch06.002" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Climate_CHELSAv2.1-bio10_cell<a href="Ch06.html#ch06.002" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio10_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_2</code></p>
<p><strong>English name:</strong> Mean daily mean air temperatures (°C) of the warmest quarter (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada siltākā ceturkšņa vidējā gaisa temperatūra (°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="Ch06.html#cb43-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb43-2"><a href="Ch06.html#cb43-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb43-3"><a href="Ch06.html#cb43-3" tabindex="-1"></a></span>
<span id="cb43-4"><a href="Ch06.html#cb43-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb43-5"><a href="Ch06.html#cb43-5" tabindex="-1"></a></span>
<span id="cb43-6"><a href="Ch06.html#cb43-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio10_cell.tif&quot;</span></span>
<span id="cb43-7"><a href="Ch06.html#cb43-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_2&quot;</span></span>
<span id="cb43-8"><a href="Ch06.html#cb43-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio10_cell.tif&quot;</span></span>
<span id="cb43-9"><a href="Ch06.html#cb43-9" tabindex="-1"></a></span>
<span id="cb43-10"><a href="Ch06.html#cb43-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb43-11"><a href="Ch06.html#cb43-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb43-12"><a href="Ch06.html#cb43-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb43-13"><a href="Ch06.html#cb43-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb43-14"><a href="Ch06.html#cb43-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb43-15"><a href="Ch06.html#cb43-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb43-16"><a href="Ch06.html#cb43-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb43-17"><a href="Ch06.html#cb43-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb43-18"><a href="Ch06.html#cb43-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb43-19"><a href="Ch06.html#cb43-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb43-20"><a href="Ch06.html#cb43-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-21"><a href="Ch06.html#cb43-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb43-22"><a href="Ch06.html#cb43-22" tabindex="-1"></a></span>
<span id="cb43-23"><a href="Ch06.html#cb43-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb43-24"><a href="Ch06.html#cb43-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb43-25"><a href="Ch06.html#cb43-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb43-26"><a href="Ch06.html#cb43-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb43-27"><a href="Ch06.html#cb43-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb43-28"><a href="Ch06.html#cb43-28" tabindex="-1"></a></span>
<span id="cb43-29"><a href="Ch06.html#cb43-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio10_cell.tif&quot;</span></span>
<span id="cb43-30"><a href="Ch06.html#cb43-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb43-31"><a href="Ch06.html#cb43-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb43-32"><a href="Ch06.html#cb43-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb43-33"><a href="Ch06.html#cb43-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb43-34"><a href="Ch06.html#cb43-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb43-35"><a href="Ch06.html#cb43-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb43-36"><a href="Ch06.html#cb43-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb43-37"><a href="Ch06.html#cb43-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb43-38"><a href="Ch06.html#cb43-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb43-39"><a href="Ch06.html#cb43-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb43-40"><a href="Ch06.html#cb43-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb43-41"><a href="Ch06.html#cb43-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_2.png" width="100%" /></p>
</div>
<div id="ch06.003" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Climate_CHELSAv2.1-bio11_cell<a href="Ch06.html#ch06.003" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio11_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_3</code></p>
<p><strong>English name:</strong> Mean daily mean air temperatures (°C) of the coldest quarter (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada aukstākā ceturkšņa vidējā gaisa temperatūra (°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="Ch06.html#cb44-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb44-2"><a href="Ch06.html#cb44-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb44-3"><a href="Ch06.html#cb44-3" tabindex="-1"></a></span>
<span id="cb44-4"><a href="Ch06.html#cb44-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb44-5"><a href="Ch06.html#cb44-5" tabindex="-1"></a></span>
<span id="cb44-6"><a href="Ch06.html#cb44-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio11_cell.tif&quot;</span></span>
<span id="cb44-7"><a href="Ch06.html#cb44-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_3&quot;</span></span>
<span id="cb44-8"><a href="Ch06.html#cb44-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio11_cell.tif&quot;</span></span>
<span id="cb44-9"><a href="Ch06.html#cb44-9" tabindex="-1"></a></span>
<span id="cb44-10"><a href="Ch06.html#cb44-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb44-11"><a href="Ch06.html#cb44-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb44-12"><a href="Ch06.html#cb44-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb44-13"><a href="Ch06.html#cb44-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb44-14"><a href="Ch06.html#cb44-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb44-15"><a href="Ch06.html#cb44-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb44-16"><a href="Ch06.html#cb44-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb44-17"><a href="Ch06.html#cb44-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb44-18"><a href="Ch06.html#cb44-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb44-19"><a href="Ch06.html#cb44-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb44-20"><a href="Ch06.html#cb44-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-21"><a href="Ch06.html#cb44-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb44-22"><a href="Ch06.html#cb44-22" tabindex="-1"></a></span>
<span id="cb44-23"><a href="Ch06.html#cb44-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb44-24"><a href="Ch06.html#cb44-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb44-25"><a href="Ch06.html#cb44-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb44-26"><a href="Ch06.html#cb44-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb44-27"><a href="Ch06.html#cb44-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb44-28"><a href="Ch06.html#cb44-28" tabindex="-1"></a></span>
<span id="cb44-29"><a href="Ch06.html#cb44-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio11_cell.tif&quot;</span></span>
<span id="cb44-30"><a href="Ch06.html#cb44-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb44-31"><a href="Ch06.html#cb44-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb44-32"><a href="Ch06.html#cb44-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb44-33"><a href="Ch06.html#cb44-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb44-34"><a href="Ch06.html#cb44-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb44-35"><a href="Ch06.html#cb44-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb44-36"><a href="Ch06.html#cb44-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb44-37"><a href="Ch06.html#cb44-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb44-38"><a href="Ch06.html#cb44-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb44-39"><a href="Ch06.html#cb44-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb44-40"><a href="Ch06.html#cb44-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb44-41"><a href="Ch06.html#cb44-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_3.png" width="100%" /></p>
</div>
<div id="ch06.004" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Climate_CHELSAv2.1-bio12_cell<a href="Ch06.html#ch06.004" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio12_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_4</code></p>
<p><strong>English name:</strong> Annual precipitation amount (kg m⁻² year⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada nokrišņu daudzums (kg m⁻² gadā) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="Ch06.html#cb45-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb45-2"><a href="Ch06.html#cb45-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb45-3"><a href="Ch06.html#cb45-3" tabindex="-1"></a></span>
<span id="cb45-4"><a href="Ch06.html#cb45-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb45-5"><a href="Ch06.html#cb45-5" tabindex="-1"></a></span>
<span id="cb45-6"><a href="Ch06.html#cb45-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio12_cell.tif&quot;</span></span>
<span id="cb45-7"><a href="Ch06.html#cb45-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_4&quot;</span></span>
<span id="cb45-8"><a href="Ch06.html#cb45-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio12_cell.tif&quot;</span></span>
<span id="cb45-9"><a href="Ch06.html#cb45-9" tabindex="-1"></a></span>
<span id="cb45-10"><a href="Ch06.html#cb45-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb45-11"><a href="Ch06.html#cb45-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb45-12"><a href="Ch06.html#cb45-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb45-13"><a href="Ch06.html#cb45-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb45-14"><a href="Ch06.html#cb45-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb45-15"><a href="Ch06.html#cb45-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb45-16"><a href="Ch06.html#cb45-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb45-17"><a href="Ch06.html#cb45-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb45-18"><a href="Ch06.html#cb45-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb45-19"><a href="Ch06.html#cb45-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb45-20"><a href="Ch06.html#cb45-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-21"><a href="Ch06.html#cb45-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb45-22"><a href="Ch06.html#cb45-22" tabindex="-1"></a></span>
<span id="cb45-23"><a href="Ch06.html#cb45-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb45-24"><a href="Ch06.html#cb45-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb45-25"><a href="Ch06.html#cb45-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb45-26"><a href="Ch06.html#cb45-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb45-27"><a href="Ch06.html#cb45-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb45-28"><a href="Ch06.html#cb45-28" tabindex="-1"></a></span>
<span id="cb45-29"><a href="Ch06.html#cb45-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio12_cell.tif&quot;</span></span>
<span id="cb45-30"><a href="Ch06.html#cb45-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb45-31"><a href="Ch06.html#cb45-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb45-32"><a href="Ch06.html#cb45-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb45-33"><a href="Ch06.html#cb45-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb45-34"><a href="Ch06.html#cb45-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb45-35"><a href="Ch06.html#cb45-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb45-36"><a href="Ch06.html#cb45-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb45-37"><a href="Ch06.html#cb45-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb45-38"><a href="Ch06.html#cb45-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb45-39"><a href="Ch06.html#cb45-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb45-40"><a href="Ch06.html#cb45-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb45-41"><a href="Ch06.html#cb45-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_4.png" width="100%" /></p>
</div>
<div id="ch06.005" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Climate_CHELSAv2.1-bio13_cell<a href="Ch06.html#ch06.005" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio13_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_5</code></p>
<p><strong>English name:</strong> Precipitation amount (kg m⁻² month⁻¹) of the wettest month (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Slapjākā mēneša nokrišņu daudzums (kg m⁻² mēnesī) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="Ch06.html#cb46-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb46-2"><a href="Ch06.html#cb46-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb46-3"><a href="Ch06.html#cb46-3" tabindex="-1"></a></span>
<span id="cb46-4"><a href="Ch06.html#cb46-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb46-5"><a href="Ch06.html#cb46-5" tabindex="-1"></a></span>
<span id="cb46-6"><a href="Ch06.html#cb46-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio13_cell.tif&quot;</span></span>
<span id="cb46-7"><a href="Ch06.html#cb46-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_5&quot;</span></span>
<span id="cb46-8"><a href="Ch06.html#cb46-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio13_cell.tif&quot;</span></span>
<span id="cb46-9"><a href="Ch06.html#cb46-9" tabindex="-1"></a></span>
<span id="cb46-10"><a href="Ch06.html#cb46-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb46-11"><a href="Ch06.html#cb46-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb46-12"><a href="Ch06.html#cb46-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb46-13"><a href="Ch06.html#cb46-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb46-14"><a href="Ch06.html#cb46-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb46-15"><a href="Ch06.html#cb46-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb46-16"><a href="Ch06.html#cb46-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb46-17"><a href="Ch06.html#cb46-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb46-18"><a href="Ch06.html#cb46-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb46-19"><a href="Ch06.html#cb46-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb46-20"><a href="Ch06.html#cb46-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-21"><a href="Ch06.html#cb46-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb46-22"><a href="Ch06.html#cb46-22" tabindex="-1"></a></span>
<span id="cb46-23"><a href="Ch06.html#cb46-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb46-24"><a href="Ch06.html#cb46-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb46-25"><a href="Ch06.html#cb46-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb46-26"><a href="Ch06.html#cb46-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb46-27"><a href="Ch06.html#cb46-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb46-28"><a href="Ch06.html#cb46-28" tabindex="-1"></a></span>
<span id="cb46-29"><a href="Ch06.html#cb46-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio13_cell.tif&quot;</span></span>
<span id="cb46-30"><a href="Ch06.html#cb46-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb46-31"><a href="Ch06.html#cb46-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb46-32"><a href="Ch06.html#cb46-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb46-33"><a href="Ch06.html#cb46-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb46-34"><a href="Ch06.html#cb46-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb46-35"><a href="Ch06.html#cb46-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb46-36"><a href="Ch06.html#cb46-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb46-37"><a href="Ch06.html#cb46-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb46-38"><a href="Ch06.html#cb46-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb46-39"><a href="Ch06.html#cb46-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb46-40"><a href="Ch06.html#cb46-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb46-41"><a href="Ch06.html#cb46-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_5.png" width="100%" /></p>
</div>
<div id="ch06.006" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> Climate_CHELSAv2.1-bio14_cell<a href="Ch06.html#ch06.006" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio14_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_6</code></p>
<p><strong>English name:</strong> Precipitation amount (kg m⁻² month⁻¹) of the driest month (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sausākā mēneša nokrišņu daudzums (kg m⁻² mēnesī) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="Ch06.html#cb47-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb47-2"><a href="Ch06.html#cb47-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb47-3"><a href="Ch06.html#cb47-3" tabindex="-1"></a></span>
<span id="cb47-4"><a href="Ch06.html#cb47-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb47-5"><a href="Ch06.html#cb47-5" tabindex="-1"></a></span>
<span id="cb47-6"><a href="Ch06.html#cb47-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio14_cell.tif&quot;</span></span>
<span id="cb47-7"><a href="Ch06.html#cb47-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_6&quot;</span></span>
<span id="cb47-8"><a href="Ch06.html#cb47-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio14_cell.tif&quot;</span></span>
<span id="cb47-9"><a href="Ch06.html#cb47-9" tabindex="-1"></a></span>
<span id="cb47-10"><a href="Ch06.html#cb47-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb47-11"><a href="Ch06.html#cb47-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb47-12"><a href="Ch06.html#cb47-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb47-13"><a href="Ch06.html#cb47-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb47-14"><a href="Ch06.html#cb47-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb47-15"><a href="Ch06.html#cb47-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb47-16"><a href="Ch06.html#cb47-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb47-17"><a href="Ch06.html#cb47-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb47-18"><a href="Ch06.html#cb47-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb47-19"><a href="Ch06.html#cb47-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb47-20"><a href="Ch06.html#cb47-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-21"><a href="Ch06.html#cb47-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb47-22"><a href="Ch06.html#cb47-22" tabindex="-1"></a></span>
<span id="cb47-23"><a href="Ch06.html#cb47-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb47-24"><a href="Ch06.html#cb47-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb47-25"><a href="Ch06.html#cb47-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb47-26"><a href="Ch06.html#cb47-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb47-27"><a href="Ch06.html#cb47-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb47-28"><a href="Ch06.html#cb47-28" tabindex="-1"></a></span>
<span id="cb47-29"><a href="Ch06.html#cb47-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio14_cell.tif&quot;</span></span>
<span id="cb47-30"><a href="Ch06.html#cb47-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb47-31"><a href="Ch06.html#cb47-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb47-32"><a href="Ch06.html#cb47-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb47-33"><a href="Ch06.html#cb47-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb47-34"><a href="Ch06.html#cb47-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb47-35"><a href="Ch06.html#cb47-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb47-36"><a href="Ch06.html#cb47-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb47-37"><a href="Ch06.html#cb47-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb47-38"><a href="Ch06.html#cb47-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb47-39"><a href="Ch06.html#cb47-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb47-40"><a href="Ch06.html#cb47-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb47-41"><a href="Ch06.html#cb47-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_6.png" width="100%" /></p>
</div>
<div id="ch06.007" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> Climate_CHELSAv2.1-bio15_cell<a href="Ch06.html#ch06.007" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio15_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_7</code></p>
<p><strong>English name:</strong> Precipitation seasonality (kg m⁻²) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Nokrišņu sezonalitāte (kg m⁻²) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="Ch06.html#cb48-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb48-2"><a href="Ch06.html#cb48-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb48-3"><a href="Ch06.html#cb48-3" tabindex="-1"></a></span>
<span id="cb48-4"><a href="Ch06.html#cb48-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb48-5"><a href="Ch06.html#cb48-5" tabindex="-1"></a></span>
<span id="cb48-6"><a href="Ch06.html#cb48-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio15_cell.tif&quot;</span></span>
<span id="cb48-7"><a href="Ch06.html#cb48-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_7&quot;</span></span>
<span id="cb48-8"><a href="Ch06.html#cb48-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio15_cell.tif&quot;</span></span>
<span id="cb48-9"><a href="Ch06.html#cb48-9" tabindex="-1"></a></span>
<span id="cb48-10"><a href="Ch06.html#cb48-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb48-11"><a href="Ch06.html#cb48-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb48-12"><a href="Ch06.html#cb48-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb48-13"><a href="Ch06.html#cb48-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb48-14"><a href="Ch06.html#cb48-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb48-15"><a href="Ch06.html#cb48-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb48-16"><a href="Ch06.html#cb48-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb48-17"><a href="Ch06.html#cb48-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb48-18"><a href="Ch06.html#cb48-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb48-19"><a href="Ch06.html#cb48-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb48-20"><a href="Ch06.html#cb48-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb48-21"><a href="Ch06.html#cb48-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb48-22"><a href="Ch06.html#cb48-22" tabindex="-1"></a></span>
<span id="cb48-23"><a href="Ch06.html#cb48-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb48-24"><a href="Ch06.html#cb48-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb48-25"><a href="Ch06.html#cb48-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb48-26"><a href="Ch06.html#cb48-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb48-27"><a href="Ch06.html#cb48-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb48-28"><a href="Ch06.html#cb48-28" tabindex="-1"></a></span>
<span id="cb48-29"><a href="Ch06.html#cb48-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio15_cell.tif&quot;</span></span>
<span id="cb48-30"><a href="Ch06.html#cb48-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb48-31"><a href="Ch06.html#cb48-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb48-32"><a href="Ch06.html#cb48-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb48-33"><a href="Ch06.html#cb48-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb48-34"><a href="Ch06.html#cb48-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb48-35"><a href="Ch06.html#cb48-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb48-36"><a href="Ch06.html#cb48-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb48-37"><a href="Ch06.html#cb48-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb48-38"><a href="Ch06.html#cb48-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb48-39"><a href="Ch06.html#cb48-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb48-40"><a href="Ch06.html#cb48-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb48-41"><a href="Ch06.html#cb48-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_7.png" width="100%" /></p>
</div>
<div id="ch06.008" class="section level2 hasAnchor" number="6.8">
<h2><span class="header-section-number">6.8</span> Climate_CHELSAv2.1-bio16_cell<a href="Ch06.html#ch06.008" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio16_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_8</code></p>
<p><strong>English name:</strong> Mean monthly precipitation amount (kg m⁻² month⁻¹) of the wettest quarter (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Slapjākā ceturkšņa vidējais nokrišņu daudzums mēnesī (kg m⁻² mēnesī) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="Ch06.html#cb49-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb49-2"><a href="Ch06.html#cb49-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb49-3"><a href="Ch06.html#cb49-3" tabindex="-1"></a></span>
<span id="cb49-4"><a href="Ch06.html#cb49-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb49-5"><a href="Ch06.html#cb49-5" tabindex="-1"></a></span>
<span id="cb49-6"><a href="Ch06.html#cb49-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio16_cell.tif&quot;</span></span>
<span id="cb49-7"><a href="Ch06.html#cb49-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_8&quot;</span></span>
<span id="cb49-8"><a href="Ch06.html#cb49-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio16_cell.tif&quot;</span></span>
<span id="cb49-9"><a href="Ch06.html#cb49-9" tabindex="-1"></a></span>
<span id="cb49-10"><a href="Ch06.html#cb49-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb49-11"><a href="Ch06.html#cb49-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb49-12"><a href="Ch06.html#cb49-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb49-13"><a href="Ch06.html#cb49-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb49-14"><a href="Ch06.html#cb49-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb49-15"><a href="Ch06.html#cb49-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb49-16"><a href="Ch06.html#cb49-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb49-17"><a href="Ch06.html#cb49-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-18"><a href="Ch06.html#cb49-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-19"><a href="Ch06.html#cb49-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb49-20"><a href="Ch06.html#cb49-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-21"><a href="Ch06.html#cb49-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb49-22"><a href="Ch06.html#cb49-22" tabindex="-1"></a></span>
<span id="cb49-23"><a href="Ch06.html#cb49-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb49-24"><a href="Ch06.html#cb49-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb49-25"><a href="Ch06.html#cb49-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb49-26"><a href="Ch06.html#cb49-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb49-27"><a href="Ch06.html#cb49-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb49-28"><a href="Ch06.html#cb49-28" tabindex="-1"></a></span>
<span id="cb49-29"><a href="Ch06.html#cb49-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio16_cell.tif&quot;</span></span>
<span id="cb49-30"><a href="Ch06.html#cb49-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb49-31"><a href="Ch06.html#cb49-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb49-32"><a href="Ch06.html#cb49-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb49-33"><a href="Ch06.html#cb49-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb49-34"><a href="Ch06.html#cb49-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb49-35"><a href="Ch06.html#cb49-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb49-36"><a href="Ch06.html#cb49-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb49-37"><a href="Ch06.html#cb49-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb49-38"><a href="Ch06.html#cb49-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb49-39"><a href="Ch06.html#cb49-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb49-40"><a href="Ch06.html#cb49-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb49-41"><a href="Ch06.html#cb49-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_8.png" width="100%" /></p>
</div>
<div id="ch06.009" class="section level2 hasAnchor" number="6.9">
<h2><span class="header-section-number">6.9</span> Climate_CHELSAv2.1-bio17_cell<a href="Ch06.html#ch06.009" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio17_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_9</code></p>
<p><strong>English name:</strong> Mean monthly precipitation amount (kg m⁻² month⁻¹) of the driest quarter (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sausākā ceturkšņa vidējais nokrišņu daudzums mēnesī (kg m⁻² mēnesī) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="Ch06.html#cb50-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb50-2"><a href="Ch06.html#cb50-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb50-3"><a href="Ch06.html#cb50-3" tabindex="-1"></a></span>
<span id="cb50-4"><a href="Ch06.html#cb50-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb50-5"><a href="Ch06.html#cb50-5" tabindex="-1"></a></span>
<span id="cb50-6"><a href="Ch06.html#cb50-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio17_cell.tif&quot;</span></span>
<span id="cb50-7"><a href="Ch06.html#cb50-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_9&quot;</span></span>
<span id="cb50-8"><a href="Ch06.html#cb50-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio17_cell.tif&quot;</span></span>
<span id="cb50-9"><a href="Ch06.html#cb50-9" tabindex="-1"></a></span>
<span id="cb50-10"><a href="Ch06.html#cb50-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb50-11"><a href="Ch06.html#cb50-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb50-12"><a href="Ch06.html#cb50-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb50-13"><a href="Ch06.html#cb50-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb50-14"><a href="Ch06.html#cb50-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb50-15"><a href="Ch06.html#cb50-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb50-16"><a href="Ch06.html#cb50-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb50-17"><a href="Ch06.html#cb50-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb50-18"><a href="Ch06.html#cb50-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb50-19"><a href="Ch06.html#cb50-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb50-20"><a href="Ch06.html#cb50-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb50-21"><a href="Ch06.html#cb50-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb50-22"><a href="Ch06.html#cb50-22" tabindex="-1"></a></span>
<span id="cb50-23"><a href="Ch06.html#cb50-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb50-24"><a href="Ch06.html#cb50-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb50-25"><a href="Ch06.html#cb50-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb50-26"><a href="Ch06.html#cb50-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb50-27"><a href="Ch06.html#cb50-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb50-28"><a href="Ch06.html#cb50-28" tabindex="-1"></a></span>
<span id="cb50-29"><a href="Ch06.html#cb50-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio17_cell.tif&quot;</span></span>
<span id="cb50-30"><a href="Ch06.html#cb50-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb50-31"><a href="Ch06.html#cb50-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb50-32"><a href="Ch06.html#cb50-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb50-33"><a href="Ch06.html#cb50-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb50-34"><a href="Ch06.html#cb50-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb50-35"><a href="Ch06.html#cb50-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb50-36"><a href="Ch06.html#cb50-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb50-37"><a href="Ch06.html#cb50-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb50-38"><a href="Ch06.html#cb50-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb50-39"><a href="Ch06.html#cb50-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb50-40"><a href="Ch06.html#cb50-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb50-41"><a href="Ch06.html#cb50-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_9.png" width="100%" /></p>
</div>
<div id="ch06.010" class="section level2 hasAnchor" number="6.10">
<h2><span class="header-section-number">6.10</span> Climate_CHELSAv2.1-bio18_cell<a href="Ch06.html#ch06.010" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio18_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_10</code></p>
<p><strong>English name:</strong> Mean monthly precipitation amount (kg m⁻² month⁻¹) of the warmest quarter (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Siltākā ceturkšņa vidējais nokrišņu daudzuma mēnesī (kg m⁻² mēnesī) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="Ch06.html#cb51-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb51-2"><a href="Ch06.html#cb51-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb51-3"><a href="Ch06.html#cb51-3" tabindex="-1"></a></span>
<span id="cb51-4"><a href="Ch06.html#cb51-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb51-5"><a href="Ch06.html#cb51-5" tabindex="-1"></a></span>
<span id="cb51-6"><a href="Ch06.html#cb51-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio18_cell.tif&quot;</span></span>
<span id="cb51-7"><a href="Ch06.html#cb51-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_10&quot;</span></span>
<span id="cb51-8"><a href="Ch06.html#cb51-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio18_cell.tif&quot;</span></span>
<span id="cb51-9"><a href="Ch06.html#cb51-9" tabindex="-1"></a></span>
<span id="cb51-10"><a href="Ch06.html#cb51-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb51-11"><a href="Ch06.html#cb51-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb51-12"><a href="Ch06.html#cb51-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb51-13"><a href="Ch06.html#cb51-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb51-14"><a href="Ch06.html#cb51-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb51-15"><a href="Ch06.html#cb51-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb51-16"><a href="Ch06.html#cb51-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb51-17"><a href="Ch06.html#cb51-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb51-18"><a href="Ch06.html#cb51-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb51-19"><a href="Ch06.html#cb51-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb51-20"><a href="Ch06.html#cb51-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-21"><a href="Ch06.html#cb51-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb51-22"><a href="Ch06.html#cb51-22" tabindex="-1"></a></span>
<span id="cb51-23"><a href="Ch06.html#cb51-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb51-24"><a href="Ch06.html#cb51-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb51-25"><a href="Ch06.html#cb51-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb51-26"><a href="Ch06.html#cb51-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb51-27"><a href="Ch06.html#cb51-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb51-28"><a href="Ch06.html#cb51-28" tabindex="-1"></a></span>
<span id="cb51-29"><a href="Ch06.html#cb51-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio18_cell.tif&quot;</span></span>
<span id="cb51-30"><a href="Ch06.html#cb51-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb51-31"><a href="Ch06.html#cb51-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb51-32"><a href="Ch06.html#cb51-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb51-33"><a href="Ch06.html#cb51-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb51-34"><a href="Ch06.html#cb51-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb51-35"><a href="Ch06.html#cb51-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb51-36"><a href="Ch06.html#cb51-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb51-37"><a href="Ch06.html#cb51-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb51-38"><a href="Ch06.html#cb51-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb51-39"><a href="Ch06.html#cb51-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb51-40"><a href="Ch06.html#cb51-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb51-41"><a href="Ch06.html#cb51-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_10.png" width="100%" /></p>
</div>
<div id="ch06.011" class="section level2 hasAnchor" number="6.11">
<h2><span class="header-section-number">6.11</span> Climate_CHELSAv2.1-bio19_cell<a href="Ch06.html#ch06.011" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio19_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_11</code></p>
<p><strong>English name:</strong> Mean monthly precipitation amount (kg m⁻² month⁻¹) of the coldest quarter (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Aukstākā ceturkšņa vidējais nokrišņu daudzums mēnesī (kg m⁻² mēnesī) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="Ch06.html#cb52-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb52-2"><a href="Ch06.html#cb52-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb52-3"><a href="Ch06.html#cb52-3" tabindex="-1"></a></span>
<span id="cb52-4"><a href="Ch06.html#cb52-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb52-5"><a href="Ch06.html#cb52-5" tabindex="-1"></a></span>
<span id="cb52-6"><a href="Ch06.html#cb52-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio19_cell.tif&quot;</span></span>
<span id="cb52-7"><a href="Ch06.html#cb52-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_11&quot;</span></span>
<span id="cb52-8"><a href="Ch06.html#cb52-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio19_cell.tif&quot;</span></span>
<span id="cb52-9"><a href="Ch06.html#cb52-9" tabindex="-1"></a></span>
<span id="cb52-10"><a href="Ch06.html#cb52-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb52-11"><a href="Ch06.html#cb52-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb52-12"><a href="Ch06.html#cb52-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb52-13"><a href="Ch06.html#cb52-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb52-14"><a href="Ch06.html#cb52-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb52-15"><a href="Ch06.html#cb52-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb52-16"><a href="Ch06.html#cb52-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb52-17"><a href="Ch06.html#cb52-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb52-18"><a href="Ch06.html#cb52-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb52-19"><a href="Ch06.html#cb52-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb52-20"><a href="Ch06.html#cb52-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb52-21"><a href="Ch06.html#cb52-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb52-22"><a href="Ch06.html#cb52-22" tabindex="-1"></a></span>
<span id="cb52-23"><a href="Ch06.html#cb52-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb52-24"><a href="Ch06.html#cb52-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb52-25"><a href="Ch06.html#cb52-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb52-26"><a href="Ch06.html#cb52-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb52-27"><a href="Ch06.html#cb52-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb52-28"><a href="Ch06.html#cb52-28" tabindex="-1"></a></span>
<span id="cb52-29"><a href="Ch06.html#cb52-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio19_cell.tif&quot;</span></span>
<span id="cb52-30"><a href="Ch06.html#cb52-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb52-31"><a href="Ch06.html#cb52-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb52-32"><a href="Ch06.html#cb52-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb52-33"><a href="Ch06.html#cb52-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb52-34"><a href="Ch06.html#cb52-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb52-35"><a href="Ch06.html#cb52-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb52-36"><a href="Ch06.html#cb52-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb52-37"><a href="Ch06.html#cb52-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb52-38"><a href="Ch06.html#cb52-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb52-39"><a href="Ch06.html#cb52-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb52-40"><a href="Ch06.html#cb52-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb52-41"><a href="Ch06.html#cb52-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_11.png" width="100%" /></p>
</div>
<div id="ch06.012" class="section level2 hasAnchor" number="6.12">
<h2><span class="header-section-number">6.12</span> Climate_CHELSAv2.1-bio2_cell<a href="Ch06.html#ch06.012" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio2_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_12</code></p>
<p><strong>English name:</strong> Mean diurnal air temperature range (°C) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Diennakts temperatūru amplitūda (°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="Ch06.html#cb53-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb53-2"><a href="Ch06.html#cb53-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb53-3"><a href="Ch06.html#cb53-3" tabindex="-1"></a></span>
<span id="cb53-4"><a href="Ch06.html#cb53-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb53-5"><a href="Ch06.html#cb53-5" tabindex="-1"></a></span>
<span id="cb53-6"><a href="Ch06.html#cb53-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio2_cell.tif&quot;</span></span>
<span id="cb53-7"><a href="Ch06.html#cb53-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_12&quot;</span></span>
<span id="cb53-8"><a href="Ch06.html#cb53-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio2_cell.tif&quot;</span></span>
<span id="cb53-9"><a href="Ch06.html#cb53-9" tabindex="-1"></a></span>
<span id="cb53-10"><a href="Ch06.html#cb53-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb53-11"><a href="Ch06.html#cb53-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb53-12"><a href="Ch06.html#cb53-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb53-13"><a href="Ch06.html#cb53-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb53-14"><a href="Ch06.html#cb53-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb53-15"><a href="Ch06.html#cb53-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb53-16"><a href="Ch06.html#cb53-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb53-17"><a href="Ch06.html#cb53-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb53-18"><a href="Ch06.html#cb53-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb53-19"><a href="Ch06.html#cb53-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb53-20"><a href="Ch06.html#cb53-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-21"><a href="Ch06.html#cb53-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb53-22"><a href="Ch06.html#cb53-22" tabindex="-1"></a></span>
<span id="cb53-23"><a href="Ch06.html#cb53-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb53-24"><a href="Ch06.html#cb53-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb53-25"><a href="Ch06.html#cb53-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb53-26"><a href="Ch06.html#cb53-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb53-27"><a href="Ch06.html#cb53-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb53-28"><a href="Ch06.html#cb53-28" tabindex="-1"></a></span>
<span id="cb53-29"><a href="Ch06.html#cb53-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio2_cell.tif&quot;</span></span>
<span id="cb53-30"><a href="Ch06.html#cb53-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb53-31"><a href="Ch06.html#cb53-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb53-32"><a href="Ch06.html#cb53-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb53-33"><a href="Ch06.html#cb53-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb53-34"><a href="Ch06.html#cb53-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb53-35"><a href="Ch06.html#cb53-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb53-36"><a href="Ch06.html#cb53-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb53-37"><a href="Ch06.html#cb53-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb53-38"><a href="Ch06.html#cb53-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb53-39"><a href="Ch06.html#cb53-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb53-40"><a href="Ch06.html#cb53-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb53-41"><a href="Ch06.html#cb53-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_12.png" width="100%" /></p>
</div>
<div id="ch06.013" class="section level2 hasAnchor" number="6.13">
<h2><span class="header-section-number">6.13</span> Climate_CHELSAv2.1-bio3_cell<a href="Ch06.html#ch06.013" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio3_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_13</code></p>
<p><strong>English name:</strong> Isothermality (ratio of diurnal variation to annual variation in temperatures) (°C) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Izotermalitāte (attiecība starp diennakts un gada temperatūras svārstībām) (°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="Ch06.html#cb54-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb54-2"><a href="Ch06.html#cb54-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb54-3"><a href="Ch06.html#cb54-3" tabindex="-1"></a></span>
<span id="cb54-4"><a href="Ch06.html#cb54-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb54-5"><a href="Ch06.html#cb54-5" tabindex="-1"></a></span>
<span id="cb54-6"><a href="Ch06.html#cb54-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio3_cell.tif&quot;</span></span>
<span id="cb54-7"><a href="Ch06.html#cb54-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_13&quot;</span></span>
<span id="cb54-8"><a href="Ch06.html#cb54-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio3_cell.tif&quot;</span></span>
<span id="cb54-9"><a href="Ch06.html#cb54-9" tabindex="-1"></a></span>
<span id="cb54-10"><a href="Ch06.html#cb54-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb54-11"><a href="Ch06.html#cb54-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb54-12"><a href="Ch06.html#cb54-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb54-13"><a href="Ch06.html#cb54-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb54-14"><a href="Ch06.html#cb54-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb54-15"><a href="Ch06.html#cb54-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb54-16"><a href="Ch06.html#cb54-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb54-17"><a href="Ch06.html#cb54-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb54-18"><a href="Ch06.html#cb54-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb54-19"><a href="Ch06.html#cb54-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb54-20"><a href="Ch06.html#cb54-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb54-21"><a href="Ch06.html#cb54-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb54-22"><a href="Ch06.html#cb54-22" tabindex="-1"></a></span>
<span id="cb54-23"><a href="Ch06.html#cb54-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb54-24"><a href="Ch06.html#cb54-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb54-25"><a href="Ch06.html#cb54-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb54-26"><a href="Ch06.html#cb54-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb54-27"><a href="Ch06.html#cb54-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb54-28"><a href="Ch06.html#cb54-28" tabindex="-1"></a></span>
<span id="cb54-29"><a href="Ch06.html#cb54-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio3_cell.tif&quot;</span></span>
<span id="cb54-30"><a href="Ch06.html#cb54-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb54-31"><a href="Ch06.html#cb54-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb54-32"><a href="Ch06.html#cb54-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb54-33"><a href="Ch06.html#cb54-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb54-34"><a href="Ch06.html#cb54-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb54-35"><a href="Ch06.html#cb54-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb54-36"><a href="Ch06.html#cb54-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb54-37"><a href="Ch06.html#cb54-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb54-38"><a href="Ch06.html#cb54-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb54-39"><a href="Ch06.html#cb54-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb54-40"><a href="Ch06.html#cb54-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb54-41"><a href="Ch06.html#cb54-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_13.png" width="100%" /></p>
</div>
<div id="ch06.014" class="section level2 hasAnchor" number="6.14">
<h2><span class="header-section-number">6.14</span> Climate_CHELSAv2.1-bio4_cell<a href="Ch06.html#ch06.014" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio4_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_14</code></p>
<p><strong>English name:</strong> Temperature seasonality (standard deviation of the monthly mean temperatures) (°C/100) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Temperatūru sezonalitāte (mēneša vidējo temperatūru standartnovirze) (°C/100) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="Ch06.html#cb55-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb55-2"><a href="Ch06.html#cb55-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb55-3"><a href="Ch06.html#cb55-3" tabindex="-1"></a></span>
<span id="cb55-4"><a href="Ch06.html#cb55-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb55-5"><a href="Ch06.html#cb55-5" tabindex="-1"></a></span>
<span id="cb55-6"><a href="Ch06.html#cb55-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio4_cell.tif&quot;</span></span>
<span id="cb55-7"><a href="Ch06.html#cb55-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_14&quot;</span></span>
<span id="cb55-8"><a href="Ch06.html#cb55-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio4_cell.tif&quot;</span></span>
<span id="cb55-9"><a href="Ch06.html#cb55-9" tabindex="-1"></a></span>
<span id="cb55-10"><a href="Ch06.html#cb55-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb55-11"><a href="Ch06.html#cb55-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb55-12"><a href="Ch06.html#cb55-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb55-13"><a href="Ch06.html#cb55-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb55-14"><a href="Ch06.html#cb55-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb55-15"><a href="Ch06.html#cb55-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb55-16"><a href="Ch06.html#cb55-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb55-17"><a href="Ch06.html#cb55-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb55-18"><a href="Ch06.html#cb55-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb55-19"><a href="Ch06.html#cb55-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb55-20"><a href="Ch06.html#cb55-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-21"><a href="Ch06.html#cb55-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb55-22"><a href="Ch06.html#cb55-22" tabindex="-1"></a></span>
<span id="cb55-23"><a href="Ch06.html#cb55-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb55-24"><a href="Ch06.html#cb55-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb55-25"><a href="Ch06.html#cb55-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb55-26"><a href="Ch06.html#cb55-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb55-27"><a href="Ch06.html#cb55-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb55-28"><a href="Ch06.html#cb55-28" tabindex="-1"></a></span>
<span id="cb55-29"><a href="Ch06.html#cb55-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio4_cell.tif&quot;</span></span>
<span id="cb55-30"><a href="Ch06.html#cb55-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb55-31"><a href="Ch06.html#cb55-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb55-32"><a href="Ch06.html#cb55-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb55-33"><a href="Ch06.html#cb55-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb55-34"><a href="Ch06.html#cb55-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb55-35"><a href="Ch06.html#cb55-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb55-36"><a href="Ch06.html#cb55-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb55-37"><a href="Ch06.html#cb55-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb55-38"><a href="Ch06.html#cb55-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb55-39"><a href="Ch06.html#cb55-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb55-40"><a href="Ch06.html#cb55-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb55-41"><a href="Ch06.html#cb55-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_14.png" width="100%" /></p>
</div>
<div id="ch06.015" class="section level2 hasAnchor" number="6.15">
<h2><span class="header-section-number">6.15</span> Climate_CHELSAv2.1-bio5_cell<a href="Ch06.html#ch06.015" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio5_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_15</code></p>
<p><strong>English name:</strong> Mean daily maximum air temperature (°C) of the warmest month (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Siltākā mēneša vidējā ikdienas augstākā gaisa temperatūra (°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="Ch06.html#cb56-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb56-2"><a href="Ch06.html#cb56-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb56-3"><a href="Ch06.html#cb56-3" tabindex="-1"></a></span>
<span id="cb56-4"><a href="Ch06.html#cb56-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb56-5"><a href="Ch06.html#cb56-5" tabindex="-1"></a></span>
<span id="cb56-6"><a href="Ch06.html#cb56-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio5_cell.tif&quot;</span></span>
<span id="cb56-7"><a href="Ch06.html#cb56-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_15&quot;</span></span>
<span id="cb56-8"><a href="Ch06.html#cb56-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio5_cell.tif&quot;</span></span>
<span id="cb56-9"><a href="Ch06.html#cb56-9" tabindex="-1"></a></span>
<span id="cb56-10"><a href="Ch06.html#cb56-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb56-11"><a href="Ch06.html#cb56-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb56-12"><a href="Ch06.html#cb56-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb56-13"><a href="Ch06.html#cb56-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb56-14"><a href="Ch06.html#cb56-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb56-15"><a href="Ch06.html#cb56-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb56-16"><a href="Ch06.html#cb56-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb56-17"><a href="Ch06.html#cb56-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb56-18"><a href="Ch06.html#cb56-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb56-19"><a href="Ch06.html#cb56-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb56-20"><a href="Ch06.html#cb56-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-21"><a href="Ch06.html#cb56-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb56-22"><a href="Ch06.html#cb56-22" tabindex="-1"></a></span>
<span id="cb56-23"><a href="Ch06.html#cb56-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb56-24"><a href="Ch06.html#cb56-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb56-25"><a href="Ch06.html#cb56-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb56-26"><a href="Ch06.html#cb56-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb56-27"><a href="Ch06.html#cb56-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb56-28"><a href="Ch06.html#cb56-28" tabindex="-1"></a></span>
<span id="cb56-29"><a href="Ch06.html#cb56-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio5_cell.tif&quot;</span></span>
<span id="cb56-30"><a href="Ch06.html#cb56-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb56-31"><a href="Ch06.html#cb56-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb56-32"><a href="Ch06.html#cb56-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb56-33"><a href="Ch06.html#cb56-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb56-34"><a href="Ch06.html#cb56-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb56-35"><a href="Ch06.html#cb56-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb56-36"><a href="Ch06.html#cb56-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb56-37"><a href="Ch06.html#cb56-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb56-38"><a href="Ch06.html#cb56-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb56-39"><a href="Ch06.html#cb56-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb56-40"><a href="Ch06.html#cb56-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb56-41"><a href="Ch06.html#cb56-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_15.png" width="100%" /></p>
</div>
<div id="ch06.016" class="section level2 hasAnchor" number="6.16">
<h2><span class="header-section-number">6.16</span> Climate_CHELSAv2.1-bio6_cell<a href="Ch06.html#ch06.016" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio6_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_16</code></p>
<p><strong>English name:</strong> Mean daily minimum air temperature (°C) of the coldest month (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Aukstākā mēneša vidējā ikdienas zemākā gaisa temperatūra (°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="Ch06.html#cb57-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb57-2"><a href="Ch06.html#cb57-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb57-3"><a href="Ch06.html#cb57-3" tabindex="-1"></a></span>
<span id="cb57-4"><a href="Ch06.html#cb57-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb57-5"><a href="Ch06.html#cb57-5" tabindex="-1"></a></span>
<span id="cb57-6"><a href="Ch06.html#cb57-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio6_cell.tif&quot;</span></span>
<span id="cb57-7"><a href="Ch06.html#cb57-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_16&quot;</span></span>
<span id="cb57-8"><a href="Ch06.html#cb57-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio6_cell.tif&quot;</span></span>
<span id="cb57-9"><a href="Ch06.html#cb57-9" tabindex="-1"></a></span>
<span id="cb57-10"><a href="Ch06.html#cb57-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb57-11"><a href="Ch06.html#cb57-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb57-12"><a href="Ch06.html#cb57-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb57-13"><a href="Ch06.html#cb57-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb57-14"><a href="Ch06.html#cb57-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb57-15"><a href="Ch06.html#cb57-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb57-16"><a href="Ch06.html#cb57-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb57-17"><a href="Ch06.html#cb57-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb57-18"><a href="Ch06.html#cb57-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb57-19"><a href="Ch06.html#cb57-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb57-20"><a href="Ch06.html#cb57-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-21"><a href="Ch06.html#cb57-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb57-22"><a href="Ch06.html#cb57-22" tabindex="-1"></a></span>
<span id="cb57-23"><a href="Ch06.html#cb57-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb57-24"><a href="Ch06.html#cb57-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb57-25"><a href="Ch06.html#cb57-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb57-26"><a href="Ch06.html#cb57-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb57-27"><a href="Ch06.html#cb57-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb57-28"><a href="Ch06.html#cb57-28" tabindex="-1"></a></span>
<span id="cb57-29"><a href="Ch06.html#cb57-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio6_cell.tif&quot;</span></span>
<span id="cb57-30"><a href="Ch06.html#cb57-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb57-31"><a href="Ch06.html#cb57-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb57-32"><a href="Ch06.html#cb57-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb57-33"><a href="Ch06.html#cb57-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb57-34"><a href="Ch06.html#cb57-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb57-35"><a href="Ch06.html#cb57-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb57-36"><a href="Ch06.html#cb57-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb57-37"><a href="Ch06.html#cb57-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb57-38"><a href="Ch06.html#cb57-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb57-39"><a href="Ch06.html#cb57-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb57-40"><a href="Ch06.html#cb57-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb57-41"><a href="Ch06.html#cb57-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_16.png" width="100%" /></p>
</div>
<div id="ch06.017" class="section level2 hasAnchor" number="6.17">
<h2><span class="header-section-number">6.17</span> Climate_CHELSAv2.1-bio7_cell<a href="Ch06.html#ch06.017" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio7_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_17</code></p>
<p><strong>English name:</strong> Annual range of air temperature (°C) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada temperatūru amplitūda (°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="Ch06.html#cb58-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb58-2"><a href="Ch06.html#cb58-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb58-3"><a href="Ch06.html#cb58-3" tabindex="-1"></a></span>
<span id="cb58-4"><a href="Ch06.html#cb58-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb58-5"><a href="Ch06.html#cb58-5" tabindex="-1"></a></span>
<span id="cb58-6"><a href="Ch06.html#cb58-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio7_cell.tif&quot;</span></span>
<span id="cb58-7"><a href="Ch06.html#cb58-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_17&quot;</span></span>
<span id="cb58-8"><a href="Ch06.html#cb58-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio7_cell.tif&quot;</span></span>
<span id="cb58-9"><a href="Ch06.html#cb58-9" tabindex="-1"></a></span>
<span id="cb58-10"><a href="Ch06.html#cb58-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb58-11"><a href="Ch06.html#cb58-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb58-12"><a href="Ch06.html#cb58-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb58-13"><a href="Ch06.html#cb58-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb58-14"><a href="Ch06.html#cb58-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb58-15"><a href="Ch06.html#cb58-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb58-16"><a href="Ch06.html#cb58-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb58-17"><a href="Ch06.html#cb58-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb58-18"><a href="Ch06.html#cb58-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb58-19"><a href="Ch06.html#cb58-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb58-20"><a href="Ch06.html#cb58-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb58-21"><a href="Ch06.html#cb58-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb58-22"><a href="Ch06.html#cb58-22" tabindex="-1"></a></span>
<span id="cb58-23"><a href="Ch06.html#cb58-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb58-24"><a href="Ch06.html#cb58-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb58-25"><a href="Ch06.html#cb58-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb58-26"><a href="Ch06.html#cb58-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb58-27"><a href="Ch06.html#cb58-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb58-28"><a href="Ch06.html#cb58-28" tabindex="-1"></a></span>
<span id="cb58-29"><a href="Ch06.html#cb58-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio7_cell.tif&quot;</span></span>
<span id="cb58-30"><a href="Ch06.html#cb58-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb58-31"><a href="Ch06.html#cb58-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb58-32"><a href="Ch06.html#cb58-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb58-33"><a href="Ch06.html#cb58-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb58-34"><a href="Ch06.html#cb58-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb58-35"><a href="Ch06.html#cb58-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb58-36"><a href="Ch06.html#cb58-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb58-37"><a href="Ch06.html#cb58-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb58-38"><a href="Ch06.html#cb58-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb58-39"><a href="Ch06.html#cb58-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb58-40"><a href="Ch06.html#cb58-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb58-41"><a href="Ch06.html#cb58-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_17.png" width="100%" /></p>
</div>
<div id="ch06.018" class="section level2 hasAnchor" number="6.18">
<h2><span class="header-section-number">6.18</span> Climate_CHELSAv2.1-bio8_cell<a href="Ch06.html#ch06.018" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio8_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_18</code></p>
<p><strong>English name:</strong> Mean daily mean air temperatures (°C) of the wettest quarter (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Slapjākā ceturkšņa vidējā ikdienas vidējā gaisa temperatūra (°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="Ch06.html#cb59-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb59-2"><a href="Ch06.html#cb59-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb59-3"><a href="Ch06.html#cb59-3" tabindex="-1"></a></span>
<span id="cb59-4"><a href="Ch06.html#cb59-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb59-5"><a href="Ch06.html#cb59-5" tabindex="-1"></a></span>
<span id="cb59-6"><a href="Ch06.html#cb59-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio8_cell.tif&quot;</span></span>
<span id="cb59-7"><a href="Ch06.html#cb59-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_18&quot;</span></span>
<span id="cb59-8"><a href="Ch06.html#cb59-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio8_cell.tif&quot;</span></span>
<span id="cb59-9"><a href="Ch06.html#cb59-9" tabindex="-1"></a></span>
<span id="cb59-10"><a href="Ch06.html#cb59-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb59-11"><a href="Ch06.html#cb59-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb59-12"><a href="Ch06.html#cb59-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb59-13"><a href="Ch06.html#cb59-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb59-14"><a href="Ch06.html#cb59-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb59-15"><a href="Ch06.html#cb59-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb59-16"><a href="Ch06.html#cb59-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb59-17"><a href="Ch06.html#cb59-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb59-18"><a href="Ch06.html#cb59-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb59-19"><a href="Ch06.html#cb59-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb59-20"><a href="Ch06.html#cb59-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb59-21"><a href="Ch06.html#cb59-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb59-22"><a href="Ch06.html#cb59-22" tabindex="-1"></a></span>
<span id="cb59-23"><a href="Ch06.html#cb59-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb59-24"><a href="Ch06.html#cb59-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb59-25"><a href="Ch06.html#cb59-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb59-26"><a href="Ch06.html#cb59-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb59-27"><a href="Ch06.html#cb59-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb59-28"><a href="Ch06.html#cb59-28" tabindex="-1"></a></span>
<span id="cb59-29"><a href="Ch06.html#cb59-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio8_cell.tif&quot;</span></span>
<span id="cb59-30"><a href="Ch06.html#cb59-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb59-31"><a href="Ch06.html#cb59-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb59-32"><a href="Ch06.html#cb59-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb59-33"><a href="Ch06.html#cb59-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb59-34"><a href="Ch06.html#cb59-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb59-35"><a href="Ch06.html#cb59-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb59-36"><a href="Ch06.html#cb59-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb59-37"><a href="Ch06.html#cb59-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb59-38"><a href="Ch06.html#cb59-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb59-39"><a href="Ch06.html#cb59-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb59-40"><a href="Ch06.html#cb59-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb59-41"><a href="Ch06.html#cb59-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_18.png" width="100%" /></p>
</div>
<div id="ch06.019" class="section level2 hasAnchor" number="6.19">
<h2><span class="header-section-number">6.19</span> Climate_CHELSAv2.1-bio9_cell<a href="Ch06.html#ch06.019" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-bio9_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_19</code></p>
<p><strong>English name:</strong> Mean daily mean air temperatures (°C) of the driest quarter (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sausākā ceturkšņa vidējā ikdienas vidējā gaisa temperatūra (°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="Ch06.html#cb60-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb60-2"><a href="Ch06.html#cb60-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb60-3"><a href="Ch06.html#cb60-3" tabindex="-1"></a></span>
<span id="cb60-4"><a href="Ch06.html#cb60-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb60-5"><a href="Ch06.html#cb60-5" tabindex="-1"></a></span>
<span id="cb60-6"><a href="Ch06.html#cb60-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio9_cell.tif&quot;</span></span>
<span id="cb60-7"><a href="Ch06.html#cb60-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_19&quot;</span></span>
<span id="cb60-8"><a href="Ch06.html#cb60-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-bio9_cell.tif&quot;</span></span>
<span id="cb60-9"><a href="Ch06.html#cb60-9" tabindex="-1"></a></span>
<span id="cb60-10"><a href="Ch06.html#cb60-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb60-11"><a href="Ch06.html#cb60-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb60-12"><a href="Ch06.html#cb60-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb60-13"><a href="Ch06.html#cb60-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb60-14"><a href="Ch06.html#cb60-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb60-15"><a href="Ch06.html#cb60-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb60-16"><a href="Ch06.html#cb60-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb60-17"><a href="Ch06.html#cb60-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb60-18"><a href="Ch06.html#cb60-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb60-19"><a href="Ch06.html#cb60-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb60-20"><a href="Ch06.html#cb60-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb60-21"><a href="Ch06.html#cb60-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb60-22"><a href="Ch06.html#cb60-22" tabindex="-1"></a></span>
<span id="cb60-23"><a href="Ch06.html#cb60-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb60-24"><a href="Ch06.html#cb60-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb60-25"><a href="Ch06.html#cb60-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb60-26"><a href="Ch06.html#cb60-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb60-27"><a href="Ch06.html#cb60-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb60-28"><a href="Ch06.html#cb60-28" tabindex="-1"></a></span>
<span id="cb60-29"><a href="Ch06.html#cb60-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-bio9_cell.tif&quot;</span></span>
<span id="cb60-30"><a href="Ch06.html#cb60-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb60-31"><a href="Ch06.html#cb60-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb60-32"><a href="Ch06.html#cb60-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb60-33"><a href="Ch06.html#cb60-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb60-34"><a href="Ch06.html#cb60-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb60-35"><a href="Ch06.html#cb60-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb60-36"><a href="Ch06.html#cb60-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb60-37"><a href="Ch06.html#cb60-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb60-38"><a href="Ch06.html#cb60-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb60-39"><a href="Ch06.html#cb60-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb60-40"><a href="Ch06.html#cb60-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb60-41"><a href="Ch06.html#cb60-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_19.png" width="100%" /></p>
</div>
<div id="ch06.020" class="section level2 hasAnchor" number="6.20">
<h2><span class="header-section-number">6.20</span> Climate_CHELSAv2.1-clt-max_cell<a href="Ch06.html#ch06.020" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-clt-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_20</code></p>
<p><strong>English name:</strong> Maximum monthly cloud area fraction (%) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Maksimālais mēneša vidējais mākoņu segums (%) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="Ch06.html#cb61-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb61-2"><a href="Ch06.html#cb61-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb61-3"><a href="Ch06.html#cb61-3" tabindex="-1"></a></span>
<span id="cb61-4"><a href="Ch06.html#cb61-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb61-5"><a href="Ch06.html#cb61-5" tabindex="-1"></a></span>
<span id="cb61-6"><a href="Ch06.html#cb61-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-clt-max_cell.tif&quot;</span></span>
<span id="cb61-7"><a href="Ch06.html#cb61-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_20&quot;</span></span>
<span id="cb61-8"><a href="Ch06.html#cb61-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-clt-max_cell.tif&quot;</span></span>
<span id="cb61-9"><a href="Ch06.html#cb61-9" tabindex="-1"></a></span>
<span id="cb61-10"><a href="Ch06.html#cb61-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb61-11"><a href="Ch06.html#cb61-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb61-12"><a href="Ch06.html#cb61-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb61-13"><a href="Ch06.html#cb61-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb61-14"><a href="Ch06.html#cb61-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb61-15"><a href="Ch06.html#cb61-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb61-16"><a href="Ch06.html#cb61-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb61-17"><a href="Ch06.html#cb61-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb61-18"><a href="Ch06.html#cb61-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb61-19"><a href="Ch06.html#cb61-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb61-20"><a href="Ch06.html#cb61-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-21"><a href="Ch06.html#cb61-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb61-22"><a href="Ch06.html#cb61-22" tabindex="-1"></a></span>
<span id="cb61-23"><a href="Ch06.html#cb61-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb61-24"><a href="Ch06.html#cb61-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb61-25"><a href="Ch06.html#cb61-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb61-26"><a href="Ch06.html#cb61-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb61-27"><a href="Ch06.html#cb61-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb61-28"><a href="Ch06.html#cb61-28" tabindex="-1"></a></span>
<span id="cb61-29"><a href="Ch06.html#cb61-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-clt-max_cell.tif&quot;</span></span>
<span id="cb61-30"><a href="Ch06.html#cb61-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb61-31"><a href="Ch06.html#cb61-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb61-32"><a href="Ch06.html#cb61-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb61-33"><a href="Ch06.html#cb61-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb61-34"><a href="Ch06.html#cb61-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb61-35"><a href="Ch06.html#cb61-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb61-36"><a href="Ch06.html#cb61-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb61-37"><a href="Ch06.html#cb61-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb61-38"><a href="Ch06.html#cb61-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb61-39"><a href="Ch06.html#cb61-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb61-40"><a href="Ch06.html#cb61-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb61-41"><a href="Ch06.html#cb61-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_20.png" width="100%" /></p>
</div>
<div id="ch06.021" class="section level2 hasAnchor" number="6.21">
<h2><span class="header-section-number">6.21</span> Climate_CHELSAv2.1-clt-mean_cell<a href="Ch06.html#ch06.021" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-clt-mean_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_21</code></p>
<p><strong>English name:</strong> Mean monthly cloud area fraction (%) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vidējais mākoņu segums (%) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="Ch06.html#cb62-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb62-2"><a href="Ch06.html#cb62-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb62-3"><a href="Ch06.html#cb62-3" tabindex="-1"></a></span>
<span id="cb62-4"><a href="Ch06.html#cb62-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb62-5"><a href="Ch06.html#cb62-5" tabindex="-1"></a></span>
<span id="cb62-6"><a href="Ch06.html#cb62-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-clt-mean_cell.tif&quot;</span></span>
<span id="cb62-7"><a href="Ch06.html#cb62-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_21&quot;</span></span>
<span id="cb62-8"><a href="Ch06.html#cb62-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-clt-mean_cell.tif&quot;</span></span>
<span id="cb62-9"><a href="Ch06.html#cb62-9" tabindex="-1"></a></span>
<span id="cb62-10"><a href="Ch06.html#cb62-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb62-11"><a href="Ch06.html#cb62-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb62-12"><a href="Ch06.html#cb62-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb62-13"><a href="Ch06.html#cb62-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb62-14"><a href="Ch06.html#cb62-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb62-15"><a href="Ch06.html#cb62-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb62-16"><a href="Ch06.html#cb62-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb62-17"><a href="Ch06.html#cb62-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-18"><a href="Ch06.html#cb62-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-19"><a href="Ch06.html#cb62-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb62-20"><a href="Ch06.html#cb62-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-21"><a href="Ch06.html#cb62-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb62-22"><a href="Ch06.html#cb62-22" tabindex="-1"></a></span>
<span id="cb62-23"><a href="Ch06.html#cb62-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb62-24"><a href="Ch06.html#cb62-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb62-25"><a href="Ch06.html#cb62-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb62-26"><a href="Ch06.html#cb62-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb62-27"><a href="Ch06.html#cb62-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb62-28"><a href="Ch06.html#cb62-28" tabindex="-1"></a></span>
<span id="cb62-29"><a href="Ch06.html#cb62-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-clt-mean_cell.tif&quot;</span></span>
<span id="cb62-30"><a href="Ch06.html#cb62-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb62-31"><a href="Ch06.html#cb62-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb62-32"><a href="Ch06.html#cb62-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb62-33"><a href="Ch06.html#cb62-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb62-34"><a href="Ch06.html#cb62-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb62-35"><a href="Ch06.html#cb62-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb62-36"><a href="Ch06.html#cb62-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb62-37"><a href="Ch06.html#cb62-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb62-38"><a href="Ch06.html#cb62-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb62-39"><a href="Ch06.html#cb62-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb62-40"><a href="Ch06.html#cb62-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb62-41"><a href="Ch06.html#cb62-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_21.png" width="100%" /></p>
</div>
<div id="ch06.022" class="section level2 hasAnchor" number="6.22">
<h2><span class="header-section-number">6.22</span> Climate_CHELSAv2.1-clt-min_cell<a href="Ch06.html#ch06.022" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-clt-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_22</code></p>
<p><strong>English name:</strong> Minimum monthly cloud area fraction (%) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Minimālais mēneša vidējais mākoņu segums (%) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="Ch06.html#cb63-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb63-2"><a href="Ch06.html#cb63-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb63-3"><a href="Ch06.html#cb63-3" tabindex="-1"></a></span>
<span id="cb63-4"><a href="Ch06.html#cb63-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb63-5"><a href="Ch06.html#cb63-5" tabindex="-1"></a></span>
<span id="cb63-6"><a href="Ch06.html#cb63-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-clt-min_cell.tif&quot;</span></span>
<span id="cb63-7"><a href="Ch06.html#cb63-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_22&quot;</span></span>
<span id="cb63-8"><a href="Ch06.html#cb63-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-clt-min_cell.tif&quot;</span></span>
<span id="cb63-9"><a href="Ch06.html#cb63-9" tabindex="-1"></a></span>
<span id="cb63-10"><a href="Ch06.html#cb63-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb63-11"><a href="Ch06.html#cb63-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb63-12"><a href="Ch06.html#cb63-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb63-13"><a href="Ch06.html#cb63-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb63-14"><a href="Ch06.html#cb63-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb63-15"><a href="Ch06.html#cb63-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb63-16"><a href="Ch06.html#cb63-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb63-17"><a href="Ch06.html#cb63-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb63-18"><a href="Ch06.html#cb63-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb63-19"><a href="Ch06.html#cb63-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb63-20"><a href="Ch06.html#cb63-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb63-21"><a href="Ch06.html#cb63-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb63-22"><a href="Ch06.html#cb63-22" tabindex="-1"></a></span>
<span id="cb63-23"><a href="Ch06.html#cb63-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb63-24"><a href="Ch06.html#cb63-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb63-25"><a href="Ch06.html#cb63-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb63-26"><a href="Ch06.html#cb63-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb63-27"><a href="Ch06.html#cb63-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb63-28"><a href="Ch06.html#cb63-28" tabindex="-1"></a></span>
<span id="cb63-29"><a href="Ch06.html#cb63-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-clt-min_cell.tif&quot;</span></span>
<span id="cb63-30"><a href="Ch06.html#cb63-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb63-31"><a href="Ch06.html#cb63-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb63-32"><a href="Ch06.html#cb63-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb63-33"><a href="Ch06.html#cb63-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb63-34"><a href="Ch06.html#cb63-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb63-35"><a href="Ch06.html#cb63-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb63-36"><a href="Ch06.html#cb63-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb63-37"><a href="Ch06.html#cb63-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb63-38"><a href="Ch06.html#cb63-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb63-39"><a href="Ch06.html#cb63-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb63-40"><a href="Ch06.html#cb63-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb63-41"><a href="Ch06.html#cb63-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_22.png" width="100%" /></p>
</div>
<div id="ch06.023" class="section level2 hasAnchor" number="6.23">
<h2><span class="header-section-number">6.23</span> Climate_CHELSAv2.1-clt-range_cell<a href="Ch06.html#ch06.023" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-clt-range_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_23</code></p>
<p><strong>English name:</strong> Annual range of monthly cloud area fraction (%) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada mākoņu seguma amplitūda (%) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="Ch06.html#cb64-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb64-2"><a href="Ch06.html#cb64-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb64-3"><a href="Ch06.html#cb64-3" tabindex="-1"></a></span>
<span id="cb64-4"><a href="Ch06.html#cb64-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb64-5"><a href="Ch06.html#cb64-5" tabindex="-1"></a></span>
<span id="cb64-6"><a href="Ch06.html#cb64-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-clt-range_cell.tif&quot;</span></span>
<span id="cb64-7"><a href="Ch06.html#cb64-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_23&quot;</span></span>
<span id="cb64-8"><a href="Ch06.html#cb64-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-clt-range_cell.tif&quot;</span></span>
<span id="cb64-9"><a href="Ch06.html#cb64-9" tabindex="-1"></a></span>
<span id="cb64-10"><a href="Ch06.html#cb64-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb64-11"><a href="Ch06.html#cb64-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb64-12"><a href="Ch06.html#cb64-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb64-13"><a href="Ch06.html#cb64-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb64-14"><a href="Ch06.html#cb64-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb64-15"><a href="Ch06.html#cb64-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb64-16"><a href="Ch06.html#cb64-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb64-17"><a href="Ch06.html#cb64-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb64-18"><a href="Ch06.html#cb64-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb64-19"><a href="Ch06.html#cb64-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb64-20"><a href="Ch06.html#cb64-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb64-21"><a href="Ch06.html#cb64-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb64-22"><a href="Ch06.html#cb64-22" tabindex="-1"></a></span>
<span id="cb64-23"><a href="Ch06.html#cb64-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb64-24"><a href="Ch06.html#cb64-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb64-25"><a href="Ch06.html#cb64-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb64-26"><a href="Ch06.html#cb64-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb64-27"><a href="Ch06.html#cb64-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb64-28"><a href="Ch06.html#cb64-28" tabindex="-1"></a></span>
<span id="cb64-29"><a href="Ch06.html#cb64-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-clt-range_cell.tif&quot;</span></span>
<span id="cb64-30"><a href="Ch06.html#cb64-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb64-31"><a href="Ch06.html#cb64-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb64-32"><a href="Ch06.html#cb64-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb64-33"><a href="Ch06.html#cb64-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb64-34"><a href="Ch06.html#cb64-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb64-35"><a href="Ch06.html#cb64-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb64-36"><a href="Ch06.html#cb64-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb64-37"><a href="Ch06.html#cb64-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb64-38"><a href="Ch06.html#cb64-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb64-39"><a href="Ch06.html#cb64-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb64-40"><a href="Ch06.html#cb64-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb64-41"><a href="Ch06.html#cb64-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_23.png" width="100%" /></p>
</div>
<div id="ch06.024" class="section level2 hasAnchor" number="6.24">
<h2><span class="header-section-number">6.24</span> Climate_CHELSAv2.1-cmi-max_cell<a href="Ch06.html#ch06.024" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-cmi-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_24</code></p>
<p><strong>English name:</strong> Maximum monthly climate moisture index (kg m⁻² month⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Maksimālais mēneša vidējais klimata mitruma indekss (kg m⁻² month⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="Ch06.html#cb65-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb65-2"><a href="Ch06.html#cb65-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb65-3"><a href="Ch06.html#cb65-3" tabindex="-1"></a></span>
<span id="cb65-4"><a href="Ch06.html#cb65-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb65-5"><a href="Ch06.html#cb65-5" tabindex="-1"></a></span>
<span id="cb65-6"><a href="Ch06.html#cb65-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-cmi-max_cell.tif&quot;</span></span>
<span id="cb65-7"><a href="Ch06.html#cb65-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_24&quot;</span></span>
<span id="cb65-8"><a href="Ch06.html#cb65-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-cmi-max_cell.tif&quot;</span></span>
<span id="cb65-9"><a href="Ch06.html#cb65-9" tabindex="-1"></a></span>
<span id="cb65-10"><a href="Ch06.html#cb65-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb65-11"><a href="Ch06.html#cb65-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb65-12"><a href="Ch06.html#cb65-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb65-13"><a href="Ch06.html#cb65-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb65-14"><a href="Ch06.html#cb65-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb65-15"><a href="Ch06.html#cb65-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb65-16"><a href="Ch06.html#cb65-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb65-17"><a href="Ch06.html#cb65-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb65-18"><a href="Ch06.html#cb65-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb65-19"><a href="Ch06.html#cb65-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb65-20"><a href="Ch06.html#cb65-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-21"><a href="Ch06.html#cb65-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb65-22"><a href="Ch06.html#cb65-22" tabindex="-1"></a></span>
<span id="cb65-23"><a href="Ch06.html#cb65-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb65-24"><a href="Ch06.html#cb65-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb65-25"><a href="Ch06.html#cb65-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb65-26"><a href="Ch06.html#cb65-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb65-27"><a href="Ch06.html#cb65-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb65-28"><a href="Ch06.html#cb65-28" tabindex="-1"></a></span>
<span id="cb65-29"><a href="Ch06.html#cb65-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-cmi-max_cell.tif&quot;</span></span>
<span id="cb65-30"><a href="Ch06.html#cb65-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb65-31"><a href="Ch06.html#cb65-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb65-32"><a href="Ch06.html#cb65-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb65-33"><a href="Ch06.html#cb65-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb65-34"><a href="Ch06.html#cb65-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb65-35"><a href="Ch06.html#cb65-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb65-36"><a href="Ch06.html#cb65-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb65-37"><a href="Ch06.html#cb65-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb65-38"><a href="Ch06.html#cb65-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb65-39"><a href="Ch06.html#cb65-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb65-40"><a href="Ch06.html#cb65-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb65-41"><a href="Ch06.html#cb65-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_24.png" width="100%" /></p>
</div>
<div id="ch06.025" class="section level2 hasAnchor" number="6.25">
<h2><span class="header-section-number">6.25</span> Climate_CHELSAv2.1-cmi-mean_cell<a href="Ch06.html#ch06.025" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-cmi-mean_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_25</code></p>
<p><strong>English name:</strong> Mean monthly climate moisture index (kg m⁻² month⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vidējais klimata mitruma indekss (kg m⁻² month⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="Ch06.html#cb66-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb66-2"><a href="Ch06.html#cb66-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb66-3"><a href="Ch06.html#cb66-3" tabindex="-1"></a></span>
<span id="cb66-4"><a href="Ch06.html#cb66-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb66-5"><a href="Ch06.html#cb66-5" tabindex="-1"></a></span>
<span id="cb66-6"><a href="Ch06.html#cb66-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-cmi-mean_cell.tif&quot;</span></span>
<span id="cb66-7"><a href="Ch06.html#cb66-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_25&quot;</span></span>
<span id="cb66-8"><a href="Ch06.html#cb66-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-cmi-mean_cell.tif&quot;</span></span>
<span id="cb66-9"><a href="Ch06.html#cb66-9" tabindex="-1"></a></span>
<span id="cb66-10"><a href="Ch06.html#cb66-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb66-11"><a href="Ch06.html#cb66-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb66-12"><a href="Ch06.html#cb66-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb66-13"><a href="Ch06.html#cb66-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb66-14"><a href="Ch06.html#cb66-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb66-15"><a href="Ch06.html#cb66-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb66-16"><a href="Ch06.html#cb66-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb66-17"><a href="Ch06.html#cb66-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb66-18"><a href="Ch06.html#cb66-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb66-19"><a href="Ch06.html#cb66-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb66-20"><a href="Ch06.html#cb66-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb66-21"><a href="Ch06.html#cb66-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb66-22"><a href="Ch06.html#cb66-22" tabindex="-1"></a></span>
<span id="cb66-23"><a href="Ch06.html#cb66-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb66-24"><a href="Ch06.html#cb66-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb66-25"><a href="Ch06.html#cb66-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb66-26"><a href="Ch06.html#cb66-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb66-27"><a href="Ch06.html#cb66-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb66-28"><a href="Ch06.html#cb66-28" tabindex="-1"></a></span>
<span id="cb66-29"><a href="Ch06.html#cb66-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-cmi-mean_cell.tif&quot;</span></span>
<span id="cb66-30"><a href="Ch06.html#cb66-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb66-31"><a href="Ch06.html#cb66-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb66-32"><a href="Ch06.html#cb66-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb66-33"><a href="Ch06.html#cb66-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb66-34"><a href="Ch06.html#cb66-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb66-35"><a href="Ch06.html#cb66-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb66-36"><a href="Ch06.html#cb66-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb66-37"><a href="Ch06.html#cb66-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb66-38"><a href="Ch06.html#cb66-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb66-39"><a href="Ch06.html#cb66-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb66-40"><a href="Ch06.html#cb66-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb66-41"><a href="Ch06.html#cb66-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_25.png" width="100%" /></p>
</div>
<div id="ch06.026" class="section level2 hasAnchor" number="6.26">
<h2><span class="header-section-number">6.26</span> Climate_CHELSAv2.1-cmi-min_cell<a href="Ch06.html#ch06.026" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-cmi-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_26</code></p>
<p><strong>English name:</strong> Minimum monthly climate moisture index (kg m⁻² month⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Minimālais mēneša vidējais klimata mitruma indekss (kg m⁻² month⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="Ch06.html#cb67-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb67-2"><a href="Ch06.html#cb67-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb67-3"><a href="Ch06.html#cb67-3" tabindex="-1"></a></span>
<span id="cb67-4"><a href="Ch06.html#cb67-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb67-5"><a href="Ch06.html#cb67-5" tabindex="-1"></a></span>
<span id="cb67-6"><a href="Ch06.html#cb67-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-cmi-min_cell.tif&quot;</span></span>
<span id="cb67-7"><a href="Ch06.html#cb67-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_26&quot;</span></span>
<span id="cb67-8"><a href="Ch06.html#cb67-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-cmi-min_cell.tif&quot;</span></span>
<span id="cb67-9"><a href="Ch06.html#cb67-9" tabindex="-1"></a></span>
<span id="cb67-10"><a href="Ch06.html#cb67-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb67-11"><a href="Ch06.html#cb67-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb67-12"><a href="Ch06.html#cb67-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb67-13"><a href="Ch06.html#cb67-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb67-14"><a href="Ch06.html#cb67-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb67-15"><a href="Ch06.html#cb67-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb67-16"><a href="Ch06.html#cb67-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb67-17"><a href="Ch06.html#cb67-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb67-18"><a href="Ch06.html#cb67-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb67-19"><a href="Ch06.html#cb67-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb67-20"><a href="Ch06.html#cb67-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb67-21"><a href="Ch06.html#cb67-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb67-22"><a href="Ch06.html#cb67-22" tabindex="-1"></a></span>
<span id="cb67-23"><a href="Ch06.html#cb67-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb67-24"><a href="Ch06.html#cb67-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb67-25"><a href="Ch06.html#cb67-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb67-26"><a href="Ch06.html#cb67-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb67-27"><a href="Ch06.html#cb67-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb67-28"><a href="Ch06.html#cb67-28" tabindex="-1"></a></span>
<span id="cb67-29"><a href="Ch06.html#cb67-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-cmi-min_cell.tif&quot;</span></span>
<span id="cb67-30"><a href="Ch06.html#cb67-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb67-31"><a href="Ch06.html#cb67-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb67-32"><a href="Ch06.html#cb67-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb67-33"><a href="Ch06.html#cb67-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb67-34"><a href="Ch06.html#cb67-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb67-35"><a href="Ch06.html#cb67-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb67-36"><a href="Ch06.html#cb67-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb67-37"><a href="Ch06.html#cb67-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb67-38"><a href="Ch06.html#cb67-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb67-39"><a href="Ch06.html#cb67-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb67-40"><a href="Ch06.html#cb67-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb67-41"><a href="Ch06.html#cb67-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_26.png" width="100%" /></p>
</div>
<div id="ch06.027" class="section level2 hasAnchor" number="6.27">
<h2><span class="header-section-number">6.27</span> Climate_CHELSAv2.1-cmi-range_cell<a href="Ch06.html#ch06.027" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-cmi-range_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_27</code></p>
<p><strong>English name:</strong> Annual range of monthly climate moisture index (kg m⁻² month⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada klimata mitruma indeksa amplitūda (kg m⁻² month⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="Ch06.html#cb68-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb68-2"><a href="Ch06.html#cb68-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb68-3"><a href="Ch06.html#cb68-3" tabindex="-1"></a></span>
<span id="cb68-4"><a href="Ch06.html#cb68-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb68-5"><a href="Ch06.html#cb68-5" tabindex="-1"></a></span>
<span id="cb68-6"><a href="Ch06.html#cb68-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-cmi-range_cell.tif&quot;</span></span>
<span id="cb68-7"><a href="Ch06.html#cb68-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_27&quot;</span></span>
<span id="cb68-8"><a href="Ch06.html#cb68-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-cmi-range_cell.tif&quot;</span></span>
<span id="cb68-9"><a href="Ch06.html#cb68-9" tabindex="-1"></a></span>
<span id="cb68-10"><a href="Ch06.html#cb68-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb68-11"><a href="Ch06.html#cb68-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb68-12"><a href="Ch06.html#cb68-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb68-13"><a href="Ch06.html#cb68-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb68-14"><a href="Ch06.html#cb68-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb68-15"><a href="Ch06.html#cb68-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb68-16"><a href="Ch06.html#cb68-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb68-17"><a href="Ch06.html#cb68-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb68-18"><a href="Ch06.html#cb68-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb68-19"><a href="Ch06.html#cb68-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb68-20"><a href="Ch06.html#cb68-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-21"><a href="Ch06.html#cb68-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb68-22"><a href="Ch06.html#cb68-22" tabindex="-1"></a></span>
<span id="cb68-23"><a href="Ch06.html#cb68-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb68-24"><a href="Ch06.html#cb68-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb68-25"><a href="Ch06.html#cb68-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb68-26"><a href="Ch06.html#cb68-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb68-27"><a href="Ch06.html#cb68-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb68-28"><a href="Ch06.html#cb68-28" tabindex="-1"></a></span>
<span id="cb68-29"><a href="Ch06.html#cb68-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-cmi-range_cell.tif&quot;</span></span>
<span id="cb68-30"><a href="Ch06.html#cb68-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb68-31"><a href="Ch06.html#cb68-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb68-32"><a href="Ch06.html#cb68-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb68-33"><a href="Ch06.html#cb68-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb68-34"><a href="Ch06.html#cb68-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb68-35"><a href="Ch06.html#cb68-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb68-36"><a href="Ch06.html#cb68-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb68-37"><a href="Ch06.html#cb68-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb68-38"><a href="Ch06.html#cb68-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb68-39"><a href="Ch06.html#cb68-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb68-40"><a href="Ch06.html#cb68-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb68-41"><a href="Ch06.html#cb68-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_27.png" width="100%" /></p>
</div>
<div id="ch06.028" class="section level2 hasAnchor" number="6.28">
<h2><span class="header-section-number">6.28</span> Climate_CHELSAv2.1-fcf_cell<a href="Ch06.html#ch06.028" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-fcf_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_28</code></p>
<p><strong>English name:</strong> Frost change frequency (number of events in which tmin or tmax go above or below 0°C) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sasalšanas gadījumu biežums (zemākā vai augstākā temperatūra šķērso 0°C) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="Ch06.html#cb69-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb69-2"><a href="Ch06.html#cb69-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb69-3"><a href="Ch06.html#cb69-3" tabindex="-1"></a></span>
<span id="cb69-4"><a href="Ch06.html#cb69-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb69-5"><a href="Ch06.html#cb69-5" tabindex="-1"></a></span>
<span id="cb69-6"><a href="Ch06.html#cb69-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-fcf_cell.tif&quot;</span></span>
<span id="cb69-7"><a href="Ch06.html#cb69-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_28&quot;</span></span>
<span id="cb69-8"><a href="Ch06.html#cb69-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-fcf_cell.tif&quot;</span></span>
<span id="cb69-9"><a href="Ch06.html#cb69-9" tabindex="-1"></a></span>
<span id="cb69-10"><a href="Ch06.html#cb69-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb69-11"><a href="Ch06.html#cb69-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb69-12"><a href="Ch06.html#cb69-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb69-13"><a href="Ch06.html#cb69-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb69-14"><a href="Ch06.html#cb69-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb69-15"><a href="Ch06.html#cb69-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb69-16"><a href="Ch06.html#cb69-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb69-17"><a href="Ch06.html#cb69-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb69-18"><a href="Ch06.html#cb69-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb69-19"><a href="Ch06.html#cb69-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb69-20"><a href="Ch06.html#cb69-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb69-21"><a href="Ch06.html#cb69-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb69-22"><a href="Ch06.html#cb69-22" tabindex="-1"></a></span>
<span id="cb69-23"><a href="Ch06.html#cb69-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb69-24"><a href="Ch06.html#cb69-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb69-25"><a href="Ch06.html#cb69-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb69-26"><a href="Ch06.html#cb69-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb69-27"><a href="Ch06.html#cb69-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb69-28"><a href="Ch06.html#cb69-28" tabindex="-1"></a></span>
<span id="cb69-29"><a href="Ch06.html#cb69-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-fcf_cell.tif&quot;</span></span>
<span id="cb69-30"><a href="Ch06.html#cb69-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb69-31"><a href="Ch06.html#cb69-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb69-32"><a href="Ch06.html#cb69-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb69-33"><a href="Ch06.html#cb69-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb69-34"><a href="Ch06.html#cb69-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb69-35"><a href="Ch06.html#cb69-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb69-36"><a href="Ch06.html#cb69-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb69-37"><a href="Ch06.html#cb69-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb69-38"><a href="Ch06.html#cb69-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb69-39"><a href="Ch06.html#cb69-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb69-40"><a href="Ch06.html#cb69-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb69-41"><a href="Ch06.html#cb69-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_28.png" width="100%" /></p>
</div>
<div id="ch06.029" class="section level2 hasAnchor" number="6.29">
<h2><span class="header-section-number">6.29</span> Climate_CHELSAv2.1-fgd_cell<a href="Ch06.html#ch06.029" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-fgd_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_29</code></p>
<p><strong>English name:</strong> First day of the growing season (TREELIM) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Veģetācijas sezonas pirmā diena (TREELIM) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="Ch06.html#cb70-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb70-2"><a href="Ch06.html#cb70-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb70-3"><a href="Ch06.html#cb70-3" tabindex="-1"></a></span>
<span id="cb70-4"><a href="Ch06.html#cb70-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb70-5"><a href="Ch06.html#cb70-5" tabindex="-1"></a></span>
<span id="cb70-6"><a href="Ch06.html#cb70-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-fgd_cell.tif&quot;</span></span>
<span id="cb70-7"><a href="Ch06.html#cb70-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_29&quot;</span></span>
<span id="cb70-8"><a href="Ch06.html#cb70-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-fgd_cell.tif&quot;</span></span>
<span id="cb70-9"><a href="Ch06.html#cb70-9" tabindex="-1"></a></span>
<span id="cb70-10"><a href="Ch06.html#cb70-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb70-11"><a href="Ch06.html#cb70-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb70-12"><a href="Ch06.html#cb70-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb70-13"><a href="Ch06.html#cb70-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb70-14"><a href="Ch06.html#cb70-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb70-15"><a href="Ch06.html#cb70-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb70-16"><a href="Ch06.html#cb70-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb70-17"><a href="Ch06.html#cb70-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb70-18"><a href="Ch06.html#cb70-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb70-19"><a href="Ch06.html#cb70-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb70-20"><a href="Ch06.html#cb70-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb70-21"><a href="Ch06.html#cb70-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb70-22"><a href="Ch06.html#cb70-22" tabindex="-1"></a></span>
<span id="cb70-23"><a href="Ch06.html#cb70-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb70-24"><a href="Ch06.html#cb70-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb70-25"><a href="Ch06.html#cb70-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb70-26"><a href="Ch06.html#cb70-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb70-27"><a href="Ch06.html#cb70-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb70-28"><a href="Ch06.html#cb70-28" tabindex="-1"></a></span>
<span id="cb70-29"><a href="Ch06.html#cb70-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-fgd_cell.tif&quot;</span></span>
<span id="cb70-30"><a href="Ch06.html#cb70-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb70-31"><a href="Ch06.html#cb70-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb70-32"><a href="Ch06.html#cb70-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb70-33"><a href="Ch06.html#cb70-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb70-34"><a href="Ch06.html#cb70-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb70-35"><a href="Ch06.html#cb70-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb70-36"><a href="Ch06.html#cb70-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb70-37"><a href="Ch06.html#cb70-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb70-38"><a href="Ch06.html#cb70-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb70-39"><a href="Ch06.html#cb70-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb70-40"><a href="Ch06.html#cb70-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb70-41"><a href="Ch06.html#cb70-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_29.png" width="100%" /></p>
</div>
<div id="ch06.030" class="section level2 hasAnchor" number="6.30">
<h2><span class="header-section-number">6.30</span> Climate_CHELSAv2.1-gdd0_cell<a href="Ch06.html#ch06.030" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gdd0_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_30</code></p>
<p><strong>English name:</strong> Growing degree days heat sum above 0°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Aktīvo temperatūru summa no 0°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="Ch06.html#cb71-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb71-2"><a href="Ch06.html#cb71-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb71-3"><a href="Ch06.html#cb71-3" tabindex="-1"></a></span>
<span id="cb71-4"><a href="Ch06.html#cb71-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb71-5"><a href="Ch06.html#cb71-5" tabindex="-1"></a></span>
<span id="cb71-6"><a href="Ch06.html#cb71-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdd0_cell.tif&quot;</span></span>
<span id="cb71-7"><a href="Ch06.html#cb71-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_30&quot;</span></span>
<span id="cb71-8"><a href="Ch06.html#cb71-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gdd0_cell.tif&quot;</span></span>
<span id="cb71-9"><a href="Ch06.html#cb71-9" tabindex="-1"></a></span>
<span id="cb71-10"><a href="Ch06.html#cb71-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb71-11"><a href="Ch06.html#cb71-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb71-12"><a href="Ch06.html#cb71-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb71-13"><a href="Ch06.html#cb71-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb71-14"><a href="Ch06.html#cb71-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb71-15"><a href="Ch06.html#cb71-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb71-16"><a href="Ch06.html#cb71-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb71-17"><a href="Ch06.html#cb71-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb71-18"><a href="Ch06.html#cb71-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb71-19"><a href="Ch06.html#cb71-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb71-20"><a href="Ch06.html#cb71-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb71-21"><a href="Ch06.html#cb71-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb71-22"><a href="Ch06.html#cb71-22" tabindex="-1"></a></span>
<span id="cb71-23"><a href="Ch06.html#cb71-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb71-24"><a href="Ch06.html#cb71-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb71-25"><a href="Ch06.html#cb71-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb71-26"><a href="Ch06.html#cb71-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb71-27"><a href="Ch06.html#cb71-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb71-28"><a href="Ch06.html#cb71-28" tabindex="-1"></a></span>
<span id="cb71-29"><a href="Ch06.html#cb71-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdd0_cell.tif&quot;</span></span>
<span id="cb71-30"><a href="Ch06.html#cb71-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb71-31"><a href="Ch06.html#cb71-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb71-32"><a href="Ch06.html#cb71-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb71-33"><a href="Ch06.html#cb71-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb71-34"><a href="Ch06.html#cb71-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb71-35"><a href="Ch06.html#cb71-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb71-36"><a href="Ch06.html#cb71-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb71-37"><a href="Ch06.html#cb71-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb71-38"><a href="Ch06.html#cb71-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb71-39"><a href="Ch06.html#cb71-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb71-40"><a href="Ch06.html#cb71-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb71-41"><a href="Ch06.html#cb71-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_30.png" width="100%" /></p>
</div>
<div id="ch06.031" class="section level2 hasAnchor" number="6.31">
<h2><span class="header-section-number">6.31</span> Climate_CHELSAv2.1-gdd10_cell<a href="Ch06.html#ch06.031" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gdd10_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_31</code></p>
<p><strong>English name:</strong> Growing degree days heat sum above 10°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Aktīvo temperatūru summa no 10°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="Ch06.html#cb72-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb72-2"><a href="Ch06.html#cb72-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb72-3"><a href="Ch06.html#cb72-3" tabindex="-1"></a></span>
<span id="cb72-4"><a href="Ch06.html#cb72-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb72-5"><a href="Ch06.html#cb72-5" tabindex="-1"></a></span>
<span id="cb72-6"><a href="Ch06.html#cb72-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdd10_cell.tif&quot;</span></span>
<span id="cb72-7"><a href="Ch06.html#cb72-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_31&quot;</span></span>
<span id="cb72-8"><a href="Ch06.html#cb72-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gdd10_cell.tif&quot;</span></span>
<span id="cb72-9"><a href="Ch06.html#cb72-9" tabindex="-1"></a></span>
<span id="cb72-10"><a href="Ch06.html#cb72-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb72-11"><a href="Ch06.html#cb72-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb72-12"><a href="Ch06.html#cb72-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb72-13"><a href="Ch06.html#cb72-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb72-14"><a href="Ch06.html#cb72-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb72-15"><a href="Ch06.html#cb72-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb72-16"><a href="Ch06.html#cb72-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb72-17"><a href="Ch06.html#cb72-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb72-18"><a href="Ch06.html#cb72-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb72-19"><a href="Ch06.html#cb72-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb72-20"><a href="Ch06.html#cb72-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb72-21"><a href="Ch06.html#cb72-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb72-22"><a href="Ch06.html#cb72-22" tabindex="-1"></a></span>
<span id="cb72-23"><a href="Ch06.html#cb72-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb72-24"><a href="Ch06.html#cb72-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb72-25"><a href="Ch06.html#cb72-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb72-26"><a href="Ch06.html#cb72-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb72-27"><a href="Ch06.html#cb72-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb72-28"><a href="Ch06.html#cb72-28" tabindex="-1"></a></span>
<span id="cb72-29"><a href="Ch06.html#cb72-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdd10_cell.tif&quot;</span></span>
<span id="cb72-30"><a href="Ch06.html#cb72-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb72-31"><a href="Ch06.html#cb72-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb72-32"><a href="Ch06.html#cb72-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb72-33"><a href="Ch06.html#cb72-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb72-34"><a href="Ch06.html#cb72-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb72-35"><a href="Ch06.html#cb72-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb72-36"><a href="Ch06.html#cb72-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb72-37"><a href="Ch06.html#cb72-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb72-38"><a href="Ch06.html#cb72-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb72-39"><a href="Ch06.html#cb72-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb72-40"><a href="Ch06.html#cb72-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb72-41"><a href="Ch06.html#cb72-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_31.png" width="100%" /></p>
</div>
<div id="ch06.032" class="section level2 hasAnchor" number="6.32">
<h2><span class="header-section-number">6.32</span> Climate_CHELSAv2.1-gdd5_cell<a href="Ch06.html#ch06.032" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gdd5_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_32</code></p>
<p><strong>English name:</strong> Growing degree days heat sum above 5°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Aktīvo temperatūru summa no 5°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="Ch06.html#cb73-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb73-2"><a href="Ch06.html#cb73-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb73-3"><a href="Ch06.html#cb73-3" tabindex="-1"></a></span>
<span id="cb73-4"><a href="Ch06.html#cb73-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb73-5"><a href="Ch06.html#cb73-5" tabindex="-1"></a></span>
<span id="cb73-6"><a href="Ch06.html#cb73-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdd5_cell.tif&quot;</span></span>
<span id="cb73-7"><a href="Ch06.html#cb73-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_32&quot;</span></span>
<span id="cb73-8"><a href="Ch06.html#cb73-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gdd5_cell.tif&quot;</span></span>
<span id="cb73-9"><a href="Ch06.html#cb73-9" tabindex="-1"></a></span>
<span id="cb73-10"><a href="Ch06.html#cb73-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb73-11"><a href="Ch06.html#cb73-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb73-12"><a href="Ch06.html#cb73-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb73-13"><a href="Ch06.html#cb73-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb73-14"><a href="Ch06.html#cb73-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb73-15"><a href="Ch06.html#cb73-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb73-16"><a href="Ch06.html#cb73-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb73-17"><a href="Ch06.html#cb73-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb73-18"><a href="Ch06.html#cb73-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb73-19"><a href="Ch06.html#cb73-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb73-20"><a href="Ch06.html#cb73-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb73-21"><a href="Ch06.html#cb73-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb73-22"><a href="Ch06.html#cb73-22" tabindex="-1"></a></span>
<span id="cb73-23"><a href="Ch06.html#cb73-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb73-24"><a href="Ch06.html#cb73-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb73-25"><a href="Ch06.html#cb73-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb73-26"><a href="Ch06.html#cb73-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb73-27"><a href="Ch06.html#cb73-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb73-28"><a href="Ch06.html#cb73-28" tabindex="-1"></a></span>
<span id="cb73-29"><a href="Ch06.html#cb73-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdd5_cell.tif&quot;</span></span>
<span id="cb73-30"><a href="Ch06.html#cb73-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb73-31"><a href="Ch06.html#cb73-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb73-32"><a href="Ch06.html#cb73-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb73-33"><a href="Ch06.html#cb73-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb73-34"><a href="Ch06.html#cb73-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb73-35"><a href="Ch06.html#cb73-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb73-36"><a href="Ch06.html#cb73-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb73-37"><a href="Ch06.html#cb73-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb73-38"><a href="Ch06.html#cb73-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb73-39"><a href="Ch06.html#cb73-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb73-40"><a href="Ch06.html#cb73-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb73-41"><a href="Ch06.html#cb73-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_32.png" width="100%" /></p>
</div>
<div id="ch06.033" class="section level2 hasAnchor" number="6.33">
<h2><span class="header-section-number">6.33</span> Climate_CHELSAv2.1-gddlgd0_cell<a href="Ch06.html#ch06.033" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gddlgd0_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_33</code></p>
<p><strong>English name:</strong> Last growing degree day above 0°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Veģetācijas sezonas pēdējā diena no 0°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="Ch06.html#cb74-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb74-2"><a href="Ch06.html#cb74-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb74-3"><a href="Ch06.html#cb74-3" tabindex="-1"></a></span>
<span id="cb74-4"><a href="Ch06.html#cb74-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb74-5"><a href="Ch06.html#cb74-5" tabindex="-1"></a></span>
<span id="cb74-6"><a href="Ch06.html#cb74-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gddlgd0_cell.tif&quot;</span></span>
<span id="cb74-7"><a href="Ch06.html#cb74-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_33&quot;</span></span>
<span id="cb74-8"><a href="Ch06.html#cb74-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gddlgd0_cell.tif&quot;</span></span>
<span id="cb74-9"><a href="Ch06.html#cb74-9" tabindex="-1"></a></span>
<span id="cb74-10"><a href="Ch06.html#cb74-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb74-11"><a href="Ch06.html#cb74-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb74-12"><a href="Ch06.html#cb74-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb74-13"><a href="Ch06.html#cb74-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb74-14"><a href="Ch06.html#cb74-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb74-15"><a href="Ch06.html#cb74-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb74-16"><a href="Ch06.html#cb74-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb74-17"><a href="Ch06.html#cb74-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb74-18"><a href="Ch06.html#cb74-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb74-19"><a href="Ch06.html#cb74-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb74-20"><a href="Ch06.html#cb74-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb74-21"><a href="Ch06.html#cb74-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb74-22"><a href="Ch06.html#cb74-22" tabindex="-1"></a></span>
<span id="cb74-23"><a href="Ch06.html#cb74-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb74-24"><a href="Ch06.html#cb74-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb74-25"><a href="Ch06.html#cb74-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb74-26"><a href="Ch06.html#cb74-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb74-27"><a href="Ch06.html#cb74-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb74-28"><a href="Ch06.html#cb74-28" tabindex="-1"></a></span>
<span id="cb74-29"><a href="Ch06.html#cb74-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gddlgd0_cell.tif&quot;</span></span>
<span id="cb74-30"><a href="Ch06.html#cb74-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb74-31"><a href="Ch06.html#cb74-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb74-32"><a href="Ch06.html#cb74-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb74-33"><a href="Ch06.html#cb74-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb74-34"><a href="Ch06.html#cb74-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb74-35"><a href="Ch06.html#cb74-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb74-36"><a href="Ch06.html#cb74-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb74-37"><a href="Ch06.html#cb74-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb74-38"><a href="Ch06.html#cb74-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb74-39"><a href="Ch06.html#cb74-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb74-40"><a href="Ch06.html#cb74-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb74-41"><a href="Ch06.html#cb74-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_33.png" width="100%" /></p>
</div>
<div id="ch06.034" class="section level2 hasAnchor" number="6.34">
<h2><span class="header-section-number">6.34</span> Climate_CHELSAv2.1-gddlgd10_cell<a href="Ch06.html#ch06.034" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gddlgd10_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_34</code></p>
<p><strong>English name:</strong> Last growing degree day above 10°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Veģetācijas sezonas pēdējā diena no 10°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="Ch06.html#cb75-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb75-2"><a href="Ch06.html#cb75-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb75-3"><a href="Ch06.html#cb75-3" tabindex="-1"></a></span>
<span id="cb75-4"><a href="Ch06.html#cb75-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb75-5"><a href="Ch06.html#cb75-5" tabindex="-1"></a></span>
<span id="cb75-6"><a href="Ch06.html#cb75-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gddlgd10_cell.tif&quot;</span></span>
<span id="cb75-7"><a href="Ch06.html#cb75-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_34&quot;</span></span>
<span id="cb75-8"><a href="Ch06.html#cb75-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gddlgd10_cell.tif&quot;</span></span>
<span id="cb75-9"><a href="Ch06.html#cb75-9" tabindex="-1"></a></span>
<span id="cb75-10"><a href="Ch06.html#cb75-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb75-11"><a href="Ch06.html#cb75-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb75-12"><a href="Ch06.html#cb75-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb75-13"><a href="Ch06.html#cb75-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb75-14"><a href="Ch06.html#cb75-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb75-15"><a href="Ch06.html#cb75-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb75-16"><a href="Ch06.html#cb75-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb75-17"><a href="Ch06.html#cb75-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb75-18"><a href="Ch06.html#cb75-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb75-19"><a href="Ch06.html#cb75-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb75-20"><a href="Ch06.html#cb75-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb75-21"><a href="Ch06.html#cb75-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb75-22"><a href="Ch06.html#cb75-22" tabindex="-1"></a></span>
<span id="cb75-23"><a href="Ch06.html#cb75-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb75-24"><a href="Ch06.html#cb75-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb75-25"><a href="Ch06.html#cb75-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb75-26"><a href="Ch06.html#cb75-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb75-27"><a href="Ch06.html#cb75-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb75-28"><a href="Ch06.html#cb75-28" tabindex="-1"></a></span>
<span id="cb75-29"><a href="Ch06.html#cb75-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gddlgd10_cell.tif&quot;</span></span>
<span id="cb75-30"><a href="Ch06.html#cb75-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb75-31"><a href="Ch06.html#cb75-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb75-32"><a href="Ch06.html#cb75-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb75-33"><a href="Ch06.html#cb75-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb75-34"><a href="Ch06.html#cb75-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb75-35"><a href="Ch06.html#cb75-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb75-36"><a href="Ch06.html#cb75-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb75-37"><a href="Ch06.html#cb75-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb75-38"><a href="Ch06.html#cb75-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb75-39"><a href="Ch06.html#cb75-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb75-40"><a href="Ch06.html#cb75-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb75-41"><a href="Ch06.html#cb75-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_34.png" width="100%" /></p>
</div>
<div id="ch06.035" class="section level2 hasAnchor" number="6.35">
<h2><span class="header-section-number">6.35</span> Climate_CHELSAv2.1-gddlgd5_cell<a href="Ch06.html#ch06.035" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gddlgd5_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_35</code></p>
<p><strong>English name:</strong> Last growing degree day above 5°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Veģetācijas sezonas pēdējā diena no 5°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="Ch06.html#cb76-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb76-2"><a href="Ch06.html#cb76-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb76-3"><a href="Ch06.html#cb76-3" tabindex="-1"></a></span>
<span id="cb76-4"><a href="Ch06.html#cb76-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb76-5"><a href="Ch06.html#cb76-5" tabindex="-1"></a></span>
<span id="cb76-6"><a href="Ch06.html#cb76-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gddlgd5_cell.tif&quot;</span></span>
<span id="cb76-7"><a href="Ch06.html#cb76-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_35&quot;</span></span>
<span id="cb76-8"><a href="Ch06.html#cb76-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gddlgd5_cell.tif&quot;</span></span>
<span id="cb76-9"><a href="Ch06.html#cb76-9" tabindex="-1"></a></span>
<span id="cb76-10"><a href="Ch06.html#cb76-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb76-11"><a href="Ch06.html#cb76-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb76-12"><a href="Ch06.html#cb76-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb76-13"><a href="Ch06.html#cb76-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb76-14"><a href="Ch06.html#cb76-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb76-15"><a href="Ch06.html#cb76-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb76-16"><a href="Ch06.html#cb76-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb76-17"><a href="Ch06.html#cb76-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb76-18"><a href="Ch06.html#cb76-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb76-19"><a href="Ch06.html#cb76-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb76-20"><a href="Ch06.html#cb76-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb76-21"><a href="Ch06.html#cb76-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb76-22"><a href="Ch06.html#cb76-22" tabindex="-1"></a></span>
<span id="cb76-23"><a href="Ch06.html#cb76-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb76-24"><a href="Ch06.html#cb76-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb76-25"><a href="Ch06.html#cb76-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb76-26"><a href="Ch06.html#cb76-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb76-27"><a href="Ch06.html#cb76-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb76-28"><a href="Ch06.html#cb76-28" tabindex="-1"></a></span>
<span id="cb76-29"><a href="Ch06.html#cb76-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gddlgd5_cell.tif&quot;</span></span>
<span id="cb76-30"><a href="Ch06.html#cb76-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb76-31"><a href="Ch06.html#cb76-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb76-32"><a href="Ch06.html#cb76-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb76-33"><a href="Ch06.html#cb76-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb76-34"><a href="Ch06.html#cb76-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb76-35"><a href="Ch06.html#cb76-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb76-36"><a href="Ch06.html#cb76-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb76-37"><a href="Ch06.html#cb76-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb76-38"><a href="Ch06.html#cb76-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb76-39"><a href="Ch06.html#cb76-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb76-40"><a href="Ch06.html#cb76-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb76-41"><a href="Ch06.html#cb76-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_35.png" width="100%" /></p>
</div>
<div id="ch06.036" class="section level2 hasAnchor" number="6.36">
<h2><span class="header-section-number">6.36</span> Climate_CHELSAv2.1-gdgfgd0_cell<a href="Ch06.html#ch06.036" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gdgfgd0_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_36</code></p>
<p><strong>English name:</strong> First growing degree day above 0°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Veģetācijas sezonas pirmā diena no 0°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="Ch06.html#cb77-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb77-2"><a href="Ch06.html#cb77-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb77-3"><a href="Ch06.html#cb77-3" tabindex="-1"></a></span>
<span id="cb77-4"><a href="Ch06.html#cb77-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb77-5"><a href="Ch06.html#cb77-5" tabindex="-1"></a></span>
<span id="cb77-6"><a href="Ch06.html#cb77-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdgfgd0_cell.tif&quot;</span></span>
<span id="cb77-7"><a href="Ch06.html#cb77-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_36&quot;</span></span>
<span id="cb77-8"><a href="Ch06.html#cb77-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gdgfgd0_cell.tif&quot;</span></span>
<span id="cb77-9"><a href="Ch06.html#cb77-9" tabindex="-1"></a></span>
<span id="cb77-10"><a href="Ch06.html#cb77-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb77-11"><a href="Ch06.html#cb77-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb77-12"><a href="Ch06.html#cb77-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb77-13"><a href="Ch06.html#cb77-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb77-14"><a href="Ch06.html#cb77-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb77-15"><a href="Ch06.html#cb77-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb77-16"><a href="Ch06.html#cb77-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb77-17"><a href="Ch06.html#cb77-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb77-18"><a href="Ch06.html#cb77-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb77-19"><a href="Ch06.html#cb77-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb77-20"><a href="Ch06.html#cb77-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb77-21"><a href="Ch06.html#cb77-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb77-22"><a href="Ch06.html#cb77-22" tabindex="-1"></a></span>
<span id="cb77-23"><a href="Ch06.html#cb77-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb77-24"><a href="Ch06.html#cb77-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb77-25"><a href="Ch06.html#cb77-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb77-26"><a href="Ch06.html#cb77-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb77-27"><a href="Ch06.html#cb77-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb77-28"><a href="Ch06.html#cb77-28" tabindex="-1"></a></span>
<span id="cb77-29"><a href="Ch06.html#cb77-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdgfgd0_cell.tif&quot;</span></span>
<span id="cb77-30"><a href="Ch06.html#cb77-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb77-31"><a href="Ch06.html#cb77-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb77-32"><a href="Ch06.html#cb77-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb77-33"><a href="Ch06.html#cb77-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb77-34"><a href="Ch06.html#cb77-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb77-35"><a href="Ch06.html#cb77-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb77-36"><a href="Ch06.html#cb77-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb77-37"><a href="Ch06.html#cb77-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb77-38"><a href="Ch06.html#cb77-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb77-39"><a href="Ch06.html#cb77-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb77-40"><a href="Ch06.html#cb77-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb77-41"><a href="Ch06.html#cb77-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_36.png" width="100%" /></p>
</div>
<div id="ch06.037" class="section level2 hasAnchor" number="6.37">
<h2><span class="header-section-number">6.37</span> Climate_CHELSAv2.1-gdgfgd10_cell<a href="Ch06.html#ch06.037" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gdgfgd10_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_37</code></p>
<p><strong>English name:</strong> First growing degree day above 10°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Veģetācijas sezonas pirmā diena no 10°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="Ch06.html#cb78-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb78-2"><a href="Ch06.html#cb78-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb78-3"><a href="Ch06.html#cb78-3" tabindex="-1"></a></span>
<span id="cb78-4"><a href="Ch06.html#cb78-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb78-5"><a href="Ch06.html#cb78-5" tabindex="-1"></a></span>
<span id="cb78-6"><a href="Ch06.html#cb78-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdgfgd10_cell.tif&quot;</span></span>
<span id="cb78-7"><a href="Ch06.html#cb78-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_37&quot;</span></span>
<span id="cb78-8"><a href="Ch06.html#cb78-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gdgfgd10_cell.tif&quot;</span></span>
<span id="cb78-9"><a href="Ch06.html#cb78-9" tabindex="-1"></a></span>
<span id="cb78-10"><a href="Ch06.html#cb78-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb78-11"><a href="Ch06.html#cb78-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb78-12"><a href="Ch06.html#cb78-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb78-13"><a href="Ch06.html#cb78-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb78-14"><a href="Ch06.html#cb78-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb78-15"><a href="Ch06.html#cb78-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb78-16"><a href="Ch06.html#cb78-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb78-17"><a href="Ch06.html#cb78-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb78-18"><a href="Ch06.html#cb78-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb78-19"><a href="Ch06.html#cb78-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb78-20"><a href="Ch06.html#cb78-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-21"><a href="Ch06.html#cb78-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb78-22"><a href="Ch06.html#cb78-22" tabindex="-1"></a></span>
<span id="cb78-23"><a href="Ch06.html#cb78-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb78-24"><a href="Ch06.html#cb78-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb78-25"><a href="Ch06.html#cb78-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb78-26"><a href="Ch06.html#cb78-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb78-27"><a href="Ch06.html#cb78-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb78-28"><a href="Ch06.html#cb78-28" tabindex="-1"></a></span>
<span id="cb78-29"><a href="Ch06.html#cb78-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdgfgd10_cell.tif&quot;</span></span>
<span id="cb78-30"><a href="Ch06.html#cb78-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb78-31"><a href="Ch06.html#cb78-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb78-32"><a href="Ch06.html#cb78-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb78-33"><a href="Ch06.html#cb78-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb78-34"><a href="Ch06.html#cb78-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb78-35"><a href="Ch06.html#cb78-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb78-36"><a href="Ch06.html#cb78-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb78-37"><a href="Ch06.html#cb78-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb78-38"><a href="Ch06.html#cb78-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb78-39"><a href="Ch06.html#cb78-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb78-40"><a href="Ch06.html#cb78-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb78-41"><a href="Ch06.html#cb78-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_37.png" width="100%" /></p>
</div>
<div id="ch06.038" class="section level2 hasAnchor" number="6.38">
<h2><span class="header-section-number">6.38</span> Climate_CHELSAv2.1-gdgfgd5_cell<a href="Ch06.html#ch06.038" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gdgfgd5_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_38</code></p>
<p><strong>English name:</strong> First growing degree day above 5°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Veģetācijas sezonas pirmā diena no 5°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="Ch06.html#cb79-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb79-2"><a href="Ch06.html#cb79-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb79-3"><a href="Ch06.html#cb79-3" tabindex="-1"></a></span>
<span id="cb79-4"><a href="Ch06.html#cb79-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb79-5"><a href="Ch06.html#cb79-5" tabindex="-1"></a></span>
<span id="cb79-6"><a href="Ch06.html#cb79-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdgfgd5_cell.tif&quot;</span></span>
<span id="cb79-7"><a href="Ch06.html#cb79-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_38&quot;</span></span>
<span id="cb79-8"><a href="Ch06.html#cb79-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gdgfgd5_cell.tif&quot;</span></span>
<span id="cb79-9"><a href="Ch06.html#cb79-9" tabindex="-1"></a></span>
<span id="cb79-10"><a href="Ch06.html#cb79-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb79-11"><a href="Ch06.html#cb79-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb79-12"><a href="Ch06.html#cb79-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb79-13"><a href="Ch06.html#cb79-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb79-14"><a href="Ch06.html#cb79-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb79-15"><a href="Ch06.html#cb79-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb79-16"><a href="Ch06.html#cb79-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb79-17"><a href="Ch06.html#cb79-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb79-18"><a href="Ch06.html#cb79-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb79-19"><a href="Ch06.html#cb79-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb79-20"><a href="Ch06.html#cb79-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb79-21"><a href="Ch06.html#cb79-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb79-22"><a href="Ch06.html#cb79-22" tabindex="-1"></a></span>
<span id="cb79-23"><a href="Ch06.html#cb79-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb79-24"><a href="Ch06.html#cb79-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb79-25"><a href="Ch06.html#cb79-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb79-26"><a href="Ch06.html#cb79-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb79-27"><a href="Ch06.html#cb79-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb79-28"><a href="Ch06.html#cb79-28" tabindex="-1"></a></span>
<span id="cb79-29"><a href="Ch06.html#cb79-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gdgfgd5_cell.tif&quot;</span></span>
<span id="cb79-30"><a href="Ch06.html#cb79-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb79-31"><a href="Ch06.html#cb79-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb79-32"><a href="Ch06.html#cb79-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb79-33"><a href="Ch06.html#cb79-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb79-34"><a href="Ch06.html#cb79-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb79-35"><a href="Ch06.html#cb79-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb79-36"><a href="Ch06.html#cb79-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb79-37"><a href="Ch06.html#cb79-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb79-38"><a href="Ch06.html#cb79-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb79-39"><a href="Ch06.html#cb79-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb79-40"><a href="Ch06.html#cb79-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb79-41"><a href="Ch06.html#cb79-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_38.png" width="100%" /></p>
</div>
<div id="ch06.039" class="section level2 hasAnchor" number="6.39">
<h2><span class="header-section-number">6.39</span> Climate_CHELSAv2.1-gsl_cell<a href="Ch06.html#ch06.039" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gsl_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_39</code></p>
<p><strong>English name:</strong> Length of the growing season (TREELIM) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Veģetācijas sezonas garums (TREELIM) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="Ch06.html#cb80-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb80-2"><a href="Ch06.html#cb80-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb80-3"><a href="Ch06.html#cb80-3" tabindex="-1"></a></span>
<span id="cb80-4"><a href="Ch06.html#cb80-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb80-5"><a href="Ch06.html#cb80-5" tabindex="-1"></a></span>
<span id="cb80-6"><a href="Ch06.html#cb80-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gsl_cell.tif&quot;</span></span>
<span id="cb80-7"><a href="Ch06.html#cb80-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_39&quot;</span></span>
<span id="cb80-8"><a href="Ch06.html#cb80-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gsl_cell.tif&quot;</span></span>
<span id="cb80-9"><a href="Ch06.html#cb80-9" tabindex="-1"></a></span>
<span id="cb80-10"><a href="Ch06.html#cb80-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb80-11"><a href="Ch06.html#cb80-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb80-12"><a href="Ch06.html#cb80-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb80-13"><a href="Ch06.html#cb80-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb80-14"><a href="Ch06.html#cb80-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb80-15"><a href="Ch06.html#cb80-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb80-16"><a href="Ch06.html#cb80-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb80-17"><a href="Ch06.html#cb80-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb80-18"><a href="Ch06.html#cb80-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb80-19"><a href="Ch06.html#cb80-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb80-20"><a href="Ch06.html#cb80-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb80-21"><a href="Ch06.html#cb80-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb80-22"><a href="Ch06.html#cb80-22" tabindex="-1"></a></span>
<span id="cb80-23"><a href="Ch06.html#cb80-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb80-24"><a href="Ch06.html#cb80-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb80-25"><a href="Ch06.html#cb80-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb80-26"><a href="Ch06.html#cb80-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb80-27"><a href="Ch06.html#cb80-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb80-28"><a href="Ch06.html#cb80-28" tabindex="-1"></a></span>
<span id="cb80-29"><a href="Ch06.html#cb80-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gsl_cell.tif&quot;</span></span>
<span id="cb80-30"><a href="Ch06.html#cb80-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb80-31"><a href="Ch06.html#cb80-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb80-32"><a href="Ch06.html#cb80-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb80-33"><a href="Ch06.html#cb80-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb80-34"><a href="Ch06.html#cb80-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb80-35"><a href="Ch06.html#cb80-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb80-36"><a href="Ch06.html#cb80-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb80-37"><a href="Ch06.html#cb80-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb80-38"><a href="Ch06.html#cb80-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb80-39"><a href="Ch06.html#cb80-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb80-40"><a href="Ch06.html#cb80-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb80-41"><a href="Ch06.html#cb80-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_39.png" width="100%" /></p>
</div>
<div id="ch06.040" class="section level2 hasAnchor" number="6.40">
<h2><span class="header-section-number">6.40</span> Climate_CHELSAv2.1-gsp_cell<a href="Ch06.html#ch06.040" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gsp_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_40</code></p>
<p><strong>English name:</strong> Accumulated precipitation amount (kg m⁻² year⁻¹) on growing season days (TREELIM) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Veģetācijas sezonā (TREELIM) uzkrātais nokrišņu daudzums (kg m⁻² year⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="Ch06.html#cb81-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb81-2"><a href="Ch06.html#cb81-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb81-3"><a href="Ch06.html#cb81-3" tabindex="-1"></a></span>
<span id="cb81-4"><a href="Ch06.html#cb81-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb81-5"><a href="Ch06.html#cb81-5" tabindex="-1"></a></span>
<span id="cb81-6"><a href="Ch06.html#cb81-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gsp_cell.tif&quot;</span></span>
<span id="cb81-7"><a href="Ch06.html#cb81-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_40&quot;</span></span>
<span id="cb81-8"><a href="Ch06.html#cb81-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gsp_cell.tif&quot;</span></span>
<span id="cb81-9"><a href="Ch06.html#cb81-9" tabindex="-1"></a></span>
<span id="cb81-10"><a href="Ch06.html#cb81-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb81-11"><a href="Ch06.html#cb81-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb81-12"><a href="Ch06.html#cb81-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb81-13"><a href="Ch06.html#cb81-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb81-14"><a href="Ch06.html#cb81-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb81-15"><a href="Ch06.html#cb81-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb81-16"><a href="Ch06.html#cb81-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb81-17"><a href="Ch06.html#cb81-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb81-18"><a href="Ch06.html#cb81-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb81-19"><a href="Ch06.html#cb81-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb81-20"><a href="Ch06.html#cb81-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-21"><a href="Ch06.html#cb81-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb81-22"><a href="Ch06.html#cb81-22" tabindex="-1"></a></span>
<span id="cb81-23"><a href="Ch06.html#cb81-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb81-24"><a href="Ch06.html#cb81-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb81-25"><a href="Ch06.html#cb81-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb81-26"><a href="Ch06.html#cb81-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb81-27"><a href="Ch06.html#cb81-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb81-28"><a href="Ch06.html#cb81-28" tabindex="-1"></a></span>
<span id="cb81-29"><a href="Ch06.html#cb81-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gsp_cell.tif&quot;</span></span>
<span id="cb81-30"><a href="Ch06.html#cb81-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb81-31"><a href="Ch06.html#cb81-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb81-32"><a href="Ch06.html#cb81-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb81-33"><a href="Ch06.html#cb81-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb81-34"><a href="Ch06.html#cb81-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb81-35"><a href="Ch06.html#cb81-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb81-36"><a href="Ch06.html#cb81-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb81-37"><a href="Ch06.html#cb81-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb81-38"><a href="Ch06.html#cb81-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb81-39"><a href="Ch06.html#cb81-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb81-40"><a href="Ch06.html#cb81-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb81-41"><a href="Ch06.html#cb81-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_40.png" width="100%" /></p>
</div>
<div id="ch06.041" class="section level2 hasAnchor" number="6.41">
<h2><span class="header-section-number">6.41</span> Climate_CHELSAv2.1-gst_cell<a href="Ch06.html#ch06.041" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-gst_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_41</code></p>
<p><strong>English name:</strong> Mean temperature of the growing season (TREELIM) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vidējā ikdienas gaisa temperatūra (°C) veģetācijas sezonā (TREELIM) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="Ch06.html#cb82-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb82-2"><a href="Ch06.html#cb82-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb82-3"><a href="Ch06.html#cb82-3" tabindex="-1"></a></span>
<span id="cb82-4"><a href="Ch06.html#cb82-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb82-5"><a href="Ch06.html#cb82-5" tabindex="-1"></a></span>
<span id="cb82-6"><a href="Ch06.html#cb82-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gst_cell.tif&quot;</span></span>
<span id="cb82-7"><a href="Ch06.html#cb82-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_41&quot;</span></span>
<span id="cb82-8"><a href="Ch06.html#cb82-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-gst_cell.tif&quot;</span></span>
<span id="cb82-9"><a href="Ch06.html#cb82-9" tabindex="-1"></a></span>
<span id="cb82-10"><a href="Ch06.html#cb82-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb82-11"><a href="Ch06.html#cb82-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb82-12"><a href="Ch06.html#cb82-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb82-13"><a href="Ch06.html#cb82-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb82-14"><a href="Ch06.html#cb82-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb82-15"><a href="Ch06.html#cb82-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb82-16"><a href="Ch06.html#cb82-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb82-17"><a href="Ch06.html#cb82-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb82-18"><a href="Ch06.html#cb82-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb82-19"><a href="Ch06.html#cb82-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb82-20"><a href="Ch06.html#cb82-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb82-21"><a href="Ch06.html#cb82-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb82-22"><a href="Ch06.html#cb82-22" tabindex="-1"></a></span>
<span id="cb82-23"><a href="Ch06.html#cb82-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb82-24"><a href="Ch06.html#cb82-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb82-25"><a href="Ch06.html#cb82-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb82-26"><a href="Ch06.html#cb82-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb82-27"><a href="Ch06.html#cb82-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb82-28"><a href="Ch06.html#cb82-28" tabindex="-1"></a></span>
<span id="cb82-29"><a href="Ch06.html#cb82-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-gst_cell.tif&quot;</span></span>
<span id="cb82-30"><a href="Ch06.html#cb82-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb82-31"><a href="Ch06.html#cb82-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb82-32"><a href="Ch06.html#cb82-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb82-33"><a href="Ch06.html#cb82-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb82-34"><a href="Ch06.html#cb82-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb82-35"><a href="Ch06.html#cb82-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb82-36"><a href="Ch06.html#cb82-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb82-37"><a href="Ch06.html#cb82-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb82-38"><a href="Ch06.html#cb82-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb82-39"><a href="Ch06.html#cb82-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb82-40"><a href="Ch06.html#cb82-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb82-41"><a href="Ch06.html#cb82-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_41.png" width="100%" /></p>
</div>
<div id="ch06.042" class="section level2 hasAnchor" number="6.42">
<h2><span class="header-section-number">6.42</span> Climate_CHELSAv2.1-hurs-max_cell<a href="Ch06.html#ch06.042" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-hurs-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_42</code></p>
<p><strong>English name:</strong> Maximum monthly near-surface relative humidity (%) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Maksimālais mēneša vidējais gaisa mitrums (%) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="Ch06.html#cb83-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb83-2"><a href="Ch06.html#cb83-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb83-3"><a href="Ch06.html#cb83-3" tabindex="-1"></a></span>
<span id="cb83-4"><a href="Ch06.html#cb83-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb83-5"><a href="Ch06.html#cb83-5" tabindex="-1"></a></span>
<span id="cb83-6"><a href="Ch06.html#cb83-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-hurs-max_cell.tif&quot;</span></span>
<span id="cb83-7"><a href="Ch06.html#cb83-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_42&quot;</span></span>
<span id="cb83-8"><a href="Ch06.html#cb83-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-hurs-max_cell.tif&quot;</span></span>
<span id="cb83-9"><a href="Ch06.html#cb83-9" tabindex="-1"></a></span>
<span id="cb83-10"><a href="Ch06.html#cb83-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb83-11"><a href="Ch06.html#cb83-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb83-12"><a href="Ch06.html#cb83-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb83-13"><a href="Ch06.html#cb83-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb83-14"><a href="Ch06.html#cb83-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb83-15"><a href="Ch06.html#cb83-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb83-16"><a href="Ch06.html#cb83-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb83-17"><a href="Ch06.html#cb83-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb83-18"><a href="Ch06.html#cb83-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb83-19"><a href="Ch06.html#cb83-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb83-20"><a href="Ch06.html#cb83-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb83-21"><a href="Ch06.html#cb83-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb83-22"><a href="Ch06.html#cb83-22" tabindex="-1"></a></span>
<span id="cb83-23"><a href="Ch06.html#cb83-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb83-24"><a href="Ch06.html#cb83-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb83-25"><a href="Ch06.html#cb83-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb83-26"><a href="Ch06.html#cb83-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb83-27"><a href="Ch06.html#cb83-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb83-28"><a href="Ch06.html#cb83-28" tabindex="-1"></a></span>
<span id="cb83-29"><a href="Ch06.html#cb83-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-hurs-max_cell.tif&quot;</span></span>
<span id="cb83-30"><a href="Ch06.html#cb83-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb83-31"><a href="Ch06.html#cb83-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb83-32"><a href="Ch06.html#cb83-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb83-33"><a href="Ch06.html#cb83-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb83-34"><a href="Ch06.html#cb83-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb83-35"><a href="Ch06.html#cb83-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb83-36"><a href="Ch06.html#cb83-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb83-37"><a href="Ch06.html#cb83-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb83-38"><a href="Ch06.html#cb83-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb83-39"><a href="Ch06.html#cb83-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb83-40"><a href="Ch06.html#cb83-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb83-41"><a href="Ch06.html#cb83-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_42.png" width="100%" /></p>
</div>
<div id="ch06.043" class="section level2 hasAnchor" number="6.43">
<h2><span class="header-section-number">6.43</span> Climate_CHELSAv2.1-hurs-mean_cell<a href="Ch06.html#ch06.043" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-hurs-mean_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_43</code></p>
<p><strong>English name:</strong> Mean monthly near-surface relative humidity (%) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vidējais ikmēneša gaisa mitrums (%) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="Ch06.html#cb84-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb84-2"><a href="Ch06.html#cb84-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb84-3"><a href="Ch06.html#cb84-3" tabindex="-1"></a></span>
<span id="cb84-4"><a href="Ch06.html#cb84-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb84-5"><a href="Ch06.html#cb84-5" tabindex="-1"></a></span>
<span id="cb84-6"><a href="Ch06.html#cb84-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-hurs-mean_cell.tif&quot;</span></span>
<span id="cb84-7"><a href="Ch06.html#cb84-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_43&quot;</span></span>
<span id="cb84-8"><a href="Ch06.html#cb84-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-hurs-mean_cell.tif&quot;</span></span>
<span id="cb84-9"><a href="Ch06.html#cb84-9" tabindex="-1"></a></span>
<span id="cb84-10"><a href="Ch06.html#cb84-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb84-11"><a href="Ch06.html#cb84-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb84-12"><a href="Ch06.html#cb84-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb84-13"><a href="Ch06.html#cb84-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb84-14"><a href="Ch06.html#cb84-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb84-15"><a href="Ch06.html#cb84-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb84-16"><a href="Ch06.html#cb84-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb84-17"><a href="Ch06.html#cb84-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb84-18"><a href="Ch06.html#cb84-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb84-19"><a href="Ch06.html#cb84-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb84-20"><a href="Ch06.html#cb84-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb84-21"><a href="Ch06.html#cb84-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb84-22"><a href="Ch06.html#cb84-22" tabindex="-1"></a></span>
<span id="cb84-23"><a href="Ch06.html#cb84-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb84-24"><a href="Ch06.html#cb84-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb84-25"><a href="Ch06.html#cb84-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb84-26"><a href="Ch06.html#cb84-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb84-27"><a href="Ch06.html#cb84-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb84-28"><a href="Ch06.html#cb84-28" tabindex="-1"></a></span>
<span id="cb84-29"><a href="Ch06.html#cb84-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-hurs-mean_cell.tif&quot;</span></span>
<span id="cb84-30"><a href="Ch06.html#cb84-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb84-31"><a href="Ch06.html#cb84-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb84-32"><a href="Ch06.html#cb84-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb84-33"><a href="Ch06.html#cb84-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb84-34"><a href="Ch06.html#cb84-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb84-35"><a href="Ch06.html#cb84-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb84-36"><a href="Ch06.html#cb84-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb84-37"><a href="Ch06.html#cb84-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb84-38"><a href="Ch06.html#cb84-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb84-39"><a href="Ch06.html#cb84-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb84-40"><a href="Ch06.html#cb84-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb84-41"><a href="Ch06.html#cb84-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_43.png" width="100%" /></p>
</div>
<div id="ch06.044" class="section level2 hasAnchor" number="6.44">
<h2><span class="header-section-number">6.44</span> Climate_CHELSAv2.1-hurs-min_cell<a href="Ch06.html#ch06.044" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-hurs-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_44</code></p>
<p><strong>English name:</strong> Minimum monthly near-surface relative humidity (%) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Minimālais mēneša vidējais gaisa mitrums (%) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="Ch06.html#cb85-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb85-2"><a href="Ch06.html#cb85-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb85-3"><a href="Ch06.html#cb85-3" tabindex="-1"></a></span>
<span id="cb85-4"><a href="Ch06.html#cb85-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb85-5"><a href="Ch06.html#cb85-5" tabindex="-1"></a></span>
<span id="cb85-6"><a href="Ch06.html#cb85-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-hurs-min_cell.tif&quot;</span></span>
<span id="cb85-7"><a href="Ch06.html#cb85-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_44&quot;</span></span>
<span id="cb85-8"><a href="Ch06.html#cb85-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-hurs-min_cell.tif&quot;</span></span>
<span id="cb85-9"><a href="Ch06.html#cb85-9" tabindex="-1"></a></span>
<span id="cb85-10"><a href="Ch06.html#cb85-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb85-11"><a href="Ch06.html#cb85-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb85-12"><a href="Ch06.html#cb85-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb85-13"><a href="Ch06.html#cb85-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb85-14"><a href="Ch06.html#cb85-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb85-15"><a href="Ch06.html#cb85-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb85-16"><a href="Ch06.html#cb85-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb85-17"><a href="Ch06.html#cb85-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb85-18"><a href="Ch06.html#cb85-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb85-19"><a href="Ch06.html#cb85-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb85-20"><a href="Ch06.html#cb85-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb85-21"><a href="Ch06.html#cb85-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb85-22"><a href="Ch06.html#cb85-22" tabindex="-1"></a></span>
<span id="cb85-23"><a href="Ch06.html#cb85-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb85-24"><a href="Ch06.html#cb85-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb85-25"><a href="Ch06.html#cb85-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb85-26"><a href="Ch06.html#cb85-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb85-27"><a href="Ch06.html#cb85-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb85-28"><a href="Ch06.html#cb85-28" tabindex="-1"></a></span>
<span id="cb85-29"><a href="Ch06.html#cb85-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-hurs-min_cell.tif&quot;</span></span>
<span id="cb85-30"><a href="Ch06.html#cb85-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb85-31"><a href="Ch06.html#cb85-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb85-32"><a href="Ch06.html#cb85-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb85-33"><a href="Ch06.html#cb85-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb85-34"><a href="Ch06.html#cb85-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb85-35"><a href="Ch06.html#cb85-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb85-36"><a href="Ch06.html#cb85-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb85-37"><a href="Ch06.html#cb85-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb85-38"><a href="Ch06.html#cb85-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb85-39"><a href="Ch06.html#cb85-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb85-40"><a href="Ch06.html#cb85-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb85-41"><a href="Ch06.html#cb85-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_44.png" width="100%" /></p>
</div>
<div id="ch06.045" class="section level2 hasAnchor" number="6.45">
<h2><span class="header-section-number">6.45</span> Climate_CHELSAv2.1-hurs-range_cell<a href="Ch06.html#ch06.045" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-hurs-range_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_45</code></p>
<p><strong>English name:</strong> Annual range of monthly near-surface relative humidity (%) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada gaisa mitruma amplitūda (%) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="Ch06.html#cb86-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb86-2"><a href="Ch06.html#cb86-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb86-3"><a href="Ch06.html#cb86-3" tabindex="-1"></a></span>
<span id="cb86-4"><a href="Ch06.html#cb86-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb86-5"><a href="Ch06.html#cb86-5" tabindex="-1"></a></span>
<span id="cb86-6"><a href="Ch06.html#cb86-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-hurs-range_cell.tif&quot;</span></span>
<span id="cb86-7"><a href="Ch06.html#cb86-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_45&quot;</span></span>
<span id="cb86-8"><a href="Ch06.html#cb86-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-hurs-range_cell.tif&quot;</span></span>
<span id="cb86-9"><a href="Ch06.html#cb86-9" tabindex="-1"></a></span>
<span id="cb86-10"><a href="Ch06.html#cb86-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb86-11"><a href="Ch06.html#cb86-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb86-12"><a href="Ch06.html#cb86-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb86-13"><a href="Ch06.html#cb86-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb86-14"><a href="Ch06.html#cb86-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb86-15"><a href="Ch06.html#cb86-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb86-16"><a href="Ch06.html#cb86-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb86-17"><a href="Ch06.html#cb86-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb86-18"><a href="Ch06.html#cb86-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb86-19"><a href="Ch06.html#cb86-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb86-20"><a href="Ch06.html#cb86-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb86-21"><a href="Ch06.html#cb86-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb86-22"><a href="Ch06.html#cb86-22" tabindex="-1"></a></span>
<span id="cb86-23"><a href="Ch06.html#cb86-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb86-24"><a href="Ch06.html#cb86-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb86-25"><a href="Ch06.html#cb86-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb86-26"><a href="Ch06.html#cb86-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb86-27"><a href="Ch06.html#cb86-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb86-28"><a href="Ch06.html#cb86-28" tabindex="-1"></a></span>
<span id="cb86-29"><a href="Ch06.html#cb86-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-hurs-range_cell.tif&quot;</span></span>
<span id="cb86-30"><a href="Ch06.html#cb86-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb86-31"><a href="Ch06.html#cb86-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb86-32"><a href="Ch06.html#cb86-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb86-33"><a href="Ch06.html#cb86-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb86-34"><a href="Ch06.html#cb86-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb86-35"><a href="Ch06.html#cb86-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb86-36"><a href="Ch06.html#cb86-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb86-37"><a href="Ch06.html#cb86-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb86-38"><a href="Ch06.html#cb86-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb86-39"><a href="Ch06.html#cb86-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb86-40"><a href="Ch06.html#cb86-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb86-41"><a href="Ch06.html#cb86-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_45.png" width="100%" /></p>
</div>
<div id="ch06.046" class="section level2 hasAnchor" number="6.46">
<h2><span class="header-section-number">6.46</span> Climate_CHELSAv2.1-lgd_cell<a href="Ch06.html#ch06.046" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-lgd_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_46</code></p>
<p><strong>English name:</strong> Last day of the growing season (TREELIM) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Pēdējā veģetācijas sezonas diena (TREELIM) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="Ch06.html#cb87-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb87-2"><a href="Ch06.html#cb87-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb87-3"><a href="Ch06.html#cb87-3" tabindex="-1"></a></span>
<span id="cb87-4"><a href="Ch06.html#cb87-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb87-5"><a href="Ch06.html#cb87-5" tabindex="-1"></a></span>
<span id="cb87-6"><a href="Ch06.html#cb87-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-lgd_cell.tif&quot;</span></span>
<span id="cb87-7"><a href="Ch06.html#cb87-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_46&quot;</span></span>
<span id="cb87-8"><a href="Ch06.html#cb87-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-lgd_cell.tif&quot;</span></span>
<span id="cb87-9"><a href="Ch06.html#cb87-9" tabindex="-1"></a></span>
<span id="cb87-10"><a href="Ch06.html#cb87-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb87-11"><a href="Ch06.html#cb87-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb87-12"><a href="Ch06.html#cb87-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb87-13"><a href="Ch06.html#cb87-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb87-14"><a href="Ch06.html#cb87-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb87-15"><a href="Ch06.html#cb87-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb87-16"><a href="Ch06.html#cb87-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb87-17"><a href="Ch06.html#cb87-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb87-18"><a href="Ch06.html#cb87-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb87-19"><a href="Ch06.html#cb87-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb87-20"><a href="Ch06.html#cb87-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb87-21"><a href="Ch06.html#cb87-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb87-22"><a href="Ch06.html#cb87-22" tabindex="-1"></a></span>
<span id="cb87-23"><a href="Ch06.html#cb87-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb87-24"><a href="Ch06.html#cb87-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb87-25"><a href="Ch06.html#cb87-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb87-26"><a href="Ch06.html#cb87-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb87-27"><a href="Ch06.html#cb87-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb87-28"><a href="Ch06.html#cb87-28" tabindex="-1"></a></span>
<span id="cb87-29"><a href="Ch06.html#cb87-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-lgd_cell.tif&quot;</span></span>
<span id="cb87-30"><a href="Ch06.html#cb87-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb87-31"><a href="Ch06.html#cb87-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb87-32"><a href="Ch06.html#cb87-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb87-33"><a href="Ch06.html#cb87-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb87-34"><a href="Ch06.html#cb87-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb87-35"><a href="Ch06.html#cb87-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb87-36"><a href="Ch06.html#cb87-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb87-37"><a href="Ch06.html#cb87-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb87-38"><a href="Ch06.html#cb87-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb87-39"><a href="Ch06.html#cb87-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb87-40"><a href="Ch06.html#cb87-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb87-41"><a href="Ch06.html#cb87-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_46.png" width="100%" /></p>
</div>
<div id="ch06.047" class="section level2 hasAnchor" number="6.47">
<h2><span class="header-section-number">6.47</span> Climate_CHELSAv2.1-ngd0_cell<a href="Ch06.html#ch06.047" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-ngd0_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_47</code></p>
<p><strong>English name:</strong> Number of days at which 2m air temperature &gt; 0°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Dienu skaits, kurā gaisa temperatūra 2 m augstumā pārsniedz 0°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="Ch06.html#cb88-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb88-2"><a href="Ch06.html#cb88-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb88-3"><a href="Ch06.html#cb88-3" tabindex="-1"></a></span>
<span id="cb88-4"><a href="Ch06.html#cb88-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb88-5"><a href="Ch06.html#cb88-5" tabindex="-1"></a></span>
<span id="cb88-6"><a href="Ch06.html#cb88-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-ngd0_cell.tif&quot;</span></span>
<span id="cb88-7"><a href="Ch06.html#cb88-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_47&quot;</span></span>
<span id="cb88-8"><a href="Ch06.html#cb88-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-ngd0_cell.tif&quot;</span></span>
<span id="cb88-9"><a href="Ch06.html#cb88-9" tabindex="-1"></a></span>
<span id="cb88-10"><a href="Ch06.html#cb88-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb88-11"><a href="Ch06.html#cb88-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb88-12"><a href="Ch06.html#cb88-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb88-13"><a href="Ch06.html#cb88-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb88-14"><a href="Ch06.html#cb88-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb88-15"><a href="Ch06.html#cb88-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb88-16"><a href="Ch06.html#cb88-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb88-17"><a href="Ch06.html#cb88-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb88-18"><a href="Ch06.html#cb88-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb88-19"><a href="Ch06.html#cb88-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb88-20"><a href="Ch06.html#cb88-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-21"><a href="Ch06.html#cb88-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb88-22"><a href="Ch06.html#cb88-22" tabindex="-1"></a></span>
<span id="cb88-23"><a href="Ch06.html#cb88-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb88-24"><a href="Ch06.html#cb88-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb88-25"><a href="Ch06.html#cb88-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb88-26"><a href="Ch06.html#cb88-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb88-27"><a href="Ch06.html#cb88-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb88-28"><a href="Ch06.html#cb88-28" tabindex="-1"></a></span>
<span id="cb88-29"><a href="Ch06.html#cb88-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-ngd0_cell.tif&quot;</span></span>
<span id="cb88-30"><a href="Ch06.html#cb88-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb88-31"><a href="Ch06.html#cb88-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb88-32"><a href="Ch06.html#cb88-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb88-33"><a href="Ch06.html#cb88-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb88-34"><a href="Ch06.html#cb88-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb88-35"><a href="Ch06.html#cb88-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb88-36"><a href="Ch06.html#cb88-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb88-37"><a href="Ch06.html#cb88-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb88-38"><a href="Ch06.html#cb88-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb88-39"><a href="Ch06.html#cb88-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb88-40"><a href="Ch06.html#cb88-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb88-41"><a href="Ch06.html#cb88-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_47.png" width="100%" /></p>
</div>
<div id="ch06.048" class="section level2 hasAnchor" number="6.48">
<h2><span class="header-section-number">6.48</span> Climate_CHELSAv2.1-ngd10_cell<a href="Ch06.html#ch06.048" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-ngd10_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_48</code></p>
<p><strong>English name:</strong> Number of days at which 2m air temperature &gt; 10°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Dienu skaits, kurā gaisa temperatūra 2 m augstumā pārsniedz 10°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="Ch06.html#cb89-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb89-2"><a href="Ch06.html#cb89-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb89-3"><a href="Ch06.html#cb89-3" tabindex="-1"></a></span>
<span id="cb89-4"><a href="Ch06.html#cb89-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb89-5"><a href="Ch06.html#cb89-5" tabindex="-1"></a></span>
<span id="cb89-6"><a href="Ch06.html#cb89-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-ngd10_cell.tif&quot;</span></span>
<span id="cb89-7"><a href="Ch06.html#cb89-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_48&quot;</span></span>
<span id="cb89-8"><a href="Ch06.html#cb89-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-ngd10_cell.tif&quot;</span></span>
<span id="cb89-9"><a href="Ch06.html#cb89-9" tabindex="-1"></a></span>
<span id="cb89-10"><a href="Ch06.html#cb89-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb89-11"><a href="Ch06.html#cb89-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb89-12"><a href="Ch06.html#cb89-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb89-13"><a href="Ch06.html#cb89-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb89-14"><a href="Ch06.html#cb89-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb89-15"><a href="Ch06.html#cb89-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb89-16"><a href="Ch06.html#cb89-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb89-17"><a href="Ch06.html#cb89-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb89-18"><a href="Ch06.html#cb89-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb89-19"><a href="Ch06.html#cb89-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb89-20"><a href="Ch06.html#cb89-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-21"><a href="Ch06.html#cb89-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb89-22"><a href="Ch06.html#cb89-22" tabindex="-1"></a></span>
<span id="cb89-23"><a href="Ch06.html#cb89-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb89-24"><a href="Ch06.html#cb89-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb89-25"><a href="Ch06.html#cb89-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb89-26"><a href="Ch06.html#cb89-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb89-27"><a href="Ch06.html#cb89-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb89-28"><a href="Ch06.html#cb89-28" tabindex="-1"></a></span>
<span id="cb89-29"><a href="Ch06.html#cb89-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-ngd10_cell.tif&quot;</span></span>
<span id="cb89-30"><a href="Ch06.html#cb89-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb89-31"><a href="Ch06.html#cb89-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb89-32"><a href="Ch06.html#cb89-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb89-33"><a href="Ch06.html#cb89-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb89-34"><a href="Ch06.html#cb89-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb89-35"><a href="Ch06.html#cb89-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb89-36"><a href="Ch06.html#cb89-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb89-37"><a href="Ch06.html#cb89-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb89-38"><a href="Ch06.html#cb89-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb89-39"><a href="Ch06.html#cb89-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb89-40"><a href="Ch06.html#cb89-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb89-41"><a href="Ch06.html#cb89-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_48.png" width="100%" /></p>
</div>
<div id="ch06.049" class="section level2 hasAnchor" number="6.49">
<h2><span class="header-section-number">6.49</span> Climate_CHELSAv2.1-ngd5_cell<a href="Ch06.html#ch06.049" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-ngd5_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_49</code></p>
<p><strong>English name:</strong> Number of days at which 2m air temperature &gt; 5°C (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Dienu skaits, kurā gaisa temperatūra 2 m augstumā pārsniedz 5°C (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="Ch06.html#cb90-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb90-2"><a href="Ch06.html#cb90-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb90-3"><a href="Ch06.html#cb90-3" tabindex="-1"></a></span>
<span id="cb90-4"><a href="Ch06.html#cb90-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb90-5"><a href="Ch06.html#cb90-5" tabindex="-1"></a></span>
<span id="cb90-6"><a href="Ch06.html#cb90-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-ngd5_cell.tif&quot;</span></span>
<span id="cb90-7"><a href="Ch06.html#cb90-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_49&quot;</span></span>
<span id="cb90-8"><a href="Ch06.html#cb90-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-ngd5_cell.tif&quot;</span></span>
<span id="cb90-9"><a href="Ch06.html#cb90-9" tabindex="-1"></a></span>
<span id="cb90-10"><a href="Ch06.html#cb90-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb90-11"><a href="Ch06.html#cb90-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb90-12"><a href="Ch06.html#cb90-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb90-13"><a href="Ch06.html#cb90-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb90-14"><a href="Ch06.html#cb90-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb90-15"><a href="Ch06.html#cb90-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb90-16"><a href="Ch06.html#cb90-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb90-17"><a href="Ch06.html#cb90-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb90-18"><a href="Ch06.html#cb90-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb90-19"><a href="Ch06.html#cb90-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb90-20"><a href="Ch06.html#cb90-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb90-21"><a href="Ch06.html#cb90-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb90-22"><a href="Ch06.html#cb90-22" tabindex="-1"></a></span>
<span id="cb90-23"><a href="Ch06.html#cb90-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb90-24"><a href="Ch06.html#cb90-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb90-25"><a href="Ch06.html#cb90-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb90-26"><a href="Ch06.html#cb90-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb90-27"><a href="Ch06.html#cb90-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb90-28"><a href="Ch06.html#cb90-28" tabindex="-1"></a></span>
<span id="cb90-29"><a href="Ch06.html#cb90-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-ngd5_cell.tif&quot;</span></span>
<span id="cb90-30"><a href="Ch06.html#cb90-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb90-31"><a href="Ch06.html#cb90-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb90-32"><a href="Ch06.html#cb90-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb90-33"><a href="Ch06.html#cb90-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb90-34"><a href="Ch06.html#cb90-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb90-35"><a href="Ch06.html#cb90-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb90-36"><a href="Ch06.html#cb90-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb90-37"><a href="Ch06.html#cb90-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb90-38"><a href="Ch06.html#cb90-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb90-39"><a href="Ch06.html#cb90-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb90-40"><a href="Ch06.html#cb90-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb90-41"><a href="Ch06.html#cb90-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_49.png" width="100%" /></p>
</div>
<div id="ch06.050" class="section level2 hasAnchor" number="6.50">
<h2><span class="header-section-number">6.50</span> Climate_CHELSAv2.1-npp_cell<a href="Ch06.html#ch06.050" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-npp_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_50</code></p>
<p><strong>English name:</strong> Net primary productivity (g C m⁻² year⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Neto primārā produkcija (g C m⁻² year⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="Ch06.html#cb91-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb91-2"><a href="Ch06.html#cb91-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb91-3"><a href="Ch06.html#cb91-3" tabindex="-1"></a></span>
<span id="cb91-4"><a href="Ch06.html#cb91-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb91-5"><a href="Ch06.html#cb91-5" tabindex="-1"></a></span>
<span id="cb91-6"><a href="Ch06.html#cb91-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-npp_cell.tif&quot;</span></span>
<span id="cb91-7"><a href="Ch06.html#cb91-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_50&quot;</span></span>
<span id="cb91-8"><a href="Ch06.html#cb91-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-npp_cell.tif&quot;</span></span>
<span id="cb91-9"><a href="Ch06.html#cb91-9" tabindex="-1"></a></span>
<span id="cb91-10"><a href="Ch06.html#cb91-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb91-11"><a href="Ch06.html#cb91-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb91-12"><a href="Ch06.html#cb91-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb91-13"><a href="Ch06.html#cb91-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb91-14"><a href="Ch06.html#cb91-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb91-15"><a href="Ch06.html#cb91-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb91-16"><a href="Ch06.html#cb91-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb91-17"><a href="Ch06.html#cb91-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb91-18"><a href="Ch06.html#cb91-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb91-19"><a href="Ch06.html#cb91-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb91-20"><a href="Ch06.html#cb91-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb91-21"><a href="Ch06.html#cb91-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb91-22"><a href="Ch06.html#cb91-22" tabindex="-1"></a></span>
<span id="cb91-23"><a href="Ch06.html#cb91-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb91-24"><a href="Ch06.html#cb91-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb91-25"><a href="Ch06.html#cb91-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb91-26"><a href="Ch06.html#cb91-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb91-27"><a href="Ch06.html#cb91-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb91-28"><a href="Ch06.html#cb91-28" tabindex="-1"></a></span>
<span id="cb91-29"><a href="Ch06.html#cb91-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-npp_cell.tif&quot;</span></span>
<span id="cb91-30"><a href="Ch06.html#cb91-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb91-31"><a href="Ch06.html#cb91-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb91-32"><a href="Ch06.html#cb91-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb91-33"><a href="Ch06.html#cb91-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb91-34"><a href="Ch06.html#cb91-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb91-35"><a href="Ch06.html#cb91-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb91-36"><a href="Ch06.html#cb91-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb91-37"><a href="Ch06.html#cb91-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb91-38"><a href="Ch06.html#cb91-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb91-39"><a href="Ch06.html#cb91-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb91-40"><a href="Ch06.html#cb91-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb91-41"><a href="Ch06.html#cb91-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_50.png" width="100%" /></p>
</div>
<div id="ch06.051" class="section level2 hasAnchor" number="6.51">
<h2><span class="header-section-number">6.51</span> Climate_CHELSAv2.1-pet-penman-max_cell<a href="Ch06.html#ch06.051" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-pet-penman-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_51</code></p>
<p><strong>English name:</strong> Maximum monthly potential evapotranspiration (kg m⁻² month⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Maksimālā mēneša potenciālā evapotranspirācija (kg m⁻² month⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="Ch06.html#cb92-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb92-2"><a href="Ch06.html#cb92-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb92-3"><a href="Ch06.html#cb92-3" tabindex="-1"></a></span>
<span id="cb92-4"><a href="Ch06.html#cb92-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb92-5"><a href="Ch06.html#cb92-5" tabindex="-1"></a></span>
<span id="cb92-6"><a href="Ch06.html#cb92-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-pet-penman-max_cell.tif&quot;</span></span>
<span id="cb92-7"><a href="Ch06.html#cb92-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_51&quot;</span></span>
<span id="cb92-8"><a href="Ch06.html#cb92-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-pet-penman-max_cell.tif&quot;</span></span>
<span id="cb92-9"><a href="Ch06.html#cb92-9" tabindex="-1"></a></span>
<span id="cb92-10"><a href="Ch06.html#cb92-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb92-11"><a href="Ch06.html#cb92-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb92-12"><a href="Ch06.html#cb92-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb92-13"><a href="Ch06.html#cb92-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb92-14"><a href="Ch06.html#cb92-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb92-15"><a href="Ch06.html#cb92-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb92-16"><a href="Ch06.html#cb92-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb92-17"><a href="Ch06.html#cb92-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb92-18"><a href="Ch06.html#cb92-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb92-19"><a href="Ch06.html#cb92-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb92-20"><a href="Ch06.html#cb92-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-21"><a href="Ch06.html#cb92-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb92-22"><a href="Ch06.html#cb92-22" tabindex="-1"></a></span>
<span id="cb92-23"><a href="Ch06.html#cb92-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb92-24"><a href="Ch06.html#cb92-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb92-25"><a href="Ch06.html#cb92-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb92-26"><a href="Ch06.html#cb92-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb92-27"><a href="Ch06.html#cb92-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb92-28"><a href="Ch06.html#cb92-28" tabindex="-1"></a></span>
<span id="cb92-29"><a href="Ch06.html#cb92-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-pet-penman-max_cell.tif&quot;</span></span>
<span id="cb92-30"><a href="Ch06.html#cb92-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb92-31"><a href="Ch06.html#cb92-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb92-32"><a href="Ch06.html#cb92-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb92-33"><a href="Ch06.html#cb92-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb92-34"><a href="Ch06.html#cb92-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb92-35"><a href="Ch06.html#cb92-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb92-36"><a href="Ch06.html#cb92-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb92-37"><a href="Ch06.html#cb92-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb92-38"><a href="Ch06.html#cb92-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb92-39"><a href="Ch06.html#cb92-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb92-40"><a href="Ch06.html#cb92-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb92-41"><a href="Ch06.html#cb92-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_51.png" width="100%" /></p>
</div>
<div id="ch06.052" class="section level2 hasAnchor" number="6.52">
<h2><span class="header-section-number">6.52</span> Climate_CHELSAv2.1-pet-penman-mean_cell<a href="Ch06.html#ch06.052" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-pet-penman-mean_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_52</code></p>
<p><strong>English name:</strong> Mean monthly potential evapotranspiration (kg m⁻² month⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vidējā mēneša potenciālā evapotranspirācija (kg m⁻² month⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="Ch06.html#cb93-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb93-2"><a href="Ch06.html#cb93-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb93-3"><a href="Ch06.html#cb93-3" tabindex="-1"></a></span>
<span id="cb93-4"><a href="Ch06.html#cb93-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb93-5"><a href="Ch06.html#cb93-5" tabindex="-1"></a></span>
<span id="cb93-6"><a href="Ch06.html#cb93-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-pet-penman-mean_cell.tif&quot;</span></span>
<span id="cb93-7"><a href="Ch06.html#cb93-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_52&quot;</span></span>
<span id="cb93-8"><a href="Ch06.html#cb93-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-pet-penman-mean_cell.tif&quot;</span></span>
<span id="cb93-9"><a href="Ch06.html#cb93-9" tabindex="-1"></a></span>
<span id="cb93-10"><a href="Ch06.html#cb93-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb93-11"><a href="Ch06.html#cb93-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb93-12"><a href="Ch06.html#cb93-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb93-13"><a href="Ch06.html#cb93-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb93-14"><a href="Ch06.html#cb93-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb93-15"><a href="Ch06.html#cb93-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb93-16"><a href="Ch06.html#cb93-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb93-17"><a href="Ch06.html#cb93-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb93-18"><a href="Ch06.html#cb93-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb93-19"><a href="Ch06.html#cb93-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb93-20"><a href="Ch06.html#cb93-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb93-21"><a href="Ch06.html#cb93-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb93-22"><a href="Ch06.html#cb93-22" tabindex="-1"></a></span>
<span id="cb93-23"><a href="Ch06.html#cb93-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb93-24"><a href="Ch06.html#cb93-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb93-25"><a href="Ch06.html#cb93-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb93-26"><a href="Ch06.html#cb93-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb93-27"><a href="Ch06.html#cb93-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb93-28"><a href="Ch06.html#cb93-28" tabindex="-1"></a></span>
<span id="cb93-29"><a href="Ch06.html#cb93-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-pet-penman-mean_cell.tif&quot;</span></span>
<span id="cb93-30"><a href="Ch06.html#cb93-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb93-31"><a href="Ch06.html#cb93-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb93-32"><a href="Ch06.html#cb93-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb93-33"><a href="Ch06.html#cb93-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb93-34"><a href="Ch06.html#cb93-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb93-35"><a href="Ch06.html#cb93-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb93-36"><a href="Ch06.html#cb93-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb93-37"><a href="Ch06.html#cb93-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb93-38"><a href="Ch06.html#cb93-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb93-39"><a href="Ch06.html#cb93-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb93-40"><a href="Ch06.html#cb93-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb93-41"><a href="Ch06.html#cb93-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_52.png" width="100%" /></p>
</div>
<div id="ch06.053" class="section level2 hasAnchor" number="6.53">
<h2><span class="header-section-number">6.53</span> Climate_CHELSAv2.1-pet-penman-min_cell<a href="Ch06.html#ch06.053" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-pet-penman-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_53</code></p>
<p><strong>English name:</strong> Minimum monthly potential evapotranspiration (kg m⁻² month⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Minimālā mēneša vidējā potenciālā evapotranspirācija (kg m⁻² month⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="Ch06.html#cb94-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb94-2"><a href="Ch06.html#cb94-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb94-3"><a href="Ch06.html#cb94-3" tabindex="-1"></a></span>
<span id="cb94-4"><a href="Ch06.html#cb94-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb94-5"><a href="Ch06.html#cb94-5" tabindex="-1"></a></span>
<span id="cb94-6"><a href="Ch06.html#cb94-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-pet-penman-min_cell.tif&quot;</span></span>
<span id="cb94-7"><a href="Ch06.html#cb94-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_53&quot;</span></span>
<span id="cb94-8"><a href="Ch06.html#cb94-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-pet-penman-min_cell.tif&quot;</span></span>
<span id="cb94-9"><a href="Ch06.html#cb94-9" tabindex="-1"></a></span>
<span id="cb94-10"><a href="Ch06.html#cb94-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb94-11"><a href="Ch06.html#cb94-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb94-12"><a href="Ch06.html#cb94-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb94-13"><a href="Ch06.html#cb94-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb94-14"><a href="Ch06.html#cb94-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb94-15"><a href="Ch06.html#cb94-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb94-16"><a href="Ch06.html#cb94-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb94-17"><a href="Ch06.html#cb94-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb94-18"><a href="Ch06.html#cb94-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb94-19"><a href="Ch06.html#cb94-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb94-20"><a href="Ch06.html#cb94-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-21"><a href="Ch06.html#cb94-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb94-22"><a href="Ch06.html#cb94-22" tabindex="-1"></a></span>
<span id="cb94-23"><a href="Ch06.html#cb94-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb94-24"><a href="Ch06.html#cb94-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb94-25"><a href="Ch06.html#cb94-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb94-26"><a href="Ch06.html#cb94-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb94-27"><a href="Ch06.html#cb94-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb94-28"><a href="Ch06.html#cb94-28" tabindex="-1"></a></span>
<span id="cb94-29"><a href="Ch06.html#cb94-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-pet-penman-min_cell.tif&quot;</span></span>
<span id="cb94-30"><a href="Ch06.html#cb94-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb94-31"><a href="Ch06.html#cb94-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb94-32"><a href="Ch06.html#cb94-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb94-33"><a href="Ch06.html#cb94-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb94-34"><a href="Ch06.html#cb94-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb94-35"><a href="Ch06.html#cb94-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb94-36"><a href="Ch06.html#cb94-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb94-37"><a href="Ch06.html#cb94-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb94-38"><a href="Ch06.html#cb94-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb94-39"><a href="Ch06.html#cb94-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb94-40"><a href="Ch06.html#cb94-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb94-41"><a href="Ch06.html#cb94-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_53.png" width="100%" /></p>
</div>
<div id="ch06.054" class="section level2 hasAnchor" number="6.54">
<h2><span class="header-section-number">6.54</span> Climate_CHELSAv2.1-pet-penman-range_cell<a href="Ch06.html#ch06.054" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-pet-penman-range_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_54</code></p>
<p><strong>English name:</strong> Annual range of monthly potential evapotranspiration (kg m⁻² month⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada potenciālā evapotranspirācijas amplitūda (kg m⁻² month⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="Ch06.html#cb95-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb95-2"><a href="Ch06.html#cb95-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb95-3"><a href="Ch06.html#cb95-3" tabindex="-1"></a></span>
<span id="cb95-4"><a href="Ch06.html#cb95-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb95-5"><a href="Ch06.html#cb95-5" tabindex="-1"></a></span>
<span id="cb95-6"><a href="Ch06.html#cb95-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-pet-penman-range_cell.tif&quot;</span></span>
<span id="cb95-7"><a href="Ch06.html#cb95-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_54&quot;</span></span>
<span id="cb95-8"><a href="Ch06.html#cb95-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-pet-penman-range_cell.tif&quot;</span></span>
<span id="cb95-9"><a href="Ch06.html#cb95-9" tabindex="-1"></a></span>
<span id="cb95-10"><a href="Ch06.html#cb95-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb95-11"><a href="Ch06.html#cb95-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb95-12"><a href="Ch06.html#cb95-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb95-13"><a href="Ch06.html#cb95-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb95-14"><a href="Ch06.html#cb95-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb95-15"><a href="Ch06.html#cb95-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb95-16"><a href="Ch06.html#cb95-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb95-17"><a href="Ch06.html#cb95-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb95-18"><a href="Ch06.html#cb95-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb95-19"><a href="Ch06.html#cb95-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb95-20"><a href="Ch06.html#cb95-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb95-21"><a href="Ch06.html#cb95-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb95-22"><a href="Ch06.html#cb95-22" tabindex="-1"></a></span>
<span id="cb95-23"><a href="Ch06.html#cb95-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb95-24"><a href="Ch06.html#cb95-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb95-25"><a href="Ch06.html#cb95-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb95-26"><a href="Ch06.html#cb95-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb95-27"><a href="Ch06.html#cb95-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb95-28"><a href="Ch06.html#cb95-28" tabindex="-1"></a></span>
<span id="cb95-29"><a href="Ch06.html#cb95-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-pet-penman-range_cell.tif&quot;</span></span>
<span id="cb95-30"><a href="Ch06.html#cb95-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb95-31"><a href="Ch06.html#cb95-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb95-32"><a href="Ch06.html#cb95-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb95-33"><a href="Ch06.html#cb95-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb95-34"><a href="Ch06.html#cb95-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb95-35"><a href="Ch06.html#cb95-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb95-36"><a href="Ch06.html#cb95-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb95-37"><a href="Ch06.html#cb95-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb95-38"><a href="Ch06.html#cb95-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb95-39"><a href="Ch06.html#cb95-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb95-40"><a href="Ch06.html#cb95-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb95-41"><a href="Ch06.html#cb95-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_54.png" width="100%" /></p>
</div>
<div id="ch06.055" class="section level2 hasAnchor" number="6.55">
<h2><span class="header-section-number">6.55</span> Climate_CHELSAv2.1-rsds-max_cell<a href="Ch06.html#ch06.055" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-rsds-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_55</code></p>
<p><strong>English name:</strong> Maximum monthly surface downwelling shortwave flux in air (MJ m⁻² d⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Maksimālā mēneša vidējā Zemes virsmu sasniedzošā saules radiācija (MJ m⁻² d⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="Ch06.html#cb96-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb96-2"><a href="Ch06.html#cb96-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb96-3"><a href="Ch06.html#cb96-3" tabindex="-1"></a></span>
<span id="cb96-4"><a href="Ch06.html#cb96-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb96-5"><a href="Ch06.html#cb96-5" tabindex="-1"></a></span>
<span id="cb96-6"><a href="Ch06.html#cb96-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-rsds-max_cell.tif&quot;</span></span>
<span id="cb96-7"><a href="Ch06.html#cb96-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_55&quot;</span></span>
<span id="cb96-8"><a href="Ch06.html#cb96-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-rsds-max_cell.tif&quot;</span></span>
<span id="cb96-9"><a href="Ch06.html#cb96-9" tabindex="-1"></a></span>
<span id="cb96-10"><a href="Ch06.html#cb96-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb96-11"><a href="Ch06.html#cb96-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb96-12"><a href="Ch06.html#cb96-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb96-13"><a href="Ch06.html#cb96-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb96-14"><a href="Ch06.html#cb96-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb96-15"><a href="Ch06.html#cb96-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb96-16"><a href="Ch06.html#cb96-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb96-17"><a href="Ch06.html#cb96-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb96-18"><a href="Ch06.html#cb96-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb96-19"><a href="Ch06.html#cb96-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb96-20"><a href="Ch06.html#cb96-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb96-21"><a href="Ch06.html#cb96-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb96-22"><a href="Ch06.html#cb96-22" tabindex="-1"></a></span>
<span id="cb96-23"><a href="Ch06.html#cb96-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb96-24"><a href="Ch06.html#cb96-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb96-25"><a href="Ch06.html#cb96-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb96-26"><a href="Ch06.html#cb96-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb96-27"><a href="Ch06.html#cb96-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb96-28"><a href="Ch06.html#cb96-28" tabindex="-1"></a></span>
<span id="cb96-29"><a href="Ch06.html#cb96-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-rsds-max_cell.tif&quot;</span></span>
<span id="cb96-30"><a href="Ch06.html#cb96-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb96-31"><a href="Ch06.html#cb96-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb96-32"><a href="Ch06.html#cb96-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb96-33"><a href="Ch06.html#cb96-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb96-34"><a href="Ch06.html#cb96-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb96-35"><a href="Ch06.html#cb96-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb96-36"><a href="Ch06.html#cb96-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb96-37"><a href="Ch06.html#cb96-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb96-38"><a href="Ch06.html#cb96-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb96-39"><a href="Ch06.html#cb96-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb96-40"><a href="Ch06.html#cb96-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb96-41"><a href="Ch06.html#cb96-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_55.png" width="100%" /></p>
</div>
<div id="ch06.056" class="section level2 hasAnchor" number="6.56">
<h2><span class="header-section-number">6.56</span> Climate_CHELSAv2.1-rsds-mean_cell<a href="Ch06.html#ch06.056" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-rsds-mean_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_56</code></p>
<p><strong>English name:</strong> Mean monthly surface downwelling shortwave flux in air (MJ m⁻² d⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vidējā Zemes virsmu sasniedzošā saules radiācija (MJ m⁻² d⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="Ch06.html#cb97-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb97-2"><a href="Ch06.html#cb97-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb97-3"><a href="Ch06.html#cb97-3" tabindex="-1"></a></span>
<span id="cb97-4"><a href="Ch06.html#cb97-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb97-5"><a href="Ch06.html#cb97-5" tabindex="-1"></a></span>
<span id="cb97-6"><a href="Ch06.html#cb97-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-rsds-mean_cell.tif&quot;</span></span>
<span id="cb97-7"><a href="Ch06.html#cb97-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_56&quot;</span></span>
<span id="cb97-8"><a href="Ch06.html#cb97-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-rsds-mean_cell.tif&quot;</span></span>
<span id="cb97-9"><a href="Ch06.html#cb97-9" tabindex="-1"></a></span>
<span id="cb97-10"><a href="Ch06.html#cb97-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb97-11"><a href="Ch06.html#cb97-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb97-12"><a href="Ch06.html#cb97-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb97-13"><a href="Ch06.html#cb97-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb97-14"><a href="Ch06.html#cb97-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb97-15"><a href="Ch06.html#cb97-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb97-16"><a href="Ch06.html#cb97-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb97-17"><a href="Ch06.html#cb97-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb97-18"><a href="Ch06.html#cb97-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb97-19"><a href="Ch06.html#cb97-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb97-20"><a href="Ch06.html#cb97-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb97-21"><a href="Ch06.html#cb97-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb97-22"><a href="Ch06.html#cb97-22" tabindex="-1"></a></span>
<span id="cb97-23"><a href="Ch06.html#cb97-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb97-24"><a href="Ch06.html#cb97-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb97-25"><a href="Ch06.html#cb97-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb97-26"><a href="Ch06.html#cb97-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb97-27"><a href="Ch06.html#cb97-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb97-28"><a href="Ch06.html#cb97-28" tabindex="-1"></a></span>
<span id="cb97-29"><a href="Ch06.html#cb97-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-rsds-mean_cell.tif&quot;</span></span>
<span id="cb97-30"><a href="Ch06.html#cb97-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb97-31"><a href="Ch06.html#cb97-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb97-32"><a href="Ch06.html#cb97-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb97-33"><a href="Ch06.html#cb97-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb97-34"><a href="Ch06.html#cb97-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb97-35"><a href="Ch06.html#cb97-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb97-36"><a href="Ch06.html#cb97-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb97-37"><a href="Ch06.html#cb97-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb97-38"><a href="Ch06.html#cb97-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb97-39"><a href="Ch06.html#cb97-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb97-40"><a href="Ch06.html#cb97-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb97-41"><a href="Ch06.html#cb97-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_56.png" width="100%" /></p>
</div>
<div id="ch06.057" class="section level2 hasAnchor" number="6.57">
<h2><span class="header-section-number">6.57</span> Climate_CHELSAv2.1-rsds-min_cell<a href="Ch06.html#ch06.057" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-rsds-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_57</code></p>
<p><strong>English name:</strong> Minimum monthly surface shortwave flux in air (MJ m⁻² d⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Minimālā mēneša vidējā Zemes virsmu sasniedzošā saules radiācija (MJ m⁻² d⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="Ch06.html#cb98-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb98-2"><a href="Ch06.html#cb98-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb98-3"><a href="Ch06.html#cb98-3" tabindex="-1"></a></span>
<span id="cb98-4"><a href="Ch06.html#cb98-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb98-5"><a href="Ch06.html#cb98-5" tabindex="-1"></a></span>
<span id="cb98-6"><a href="Ch06.html#cb98-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-rsds-min_cell.tif&quot;</span></span>
<span id="cb98-7"><a href="Ch06.html#cb98-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_57&quot;</span></span>
<span id="cb98-8"><a href="Ch06.html#cb98-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-rsds-min_cell.tif&quot;</span></span>
<span id="cb98-9"><a href="Ch06.html#cb98-9" tabindex="-1"></a></span>
<span id="cb98-10"><a href="Ch06.html#cb98-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb98-11"><a href="Ch06.html#cb98-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb98-12"><a href="Ch06.html#cb98-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb98-13"><a href="Ch06.html#cb98-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb98-14"><a href="Ch06.html#cb98-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb98-15"><a href="Ch06.html#cb98-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb98-16"><a href="Ch06.html#cb98-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb98-17"><a href="Ch06.html#cb98-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb98-18"><a href="Ch06.html#cb98-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb98-19"><a href="Ch06.html#cb98-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb98-20"><a href="Ch06.html#cb98-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb98-21"><a href="Ch06.html#cb98-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb98-22"><a href="Ch06.html#cb98-22" tabindex="-1"></a></span>
<span id="cb98-23"><a href="Ch06.html#cb98-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb98-24"><a href="Ch06.html#cb98-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb98-25"><a href="Ch06.html#cb98-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb98-26"><a href="Ch06.html#cb98-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb98-27"><a href="Ch06.html#cb98-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb98-28"><a href="Ch06.html#cb98-28" tabindex="-1"></a></span>
<span id="cb98-29"><a href="Ch06.html#cb98-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-rsds-min_cell.tif&quot;</span></span>
<span id="cb98-30"><a href="Ch06.html#cb98-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb98-31"><a href="Ch06.html#cb98-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb98-32"><a href="Ch06.html#cb98-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb98-33"><a href="Ch06.html#cb98-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb98-34"><a href="Ch06.html#cb98-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb98-35"><a href="Ch06.html#cb98-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb98-36"><a href="Ch06.html#cb98-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb98-37"><a href="Ch06.html#cb98-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb98-38"><a href="Ch06.html#cb98-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb98-39"><a href="Ch06.html#cb98-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb98-40"><a href="Ch06.html#cb98-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb98-41"><a href="Ch06.html#cb98-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_57.png" width="100%" /></p>
</div>
<div id="ch06.058" class="section level2 hasAnchor" number="6.58">
<h2><span class="header-section-number">6.58</span> Climate_CHELSAv2.1-rsds-range_cell<a href="Ch06.html#ch06.058" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-rsds-range_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_58</code></p>
<p><strong>English name:</strong> Annual range of monthly surface downwelling shortwave flux in air (MJ m⁻² d⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada amplitūda Zemes virsmu sasniedzošajai saules radiācijai (MJ m⁻² d⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="Ch06.html#cb99-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb99-2"><a href="Ch06.html#cb99-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb99-3"><a href="Ch06.html#cb99-3" tabindex="-1"></a></span>
<span id="cb99-4"><a href="Ch06.html#cb99-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb99-5"><a href="Ch06.html#cb99-5" tabindex="-1"></a></span>
<span id="cb99-6"><a href="Ch06.html#cb99-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-rsds-range_cell.tif&quot;</span></span>
<span id="cb99-7"><a href="Ch06.html#cb99-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_58&quot;</span></span>
<span id="cb99-8"><a href="Ch06.html#cb99-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-rsds-range_cell.tif&quot;</span></span>
<span id="cb99-9"><a href="Ch06.html#cb99-9" tabindex="-1"></a></span>
<span id="cb99-10"><a href="Ch06.html#cb99-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb99-11"><a href="Ch06.html#cb99-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb99-12"><a href="Ch06.html#cb99-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb99-13"><a href="Ch06.html#cb99-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb99-14"><a href="Ch06.html#cb99-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb99-15"><a href="Ch06.html#cb99-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb99-16"><a href="Ch06.html#cb99-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb99-17"><a href="Ch06.html#cb99-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb99-18"><a href="Ch06.html#cb99-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb99-19"><a href="Ch06.html#cb99-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb99-20"><a href="Ch06.html#cb99-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb99-21"><a href="Ch06.html#cb99-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb99-22"><a href="Ch06.html#cb99-22" tabindex="-1"></a></span>
<span id="cb99-23"><a href="Ch06.html#cb99-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb99-24"><a href="Ch06.html#cb99-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb99-25"><a href="Ch06.html#cb99-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb99-26"><a href="Ch06.html#cb99-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb99-27"><a href="Ch06.html#cb99-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb99-28"><a href="Ch06.html#cb99-28" tabindex="-1"></a></span>
<span id="cb99-29"><a href="Ch06.html#cb99-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-rsds-range_cell.tif&quot;</span></span>
<span id="cb99-30"><a href="Ch06.html#cb99-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb99-31"><a href="Ch06.html#cb99-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb99-32"><a href="Ch06.html#cb99-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb99-33"><a href="Ch06.html#cb99-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb99-34"><a href="Ch06.html#cb99-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb99-35"><a href="Ch06.html#cb99-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb99-36"><a href="Ch06.html#cb99-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb99-37"><a href="Ch06.html#cb99-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb99-38"><a href="Ch06.html#cb99-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb99-39"><a href="Ch06.html#cb99-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb99-40"><a href="Ch06.html#cb99-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb99-41"><a href="Ch06.html#cb99-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_58.png" width="100%" /></p>
</div>
<div id="ch06.059" class="section level2 hasAnchor" number="6.59">
<h2><span class="header-section-number">6.59</span> Climate_CHELSAv2.1-scd_cell<a href="Ch06.html#ch06.059" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-scd_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_59</code></p>
<p><strong>English name:</strong> Number of days with snow cover (TREELIM) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Dienu ar sniega segu skaits (TREELIM) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="Ch06.html#cb100-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb100-2"><a href="Ch06.html#cb100-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb100-3"><a href="Ch06.html#cb100-3" tabindex="-1"></a></span>
<span id="cb100-4"><a href="Ch06.html#cb100-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb100-5"><a href="Ch06.html#cb100-5" tabindex="-1"></a></span>
<span id="cb100-6"><a href="Ch06.html#cb100-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-scd_cell.tif&quot;</span></span>
<span id="cb100-7"><a href="Ch06.html#cb100-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_59&quot;</span></span>
<span id="cb100-8"><a href="Ch06.html#cb100-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-scd_cell.tif&quot;</span></span>
<span id="cb100-9"><a href="Ch06.html#cb100-9" tabindex="-1"></a></span>
<span id="cb100-10"><a href="Ch06.html#cb100-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb100-11"><a href="Ch06.html#cb100-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb100-12"><a href="Ch06.html#cb100-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb100-13"><a href="Ch06.html#cb100-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb100-14"><a href="Ch06.html#cb100-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb100-15"><a href="Ch06.html#cb100-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb100-16"><a href="Ch06.html#cb100-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb100-17"><a href="Ch06.html#cb100-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb100-18"><a href="Ch06.html#cb100-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb100-19"><a href="Ch06.html#cb100-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb100-20"><a href="Ch06.html#cb100-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb100-21"><a href="Ch06.html#cb100-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb100-22"><a href="Ch06.html#cb100-22" tabindex="-1"></a></span>
<span id="cb100-23"><a href="Ch06.html#cb100-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb100-24"><a href="Ch06.html#cb100-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb100-25"><a href="Ch06.html#cb100-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb100-26"><a href="Ch06.html#cb100-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb100-27"><a href="Ch06.html#cb100-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb100-28"><a href="Ch06.html#cb100-28" tabindex="-1"></a></span>
<span id="cb100-29"><a href="Ch06.html#cb100-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-scd_cell.tif&quot;</span></span>
<span id="cb100-30"><a href="Ch06.html#cb100-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb100-31"><a href="Ch06.html#cb100-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb100-32"><a href="Ch06.html#cb100-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb100-33"><a href="Ch06.html#cb100-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb100-34"><a href="Ch06.html#cb100-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb100-35"><a href="Ch06.html#cb100-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb100-36"><a href="Ch06.html#cb100-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb100-37"><a href="Ch06.html#cb100-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb100-38"><a href="Ch06.html#cb100-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb100-39"><a href="Ch06.html#cb100-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb100-40"><a href="Ch06.html#cb100-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb100-41"><a href="Ch06.html#cb100-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_59.png" width="100%" /></p>
</div>
<div id="ch06.060" class="section level2 hasAnchor" number="6.60">
<h2><span class="header-section-number">6.60</span> Climate_CHELSAv2.1-sfcWind-max_cell<a href="Ch06.html#ch06.060" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-sfcWind-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_60</code></p>
<p><strong>English name:</strong> Maximum monthly near-surface wind speed (m s⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Maksimālais mēneša vidējais piezemes slāņa vēja ātrums (m s⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="Ch06.html#cb101-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb101-2"><a href="Ch06.html#cb101-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb101-3"><a href="Ch06.html#cb101-3" tabindex="-1"></a></span>
<span id="cb101-4"><a href="Ch06.html#cb101-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb101-5"><a href="Ch06.html#cb101-5" tabindex="-1"></a></span>
<span id="cb101-6"><a href="Ch06.html#cb101-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-sfcWind-max_cell.tif&quot;</span></span>
<span id="cb101-7"><a href="Ch06.html#cb101-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_60&quot;</span></span>
<span id="cb101-8"><a href="Ch06.html#cb101-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-sfcWind-max_cell.tif&quot;</span></span>
<span id="cb101-9"><a href="Ch06.html#cb101-9" tabindex="-1"></a></span>
<span id="cb101-10"><a href="Ch06.html#cb101-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb101-11"><a href="Ch06.html#cb101-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb101-12"><a href="Ch06.html#cb101-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb101-13"><a href="Ch06.html#cb101-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb101-14"><a href="Ch06.html#cb101-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb101-15"><a href="Ch06.html#cb101-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb101-16"><a href="Ch06.html#cb101-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb101-17"><a href="Ch06.html#cb101-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb101-18"><a href="Ch06.html#cb101-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb101-19"><a href="Ch06.html#cb101-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb101-20"><a href="Ch06.html#cb101-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb101-21"><a href="Ch06.html#cb101-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb101-22"><a href="Ch06.html#cb101-22" tabindex="-1"></a></span>
<span id="cb101-23"><a href="Ch06.html#cb101-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb101-24"><a href="Ch06.html#cb101-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb101-25"><a href="Ch06.html#cb101-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb101-26"><a href="Ch06.html#cb101-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb101-27"><a href="Ch06.html#cb101-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb101-28"><a href="Ch06.html#cb101-28" tabindex="-1"></a></span>
<span id="cb101-29"><a href="Ch06.html#cb101-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-sfcWind-max_cell.tif&quot;</span></span>
<span id="cb101-30"><a href="Ch06.html#cb101-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb101-31"><a href="Ch06.html#cb101-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb101-32"><a href="Ch06.html#cb101-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb101-33"><a href="Ch06.html#cb101-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb101-34"><a href="Ch06.html#cb101-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb101-35"><a href="Ch06.html#cb101-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb101-36"><a href="Ch06.html#cb101-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb101-37"><a href="Ch06.html#cb101-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb101-38"><a href="Ch06.html#cb101-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb101-39"><a href="Ch06.html#cb101-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb101-40"><a href="Ch06.html#cb101-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb101-41"><a href="Ch06.html#cb101-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_60.png" width="100%" /></p>
</div>
<div id="ch06.061" class="section level2 hasAnchor" number="6.61">
<h2><span class="header-section-number">6.61</span> Climate_CHELSAv2.1-sfcWind-mean_cell<a href="Ch06.html#ch06.061" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-sfcWind-mean_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_61</code></p>
<p><strong>English name:</strong> Mean monthly near-surface wind speed (m s⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vidējais piezemes slāņa vēja ātrums (m s⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="Ch06.html#cb102-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb102-2"><a href="Ch06.html#cb102-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb102-3"><a href="Ch06.html#cb102-3" tabindex="-1"></a></span>
<span id="cb102-4"><a href="Ch06.html#cb102-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb102-5"><a href="Ch06.html#cb102-5" tabindex="-1"></a></span>
<span id="cb102-6"><a href="Ch06.html#cb102-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-sfcWind-mean_cell.tif&quot;</span></span>
<span id="cb102-7"><a href="Ch06.html#cb102-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_61&quot;</span></span>
<span id="cb102-8"><a href="Ch06.html#cb102-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-sfcWind-mean_cell.tif&quot;</span></span>
<span id="cb102-9"><a href="Ch06.html#cb102-9" tabindex="-1"></a></span>
<span id="cb102-10"><a href="Ch06.html#cb102-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb102-11"><a href="Ch06.html#cb102-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb102-12"><a href="Ch06.html#cb102-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb102-13"><a href="Ch06.html#cb102-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb102-14"><a href="Ch06.html#cb102-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb102-15"><a href="Ch06.html#cb102-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb102-16"><a href="Ch06.html#cb102-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb102-17"><a href="Ch06.html#cb102-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb102-18"><a href="Ch06.html#cb102-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb102-19"><a href="Ch06.html#cb102-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb102-20"><a href="Ch06.html#cb102-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb102-21"><a href="Ch06.html#cb102-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb102-22"><a href="Ch06.html#cb102-22" tabindex="-1"></a></span>
<span id="cb102-23"><a href="Ch06.html#cb102-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb102-24"><a href="Ch06.html#cb102-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb102-25"><a href="Ch06.html#cb102-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb102-26"><a href="Ch06.html#cb102-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb102-27"><a href="Ch06.html#cb102-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb102-28"><a href="Ch06.html#cb102-28" tabindex="-1"></a></span>
<span id="cb102-29"><a href="Ch06.html#cb102-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-sfcWind-mean_cell.tif&quot;</span></span>
<span id="cb102-30"><a href="Ch06.html#cb102-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb102-31"><a href="Ch06.html#cb102-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb102-32"><a href="Ch06.html#cb102-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb102-33"><a href="Ch06.html#cb102-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb102-34"><a href="Ch06.html#cb102-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb102-35"><a href="Ch06.html#cb102-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb102-36"><a href="Ch06.html#cb102-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb102-37"><a href="Ch06.html#cb102-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb102-38"><a href="Ch06.html#cb102-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb102-39"><a href="Ch06.html#cb102-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb102-40"><a href="Ch06.html#cb102-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb102-41"><a href="Ch06.html#cb102-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_61.png" width="100%" /></p>
</div>
<div id="ch06.062" class="section level2 hasAnchor" number="6.62">
<h2><span class="header-section-number">6.62</span> Climate_CHELSAv2.1-sfcWind-min_cell<a href="Ch06.html#ch06.062" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-sfcWind-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_62</code></p>
<p><strong>English name:</strong> Minimum monthly near-surface wind speed (m s⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Minimālais mēneša vidējais piezemes slāņa vēja ātrums (m s⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="Ch06.html#cb103-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb103-2"><a href="Ch06.html#cb103-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb103-3"><a href="Ch06.html#cb103-3" tabindex="-1"></a></span>
<span id="cb103-4"><a href="Ch06.html#cb103-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb103-5"><a href="Ch06.html#cb103-5" tabindex="-1"></a></span>
<span id="cb103-6"><a href="Ch06.html#cb103-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-sfcWind-min_cell.tif&quot;</span></span>
<span id="cb103-7"><a href="Ch06.html#cb103-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_62&quot;</span></span>
<span id="cb103-8"><a href="Ch06.html#cb103-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-sfcWind-min_cell.tif&quot;</span></span>
<span id="cb103-9"><a href="Ch06.html#cb103-9" tabindex="-1"></a></span>
<span id="cb103-10"><a href="Ch06.html#cb103-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb103-11"><a href="Ch06.html#cb103-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb103-12"><a href="Ch06.html#cb103-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb103-13"><a href="Ch06.html#cb103-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb103-14"><a href="Ch06.html#cb103-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb103-15"><a href="Ch06.html#cb103-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb103-16"><a href="Ch06.html#cb103-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb103-17"><a href="Ch06.html#cb103-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb103-18"><a href="Ch06.html#cb103-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb103-19"><a href="Ch06.html#cb103-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb103-20"><a href="Ch06.html#cb103-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb103-21"><a href="Ch06.html#cb103-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb103-22"><a href="Ch06.html#cb103-22" tabindex="-1"></a></span>
<span id="cb103-23"><a href="Ch06.html#cb103-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb103-24"><a href="Ch06.html#cb103-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb103-25"><a href="Ch06.html#cb103-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb103-26"><a href="Ch06.html#cb103-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb103-27"><a href="Ch06.html#cb103-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb103-28"><a href="Ch06.html#cb103-28" tabindex="-1"></a></span>
<span id="cb103-29"><a href="Ch06.html#cb103-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-sfcWind-min_cell.tif&quot;</span></span>
<span id="cb103-30"><a href="Ch06.html#cb103-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb103-31"><a href="Ch06.html#cb103-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb103-32"><a href="Ch06.html#cb103-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb103-33"><a href="Ch06.html#cb103-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb103-34"><a href="Ch06.html#cb103-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb103-35"><a href="Ch06.html#cb103-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb103-36"><a href="Ch06.html#cb103-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb103-37"><a href="Ch06.html#cb103-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb103-38"><a href="Ch06.html#cb103-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb103-39"><a href="Ch06.html#cb103-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb103-40"><a href="Ch06.html#cb103-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb103-41"><a href="Ch06.html#cb103-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_62.png" width="100%" /></p>
</div>
<div id="ch06.063" class="section level2 hasAnchor" number="6.63">
<h2><span class="header-section-number">6.63</span> Climate_CHELSAv2.1-sfcWind-range_cell<a href="Ch06.html#ch06.063" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-sfcWind-range_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_63</code></p>
<p><strong>English name:</strong> Annual range of monthly near-surface wind speed (m s⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada amplitūda vidējam piezemes slāņa vēja ātrumam (m s⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="Ch06.html#cb104-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb104-2"><a href="Ch06.html#cb104-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb104-3"><a href="Ch06.html#cb104-3" tabindex="-1"></a></span>
<span id="cb104-4"><a href="Ch06.html#cb104-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb104-5"><a href="Ch06.html#cb104-5" tabindex="-1"></a></span>
<span id="cb104-6"><a href="Ch06.html#cb104-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-sfcWind-range_cell.tif&quot;</span></span>
<span id="cb104-7"><a href="Ch06.html#cb104-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_63&quot;</span></span>
<span id="cb104-8"><a href="Ch06.html#cb104-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-sfcWind-range_cell.tif&quot;</span></span>
<span id="cb104-9"><a href="Ch06.html#cb104-9" tabindex="-1"></a></span>
<span id="cb104-10"><a href="Ch06.html#cb104-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb104-11"><a href="Ch06.html#cb104-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb104-12"><a href="Ch06.html#cb104-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb104-13"><a href="Ch06.html#cb104-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb104-14"><a href="Ch06.html#cb104-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb104-15"><a href="Ch06.html#cb104-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb104-16"><a href="Ch06.html#cb104-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb104-17"><a href="Ch06.html#cb104-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb104-18"><a href="Ch06.html#cb104-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb104-19"><a href="Ch06.html#cb104-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb104-20"><a href="Ch06.html#cb104-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb104-21"><a href="Ch06.html#cb104-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb104-22"><a href="Ch06.html#cb104-22" tabindex="-1"></a></span>
<span id="cb104-23"><a href="Ch06.html#cb104-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb104-24"><a href="Ch06.html#cb104-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb104-25"><a href="Ch06.html#cb104-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb104-26"><a href="Ch06.html#cb104-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb104-27"><a href="Ch06.html#cb104-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb104-28"><a href="Ch06.html#cb104-28" tabindex="-1"></a></span>
<span id="cb104-29"><a href="Ch06.html#cb104-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-sfcWind-range_cell.tif&quot;</span></span>
<span id="cb104-30"><a href="Ch06.html#cb104-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb104-31"><a href="Ch06.html#cb104-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb104-32"><a href="Ch06.html#cb104-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb104-33"><a href="Ch06.html#cb104-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb104-34"><a href="Ch06.html#cb104-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb104-35"><a href="Ch06.html#cb104-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb104-36"><a href="Ch06.html#cb104-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb104-37"><a href="Ch06.html#cb104-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb104-38"><a href="Ch06.html#cb104-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb104-39"><a href="Ch06.html#cb104-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb104-40"><a href="Ch06.html#cb104-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb104-41"><a href="Ch06.html#cb104-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_63.png" width="100%" /></p>
</div>
<div id="ch06.064" class="section level2 hasAnchor" number="6.64">
<h2><span class="header-section-number">6.64</span> Climate_CHELSAv2.1-swb_cell<a href="Ch06.html#ch06.064" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-swb_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_64</code></p>
<p><strong>English name:</strong> Site water balance (kg m⁻² year⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ūdens bilance (kg m⁻² year⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="Ch06.html#cb105-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb105-2"><a href="Ch06.html#cb105-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb105-3"><a href="Ch06.html#cb105-3" tabindex="-1"></a></span>
<span id="cb105-4"><a href="Ch06.html#cb105-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb105-5"><a href="Ch06.html#cb105-5" tabindex="-1"></a></span>
<span id="cb105-6"><a href="Ch06.html#cb105-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-swb_cell.tif&quot;</span></span>
<span id="cb105-7"><a href="Ch06.html#cb105-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_64&quot;</span></span>
<span id="cb105-8"><a href="Ch06.html#cb105-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-swb_cell.tif&quot;</span></span>
<span id="cb105-9"><a href="Ch06.html#cb105-9" tabindex="-1"></a></span>
<span id="cb105-10"><a href="Ch06.html#cb105-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb105-11"><a href="Ch06.html#cb105-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb105-12"><a href="Ch06.html#cb105-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb105-13"><a href="Ch06.html#cb105-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb105-14"><a href="Ch06.html#cb105-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb105-15"><a href="Ch06.html#cb105-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb105-16"><a href="Ch06.html#cb105-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb105-17"><a href="Ch06.html#cb105-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb105-18"><a href="Ch06.html#cb105-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb105-19"><a href="Ch06.html#cb105-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb105-20"><a href="Ch06.html#cb105-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb105-21"><a href="Ch06.html#cb105-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb105-22"><a href="Ch06.html#cb105-22" tabindex="-1"></a></span>
<span id="cb105-23"><a href="Ch06.html#cb105-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb105-24"><a href="Ch06.html#cb105-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb105-25"><a href="Ch06.html#cb105-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb105-26"><a href="Ch06.html#cb105-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb105-27"><a href="Ch06.html#cb105-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb105-28"><a href="Ch06.html#cb105-28" tabindex="-1"></a></span>
<span id="cb105-29"><a href="Ch06.html#cb105-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-swb_cell.tif&quot;</span></span>
<span id="cb105-30"><a href="Ch06.html#cb105-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb105-31"><a href="Ch06.html#cb105-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb105-32"><a href="Ch06.html#cb105-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb105-33"><a href="Ch06.html#cb105-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb105-34"><a href="Ch06.html#cb105-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb105-35"><a href="Ch06.html#cb105-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb105-36"><a href="Ch06.html#cb105-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb105-37"><a href="Ch06.html#cb105-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb105-38"><a href="Ch06.html#cb105-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb105-39"><a href="Ch06.html#cb105-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb105-40"><a href="Ch06.html#cb105-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb105-41"><a href="Ch06.html#cb105-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_64.png" width="100%" /></p>
</div>
<div id="ch06.065" class="section level2 hasAnchor" number="6.65">
<h2><span class="header-section-number">6.65</span> Climate_CHELSAv2.1-swe_cell<a href="Ch06.html#ch06.065" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-swe_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_65</code></p>
<p><strong>English name:</strong> Snow water equivalent (kg m⁻² year⁻¹) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ūdens ekvivalents sniegā (kg m⁻² year⁻¹) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="Ch06.html#cb106-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb106-2"><a href="Ch06.html#cb106-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb106-3"><a href="Ch06.html#cb106-3" tabindex="-1"></a></span>
<span id="cb106-4"><a href="Ch06.html#cb106-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb106-5"><a href="Ch06.html#cb106-5" tabindex="-1"></a></span>
<span id="cb106-6"><a href="Ch06.html#cb106-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-swe_cell.tif&quot;</span></span>
<span id="cb106-7"><a href="Ch06.html#cb106-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_65&quot;</span></span>
<span id="cb106-8"><a href="Ch06.html#cb106-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-swe_cell.tif&quot;</span></span>
<span id="cb106-9"><a href="Ch06.html#cb106-9" tabindex="-1"></a></span>
<span id="cb106-10"><a href="Ch06.html#cb106-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb106-11"><a href="Ch06.html#cb106-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb106-12"><a href="Ch06.html#cb106-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb106-13"><a href="Ch06.html#cb106-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb106-14"><a href="Ch06.html#cb106-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb106-15"><a href="Ch06.html#cb106-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb106-16"><a href="Ch06.html#cb106-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb106-17"><a href="Ch06.html#cb106-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb106-18"><a href="Ch06.html#cb106-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb106-19"><a href="Ch06.html#cb106-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb106-20"><a href="Ch06.html#cb106-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb106-21"><a href="Ch06.html#cb106-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb106-22"><a href="Ch06.html#cb106-22" tabindex="-1"></a></span>
<span id="cb106-23"><a href="Ch06.html#cb106-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb106-24"><a href="Ch06.html#cb106-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb106-25"><a href="Ch06.html#cb106-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb106-26"><a href="Ch06.html#cb106-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb106-27"><a href="Ch06.html#cb106-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb106-28"><a href="Ch06.html#cb106-28" tabindex="-1"></a></span>
<span id="cb106-29"><a href="Ch06.html#cb106-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-swe_cell.tif&quot;</span></span>
<span id="cb106-30"><a href="Ch06.html#cb106-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb106-31"><a href="Ch06.html#cb106-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb106-32"><a href="Ch06.html#cb106-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb106-33"><a href="Ch06.html#cb106-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb106-34"><a href="Ch06.html#cb106-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb106-35"><a href="Ch06.html#cb106-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb106-36"><a href="Ch06.html#cb106-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb106-37"><a href="Ch06.html#cb106-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb106-38"><a href="Ch06.html#cb106-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb106-39"><a href="Ch06.html#cb106-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb106-40"><a href="Ch06.html#cb106-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb106-41"><a href="Ch06.html#cb106-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_65.png" width="100%" /></p>
</div>
<div id="ch06.066" class="section level2 hasAnchor" number="6.66">
<h2><span class="header-section-number">6.66</span> Climate_CHELSAv2.1-vpd-max_cell<a href="Ch06.html#ch06.066" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-vpd-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_66</code></p>
<p><strong>English name:</strong> Maximum monthly vapor pressure deficit (Pa) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Maksimālais mēneša vidējais iztvaikošanas spiediena deficīts (Pa) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="Ch06.html#cb107-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb107-2"><a href="Ch06.html#cb107-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb107-3"><a href="Ch06.html#cb107-3" tabindex="-1"></a></span>
<span id="cb107-4"><a href="Ch06.html#cb107-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb107-5"><a href="Ch06.html#cb107-5" tabindex="-1"></a></span>
<span id="cb107-6"><a href="Ch06.html#cb107-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-vpd-max_cell.tif&quot;</span></span>
<span id="cb107-7"><a href="Ch06.html#cb107-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_66&quot;</span></span>
<span id="cb107-8"><a href="Ch06.html#cb107-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-vpd-max_cell.tif&quot;</span></span>
<span id="cb107-9"><a href="Ch06.html#cb107-9" tabindex="-1"></a></span>
<span id="cb107-10"><a href="Ch06.html#cb107-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb107-11"><a href="Ch06.html#cb107-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb107-12"><a href="Ch06.html#cb107-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb107-13"><a href="Ch06.html#cb107-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb107-14"><a href="Ch06.html#cb107-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb107-15"><a href="Ch06.html#cb107-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb107-16"><a href="Ch06.html#cb107-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb107-17"><a href="Ch06.html#cb107-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb107-18"><a href="Ch06.html#cb107-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb107-19"><a href="Ch06.html#cb107-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb107-20"><a href="Ch06.html#cb107-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb107-21"><a href="Ch06.html#cb107-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb107-22"><a href="Ch06.html#cb107-22" tabindex="-1"></a></span>
<span id="cb107-23"><a href="Ch06.html#cb107-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb107-24"><a href="Ch06.html#cb107-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb107-25"><a href="Ch06.html#cb107-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb107-26"><a href="Ch06.html#cb107-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb107-27"><a href="Ch06.html#cb107-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb107-28"><a href="Ch06.html#cb107-28" tabindex="-1"></a></span>
<span id="cb107-29"><a href="Ch06.html#cb107-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-vpd-max_cell.tif&quot;</span></span>
<span id="cb107-30"><a href="Ch06.html#cb107-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb107-31"><a href="Ch06.html#cb107-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb107-32"><a href="Ch06.html#cb107-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb107-33"><a href="Ch06.html#cb107-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb107-34"><a href="Ch06.html#cb107-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb107-35"><a href="Ch06.html#cb107-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb107-36"><a href="Ch06.html#cb107-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb107-37"><a href="Ch06.html#cb107-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb107-38"><a href="Ch06.html#cb107-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb107-39"><a href="Ch06.html#cb107-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb107-40"><a href="Ch06.html#cb107-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb107-41"><a href="Ch06.html#cb107-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_66.png" width="100%" /></p>
</div>
<div id="ch06.067" class="section level2 hasAnchor" number="6.67">
<h2><span class="header-section-number">6.67</span> Climate_CHELSAv2.1-vpd-mean_cell<a href="Ch06.html#ch06.067" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-vpd-mean_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_67</code></p>
<p><strong>English name:</strong> Mean monthly vapor pressure deficit (Pa) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vidējais iztvaikošanas spiediena deficīts (Pa) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="Ch06.html#cb108-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb108-2"><a href="Ch06.html#cb108-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb108-3"><a href="Ch06.html#cb108-3" tabindex="-1"></a></span>
<span id="cb108-4"><a href="Ch06.html#cb108-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb108-5"><a href="Ch06.html#cb108-5" tabindex="-1"></a></span>
<span id="cb108-6"><a href="Ch06.html#cb108-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-vpd-mean_cell.tif&quot;</span></span>
<span id="cb108-7"><a href="Ch06.html#cb108-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_67&quot;</span></span>
<span id="cb108-8"><a href="Ch06.html#cb108-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-vpd-mean_cell.tif&quot;</span></span>
<span id="cb108-9"><a href="Ch06.html#cb108-9" tabindex="-1"></a></span>
<span id="cb108-10"><a href="Ch06.html#cb108-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb108-11"><a href="Ch06.html#cb108-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb108-12"><a href="Ch06.html#cb108-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb108-13"><a href="Ch06.html#cb108-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb108-14"><a href="Ch06.html#cb108-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb108-15"><a href="Ch06.html#cb108-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb108-16"><a href="Ch06.html#cb108-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb108-17"><a href="Ch06.html#cb108-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb108-18"><a href="Ch06.html#cb108-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb108-19"><a href="Ch06.html#cb108-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb108-20"><a href="Ch06.html#cb108-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb108-21"><a href="Ch06.html#cb108-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb108-22"><a href="Ch06.html#cb108-22" tabindex="-1"></a></span>
<span id="cb108-23"><a href="Ch06.html#cb108-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb108-24"><a href="Ch06.html#cb108-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb108-25"><a href="Ch06.html#cb108-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb108-26"><a href="Ch06.html#cb108-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb108-27"><a href="Ch06.html#cb108-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb108-28"><a href="Ch06.html#cb108-28" tabindex="-1"></a></span>
<span id="cb108-29"><a href="Ch06.html#cb108-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-vpd-mean_cell.tif&quot;</span></span>
<span id="cb108-30"><a href="Ch06.html#cb108-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb108-31"><a href="Ch06.html#cb108-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb108-32"><a href="Ch06.html#cb108-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb108-33"><a href="Ch06.html#cb108-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb108-34"><a href="Ch06.html#cb108-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb108-35"><a href="Ch06.html#cb108-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb108-36"><a href="Ch06.html#cb108-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb108-37"><a href="Ch06.html#cb108-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb108-38"><a href="Ch06.html#cb108-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb108-39"><a href="Ch06.html#cb108-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb108-40"><a href="Ch06.html#cb108-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb108-41"><a href="Ch06.html#cb108-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_67.png" width="100%" /></p>
</div>
<div id="ch06.068" class="section level2 hasAnchor" number="6.68">
<h2><span class="header-section-number">6.68</span> Climate_CHELSAv2.1-vpd-min_cell<a href="Ch06.html#ch06.068" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-vpd-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_68</code></p>
<p><strong>English name:</strong> Minimum monthly vapor pressure deficit (Pa) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Minimālais mēneša vidējais iztvaikošanas spiediena deficīts (Pa) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="Ch06.html#cb109-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb109-2"><a href="Ch06.html#cb109-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb109-3"><a href="Ch06.html#cb109-3" tabindex="-1"></a></span>
<span id="cb109-4"><a href="Ch06.html#cb109-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb109-5"><a href="Ch06.html#cb109-5" tabindex="-1"></a></span>
<span id="cb109-6"><a href="Ch06.html#cb109-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-vpd-min_cell.tif&quot;</span></span>
<span id="cb109-7"><a href="Ch06.html#cb109-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_68&quot;</span></span>
<span id="cb109-8"><a href="Ch06.html#cb109-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-vpd-min_cell.tif&quot;</span></span>
<span id="cb109-9"><a href="Ch06.html#cb109-9" tabindex="-1"></a></span>
<span id="cb109-10"><a href="Ch06.html#cb109-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb109-11"><a href="Ch06.html#cb109-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb109-12"><a href="Ch06.html#cb109-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb109-13"><a href="Ch06.html#cb109-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb109-14"><a href="Ch06.html#cb109-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb109-15"><a href="Ch06.html#cb109-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb109-16"><a href="Ch06.html#cb109-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb109-17"><a href="Ch06.html#cb109-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb109-18"><a href="Ch06.html#cb109-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb109-19"><a href="Ch06.html#cb109-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb109-20"><a href="Ch06.html#cb109-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb109-21"><a href="Ch06.html#cb109-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb109-22"><a href="Ch06.html#cb109-22" tabindex="-1"></a></span>
<span id="cb109-23"><a href="Ch06.html#cb109-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb109-24"><a href="Ch06.html#cb109-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb109-25"><a href="Ch06.html#cb109-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb109-26"><a href="Ch06.html#cb109-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb109-27"><a href="Ch06.html#cb109-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb109-28"><a href="Ch06.html#cb109-28" tabindex="-1"></a></span>
<span id="cb109-29"><a href="Ch06.html#cb109-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-vpd-min_cell.tif&quot;</span></span>
<span id="cb109-30"><a href="Ch06.html#cb109-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb109-31"><a href="Ch06.html#cb109-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb109-32"><a href="Ch06.html#cb109-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb109-33"><a href="Ch06.html#cb109-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb109-34"><a href="Ch06.html#cb109-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb109-35"><a href="Ch06.html#cb109-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb109-36"><a href="Ch06.html#cb109-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb109-37"><a href="Ch06.html#cb109-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb109-38"><a href="Ch06.html#cb109-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb109-39"><a href="Ch06.html#cb109-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb109-40"><a href="Ch06.html#cb109-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb109-41"><a href="Ch06.html#cb109-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_68.png" width="100%" /></p>
</div>
<div id="ch06.069" class="section level2 hasAnchor" number="6.69">
<h2><span class="header-section-number">6.69</span> Climate_CHELSAv2.1-vpd-range_cell<a href="Ch06.html#ch06.069" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Climate_CHELSAv2.1-vpd-range_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_69</code></p>
<p><strong>English name:</strong> Annual range of monthly vapor pressure deficit (Pa) (CHELSA v2.1) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Gada iztvaikošanas spiediena deficīta amplitūda (Pa) (CHELSA v2.1) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.11">CHELSA v2.1</a>. EGV is prepared with the
workflow <code>egvtools::downscale2egv()</code> with inverse distance weighted (power = 2)
gap filling and soft smoothing (power = 0.5) over 5 km radius of every cell. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="Ch06.html#cb110-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb110-2"><a href="Ch06.html#cb110-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb110-3"><a href="Ch06.html#cb110-3" tabindex="-1"></a></span>
<span id="cb110-4"><a href="Ch06.html#cb110-4" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb110-5"><a href="Ch06.html#cb110-5" tabindex="-1"></a></span>
<span id="cb110-6"><a href="Ch06.html#cb110-6" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-vpd-range_cell.tif&quot;</span></span>
<span id="cb110-7"><a href="Ch06.html#cb110-7" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_69&quot;</span></span>
<span id="cb110-8"><a href="Ch06.html#cb110-8" tabindex="-1"></a>reading<span class="ot">=</span><span class="st">&quot;./Geodata/2024/CHELSA/Climate_CHELSAv2.1-vpd-range_cell.tif&quot;</span></span>
<span id="cb110-9"><a href="Ch06.html#cb110-9" tabindex="-1"></a></span>
<span id="cb110-10"><a href="Ch06.html#cb110-10" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">downscale2egv</span>(</span>
<span id="cb110-11"><a href="Ch06.html#cb110-11" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb110-12"><a href="Ch06.html#cb110-12" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb110-13"><a href="Ch06.html#cb110-13" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> reading,</span>
<span id="cb110-14"><a href="Ch06.html#cb110-14" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb110-15"><a href="Ch06.html#cb110-15" tabindex="-1"></a>  <span class="at">file_name     =</span> localname,</span>
<span id="cb110-16"><a href="Ch06.html#cb110-16" tabindex="-1"></a>  <span class="at">layer_name    =</span> layername,</span>
<span id="cb110-17"><a href="Ch06.html#cb110-17" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb110-18"><a href="Ch06.html#cb110-18" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb110-19"><a href="Ch06.html#cb110-19" tabindex="-1"></a>  <span class="at">smooth_radius_km =</span> <span class="dv">5</span>,</span>
<span id="cb110-20"><a href="Ch06.html#cb110-20" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb110-21"><a href="Ch06.html#cb110-21" tabindex="-1"></a><span class="fu">print</span>(df)</span>
<span id="cb110-22"><a href="Ch06.html#cb110-22" tabindex="-1"></a></span>
<span id="cb110-23"><a href="Ch06.html#cb110-23" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb110-24"><a href="Ch06.html#cb110-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb110-25"><a href="Ch06.html#cb110-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb110-26"><a href="Ch06.html#cb110-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb110-27"><a href="Ch06.html#cb110-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb110-28"><a href="Ch06.html#cb110-28" tabindex="-1"></a></span>
<span id="cb110-29"><a href="Ch06.html#cb110-29" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Climate_CHELSAv2.1-vpd-range_cell.tif&quot;</span></span>
<span id="cb110-30"><a href="Ch06.html#cb110-30" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb110-31"><a href="Ch06.html#cb110-31" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb110-32"><a href="Ch06.html#cb110-32" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb110-33"><a href="Ch06.html#cb110-33" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb110-34"><a href="Ch06.html#cb110-34" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb110-35"><a href="Ch06.html#cb110-35" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb110-36"><a href="Ch06.html#cb110-36" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb110-37"><a href="Ch06.html#cb110-37" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb110-38"><a href="Ch06.html#cb110-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb110-39"><a href="Ch06.html#cb110-39" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb110-40"><a href="Ch06.html#cb110-40" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb110-41"><a href="Ch06.html#cb110-41" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_69.png" width="100%" /></p>
</div>
<div id="ch06.070" class="section level2 hasAnchor" number="6.70">
<h2><span class="header-section-number">6.70</span> HydroClim_01-max_cell<a href="Ch06.html#ch06.070" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_01-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_70</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream mean annual air temperature (°C) (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālā vidējā gaisa temperatūra augštecē (°C) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="Ch06.html#cb111-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb111-2"><a href="Ch06.html#cb111-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb111-3"><a href="Ch06.html#cb111-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb111-4"><a href="Ch06.html#cb111-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb111-5"><a href="Ch06.html#cb111-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb111-6"><a href="Ch06.html#cb111-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb111-7"><a href="Ch06.html#cb111-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb111-8"><a href="Ch06.html#cb111-8" tabindex="-1"></a></span>
<span id="cb111-9"><a href="Ch06.html#cb111-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb111-10"><a href="Ch06.html#cb111-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb111-11"><a href="Ch06.html#cb111-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb111-12"><a href="Ch06.html#cb111-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb111-13"><a href="Ch06.html#cb111-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb111-14"><a href="Ch06.html#cb111-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb111-15"><a href="Ch06.html#cb111-15" tabindex="-1"></a></span>
<span id="cb111-16"><a href="Ch06.html#cb111-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb111-17"><a href="Ch06.html#cb111-17" tabindex="-1"></a></span>
<span id="cb111-18"><a href="Ch06.html#cb111-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb111-19"><a href="Ch06.html#cb111-19" tabindex="-1"></a></span>
<span id="cb111-20"><a href="Ch06.html#cb111-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_01-max_cell.tif&quot;</span></span>
<span id="cb111-21"><a href="Ch06.html#cb111-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_70&quot;</span></span>
<span id="cb111-22"><a href="Ch06.html#cb111-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb111-23"><a href="Ch06.html#cb111-23" tabindex="-1"></a>  </span>
<span id="cb111-24"><a href="Ch06.html#cb111-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb111-25"><a href="Ch06.html#cb111-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb111-26"><a href="Ch06.html#cb111-26" tabindex="-1"></a>  </span>
<span id="cb111-27"><a href="Ch06.html#cb111-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb111-28"><a href="Ch06.html#cb111-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb111-29"><a href="Ch06.html#cb111-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb111-30"><a href="Ch06.html#cb111-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb111-31"><a href="Ch06.html#cb111-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb111-32"><a href="Ch06.html#cb111-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb111-33"><a href="Ch06.html#cb111-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb111-34"><a href="Ch06.html#cb111-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb111-35"><a href="Ch06.html#cb111-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb111-36"><a href="Ch06.html#cb111-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb111-37"><a href="Ch06.html#cb111-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb111-38"><a href="Ch06.html#cb111-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb111-39"><a href="Ch06.html#cb111-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb111-40"><a href="Ch06.html#cb111-40" tabindex="-1"></a>  </span>
<span id="cb111-41"><a href="Ch06.html#cb111-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb111-42"><a href="Ch06.html#cb111-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb111-43"><a href="Ch06.html#cb111-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb111-44"><a href="Ch06.html#cb111-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb111-45"><a href="Ch06.html#cb111-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb111-46"><a href="Ch06.html#cb111-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb111-47"><a href="Ch06.html#cb111-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb111-48"><a href="Ch06.html#cb111-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb111-49"><a href="Ch06.html#cb111-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb111-50"><a href="Ch06.html#cb111-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb111-51"><a href="Ch06.html#cb111-51" tabindex="-1"></a>egvrez</span>
<span id="cb111-52"><a href="Ch06.html#cb111-52" tabindex="-1"></a>  </span>
<span id="cb111-53"><a href="Ch06.html#cb111-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb111-54"><a href="Ch06.html#cb111-54" tabindex="-1"></a></span>
<span id="cb111-55"><a href="Ch06.html#cb111-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb111-56"><a href="Ch06.html#cb111-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb111-57"><a href="Ch06.html#cb111-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb111-58"><a href="Ch06.html#cb111-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb111-59"><a href="Ch06.html#cb111-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb111-60"><a href="Ch06.html#cb111-60" tabindex="-1"></a></span>
<span id="cb111-61"><a href="Ch06.html#cb111-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_01-max_cell.tif&quot;</span></span>
<span id="cb111-62"><a href="Ch06.html#cb111-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb111-63"><a href="Ch06.html#cb111-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb111-64"><a href="Ch06.html#cb111-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb111-65"><a href="Ch06.html#cb111-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb111-66"><a href="Ch06.html#cb111-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb111-67"><a href="Ch06.html#cb111-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb111-68"><a href="Ch06.html#cb111-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb111-69"><a href="Ch06.html#cb111-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb111-70"><a href="Ch06.html#cb111-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb111-71"><a href="Ch06.html#cb111-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb111-72"><a href="Ch06.html#cb111-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb111-73"><a href="Ch06.html#cb111-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_70.png" width="100%" /></p>
</div>
<div id="ch06.071" class="section level2 hasAnchor" number="6.71">
<h2><span class="header-section-number">6.71</span> HydroClim_02-max_cell<a href="Ch06.html#ch06.071" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_02-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_71</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream mean diurnal air temperature range (°C) (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālā diennakts gaisa temperatūras amplitūda augštecē (°C) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="Ch06.html#cb112-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb112-2"><a href="Ch06.html#cb112-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb112-3"><a href="Ch06.html#cb112-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb112-4"><a href="Ch06.html#cb112-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb112-5"><a href="Ch06.html#cb112-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb112-6"><a href="Ch06.html#cb112-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb112-7"><a href="Ch06.html#cb112-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb112-8"><a href="Ch06.html#cb112-8" tabindex="-1"></a></span>
<span id="cb112-9"><a href="Ch06.html#cb112-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb112-10"><a href="Ch06.html#cb112-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb112-11"><a href="Ch06.html#cb112-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb112-12"><a href="Ch06.html#cb112-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb112-13"><a href="Ch06.html#cb112-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb112-14"><a href="Ch06.html#cb112-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb112-15"><a href="Ch06.html#cb112-15" tabindex="-1"></a></span>
<span id="cb112-16"><a href="Ch06.html#cb112-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb112-17"><a href="Ch06.html#cb112-17" tabindex="-1"></a></span>
<span id="cb112-18"><a href="Ch06.html#cb112-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb112-19"><a href="Ch06.html#cb112-19" tabindex="-1"></a></span>
<span id="cb112-20"><a href="Ch06.html#cb112-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_02-max_cell.tif&quot;</span></span>
<span id="cb112-21"><a href="Ch06.html#cb112-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_71&quot;</span></span>
<span id="cb112-22"><a href="Ch06.html#cb112-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb112-23"><a href="Ch06.html#cb112-23" tabindex="-1"></a>  </span>
<span id="cb112-24"><a href="Ch06.html#cb112-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb112-25"><a href="Ch06.html#cb112-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb112-26"><a href="Ch06.html#cb112-26" tabindex="-1"></a>  </span>
<span id="cb112-27"><a href="Ch06.html#cb112-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb112-28"><a href="Ch06.html#cb112-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb112-29"><a href="Ch06.html#cb112-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb112-30"><a href="Ch06.html#cb112-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb112-31"><a href="Ch06.html#cb112-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb112-32"><a href="Ch06.html#cb112-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb112-33"><a href="Ch06.html#cb112-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb112-34"><a href="Ch06.html#cb112-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb112-35"><a href="Ch06.html#cb112-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb112-36"><a href="Ch06.html#cb112-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb112-37"><a href="Ch06.html#cb112-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb112-38"><a href="Ch06.html#cb112-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb112-39"><a href="Ch06.html#cb112-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb112-40"><a href="Ch06.html#cb112-40" tabindex="-1"></a>  </span>
<span id="cb112-41"><a href="Ch06.html#cb112-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb112-42"><a href="Ch06.html#cb112-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb112-43"><a href="Ch06.html#cb112-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb112-44"><a href="Ch06.html#cb112-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb112-45"><a href="Ch06.html#cb112-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb112-46"><a href="Ch06.html#cb112-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb112-47"><a href="Ch06.html#cb112-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb112-48"><a href="Ch06.html#cb112-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb112-49"><a href="Ch06.html#cb112-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb112-50"><a href="Ch06.html#cb112-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb112-51"><a href="Ch06.html#cb112-51" tabindex="-1"></a>egvrez</span>
<span id="cb112-52"><a href="Ch06.html#cb112-52" tabindex="-1"></a>  </span>
<span id="cb112-53"><a href="Ch06.html#cb112-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb112-54"><a href="Ch06.html#cb112-54" tabindex="-1"></a></span>
<span id="cb112-55"><a href="Ch06.html#cb112-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb112-56"><a href="Ch06.html#cb112-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb112-57"><a href="Ch06.html#cb112-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb112-58"><a href="Ch06.html#cb112-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb112-59"><a href="Ch06.html#cb112-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb112-60"><a href="Ch06.html#cb112-60" tabindex="-1"></a></span>
<span id="cb112-61"><a href="Ch06.html#cb112-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_02-max_cell.tif&quot;</span></span>
<span id="cb112-62"><a href="Ch06.html#cb112-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb112-63"><a href="Ch06.html#cb112-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb112-64"><a href="Ch06.html#cb112-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb112-65"><a href="Ch06.html#cb112-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb112-66"><a href="Ch06.html#cb112-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb112-67"><a href="Ch06.html#cb112-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb112-68"><a href="Ch06.html#cb112-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb112-69"><a href="Ch06.html#cb112-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb112-70"><a href="Ch06.html#cb112-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb112-71"><a href="Ch06.html#cb112-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb112-72"><a href="Ch06.html#cb112-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb112-73"><a href="Ch06.html#cb112-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_71.png" width="100%" /></p>
</div>
<div id="ch06.072" class="section level2 hasAnchor" number="6.72">
<h2><span class="header-section-number">6.72</span> HydroClim_03-max_cell<a href="Ch06.html#ch06.072" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_03-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_72</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream isothermality (ratio of diurnal variation to annual variation in temperatures) (°C) (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālā izotermalitāte augštecē (°C) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="Ch06.html#cb113-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb113-2"><a href="Ch06.html#cb113-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb113-3"><a href="Ch06.html#cb113-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb113-4"><a href="Ch06.html#cb113-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb113-5"><a href="Ch06.html#cb113-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb113-6"><a href="Ch06.html#cb113-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb113-7"><a href="Ch06.html#cb113-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb113-8"><a href="Ch06.html#cb113-8" tabindex="-1"></a></span>
<span id="cb113-9"><a href="Ch06.html#cb113-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb113-10"><a href="Ch06.html#cb113-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb113-11"><a href="Ch06.html#cb113-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb113-12"><a href="Ch06.html#cb113-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb113-13"><a href="Ch06.html#cb113-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb113-14"><a href="Ch06.html#cb113-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb113-15"><a href="Ch06.html#cb113-15" tabindex="-1"></a></span>
<span id="cb113-16"><a href="Ch06.html#cb113-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb113-17"><a href="Ch06.html#cb113-17" tabindex="-1"></a></span>
<span id="cb113-18"><a href="Ch06.html#cb113-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb113-19"><a href="Ch06.html#cb113-19" tabindex="-1"></a></span>
<span id="cb113-20"><a href="Ch06.html#cb113-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_03-max_cell.tif&quot;</span></span>
<span id="cb113-21"><a href="Ch06.html#cb113-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_72&quot;</span></span>
<span id="cb113-22"><a href="Ch06.html#cb113-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb113-23"><a href="Ch06.html#cb113-23" tabindex="-1"></a>  </span>
<span id="cb113-24"><a href="Ch06.html#cb113-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb113-25"><a href="Ch06.html#cb113-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb113-26"><a href="Ch06.html#cb113-26" tabindex="-1"></a>  </span>
<span id="cb113-27"><a href="Ch06.html#cb113-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb113-28"><a href="Ch06.html#cb113-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb113-29"><a href="Ch06.html#cb113-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb113-30"><a href="Ch06.html#cb113-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb113-31"><a href="Ch06.html#cb113-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb113-32"><a href="Ch06.html#cb113-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb113-33"><a href="Ch06.html#cb113-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb113-34"><a href="Ch06.html#cb113-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb113-35"><a href="Ch06.html#cb113-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb113-36"><a href="Ch06.html#cb113-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb113-37"><a href="Ch06.html#cb113-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb113-38"><a href="Ch06.html#cb113-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb113-39"><a href="Ch06.html#cb113-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb113-40"><a href="Ch06.html#cb113-40" tabindex="-1"></a>  </span>
<span id="cb113-41"><a href="Ch06.html#cb113-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb113-42"><a href="Ch06.html#cb113-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb113-43"><a href="Ch06.html#cb113-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb113-44"><a href="Ch06.html#cb113-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb113-45"><a href="Ch06.html#cb113-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb113-46"><a href="Ch06.html#cb113-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb113-47"><a href="Ch06.html#cb113-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb113-48"><a href="Ch06.html#cb113-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb113-49"><a href="Ch06.html#cb113-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb113-50"><a href="Ch06.html#cb113-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb113-51"><a href="Ch06.html#cb113-51" tabindex="-1"></a>egvrez</span>
<span id="cb113-52"><a href="Ch06.html#cb113-52" tabindex="-1"></a>  </span>
<span id="cb113-53"><a href="Ch06.html#cb113-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb113-54"><a href="Ch06.html#cb113-54" tabindex="-1"></a></span>
<span id="cb113-55"><a href="Ch06.html#cb113-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb113-56"><a href="Ch06.html#cb113-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb113-57"><a href="Ch06.html#cb113-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb113-58"><a href="Ch06.html#cb113-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb113-59"><a href="Ch06.html#cb113-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb113-60"><a href="Ch06.html#cb113-60" tabindex="-1"></a></span>
<span id="cb113-61"><a href="Ch06.html#cb113-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_03-max_cell.tif&quot;</span></span>
<span id="cb113-62"><a href="Ch06.html#cb113-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb113-63"><a href="Ch06.html#cb113-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb113-64"><a href="Ch06.html#cb113-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb113-65"><a href="Ch06.html#cb113-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb113-66"><a href="Ch06.html#cb113-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb113-67"><a href="Ch06.html#cb113-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb113-68"><a href="Ch06.html#cb113-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb113-69"><a href="Ch06.html#cb113-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb113-70"><a href="Ch06.html#cb113-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb113-71"><a href="Ch06.html#cb113-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb113-72"><a href="Ch06.html#cb113-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb113-73"><a href="Ch06.html#cb113-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_72.png" width="100%" /></p>
</div>
<div id="ch06.073" class="section level2 hasAnchor" number="6.73">
<h2><span class="header-section-number">6.73</span> HydroClim_04-max_cell<a href="Ch06.html#ch06.073" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_04-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_73</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream temperature seasonality (standard deviation of the monthly mean temperatures) (°C/100) (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālā temperatūras sezonalitāte augštecē (°C/100) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="Ch06.html#cb114-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb114-2"><a href="Ch06.html#cb114-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb114-3"><a href="Ch06.html#cb114-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb114-4"><a href="Ch06.html#cb114-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb114-5"><a href="Ch06.html#cb114-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb114-6"><a href="Ch06.html#cb114-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb114-7"><a href="Ch06.html#cb114-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb114-8"><a href="Ch06.html#cb114-8" tabindex="-1"></a></span>
<span id="cb114-9"><a href="Ch06.html#cb114-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb114-10"><a href="Ch06.html#cb114-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb114-11"><a href="Ch06.html#cb114-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb114-12"><a href="Ch06.html#cb114-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb114-13"><a href="Ch06.html#cb114-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb114-14"><a href="Ch06.html#cb114-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb114-15"><a href="Ch06.html#cb114-15" tabindex="-1"></a></span>
<span id="cb114-16"><a href="Ch06.html#cb114-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb114-17"><a href="Ch06.html#cb114-17" tabindex="-1"></a></span>
<span id="cb114-18"><a href="Ch06.html#cb114-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb114-19"><a href="Ch06.html#cb114-19" tabindex="-1"></a></span>
<span id="cb114-20"><a href="Ch06.html#cb114-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_04-max_cell.tif&quot;</span></span>
<span id="cb114-21"><a href="Ch06.html#cb114-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_73&quot;</span></span>
<span id="cb114-22"><a href="Ch06.html#cb114-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb114-23"><a href="Ch06.html#cb114-23" tabindex="-1"></a>  </span>
<span id="cb114-24"><a href="Ch06.html#cb114-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb114-25"><a href="Ch06.html#cb114-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb114-26"><a href="Ch06.html#cb114-26" tabindex="-1"></a>  </span>
<span id="cb114-27"><a href="Ch06.html#cb114-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb114-28"><a href="Ch06.html#cb114-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb114-29"><a href="Ch06.html#cb114-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb114-30"><a href="Ch06.html#cb114-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb114-31"><a href="Ch06.html#cb114-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb114-32"><a href="Ch06.html#cb114-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb114-33"><a href="Ch06.html#cb114-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb114-34"><a href="Ch06.html#cb114-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb114-35"><a href="Ch06.html#cb114-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb114-36"><a href="Ch06.html#cb114-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb114-37"><a href="Ch06.html#cb114-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb114-38"><a href="Ch06.html#cb114-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb114-39"><a href="Ch06.html#cb114-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb114-40"><a href="Ch06.html#cb114-40" tabindex="-1"></a>  </span>
<span id="cb114-41"><a href="Ch06.html#cb114-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb114-42"><a href="Ch06.html#cb114-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb114-43"><a href="Ch06.html#cb114-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb114-44"><a href="Ch06.html#cb114-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb114-45"><a href="Ch06.html#cb114-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb114-46"><a href="Ch06.html#cb114-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb114-47"><a href="Ch06.html#cb114-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb114-48"><a href="Ch06.html#cb114-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb114-49"><a href="Ch06.html#cb114-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb114-50"><a href="Ch06.html#cb114-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb114-51"><a href="Ch06.html#cb114-51" tabindex="-1"></a>egvrez</span>
<span id="cb114-52"><a href="Ch06.html#cb114-52" tabindex="-1"></a>  </span>
<span id="cb114-53"><a href="Ch06.html#cb114-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb114-54"><a href="Ch06.html#cb114-54" tabindex="-1"></a></span>
<span id="cb114-55"><a href="Ch06.html#cb114-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb114-56"><a href="Ch06.html#cb114-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb114-57"><a href="Ch06.html#cb114-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb114-58"><a href="Ch06.html#cb114-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb114-59"><a href="Ch06.html#cb114-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb114-60"><a href="Ch06.html#cb114-60" tabindex="-1"></a></span>
<span id="cb114-61"><a href="Ch06.html#cb114-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_04-max_cell.tif&quot;</span></span>
<span id="cb114-62"><a href="Ch06.html#cb114-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb114-63"><a href="Ch06.html#cb114-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb114-64"><a href="Ch06.html#cb114-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb114-65"><a href="Ch06.html#cb114-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb114-66"><a href="Ch06.html#cb114-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb114-67"><a href="Ch06.html#cb114-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb114-68"><a href="Ch06.html#cb114-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb114-69"><a href="Ch06.html#cb114-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb114-70"><a href="Ch06.html#cb114-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb114-71"><a href="Ch06.html#cb114-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb114-72"><a href="Ch06.html#cb114-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb114-73"><a href="Ch06.html#cb114-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_73.png" width="100%" /></p>
</div>
<div id="ch06.074" class="section level2 hasAnchor" number="6.74">
<h2><span class="header-section-number">6.74</span> HydroClim_05-max_cell<a href="Ch06.html#ch06.074" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_05-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_74</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream mean daily maximum air temperature (°C) of the warmest month (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālā augšteces dienas vidējā gaisa temperatūra siltākajā mēnesī (°C) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="Ch06.html#cb115-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb115-2"><a href="Ch06.html#cb115-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb115-3"><a href="Ch06.html#cb115-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb115-4"><a href="Ch06.html#cb115-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb115-5"><a href="Ch06.html#cb115-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb115-6"><a href="Ch06.html#cb115-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb115-7"><a href="Ch06.html#cb115-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb115-8"><a href="Ch06.html#cb115-8" tabindex="-1"></a></span>
<span id="cb115-9"><a href="Ch06.html#cb115-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb115-10"><a href="Ch06.html#cb115-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb115-11"><a href="Ch06.html#cb115-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb115-12"><a href="Ch06.html#cb115-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb115-13"><a href="Ch06.html#cb115-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb115-14"><a href="Ch06.html#cb115-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb115-15"><a href="Ch06.html#cb115-15" tabindex="-1"></a></span>
<span id="cb115-16"><a href="Ch06.html#cb115-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb115-17"><a href="Ch06.html#cb115-17" tabindex="-1"></a></span>
<span id="cb115-18"><a href="Ch06.html#cb115-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb115-19"><a href="Ch06.html#cb115-19" tabindex="-1"></a></span>
<span id="cb115-20"><a href="Ch06.html#cb115-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_05-max_cell.tif&quot;</span></span>
<span id="cb115-21"><a href="Ch06.html#cb115-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_74&quot;</span></span>
<span id="cb115-22"><a href="Ch06.html#cb115-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb115-23"><a href="Ch06.html#cb115-23" tabindex="-1"></a>  </span>
<span id="cb115-24"><a href="Ch06.html#cb115-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb115-25"><a href="Ch06.html#cb115-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb115-26"><a href="Ch06.html#cb115-26" tabindex="-1"></a>  </span>
<span id="cb115-27"><a href="Ch06.html#cb115-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb115-28"><a href="Ch06.html#cb115-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb115-29"><a href="Ch06.html#cb115-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb115-30"><a href="Ch06.html#cb115-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb115-31"><a href="Ch06.html#cb115-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb115-32"><a href="Ch06.html#cb115-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb115-33"><a href="Ch06.html#cb115-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb115-34"><a href="Ch06.html#cb115-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb115-35"><a href="Ch06.html#cb115-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb115-36"><a href="Ch06.html#cb115-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb115-37"><a href="Ch06.html#cb115-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb115-38"><a href="Ch06.html#cb115-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb115-39"><a href="Ch06.html#cb115-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb115-40"><a href="Ch06.html#cb115-40" tabindex="-1"></a>  </span>
<span id="cb115-41"><a href="Ch06.html#cb115-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb115-42"><a href="Ch06.html#cb115-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb115-43"><a href="Ch06.html#cb115-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb115-44"><a href="Ch06.html#cb115-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb115-45"><a href="Ch06.html#cb115-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb115-46"><a href="Ch06.html#cb115-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb115-47"><a href="Ch06.html#cb115-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb115-48"><a href="Ch06.html#cb115-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb115-49"><a href="Ch06.html#cb115-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb115-50"><a href="Ch06.html#cb115-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-51"><a href="Ch06.html#cb115-51" tabindex="-1"></a>egvrez</span>
<span id="cb115-52"><a href="Ch06.html#cb115-52" tabindex="-1"></a>  </span>
<span id="cb115-53"><a href="Ch06.html#cb115-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb115-54"><a href="Ch06.html#cb115-54" tabindex="-1"></a></span>
<span id="cb115-55"><a href="Ch06.html#cb115-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb115-56"><a href="Ch06.html#cb115-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb115-57"><a href="Ch06.html#cb115-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb115-58"><a href="Ch06.html#cb115-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb115-59"><a href="Ch06.html#cb115-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb115-60"><a href="Ch06.html#cb115-60" tabindex="-1"></a></span>
<span id="cb115-61"><a href="Ch06.html#cb115-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_05-max_cell.tif&quot;</span></span>
<span id="cb115-62"><a href="Ch06.html#cb115-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb115-63"><a href="Ch06.html#cb115-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb115-64"><a href="Ch06.html#cb115-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb115-65"><a href="Ch06.html#cb115-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb115-66"><a href="Ch06.html#cb115-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb115-67"><a href="Ch06.html#cb115-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb115-68"><a href="Ch06.html#cb115-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb115-69"><a href="Ch06.html#cb115-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb115-70"><a href="Ch06.html#cb115-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb115-71"><a href="Ch06.html#cb115-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb115-72"><a href="Ch06.html#cb115-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb115-73"><a href="Ch06.html#cb115-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_74.png" width="100%" /></p>
</div>
<div id="ch06.075" class="section level2 hasAnchor" number="6.75">
<h2><span class="header-section-number">6.75</span> HydroClim_06-min_cell<a href="Ch06.html#ch06.075" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_06-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_75</code></p>
<p><strong>English name:</strong> Minimum per subcatchment upstream mean daily minimum air temperature (°C) of the coldest month (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina minimālā augšteces dienas vidējā gaisa temperatūra vēsākajā mēnesī (°C) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - min - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="Ch06.html#cb116-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb116-2"><a href="Ch06.html#cb116-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb116-3"><a href="Ch06.html#cb116-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb116-4"><a href="Ch06.html#cb116-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb116-5"><a href="Ch06.html#cb116-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb116-6"><a href="Ch06.html#cb116-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb116-7"><a href="Ch06.html#cb116-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb116-8"><a href="Ch06.html#cb116-8" tabindex="-1"></a></span>
<span id="cb116-9"><a href="Ch06.html#cb116-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb116-10"><a href="Ch06.html#cb116-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb116-11"><a href="Ch06.html#cb116-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb116-12"><a href="Ch06.html#cb116-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb116-13"><a href="Ch06.html#cb116-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb116-14"><a href="Ch06.html#cb116-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb116-15"><a href="Ch06.html#cb116-15" tabindex="-1"></a></span>
<span id="cb116-16"><a href="Ch06.html#cb116-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb116-17"><a href="Ch06.html#cb116-17" tabindex="-1"></a></span>
<span id="cb116-18"><a href="Ch06.html#cb116-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb116-19"><a href="Ch06.html#cb116-19" tabindex="-1"></a></span>
<span id="cb116-20"><a href="Ch06.html#cb116-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_06-min_cell.tif&quot;</span></span>
<span id="cb116-21"><a href="Ch06.html#cb116-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_75&quot;</span></span>
<span id="cb116-22"><a href="Ch06.html#cb116-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;min&quot;</span></span>
<span id="cb116-23"><a href="Ch06.html#cb116-23" tabindex="-1"></a>  </span>
<span id="cb116-24"><a href="Ch06.html#cb116-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb116-25"><a href="Ch06.html#cb116-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb116-26"><a href="Ch06.html#cb116-26" tabindex="-1"></a>  </span>
<span id="cb116-27"><a href="Ch06.html#cb116-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb116-28"><a href="Ch06.html#cb116-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb116-29"><a href="Ch06.html#cb116-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb116-30"><a href="Ch06.html#cb116-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb116-31"><a href="Ch06.html#cb116-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb116-32"><a href="Ch06.html#cb116-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb116-33"><a href="Ch06.html#cb116-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb116-34"><a href="Ch06.html#cb116-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb116-35"><a href="Ch06.html#cb116-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb116-36"><a href="Ch06.html#cb116-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb116-37"><a href="Ch06.html#cb116-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb116-38"><a href="Ch06.html#cb116-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb116-39"><a href="Ch06.html#cb116-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb116-40"><a href="Ch06.html#cb116-40" tabindex="-1"></a>  </span>
<span id="cb116-41"><a href="Ch06.html#cb116-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb116-42"><a href="Ch06.html#cb116-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb116-43"><a href="Ch06.html#cb116-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb116-44"><a href="Ch06.html#cb116-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb116-45"><a href="Ch06.html#cb116-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb116-46"><a href="Ch06.html#cb116-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb116-47"><a href="Ch06.html#cb116-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb116-48"><a href="Ch06.html#cb116-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb116-49"><a href="Ch06.html#cb116-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb116-50"><a href="Ch06.html#cb116-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb116-51"><a href="Ch06.html#cb116-51" tabindex="-1"></a>egvrez</span>
<span id="cb116-52"><a href="Ch06.html#cb116-52" tabindex="-1"></a>  </span>
<span id="cb116-53"><a href="Ch06.html#cb116-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb116-54"><a href="Ch06.html#cb116-54" tabindex="-1"></a></span>
<span id="cb116-55"><a href="Ch06.html#cb116-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb116-56"><a href="Ch06.html#cb116-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb116-57"><a href="Ch06.html#cb116-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb116-58"><a href="Ch06.html#cb116-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb116-59"><a href="Ch06.html#cb116-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb116-60"><a href="Ch06.html#cb116-60" tabindex="-1"></a></span>
<span id="cb116-61"><a href="Ch06.html#cb116-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_06-min_cell.tif&quot;</span></span>
<span id="cb116-62"><a href="Ch06.html#cb116-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb116-63"><a href="Ch06.html#cb116-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb116-64"><a href="Ch06.html#cb116-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb116-65"><a href="Ch06.html#cb116-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb116-66"><a href="Ch06.html#cb116-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb116-67"><a href="Ch06.html#cb116-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb116-68"><a href="Ch06.html#cb116-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb116-69"><a href="Ch06.html#cb116-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb116-70"><a href="Ch06.html#cb116-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb116-71"><a href="Ch06.html#cb116-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb116-72"><a href="Ch06.html#cb116-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb116-73"><a href="Ch06.html#cb116-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_75.png" width="100%" /></p>
</div>
<div id="ch06.076" class="section level2 hasAnchor" number="6.76">
<h2><span class="header-section-number">6.76</span> HydroClim_07-max_cell<a href="Ch06.html#ch06.076" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_07-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_76</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream annual range of air temperature (°C) (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālā augšteces gada gaisa temperatūru amplitūda (°C) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="Ch06.html#cb117-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb117-2"><a href="Ch06.html#cb117-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb117-3"><a href="Ch06.html#cb117-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb117-4"><a href="Ch06.html#cb117-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb117-5"><a href="Ch06.html#cb117-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb117-6"><a href="Ch06.html#cb117-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb117-7"><a href="Ch06.html#cb117-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb117-8"><a href="Ch06.html#cb117-8" tabindex="-1"></a></span>
<span id="cb117-9"><a href="Ch06.html#cb117-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb117-10"><a href="Ch06.html#cb117-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb117-11"><a href="Ch06.html#cb117-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb117-12"><a href="Ch06.html#cb117-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb117-13"><a href="Ch06.html#cb117-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb117-14"><a href="Ch06.html#cb117-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb117-15"><a href="Ch06.html#cb117-15" tabindex="-1"></a></span>
<span id="cb117-16"><a href="Ch06.html#cb117-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb117-17"><a href="Ch06.html#cb117-17" tabindex="-1"></a></span>
<span id="cb117-18"><a href="Ch06.html#cb117-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb117-19"><a href="Ch06.html#cb117-19" tabindex="-1"></a></span>
<span id="cb117-20"><a href="Ch06.html#cb117-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_07-max_cell.tif&quot;</span></span>
<span id="cb117-21"><a href="Ch06.html#cb117-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_76&quot;</span></span>
<span id="cb117-22"><a href="Ch06.html#cb117-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb117-23"><a href="Ch06.html#cb117-23" tabindex="-1"></a>  </span>
<span id="cb117-24"><a href="Ch06.html#cb117-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb117-25"><a href="Ch06.html#cb117-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb117-26"><a href="Ch06.html#cb117-26" tabindex="-1"></a>  </span>
<span id="cb117-27"><a href="Ch06.html#cb117-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb117-28"><a href="Ch06.html#cb117-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb117-29"><a href="Ch06.html#cb117-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb117-30"><a href="Ch06.html#cb117-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb117-31"><a href="Ch06.html#cb117-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb117-32"><a href="Ch06.html#cb117-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb117-33"><a href="Ch06.html#cb117-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb117-34"><a href="Ch06.html#cb117-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb117-35"><a href="Ch06.html#cb117-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb117-36"><a href="Ch06.html#cb117-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb117-37"><a href="Ch06.html#cb117-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb117-38"><a href="Ch06.html#cb117-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb117-39"><a href="Ch06.html#cb117-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb117-40"><a href="Ch06.html#cb117-40" tabindex="-1"></a>  </span>
<span id="cb117-41"><a href="Ch06.html#cb117-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb117-42"><a href="Ch06.html#cb117-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb117-43"><a href="Ch06.html#cb117-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb117-44"><a href="Ch06.html#cb117-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb117-45"><a href="Ch06.html#cb117-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb117-46"><a href="Ch06.html#cb117-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb117-47"><a href="Ch06.html#cb117-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb117-48"><a href="Ch06.html#cb117-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb117-49"><a href="Ch06.html#cb117-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb117-50"><a href="Ch06.html#cb117-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb117-51"><a href="Ch06.html#cb117-51" tabindex="-1"></a>egvrez</span>
<span id="cb117-52"><a href="Ch06.html#cb117-52" tabindex="-1"></a>  </span>
<span id="cb117-53"><a href="Ch06.html#cb117-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb117-54"><a href="Ch06.html#cb117-54" tabindex="-1"></a></span>
<span id="cb117-55"><a href="Ch06.html#cb117-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb117-56"><a href="Ch06.html#cb117-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb117-57"><a href="Ch06.html#cb117-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb117-58"><a href="Ch06.html#cb117-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb117-59"><a href="Ch06.html#cb117-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb117-60"><a href="Ch06.html#cb117-60" tabindex="-1"></a></span>
<span id="cb117-61"><a href="Ch06.html#cb117-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_07-max_cell.tif&quot;</span></span>
<span id="cb117-62"><a href="Ch06.html#cb117-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb117-63"><a href="Ch06.html#cb117-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb117-64"><a href="Ch06.html#cb117-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb117-65"><a href="Ch06.html#cb117-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb117-66"><a href="Ch06.html#cb117-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb117-67"><a href="Ch06.html#cb117-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb117-68"><a href="Ch06.html#cb117-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb117-69"><a href="Ch06.html#cb117-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb117-70"><a href="Ch06.html#cb117-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb117-71"><a href="Ch06.html#cb117-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb117-72"><a href="Ch06.html#cb117-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb117-73"><a href="Ch06.html#cb117-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_76.png" width="100%" /></p>
</div>
<div id="ch06.077" class="section level2 hasAnchor" number="6.77">
<h2><span class="header-section-number">6.77</span> HydroClim_08-max_cell<a href="Ch06.html#ch06.077" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_08-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_77</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream mean daily mean air temperatures (°C) of the wettest quarter (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālā augšteces dienas vidējā gaisa temperatūra mitrākajā ceturksnī (°C) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="Ch06.html#cb118-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb118-2"><a href="Ch06.html#cb118-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb118-3"><a href="Ch06.html#cb118-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb118-4"><a href="Ch06.html#cb118-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb118-5"><a href="Ch06.html#cb118-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb118-6"><a href="Ch06.html#cb118-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb118-7"><a href="Ch06.html#cb118-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb118-8"><a href="Ch06.html#cb118-8" tabindex="-1"></a></span>
<span id="cb118-9"><a href="Ch06.html#cb118-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb118-10"><a href="Ch06.html#cb118-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb118-11"><a href="Ch06.html#cb118-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb118-12"><a href="Ch06.html#cb118-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb118-13"><a href="Ch06.html#cb118-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb118-14"><a href="Ch06.html#cb118-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb118-15"><a href="Ch06.html#cb118-15" tabindex="-1"></a></span>
<span id="cb118-16"><a href="Ch06.html#cb118-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb118-17"><a href="Ch06.html#cb118-17" tabindex="-1"></a></span>
<span id="cb118-18"><a href="Ch06.html#cb118-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb118-19"><a href="Ch06.html#cb118-19" tabindex="-1"></a></span>
<span id="cb118-20"><a href="Ch06.html#cb118-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_08-max_cell.tif&quot;</span></span>
<span id="cb118-21"><a href="Ch06.html#cb118-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_77&quot;</span></span>
<span id="cb118-22"><a href="Ch06.html#cb118-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb118-23"><a href="Ch06.html#cb118-23" tabindex="-1"></a>  </span>
<span id="cb118-24"><a href="Ch06.html#cb118-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb118-25"><a href="Ch06.html#cb118-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb118-26"><a href="Ch06.html#cb118-26" tabindex="-1"></a>  </span>
<span id="cb118-27"><a href="Ch06.html#cb118-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb118-28"><a href="Ch06.html#cb118-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb118-29"><a href="Ch06.html#cb118-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb118-30"><a href="Ch06.html#cb118-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb118-31"><a href="Ch06.html#cb118-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb118-32"><a href="Ch06.html#cb118-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb118-33"><a href="Ch06.html#cb118-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb118-34"><a href="Ch06.html#cb118-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb118-35"><a href="Ch06.html#cb118-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb118-36"><a href="Ch06.html#cb118-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb118-37"><a href="Ch06.html#cb118-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb118-38"><a href="Ch06.html#cb118-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb118-39"><a href="Ch06.html#cb118-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb118-40"><a href="Ch06.html#cb118-40" tabindex="-1"></a>  </span>
<span id="cb118-41"><a href="Ch06.html#cb118-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb118-42"><a href="Ch06.html#cb118-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb118-43"><a href="Ch06.html#cb118-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb118-44"><a href="Ch06.html#cb118-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb118-45"><a href="Ch06.html#cb118-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb118-46"><a href="Ch06.html#cb118-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb118-47"><a href="Ch06.html#cb118-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb118-48"><a href="Ch06.html#cb118-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb118-49"><a href="Ch06.html#cb118-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb118-50"><a href="Ch06.html#cb118-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb118-51"><a href="Ch06.html#cb118-51" tabindex="-1"></a>egvrez</span>
<span id="cb118-52"><a href="Ch06.html#cb118-52" tabindex="-1"></a>  </span>
<span id="cb118-53"><a href="Ch06.html#cb118-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb118-54"><a href="Ch06.html#cb118-54" tabindex="-1"></a></span>
<span id="cb118-55"><a href="Ch06.html#cb118-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb118-56"><a href="Ch06.html#cb118-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb118-57"><a href="Ch06.html#cb118-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb118-58"><a href="Ch06.html#cb118-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb118-59"><a href="Ch06.html#cb118-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb118-60"><a href="Ch06.html#cb118-60" tabindex="-1"></a></span>
<span id="cb118-61"><a href="Ch06.html#cb118-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_08-max_cell.tif&quot;</span></span>
<span id="cb118-62"><a href="Ch06.html#cb118-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb118-63"><a href="Ch06.html#cb118-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb118-64"><a href="Ch06.html#cb118-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb118-65"><a href="Ch06.html#cb118-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb118-66"><a href="Ch06.html#cb118-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb118-67"><a href="Ch06.html#cb118-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb118-68"><a href="Ch06.html#cb118-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb118-69"><a href="Ch06.html#cb118-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb118-70"><a href="Ch06.html#cb118-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb118-71"><a href="Ch06.html#cb118-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb118-72"><a href="Ch06.html#cb118-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb118-73"><a href="Ch06.html#cb118-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_77.png" width="100%" /></p>
</div>
<div id="ch06.078" class="section level2 hasAnchor" number="6.78">
<h2><span class="header-section-number">6.78</span> HydroClim_09-min_cell<a href="Ch06.html#ch06.078" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_09-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_78</code></p>
<p><strong>English name:</strong> Minimum per subcatchment upstream mean daily mean air temperatures (°C) of the driest quarter (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālā augšteces dienas vidējā gaisa temperatūra sausākajā ceturksnī (°C) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - min - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="Ch06.html#cb119-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb119-2"><a href="Ch06.html#cb119-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb119-3"><a href="Ch06.html#cb119-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb119-4"><a href="Ch06.html#cb119-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb119-5"><a href="Ch06.html#cb119-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb119-6"><a href="Ch06.html#cb119-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb119-7"><a href="Ch06.html#cb119-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb119-8"><a href="Ch06.html#cb119-8" tabindex="-1"></a></span>
<span id="cb119-9"><a href="Ch06.html#cb119-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb119-10"><a href="Ch06.html#cb119-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb119-11"><a href="Ch06.html#cb119-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb119-12"><a href="Ch06.html#cb119-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb119-13"><a href="Ch06.html#cb119-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb119-14"><a href="Ch06.html#cb119-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb119-15"><a href="Ch06.html#cb119-15" tabindex="-1"></a></span>
<span id="cb119-16"><a href="Ch06.html#cb119-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb119-17"><a href="Ch06.html#cb119-17" tabindex="-1"></a></span>
<span id="cb119-18"><a href="Ch06.html#cb119-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb119-19"><a href="Ch06.html#cb119-19" tabindex="-1"></a></span>
<span id="cb119-20"><a href="Ch06.html#cb119-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_09-min_cell.tif&quot;</span></span>
<span id="cb119-21"><a href="Ch06.html#cb119-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_78&quot;</span></span>
<span id="cb119-22"><a href="Ch06.html#cb119-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;min&quot;</span></span>
<span id="cb119-23"><a href="Ch06.html#cb119-23" tabindex="-1"></a>  </span>
<span id="cb119-24"><a href="Ch06.html#cb119-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb119-25"><a href="Ch06.html#cb119-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb119-26"><a href="Ch06.html#cb119-26" tabindex="-1"></a>  </span>
<span id="cb119-27"><a href="Ch06.html#cb119-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb119-28"><a href="Ch06.html#cb119-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb119-29"><a href="Ch06.html#cb119-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb119-30"><a href="Ch06.html#cb119-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb119-31"><a href="Ch06.html#cb119-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb119-32"><a href="Ch06.html#cb119-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb119-33"><a href="Ch06.html#cb119-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb119-34"><a href="Ch06.html#cb119-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb119-35"><a href="Ch06.html#cb119-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb119-36"><a href="Ch06.html#cb119-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb119-37"><a href="Ch06.html#cb119-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb119-38"><a href="Ch06.html#cb119-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb119-39"><a href="Ch06.html#cb119-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb119-40"><a href="Ch06.html#cb119-40" tabindex="-1"></a>  </span>
<span id="cb119-41"><a href="Ch06.html#cb119-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb119-42"><a href="Ch06.html#cb119-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb119-43"><a href="Ch06.html#cb119-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb119-44"><a href="Ch06.html#cb119-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb119-45"><a href="Ch06.html#cb119-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb119-46"><a href="Ch06.html#cb119-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb119-47"><a href="Ch06.html#cb119-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb119-48"><a href="Ch06.html#cb119-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb119-49"><a href="Ch06.html#cb119-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb119-50"><a href="Ch06.html#cb119-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb119-51"><a href="Ch06.html#cb119-51" tabindex="-1"></a>egvrez</span>
<span id="cb119-52"><a href="Ch06.html#cb119-52" tabindex="-1"></a>  </span>
<span id="cb119-53"><a href="Ch06.html#cb119-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb119-54"><a href="Ch06.html#cb119-54" tabindex="-1"></a></span>
<span id="cb119-55"><a href="Ch06.html#cb119-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb119-56"><a href="Ch06.html#cb119-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb119-57"><a href="Ch06.html#cb119-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb119-58"><a href="Ch06.html#cb119-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb119-59"><a href="Ch06.html#cb119-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb119-60"><a href="Ch06.html#cb119-60" tabindex="-1"></a></span>
<span id="cb119-61"><a href="Ch06.html#cb119-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_09-min_cell.tif&quot;</span></span>
<span id="cb119-62"><a href="Ch06.html#cb119-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb119-63"><a href="Ch06.html#cb119-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb119-64"><a href="Ch06.html#cb119-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb119-65"><a href="Ch06.html#cb119-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb119-66"><a href="Ch06.html#cb119-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb119-67"><a href="Ch06.html#cb119-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb119-68"><a href="Ch06.html#cb119-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb119-69"><a href="Ch06.html#cb119-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb119-70"><a href="Ch06.html#cb119-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb119-71"><a href="Ch06.html#cb119-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb119-72"><a href="Ch06.html#cb119-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb119-73"><a href="Ch06.html#cb119-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_78.png" width="100%" /></p>
</div>
<div id="ch06.079" class="section level2 hasAnchor" number="6.79">
<h2><span class="header-section-number">6.79</span> HydroClim_10-max_cell<a href="Ch06.html#ch06.079" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_10-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_79</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream mean daily mean air temperatures (°C) of the warmest quarter (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālā augšteces dienas vidējā gaisa temperatūra siltākajā ceturksnī (°C) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="Ch06.html#cb120-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb120-2"><a href="Ch06.html#cb120-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb120-3"><a href="Ch06.html#cb120-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb120-4"><a href="Ch06.html#cb120-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb120-5"><a href="Ch06.html#cb120-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb120-6"><a href="Ch06.html#cb120-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb120-7"><a href="Ch06.html#cb120-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb120-8"><a href="Ch06.html#cb120-8" tabindex="-1"></a></span>
<span id="cb120-9"><a href="Ch06.html#cb120-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb120-10"><a href="Ch06.html#cb120-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb120-11"><a href="Ch06.html#cb120-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb120-12"><a href="Ch06.html#cb120-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb120-13"><a href="Ch06.html#cb120-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb120-14"><a href="Ch06.html#cb120-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb120-15"><a href="Ch06.html#cb120-15" tabindex="-1"></a></span>
<span id="cb120-16"><a href="Ch06.html#cb120-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb120-17"><a href="Ch06.html#cb120-17" tabindex="-1"></a></span>
<span id="cb120-18"><a href="Ch06.html#cb120-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb120-19"><a href="Ch06.html#cb120-19" tabindex="-1"></a></span>
<span id="cb120-20"><a href="Ch06.html#cb120-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_10-max_cell.tif&quot;</span></span>
<span id="cb120-21"><a href="Ch06.html#cb120-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_79&quot;</span></span>
<span id="cb120-22"><a href="Ch06.html#cb120-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb120-23"><a href="Ch06.html#cb120-23" tabindex="-1"></a>  </span>
<span id="cb120-24"><a href="Ch06.html#cb120-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb120-25"><a href="Ch06.html#cb120-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb120-26"><a href="Ch06.html#cb120-26" tabindex="-1"></a>  </span>
<span id="cb120-27"><a href="Ch06.html#cb120-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb120-28"><a href="Ch06.html#cb120-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb120-29"><a href="Ch06.html#cb120-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb120-30"><a href="Ch06.html#cb120-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb120-31"><a href="Ch06.html#cb120-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb120-32"><a href="Ch06.html#cb120-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb120-33"><a href="Ch06.html#cb120-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb120-34"><a href="Ch06.html#cb120-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb120-35"><a href="Ch06.html#cb120-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb120-36"><a href="Ch06.html#cb120-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb120-37"><a href="Ch06.html#cb120-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb120-38"><a href="Ch06.html#cb120-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb120-39"><a href="Ch06.html#cb120-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb120-40"><a href="Ch06.html#cb120-40" tabindex="-1"></a>  </span>
<span id="cb120-41"><a href="Ch06.html#cb120-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb120-42"><a href="Ch06.html#cb120-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb120-43"><a href="Ch06.html#cb120-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb120-44"><a href="Ch06.html#cb120-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb120-45"><a href="Ch06.html#cb120-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb120-46"><a href="Ch06.html#cb120-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb120-47"><a href="Ch06.html#cb120-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb120-48"><a href="Ch06.html#cb120-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb120-49"><a href="Ch06.html#cb120-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb120-50"><a href="Ch06.html#cb120-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-51"><a href="Ch06.html#cb120-51" tabindex="-1"></a>egvrez</span>
<span id="cb120-52"><a href="Ch06.html#cb120-52" tabindex="-1"></a>  </span>
<span id="cb120-53"><a href="Ch06.html#cb120-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb120-54"><a href="Ch06.html#cb120-54" tabindex="-1"></a></span>
<span id="cb120-55"><a href="Ch06.html#cb120-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb120-56"><a href="Ch06.html#cb120-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb120-57"><a href="Ch06.html#cb120-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb120-58"><a href="Ch06.html#cb120-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb120-59"><a href="Ch06.html#cb120-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb120-60"><a href="Ch06.html#cb120-60" tabindex="-1"></a></span>
<span id="cb120-61"><a href="Ch06.html#cb120-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_10-max_cell.tif&quot;</span></span>
<span id="cb120-62"><a href="Ch06.html#cb120-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb120-63"><a href="Ch06.html#cb120-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb120-64"><a href="Ch06.html#cb120-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb120-65"><a href="Ch06.html#cb120-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb120-66"><a href="Ch06.html#cb120-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb120-67"><a href="Ch06.html#cb120-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb120-68"><a href="Ch06.html#cb120-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb120-69"><a href="Ch06.html#cb120-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb120-70"><a href="Ch06.html#cb120-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb120-71"><a href="Ch06.html#cb120-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb120-72"><a href="Ch06.html#cb120-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb120-73"><a href="Ch06.html#cb120-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_79.png" width="100%" /></p>
</div>
<div id="ch06.080" class="section level2 hasAnchor" number="6.80">
<h2><span class="header-section-number">6.80</span> HydroClim_11-min_cell<a href="Ch06.html#ch06.080" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_11-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_80</code></p>
<p><strong>English name:</strong> Minimum per subcatchment upstream mean daily mean air temperatures (°C) of the coldest quarter (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālā augšteces dienas vidējā gaisa temperatūra vēsākajā ceturksnī (°C) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - min - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="Ch06.html#cb121-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb121-2"><a href="Ch06.html#cb121-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb121-3"><a href="Ch06.html#cb121-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb121-4"><a href="Ch06.html#cb121-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb121-5"><a href="Ch06.html#cb121-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb121-6"><a href="Ch06.html#cb121-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb121-7"><a href="Ch06.html#cb121-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb121-8"><a href="Ch06.html#cb121-8" tabindex="-1"></a></span>
<span id="cb121-9"><a href="Ch06.html#cb121-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb121-10"><a href="Ch06.html#cb121-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb121-11"><a href="Ch06.html#cb121-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb121-12"><a href="Ch06.html#cb121-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb121-13"><a href="Ch06.html#cb121-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb121-14"><a href="Ch06.html#cb121-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb121-15"><a href="Ch06.html#cb121-15" tabindex="-1"></a></span>
<span id="cb121-16"><a href="Ch06.html#cb121-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb121-17"><a href="Ch06.html#cb121-17" tabindex="-1"></a></span>
<span id="cb121-18"><a href="Ch06.html#cb121-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb121-19"><a href="Ch06.html#cb121-19" tabindex="-1"></a></span>
<span id="cb121-20"><a href="Ch06.html#cb121-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_11-min_cell.tif&quot;</span></span>
<span id="cb121-21"><a href="Ch06.html#cb121-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_80&quot;</span></span>
<span id="cb121-22"><a href="Ch06.html#cb121-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;min&quot;</span></span>
<span id="cb121-23"><a href="Ch06.html#cb121-23" tabindex="-1"></a>  </span>
<span id="cb121-24"><a href="Ch06.html#cb121-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb121-25"><a href="Ch06.html#cb121-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb121-26"><a href="Ch06.html#cb121-26" tabindex="-1"></a>  </span>
<span id="cb121-27"><a href="Ch06.html#cb121-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb121-28"><a href="Ch06.html#cb121-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb121-29"><a href="Ch06.html#cb121-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb121-30"><a href="Ch06.html#cb121-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb121-31"><a href="Ch06.html#cb121-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb121-32"><a href="Ch06.html#cb121-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb121-33"><a href="Ch06.html#cb121-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb121-34"><a href="Ch06.html#cb121-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb121-35"><a href="Ch06.html#cb121-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb121-36"><a href="Ch06.html#cb121-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb121-37"><a href="Ch06.html#cb121-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb121-38"><a href="Ch06.html#cb121-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb121-39"><a href="Ch06.html#cb121-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb121-40"><a href="Ch06.html#cb121-40" tabindex="-1"></a>  </span>
<span id="cb121-41"><a href="Ch06.html#cb121-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb121-42"><a href="Ch06.html#cb121-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb121-43"><a href="Ch06.html#cb121-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb121-44"><a href="Ch06.html#cb121-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb121-45"><a href="Ch06.html#cb121-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb121-46"><a href="Ch06.html#cb121-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb121-47"><a href="Ch06.html#cb121-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb121-48"><a href="Ch06.html#cb121-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb121-49"><a href="Ch06.html#cb121-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb121-50"><a href="Ch06.html#cb121-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb121-51"><a href="Ch06.html#cb121-51" tabindex="-1"></a>egvrez</span>
<span id="cb121-52"><a href="Ch06.html#cb121-52" tabindex="-1"></a>  </span>
<span id="cb121-53"><a href="Ch06.html#cb121-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb121-54"><a href="Ch06.html#cb121-54" tabindex="-1"></a></span>
<span id="cb121-55"><a href="Ch06.html#cb121-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb121-56"><a href="Ch06.html#cb121-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb121-57"><a href="Ch06.html#cb121-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb121-58"><a href="Ch06.html#cb121-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb121-59"><a href="Ch06.html#cb121-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb121-60"><a href="Ch06.html#cb121-60" tabindex="-1"></a></span>
<span id="cb121-61"><a href="Ch06.html#cb121-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_11-min_cell.tif&quot;</span></span>
<span id="cb121-62"><a href="Ch06.html#cb121-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb121-63"><a href="Ch06.html#cb121-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb121-64"><a href="Ch06.html#cb121-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb121-65"><a href="Ch06.html#cb121-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb121-66"><a href="Ch06.html#cb121-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb121-67"><a href="Ch06.html#cb121-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb121-68"><a href="Ch06.html#cb121-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb121-69"><a href="Ch06.html#cb121-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb121-70"><a href="Ch06.html#cb121-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb121-71"><a href="Ch06.html#cb121-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb121-72"><a href="Ch06.html#cb121-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb121-73"><a href="Ch06.html#cb121-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_80.png" width="100%" /></p>
</div>
<div id="ch06.081" class="section level2 hasAnchor" number="6.81">
<h2><span class="header-section-number">6.81</span> HydroClim_12-max_cell<a href="Ch06.html#ch06.081" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_12-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_81</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream annual precipitation amount (kg m⁻² year⁻¹) (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālais augšteces nokrišņu daudzums gadā (kg m⁻² year⁻¹) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="Ch06.html#cb122-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb122-2"><a href="Ch06.html#cb122-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb122-3"><a href="Ch06.html#cb122-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb122-4"><a href="Ch06.html#cb122-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb122-5"><a href="Ch06.html#cb122-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb122-6"><a href="Ch06.html#cb122-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb122-7"><a href="Ch06.html#cb122-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb122-8"><a href="Ch06.html#cb122-8" tabindex="-1"></a></span>
<span id="cb122-9"><a href="Ch06.html#cb122-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb122-10"><a href="Ch06.html#cb122-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb122-11"><a href="Ch06.html#cb122-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb122-12"><a href="Ch06.html#cb122-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb122-13"><a href="Ch06.html#cb122-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb122-14"><a href="Ch06.html#cb122-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb122-15"><a href="Ch06.html#cb122-15" tabindex="-1"></a></span>
<span id="cb122-16"><a href="Ch06.html#cb122-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb122-17"><a href="Ch06.html#cb122-17" tabindex="-1"></a></span>
<span id="cb122-18"><a href="Ch06.html#cb122-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb122-19"><a href="Ch06.html#cb122-19" tabindex="-1"></a></span>
<span id="cb122-20"><a href="Ch06.html#cb122-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_12-max_cell.tif&quot;</span></span>
<span id="cb122-21"><a href="Ch06.html#cb122-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_81&quot;</span></span>
<span id="cb122-22"><a href="Ch06.html#cb122-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb122-23"><a href="Ch06.html#cb122-23" tabindex="-1"></a>  </span>
<span id="cb122-24"><a href="Ch06.html#cb122-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb122-25"><a href="Ch06.html#cb122-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb122-26"><a href="Ch06.html#cb122-26" tabindex="-1"></a>  </span>
<span id="cb122-27"><a href="Ch06.html#cb122-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb122-28"><a href="Ch06.html#cb122-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb122-29"><a href="Ch06.html#cb122-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb122-30"><a href="Ch06.html#cb122-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb122-31"><a href="Ch06.html#cb122-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb122-32"><a href="Ch06.html#cb122-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb122-33"><a href="Ch06.html#cb122-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb122-34"><a href="Ch06.html#cb122-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb122-35"><a href="Ch06.html#cb122-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb122-36"><a href="Ch06.html#cb122-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb122-37"><a href="Ch06.html#cb122-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb122-38"><a href="Ch06.html#cb122-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb122-39"><a href="Ch06.html#cb122-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb122-40"><a href="Ch06.html#cb122-40" tabindex="-1"></a>  </span>
<span id="cb122-41"><a href="Ch06.html#cb122-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb122-42"><a href="Ch06.html#cb122-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb122-43"><a href="Ch06.html#cb122-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb122-44"><a href="Ch06.html#cb122-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb122-45"><a href="Ch06.html#cb122-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb122-46"><a href="Ch06.html#cb122-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb122-47"><a href="Ch06.html#cb122-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb122-48"><a href="Ch06.html#cb122-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb122-49"><a href="Ch06.html#cb122-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb122-50"><a href="Ch06.html#cb122-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb122-51"><a href="Ch06.html#cb122-51" tabindex="-1"></a>egvrez</span>
<span id="cb122-52"><a href="Ch06.html#cb122-52" tabindex="-1"></a>  </span>
<span id="cb122-53"><a href="Ch06.html#cb122-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb122-54"><a href="Ch06.html#cb122-54" tabindex="-1"></a></span>
<span id="cb122-55"><a href="Ch06.html#cb122-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb122-56"><a href="Ch06.html#cb122-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb122-57"><a href="Ch06.html#cb122-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb122-58"><a href="Ch06.html#cb122-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb122-59"><a href="Ch06.html#cb122-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb122-60"><a href="Ch06.html#cb122-60" tabindex="-1"></a></span>
<span id="cb122-61"><a href="Ch06.html#cb122-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_12-max_cell.tif&quot;</span></span>
<span id="cb122-62"><a href="Ch06.html#cb122-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb122-63"><a href="Ch06.html#cb122-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb122-64"><a href="Ch06.html#cb122-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb122-65"><a href="Ch06.html#cb122-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb122-66"><a href="Ch06.html#cb122-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb122-67"><a href="Ch06.html#cb122-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb122-68"><a href="Ch06.html#cb122-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb122-69"><a href="Ch06.html#cb122-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb122-70"><a href="Ch06.html#cb122-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb122-71"><a href="Ch06.html#cb122-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb122-72"><a href="Ch06.html#cb122-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb122-73"><a href="Ch06.html#cb122-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_81.png" width="100%" /></p>
</div>
<div id="ch06.082" class="section level2 hasAnchor" number="6.82">
<h2><span class="header-section-number">6.82</span> HydroClim_13-max_cell<a href="Ch06.html#ch06.082" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_13-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_82</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream precipitation amount (kg m⁻² year⁻¹) of the wettest month (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālais augšteces nokrišņu daudzums mitrākajā mēnesī (kg m⁻² year⁻¹) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="Ch06.html#cb123-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb123-2"><a href="Ch06.html#cb123-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb123-3"><a href="Ch06.html#cb123-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb123-4"><a href="Ch06.html#cb123-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb123-5"><a href="Ch06.html#cb123-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb123-6"><a href="Ch06.html#cb123-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb123-7"><a href="Ch06.html#cb123-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb123-8"><a href="Ch06.html#cb123-8" tabindex="-1"></a></span>
<span id="cb123-9"><a href="Ch06.html#cb123-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb123-10"><a href="Ch06.html#cb123-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb123-11"><a href="Ch06.html#cb123-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb123-12"><a href="Ch06.html#cb123-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb123-13"><a href="Ch06.html#cb123-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb123-14"><a href="Ch06.html#cb123-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb123-15"><a href="Ch06.html#cb123-15" tabindex="-1"></a></span>
<span id="cb123-16"><a href="Ch06.html#cb123-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb123-17"><a href="Ch06.html#cb123-17" tabindex="-1"></a></span>
<span id="cb123-18"><a href="Ch06.html#cb123-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb123-19"><a href="Ch06.html#cb123-19" tabindex="-1"></a></span>
<span id="cb123-20"><a href="Ch06.html#cb123-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_13-max_cell.tif&quot;</span></span>
<span id="cb123-21"><a href="Ch06.html#cb123-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_82&quot;</span></span>
<span id="cb123-22"><a href="Ch06.html#cb123-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb123-23"><a href="Ch06.html#cb123-23" tabindex="-1"></a>  </span>
<span id="cb123-24"><a href="Ch06.html#cb123-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb123-25"><a href="Ch06.html#cb123-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb123-26"><a href="Ch06.html#cb123-26" tabindex="-1"></a>  </span>
<span id="cb123-27"><a href="Ch06.html#cb123-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb123-28"><a href="Ch06.html#cb123-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb123-29"><a href="Ch06.html#cb123-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb123-30"><a href="Ch06.html#cb123-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb123-31"><a href="Ch06.html#cb123-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb123-32"><a href="Ch06.html#cb123-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb123-33"><a href="Ch06.html#cb123-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb123-34"><a href="Ch06.html#cb123-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb123-35"><a href="Ch06.html#cb123-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb123-36"><a href="Ch06.html#cb123-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb123-37"><a href="Ch06.html#cb123-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb123-38"><a href="Ch06.html#cb123-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb123-39"><a href="Ch06.html#cb123-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb123-40"><a href="Ch06.html#cb123-40" tabindex="-1"></a>  </span>
<span id="cb123-41"><a href="Ch06.html#cb123-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb123-42"><a href="Ch06.html#cb123-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb123-43"><a href="Ch06.html#cb123-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb123-44"><a href="Ch06.html#cb123-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb123-45"><a href="Ch06.html#cb123-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb123-46"><a href="Ch06.html#cb123-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb123-47"><a href="Ch06.html#cb123-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb123-48"><a href="Ch06.html#cb123-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb123-49"><a href="Ch06.html#cb123-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb123-50"><a href="Ch06.html#cb123-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb123-51"><a href="Ch06.html#cb123-51" tabindex="-1"></a>egvrez</span>
<span id="cb123-52"><a href="Ch06.html#cb123-52" tabindex="-1"></a>  </span>
<span id="cb123-53"><a href="Ch06.html#cb123-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb123-54"><a href="Ch06.html#cb123-54" tabindex="-1"></a></span>
<span id="cb123-55"><a href="Ch06.html#cb123-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb123-56"><a href="Ch06.html#cb123-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb123-57"><a href="Ch06.html#cb123-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb123-58"><a href="Ch06.html#cb123-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb123-59"><a href="Ch06.html#cb123-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb123-60"><a href="Ch06.html#cb123-60" tabindex="-1"></a></span>
<span id="cb123-61"><a href="Ch06.html#cb123-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_13-max_cell.tif&quot;</span></span>
<span id="cb123-62"><a href="Ch06.html#cb123-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb123-63"><a href="Ch06.html#cb123-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb123-64"><a href="Ch06.html#cb123-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb123-65"><a href="Ch06.html#cb123-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb123-66"><a href="Ch06.html#cb123-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb123-67"><a href="Ch06.html#cb123-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb123-68"><a href="Ch06.html#cb123-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb123-69"><a href="Ch06.html#cb123-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb123-70"><a href="Ch06.html#cb123-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb123-71"><a href="Ch06.html#cb123-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb123-72"><a href="Ch06.html#cb123-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb123-73"><a href="Ch06.html#cb123-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_82.png" width="100%" /></p>
</div>
<div id="ch06.083" class="section level2 hasAnchor" number="6.83">
<h2><span class="header-section-number">6.83</span> HydroClim_14-max_cell<a href="Ch06.html#ch06.083" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_14-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_83</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream precipitation amount (kg m⁻² year⁻¹) of the driest month (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālais augšteces nokrišņu daudzums sausākajā mēnesī (kg m⁻² year⁻¹) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="Ch06.html#cb124-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb124-2"><a href="Ch06.html#cb124-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb124-3"><a href="Ch06.html#cb124-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb124-4"><a href="Ch06.html#cb124-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb124-5"><a href="Ch06.html#cb124-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb124-6"><a href="Ch06.html#cb124-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb124-7"><a href="Ch06.html#cb124-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb124-8"><a href="Ch06.html#cb124-8" tabindex="-1"></a></span>
<span id="cb124-9"><a href="Ch06.html#cb124-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb124-10"><a href="Ch06.html#cb124-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb124-11"><a href="Ch06.html#cb124-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb124-12"><a href="Ch06.html#cb124-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb124-13"><a href="Ch06.html#cb124-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb124-14"><a href="Ch06.html#cb124-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb124-15"><a href="Ch06.html#cb124-15" tabindex="-1"></a></span>
<span id="cb124-16"><a href="Ch06.html#cb124-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb124-17"><a href="Ch06.html#cb124-17" tabindex="-1"></a></span>
<span id="cb124-18"><a href="Ch06.html#cb124-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb124-19"><a href="Ch06.html#cb124-19" tabindex="-1"></a></span>
<span id="cb124-20"><a href="Ch06.html#cb124-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_14-max_cell.tif&quot;</span></span>
<span id="cb124-21"><a href="Ch06.html#cb124-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_83&quot;</span></span>
<span id="cb124-22"><a href="Ch06.html#cb124-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb124-23"><a href="Ch06.html#cb124-23" tabindex="-1"></a>  </span>
<span id="cb124-24"><a href="Ch06.html#cb124-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb124-25"><a href="Ch06.html#cb124-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb124-26"><a href="Ch06.html#cb124-26" tabindex="-1"></a>  </span>
<span id="cb124-27"><a href="Ch06.html#cb124-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb124-28"><a href="Ch06.html#cb124-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb124-29"><a href="Ch06.html#cb124-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb124-30"><a href="Ch06.html#cb124-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb124-31"><a href="Ch06.html#cb124-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb124-32"><a href="Ch06.html#cb124-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb124-33"><a href="Ch06.html#cb124-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb124-34"><a href="Ch06.html#cb124-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb124-35"><a href="Ch06.html#cb124-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb124-36"><a href="Ch06.html#cb124-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb124-37"><a href="Ch06.html#cb124-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb124-38"><a href="Ch06.html#cb124-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb124-39"><a href="Ch06.html#cb124-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb124-40"><a href="Ch06.html#cb124-40" tabindex="-1"></a>  </span>
<span id="cb124-41"><a href="Ch06.html#cb124-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb124-42"><a href="Ch06.html#cb124-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb124-43"><a href="Ch06.html#cb124-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb124-44"><a href="Ch06.html#cb124-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb124-45"><a href="Ch06.html#cb124-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb124-46"><a href="Ch06.html#cb124-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb124-47"><a href="Ch06.html#cb124-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb124-48"><a href="Ch06.html#cb124-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb124-49"><a href="Ch06.html#cb124-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb124-50"><a href="Ch06.html#cb124-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb124-51"><a href="Ch06.html#cb124-51" tabindex="-1"></a>egvrez</span>
<span id="cb124-52"><a href="Ch06.html#cb124-52" tabindex="-1"></a>  </span>
<span id="cb124-53"><a href="Ch06.html#cb124-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb124-54"><a href="Ch06.html#cb124-54" tabindex="-1"></a></span>
<span id="cb124-55"><a href="Ch06.html#cb124-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb124-56"><a href="Ch06.html#cb124-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb124-57"><a href="Ch06.html#cb124-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb124-58"><a href="Ch06.html#cb124-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb124-59"><a href="Ch06.html#cb124-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb124-60"><a href="Ch06.html#cb124-60" tabindex="-1"></a></span>
<span id="cb124-61"><a href="Ch06.html#cb124-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_14-max_cell.tif&quot;</span></span>
<span id="cb124-62"><a href="Ch06.html#cb124-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb124-63"><a href="Ch06.html#cb124-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb124-64"><a href="Ch06.html#cb124-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb124-65"><a href="Ch06.html#cb124-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb124-66"><a href="Ch06.html#cb124-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb124-67"><a href="Ch06.html#cb124-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb124-68"><a href="Ch06.html#cb124-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb124-69"><a href="Ch06.html#cb124-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb124-70"><a href="Ch06.html#cb124-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb124-71"><a href="Ch06.html#cb124-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb124-72"><a href="Ch06.html#cb124-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb124-73"><a href="Ch06.html#cb124-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_83.png" width="100%" /></p>
</div>
<div id="ch06.084" class="section level2 hasAnchor" number="6.84">
<h2><span class="header-section-number">6.84</span> HydroClim_15-max_cell<a href="Ch06.html#ch06.084" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_15-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_84</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream precipitation seasonality (kg m⁻²) (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālais augšteces nokrišņu daudzuma sezonalitāte (kg m⁻²) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="Ch06.html#cb125-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb125-2"><a href="Ch06.html#cb125-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb125-3"><a href="Ch06.html#cb125-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb125-4"><a href="Ch06.html#cb125-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb125-5"><a href="Ch06.html#cb125-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb125-6"><a href="Ch06.html#cb125-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb125-7"><a href="Ch06.html#cb125-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb125-8"><a href="Ch06.html#cb125-8" tabindex="-1"></a></span>
<span id="cb125-9"><a href="Ch06.html#cb125-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb125-10"><a href="Ch06.html#cb125-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb125-11"><a href="Ch06.html#cb125-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb125-12"><a href="Ch06.html#cb125-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb125-13"><a href="Ch06.html#cb125-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb125-14"><a href="Ch06.html#cb125-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb125-15"><a href="Ch06.html#cb125-15" tabindex="-1"></a></span>
<span id="cb125-16"><a href="Ch06.html#cb125-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb125-17"><a href="Ch06.html#cb125-17" tabindex="-1"></a></span>
<span id="cb125-18"><a href="Ch06.html#cb125-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb125-19"><a href="Ch06.html#cb125-19" tabindex="-1"></a></span>
<span id="cb125-20"><a href="Ch06.html#cb125-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_15-max_cell.tif&quot;</span></span>
<span id="cb125-21"><a href="Ch06.html#cb125-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_84&quot;</span></span>
<span id="cb125-22"><a href="Ch06.html#cb125-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb125-23"><a href="Ch06.html#cb125-23" tabindex="-1"></a>  </span>
<span id="cb125-24"><a href="Ch06.html#cb125-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb125-25"><a href="Ch06.html#cb125-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb125-26"><a href="Ch06.html#cb125-26" tabindex="-1"></a>  </span>
<span id="cb125-27"><a href="Ch06.html#cb125-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb125-28"><a href="Ch06.html#cb125-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb125-29"><a href="Ch06.html#cb125-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb125-30"><a href="Ch06.html#cb125-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb125-31"><a href="Ch06.html#cb125-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb125-32"><a href="Ch06.html#cb125-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb125-33"><a href="Ch06.html#cb125-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb125-34"><a href="Ch06.html#cb125-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb125-35"><a href="Ch06.html#cb125-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb125-36"><a href="Ch06.html#cb125-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb125-37"><a href="Ch06.html#cb125-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb125-38"><a href="Ch06.html#cb125-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb125-39"><a href="Ch06.html#cb125-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb125-40"><a href="Ch06.html#cb125-40" tabindex="-1"></a>  </span>
<span id="cb125-41"><a href="Ch06.html#cb125-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb125-42"><a href="Ch06.html#cb125-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb125-43"><a href="Ch06.html#cb125-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb125-44"><a href="Ch06.html#cb125-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb125-45"><a href="Ch06.html#cb125-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb125-46"><a href="Ch06.html#cb125-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb125-47"><a href="Ch06.html#cb125-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb125-48"><a href="Ch06.html#cb125-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb125-49"><a href="Ch06.html#cb125-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb125-50"><a href="Ch06.html#cb125-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb125-51"><a href="Ch06.html#cb125-51" tabindex="-1"></a>egvrez</span>
<span id="cb125-52"><a href="Ch06.html#cb125-52" tabindex="-1"></a>  </span>
<span id="cb125-53"><a href="Ch06.html#cb125-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb125-54"><a href="Ch06.html#cb125-54" tabindex="-1"></a></span>
<span id="cb125-55"><a href="Ch06.html#cb125-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb125-56"><a href="Ch06.html#cb125-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb125-57"><a href="Ch06.html#cb125-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb125-58"><a href="Ch06.html#cb125-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb125-59"><a href="Ch06.html#cb125-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb125-60"><a href="Ch06.html#cb125-60" tabindex="-1"></a></span>
<span id="cb125-61"><a href="Ch06.html#cb125-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_15-max_cell.tif&quot;</span></span>
<span id="cb125-62"><a href="Ch06.html#cb125-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb125-63"><a href="Ch06.html#cb125-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb125-64"><a href="Ch06.html#cb125-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb125-65"><a href="Ch06.html#cb125-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb125-66"><a href="Ch06.html#cb125-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb125-67"><a href="Ch06.html#cb125-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb125-68"><a href="Ch06.html#cb125-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb125-69"><a href="Ch06.html#cb125-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb125-70"><a href="Ch06.html#cb125-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb125-71"><a href="Ch06.html#cb125-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb125-72"><a href="Ch06.html#cb125-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb125-73"><a href="Ch06.html#cb125-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_84.png" width="100%" /></p>
</div>
<div id="ch06.085" class="section level2 hasAnchor" number="6.85">
<h2><span class="header-section-number">6.85</span> HydroClim_16-max_cell<a href="Ch06.html#ch06.085" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_16-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_85</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream mean monthly precipitation amount (kg m⁻² year⁻¹) of the wettest quarter (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālais augšteces nokrišņu daudzums mitrākajā ceturksnī (kg m⁻² year⁻¹) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="Ch06.html#cb126-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb126-2"><a href="Ch06.html#cb126-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb126-3"><a href="Ch06.html#cb126-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb126-4"><a href="Ch06.html#cb126-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb126-5"><a href="Ch06.html#cb126-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb126-6"><a href="Ch06.html#cb126-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb126-7"><a href="Ch06.html#cb126-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb126-8"><a href="Ch06.html#cb126-8" tabindex="-1"></a></span>
<span id="cb126-9"><a href="Ch06.html#cb126-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb126-10"><a href="Ch06.html#cb126-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb126-11"><a href="Ch06.html#cb126-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb126-12"><a href="Ch06.html#cb126-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb126-13"><a href="Ch06.html#cb126-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb126-14"><a href="Ch06.html#cb126-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb126-15"><a href="Ch06.html#cb126-15" tabindex="-1"></a></span>
<span id="cb126-16"><a href="Ch06.html#cb126-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb126-17"><a href="Ch06.html#cb126-17" tabindex="-1"></a></span>
<span id="cb126-18"><a href="Ch06.html#cb126-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb126-19"><a href="Ch06.html#cb126-19" tabindex="-1"></a></span>
<span id="cb126-20"><a href="Ch06.html#cb126-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_16-max_cell.tif&quot;</span></span>
<span id="cb126-21"><a href="Ch06.html#cb126-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_85&quot;</span></span>
<span id="cb126-22"><a href="Ch06.html#cb126-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb126-23"><a href="Ch06.html#cb126-23" tabindex="-1"></a>  </span>
<span id="cb126-24"><a href="Ch06.html#cb126-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb126-25"><a href="Ch06.html#cb126-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb126-26"><a href="Ch06.html#cb126-26" tabindex="-1"></a>  </span>
<span id="cb126-27"><a href="Ch06.html#cb126-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb126-28"><a href="Ch06.html#cb126-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb126-29"><a href="Ch06.html#cb126-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb126-30"><a href="Ch06.html#cb126-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb126-31"><a href="Ch06.html#cb126-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb126-32"><a href="Ch06.html#cb126-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb126-33"><a href="Ch06.html#cb126-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb126-34"><a href="Ch06.html#cb126-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb126-35"><a href="Ch06.html#cb126-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb126-36"><a href="Ch06.html#cb126-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb126-37"><a href="Ch06.html#cb126-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb126-38"><a href="Ch06.html#cb126-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb126-39"><a href="Ch06.html#cb126-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb126-40"><a href="Ch06.html#cb126-40" tabindex="-1"></a>  </span>
<span id="cb126-41"><a href="Ch06.html#cb126-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb126-42"><a href="Ch06.html#cb126-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb126-43"><a href="Ch06.html#cb126-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb126-44"><a href="Ch06.html#cb126-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb126-45"><a href="Ch06.html#cb126-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb126-46"><a href="Ch06.html#cb126-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb126-47"><a href="Ch06.html#cb126-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb126-48"><a href="Ch06.html#cb126-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb126-49"><a href="Ch06.html#cb126-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb126-50"><a href="Ch06.html#cb126-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb126-51"><a href="Ch06.html#cb126-51" tabindex="-1"></a>egvrez</span>
<span id="cb126-52"><a href="Ch06.html#cb126-52" tabindex="-1"></a>  </span>
<span id="cb126-53"><a href="Ch06.html#cb126-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb126-54"><a href="Ch06.html#cb126-54" tabindex="-1"></a></span>
<span id="cb126-55"><a href="Ch06.html#cb126-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb126-56"><a href="Ch06.html#cb126-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb126-57"><a href="Ch06.html#cb126-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb126-58"><a href="Ch06.html#cb126-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb126-59"><a href="Ch06.html#cb126-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb126-60"><a href="Ch06.html#cb126-60" tabindex="-1"></a></span>
<span id="cb126-61"><a href="Ch06.html#cb126-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_16-max_cell.tif&quot;</span></span>
<span id="cb126-62"><a href="Ch06.html#cb126-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb126-63"><a href="Ch06.html#cb126-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb126-64"><a href="Ch06.html#cb126-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb126-65"><a href="Ch06.html#cb126-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb126-66"><a href="Ch06.html#cb126-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb126-67"><a href="Ch06.html#cb126-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb126-68"><a href="Ch06.html#cb126-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb126-69"><a href="Ch06.html#cb126-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb126-70"><a href="Ch06.html#cb126-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb126-71"><a href="Ch06.html#cb126-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb126-72"><a href="Ch06.html#cb126-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb126-73"><a href="Ch06.html#cb126-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_85.png" width="100%" /></p>
</div>
<div id="ch06.086" class="section level2 hasAnchor" number="6.86">
<h2><span class="header-section-number">6.86</span> HydroClim_17-max_cell<a href="Ch06.html#ch06.086" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_17-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_86</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream mean monthly precipitation amount (kg m⁻² year⁻¹) of the driest quarter (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālais augšteces nokrišņu daudzums sausākajā ceturksnī (kg m⁻² year⁻¹) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="Ch06.html#cb127-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb127-2"><a href="Ch06.html#cb127-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb127-3"><a href="Ch06.html#cb127-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb127-4"><a href="Ch06.html#cb127-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb127-5"><a href="Ch06.html#cb127-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb127-6"><a href="Ch06.html#cb127-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb127-7"><a href="Ch06.html#cb127-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb127-8"><a href="Ch06.html#cb127-8" tabindex="-1"></a></span>
<span id="cb127-9"><a href="Ch06.html#cb127-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb127-10"><a href="Ch06.html#cb127-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb127-11"><a href="Ch06.html#cb127-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb127-12"><a href="Ch06.html#cb127-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb127-13"><a href="Ch06.html#cb127-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb127-14"><a href="Ch06.html#cb127-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb127-15"><a href="Ch06.html#cb127-15" tabindex="-1"></a></span>
<span id="cb127-16"><a href="Ch06.html#cb127-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb127-17"><a href="Ch06.html#cb127-17" tabindex="-1"></a></span>
<span id="cb127-18"><a href="Ch06.html#cb127-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb127-19"><a href="Ch06.html#cb127-19" tabindex="-1"></a></span>
<span id="cb127-20"><a href="Ch06.html#cb127-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_17-max_cell.tif&quot;</span></span>
<span id="cb127-21"><a href="Ch06.html#cb127-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_86&quot;</span></span>
<span id="cb127-22"><a href="Ch06.html#cb127-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb127-23"><a href="Ch06.html#cb127-23" tabindex="-1"></a>  </span>
<span id="cb127-24"><a href="Ch06.html#cb127-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb127-25"><a href="Ch06.html#cb127-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb127-26"><a href="Ch06.html#cb127-26" tabindex="-1"></a>  </span>
<span id="cb127-27"><a href="Ch06.html#cb127-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb127-28"><a href="Ch06.html#cb127-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb127-29"><a href="Ch06.html#cb127-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb127-30"><a href="Ch06.html#cb127-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb127-31"><a href="Ch06.html#cb127-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb127-32"><a href="Ch06.html#cb127-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb127-33"><a href="Ch06.html#cb127-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb127-34"><a href="Ch06.html#cb127-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb127-35"><a href="Ch06.html#cb127-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb127-36"><a href="Ch06.html#cb127-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb127-37"><a href="Ch06.html#cb127-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb127-38"><a href="Ch06.html#cb127-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb127-39"><a href="Ch06.html#cb127-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb127-40"><a href="Ch06.html#cb127-40" tabindex="-1"></a>  </span>
<span id="cb127-41"><a href="Ch06.html#cb127-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb127-42"><a href="Ch06.html#cb127-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb127-43"><a href="Ch06.html#cb127-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb127-44"><a href="Ch06.html#cb127-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb127-45"><a href="Ch06.html#cb127-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb127-46"><a href="Ch06.html#cb127-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb127-47"><a href="Ch06.html#cb127-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb127-48"><a href="Ch06.html#cb127-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb127-49"><a href="Ch06.html#cb127-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb127-50"><a href="Ch06.html#cb127-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb127-51"><a href="Ch06.html#cb127-51" tabindex="-1"></a>egvrez</span>
<span id="cb127-52"><a href="Ch06.html#cb127-52" tabindex="-1"></a>  </span>
<span id="cb127-53"><a href="Ch06.html#cb127-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb127-54"><a href="Ch06.html#cb127-54" tabindex="-1"></a></span>
<span id="cb127-55"><a href="Ch06.html#cb127-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb127-56"><a href="Ch06.html#cb127-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb127-57"><a href="Ch06.html#cb127-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb127-58"><a href="Ch06.html#cb127-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb127-59"><a href="Ch06.html#cb127-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb127-60"><a href="Ch06.html#cb127-60" tabindex="-1"></a></span>
<span id="cb127-61"><a href="Ch06.html#cb127-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_17-max_cell.tif&quot;</span></span>
<span id="cb127-62"><a href="Ch06.html#cb127-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb127-63"><a href="Ch06.html#cb127-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb127-64"><a href="Ch06.html#cb127-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb127-65"><a href="Ch06.html#cb127-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb127-66"><a href="Ch06.html#cb127-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb127-67"><a href="Ch06.html#cb127-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb127-68"><a href="Ch06.html#cb127-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb127-69"><a href="Ch06.html#cb127-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb127-70"><a href="Ch06.html#cb127-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb127-71"><a href="Ch06.html#cb127-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb127-72"><a href="Ch06.html#cb127-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb127-73"><a href="Ch06.html#cb127-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_86.png" width="100%" /></p>
</div>
<div id="ch06.087" class="section level2 hasAnchor" number="6.87">
<h2><span class="header-section-number">6.87</span> HydroClim_18-max_cell<a href="Ch06.html#ch06.087" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_18-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_87</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream mean monthly precipitation amount (kg m⁻² year⁻¹) of the warmest quarter (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālais augšteces nokrišņu daudzums siltākajā ceturksnī (kg m⁻² year⁻¹) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="Ch06.html#cb128-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb128-2"><a href="Ch06.html#cb128-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb128-3"><a href="Ch06.html#cb128-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb128-4"><a href="Ch06.html#cb128-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb128-5"><a href="Ch06.html#cb128-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb128-6"><a href="Ch06.html#cb128-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb128-7"><a href="Ch06.html#cb128-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb128-8"><a href="Ch06.html#cb128-8" tabindex="-1"></a></span>
<span id="cb128-9"><a href="Ch06.html#cb128-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb128-10"><a href="Ch06.html#cb128-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb128-11"><a href="Ch06.html#cb128-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb128-12"><a href="Ch06.html#cb128-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb128-13"><a href="Ch06.html#cb128-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb128-14"><a href="Ch06.html#cb128-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb128-15"><a href="Ch06.html#cb128-15" tabindex="-1"></a></span>
<span id="cb128-16"><a href="Ch06.html#cb128-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb128-17"><a href="Ch06.html#cb128-17" tabindex="-1"></a></span>
<span id="cb128-18"><a href="Ch06.html#cb128-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb128-19"><a href="Ch06.html#cb128-19" tabindex="-1"></a></span>
<span id="cb128-20"><a href="Ch06.html#cb128-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_18-max_cell.tif&quot;</span></span>
<span id="cb128-21"><a href="Ch06.html#cb128-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_87&quot;</span></span>
<span id="cb128-22"><a href="Ch06.html#cb128-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb128-23"><a href="Ch06.html#cb128-23" tabindex="-1"></a>  </span>
<span id="cb128-24"><a href="Ch06.html#cb128-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb128-25"><a href="Ch06.html#cb128-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb128-26"><a href="Ch06.html#cb128-26" tabindex="-1"></a>  </span>
<span id="cb128-27"><a href="Ch06.html#cb128-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb128-28"><a href="Ch06.html#cb128-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb128-29"><a href="Ch06.html#cb128-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb128-30"><a href="Ch06.html#cb128-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb128-31"><a href="Ch06.html#cb128-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb128-32"><a href="Ch06.html#cb128-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb128-33"><a href="Ch06.html#cb128-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb128-34"><a href="Ch06.html#cb128-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb128-35"><a href="Ch06.html#cb128-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb128-36"><a href="Ch06.html#cb128-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb128-37"><a href="Ch06.html#cb128-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb128-38"><a href="Ch06.html#cb128-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb128-39"><a href="Ch06.html#cb128-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb128-40"><a href="Ch06.html#cb128-40" tabindex="-1"></a>  </span>
<span id="cb128-41"><a href="Ch06.html#cb128-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb128-42"><a href="Ch06.html#cb128-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb128-43"><a href="Ch06.html#cb128-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb128-44"><a href="Ch06.html#cb128-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb128-45"><a href="Ch06.html#cb128-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb128-46"><a href="Ch06.html#cb128-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb128-47"><a href="Ch06.html#cb128-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb128-48"><a href="Ch06.html#cb128-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb128-49"><a href="Ch06.html#cb128-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb128-50"><a href="Ch06.html#cb128-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb128-51"><a href="Ch06.html#cb128-51" tabindex="-1"></a>egvrez</span>
<span id="cb128-52"><a href="Ch06.html#cb128-52" tabindex="-1"></a>  </span>
<span id="cb128-53"><a href="Ch06.html#cb128-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb128-54"><a href="Ch06.html#cb128-54" tabindex="-1"></a></span>
<span id="cb128-55"><a href="Ch06.html#cb128-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb128-56"><a href="Ch06.html#cb128-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb128-57"><a href="Ch06.html#cb128-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb128-58"><a href="Ch06.html#cb128-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb128-59"><a href="Ch06.html#cb128-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb128-60"><a href="Ch06.html#cb128-60" tabindex="-1"></a></span>
<span id="cb128-61"><a href="Ch06.html#cb128-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_18-max_cell.tif&quot;</span></span>
<span id="cb128-62"><a href="Ch06.html#cb128-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb128-63"><a href="Ch06.html#cb128-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb128-64"><a href="Ch06.html#cb128-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb128-65"><a href="Ch06.html#cb128-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb128-66"><a href="Ch06.html#cb128-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb128-67"><a href="Ch06.html#cb128-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb128-68"><a href="Ch06.html#cb128-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb128-69"><a href="Ch06.html#cb128-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb128-70"><a href="Ch06.html#cb128-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb128-71"><a href="Ch06.html#cb128-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb128-72"><a href="Ch06.html#cb128-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb128-73"><a href="Ch06.html#cb128-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_87.png" width="100%" /></p>
</div>
<div id="ch06.088" class="section level2 hasAnchor" number="6.88">
<h2><span class="header-section-number">6.88</span> HydroClim_19-max_cell<a href="Ch06.html#ch06.088" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>HydroClim_19-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_88</code></p>
<p><strong>English name:</strong> Maximum per subcatchment upstream mean monthly precipitation amount (kg m⁻² year⁻¹) of the coldest quarter (HydroClim) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sateces apakšbaseina maksimālais augšteces nokrišņu daudzums vēsākajā ceturksnī (kg m⁻² year⁻¹) (HydroClim) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Information - both basins and raster layers - from <a href="Ch04.html#Ch04.12">HydroClim data</a>
is used. First, basin CRS is transformed to epsg:3059. Then zonal statistics (per basin) with
layer specific summary function - max - are calculated (<code>exactextractr::exact_extract()</code>)
and then rasterized with <code>egvtools::polygon2input()</code>. Once rasterized to input data,
EGV is created with <code>egvtools::input2egv()</code>. To prevent from gaps at the edges,
inderse distance weighted (power = 2) gap filling is implemented. To save disk space,
intermediate input layer is unlinked. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="Ch06.html#cb129-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb129-2"><a href="Ch06.html#cb129-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb129-3"><a href="Ch06.html#cb129-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb129-4"><a href="Ch06.html#cb129-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb129-5"><a href="Ch06.html#cb129-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb129-6"><a href="Ch06.html#cb129-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb129-7"><a href="Ch06.html#cb129-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb129-8"><a href="Ch06.html#cb129-8" tabindex="-1"></a></span>
<span id="cb129-9"><a href="Ch06.html#cb129-9" tabindex="-1"></a><span class="co"># basins ----</span></span>
<span id="cb129-10"><a href="Ch06.html#cb129-10" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/HydroClim/hybas_lake_eu_lev01-12_v1c/hybas_lake_eu_lev12_v1c.shp&quot;</span>)</span>
<span id="cb129-11"><a href="Ch06.html#cb129-11" tabindex="-1"></a>grid_1km<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>)</span>
<span id="cb129-12"><a href="Ch06.html#cb129-12" tabindex="-1"></a>grid_1km<span class="ot">=</span><span class="fu">st_transform</span>(grid_1km,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb129-13"><a href="Ch06.html#cb129-13" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_transform</span>(level12,<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb129-14"><a href="Ch06.html#cb129-14" tabindex="-1"></a>level12<span class="ot">=</span>level12[grid_1km,,]</span>
<span id="cb129-15"><a href="Ch06.html#cb129-15" tabindex="-1"></a></span>
<span id="cb129-16"><a href="Ch06.html#cb129-16" tabindex="-1"></a>level12<span class="ot">=</span><span class="fu">st_make_valid</span>(level12)</span>
<span id="cb129-17"><a href="Ch06.html#cb129-17" tabindex="-1"></a></span>
<span id="cb129-18"><a href="Ch06.html#cb129-18" tabindex="-1"></a><span class="co"># job ----</span></span>
<span id="cb129-19"><a href="Ch06.html#cb129-19" tabindex="-1"></a></span>
<span id="cb129-20"><a href="Ch06.html#cb129-20" tabindex="-1"></a>localname<span class="ot">=</span><span class="st">&quot;HydroClim_19-max_cell.tif&quot;</span></span>
<span id="cb129-21"><a href="Ch06.html#cb129-21" tabindex="-1"></a>layername<span class="ot">=</span><span class="st">&quot;egv_88&quot;</span></span>
<span id="cb129-22"><a href="Ch06.html#cb129-22" tabindex="-1"></a>summary_function<span class="ot">=</span><span class="st">&quot;max&quot;</span></span>
<span id="cb129-23"><a href="Ch06.html#cb129-23" tabindex="-1"></a>  </span>
<span id="cb129-24"><a href="Ch06.html#cb129-24" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Geodata/2024/HydroClim/&quot;</span>,localname))</span>
<span id="cb129-25"><a href="Ch06.html#cb129-25" tabindex="-1"></a>level12<span class="sc">$</span>Hydro_values<span class="ot">=</span><span class="fu">exact_extract</span>(slanis,level12,<span class="at">fun=</span>summary_function)</span>
<span id="cb129-26"><a href="Ch06.html#cb129-26" tabindex="-1"></a>  </span>
<span id="cb129-27"><a href="Ch06.html#cb129-27" tabindex="-1"></a><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> level12,</span>
<span id="cb129-28"><a href="Ch06.html#cb129-28" tabindex="-1"></a>              <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb129-29"><a href="Ch06.html#cb129-29" tabindex="-1"></a>              <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb129-30"><a href="Ch06.html#cb129-30" tabindex="-1"></a>              <span class="at">file_name =</span> localname,</span>
<span id="cb129-31"><a href="Ch06.html#cb129-31" tabindex="-1"></a>              <span class="at">value_field =</span> <span class="st">&quot;Hydro_values&quot;</span>,</span>
<span id="cb129-32"><a href="Ch06.html#cb129-32" tabindex="-1"></a>              <span class="at">fun=</span><span class="st">&quot;first&quot;</span>,</span>
<span id="cb129-33"><a href="Ch06.html#cb129-33" tabindex="-1"></a>              <span class="at">value_type =</span> <span class="st">&quot;continuous&quot;</span>,</span>
<span id="cb129-34"><a href="Ch06.html#cb129-34" tabindex="-1"></a>              <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb129-35"><a href="Ch06.html#cb129-35" tabindex="-1"></a>              <span class="at">project_mode =</span> <span class="st">&quot;auto&quot;</span>,</span>
<span id="cb129-36"><a href="Ch06.html#cb129-36" tabindex="-1"></a>              <span class="at">check_na =</span> <span class="cn">FALSE</span>,</span>
<span id="cb129-37"><a href="Ch06.html#cb129-37" tabindex="-1"></a>              <span class="at">plot_result=</span><span class="cn">FALSE</span>,</span>
<span id="cb129-38"><a href="Ch06.html#cb129-38" tabindex="-1"></a>              <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb129-39"><a href="Ch06.html#cb129-39" tabindex="-1"></a>              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb129-40"><a href="Ch06.html#cb129-40" tabindex="-1"></a>  </span>
<span id="cb129-41"><a href="Ch06.html#cb129-41" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname),</span>
<span id="cb129-42"><a href="Ch06.html#cb129-42" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb129-43"><a href="Ch06.html#cb129-43" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb129-44"><a href="Ch06.html#cb129-44" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb129-45"><a href="Ch06.html#cb129-45" tabindex="-1"></a>                 <span class="at">input_template =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb129-46"><a href="Ch06.html#cb129-46" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb129-47"><a href="Ch06.html#cb129-47" tabindex="-1"></a>                 <span class="at">outfilename =</span> localname,</span>
<span id="cb129-48"><a href="Ch06.html#cb129-48" tabindex="-1"></a>                 <span class="at">layername =</span> layername,</span>
<span id="cb129-49"><a href="Ch06.html#cb129-49" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb129-50"><a href="Ch06.html#cb129-50" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb129-51"><a href="Ch06.html#cb129-51" tabindex="-1"></a>egvrez</span>
<span id="cb129-52"><a href="Ch06.html#cb129-52" tabindex="-1"></a>  </span>
<span id="cb129-53"><a href="Ch06.html#cb129-53" tabindex="-1"></a><span class="fu">unlink</span>(<span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,localname))</span>
<span id="cb129-54"><a href="Ch06.html#cb129-54" tabindex="-1"></a></span>
<span id="cb129-55"><a href="Ch06.html#cb129-55" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb129-56"><a href="Ch06.html#cb129-56" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb129-57"><a href="Ch06.html#cb129-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb129-58"><a href="Ch06.html#cb129-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb129-59"><a href="Ch06.html#cb129-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb129-60"><a href="Ch06.html#cb129-60" tabindex="-1"></a></span>
<span id="cb129-61"><a href="Ch06.html#cb129-61" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;HydroClim_19-max_cell.tif&quot;</span></span>
<span id="cb129-62"><a href="Ch06.html#cb129-62" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb129-63"><a href="Ch06.html#cb129-63" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb129-64"><a href="Ch06.html#cb129-64" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb129-65"><a href="Ch06.html#cb129-65" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb129-66"><a href="Ch06.html#cb129-66" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb129-67"><a href="Ch06.html#cb129-67" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb129-68"><a href="Ch06.html#cb129-68" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb129-69"><a href="Ch06.html#cb129-69" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb129-70"><a href="Ch06.html#cb129-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb129-71"><a href="Ch06.html#cb129-71" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb129-72"><a href="Ch06.html#cb129-72" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb129-73"><a href="Ch06.html#cb129-73" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_88.png" width="100%" /></p>
</div>
<div id="ch06.089" class="section level2 hasAnchor" number="6.89">
<h2><span class="header-section-number">6.89</span> Distance_Builtup_cell<a href="Ch06.html#ch06.089" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Distance_Builtup_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_89</code></p>
<p><strong>English name:</strong> Distance to Built-Up features, average within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Attālums līdz apbūvei, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.03">Landscape classification</a> with class
500 reclassified as 1 and others as 0. Processed
with <code>egvtools::distance2egv()</code>.
To protect against possible data loss at edge cells, inverse distance
weighted (power = 2) gap filling is implemented. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="Ch06.html#cb130-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb130-2"><a href="Ch06.html#cb130-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb130-3"><a href="Ch06.html#cb130-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb130-4"><a href="Ch06.html#cb130-4" tabindex="-1"></a></span>
<span id="cb130-5"><a href="Ch06.html#cb130-5" tabindex="-1"></a><span class="co"># Distance_Builtup_cell.tif egv_89 ----</span></span>
<span id="cb130-6"><a href="Ch06.html#cb130-6" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb130-7"><a href="Ch06.html#cb130-7" tabindex="-1"></a>builtup<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">500</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb130-8"><a href="Ch06.html#cb130-8" tabindex="-1"></a><span class="fu">plot</span>(builtup)</span>
<span id="cb130-9"><a href="Ch06.html#cb130-9" tabindex="-1"></a>distegv<span class="ot">=</span><span class="fu">distance2egv</span>(<span class="at">input =</span> builtup,</span>
<span id="cb130-10"><a href="Ch06.html#cb130-10" tabindex="-1"></a>                     <span class="at">template_egv =</span> template100,</span>
<span id="cb130-11"><a href="Ch06.html#cb130-11" tabindex="-1"></a>                     <span class="at">values_as_one =</span> <span class="dv">1</span>,</span>
<span id="cb130-12"><a href="Ch06.html#cb130-12" tabindex="-1"></a>                     <span class="at">fill_gaps =</span> <span class="cn">TRUE</span>, <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb130-13"><a href="Ch06.html#cb130-13" tabindex="-1"></a>                     <span class="at">outlocation =</span> <span class="st">&quot;RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb130-14"><a href="Ch06.html#cb130-14" tabindex="-1"></a>                     <span class="at">outfilename =</span> <span class="st">&quot;Distance_Builtup_cell.tif&quot;</span>,</span>
<span id="cb130-15"><a href="Ch06.html#cb130-15" tabindex="-1"></a>                     <span class="at">layername =</span> <span class="st">&quot;egv_89&quot;</span>)</span>
<span id="cb130-16"><a href="Ch06.html#cb130-16" tabindex="-1"></a>distegv</span>
<span id="cb130-17"><a href="Ch06.html#cb130-17" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">rast</span>(<span class="st">&quot;RasterGrids_100m/2024/RAW/Distance_Builtup_cell.tif&quot;</span>))</span>
<span id="cb130-18"><a href="Ch06.html#cb130-18" tabindex="-1"></a><span class="fu">rm</span>(builtup)</span>
<span id="cb130-19"><a href="Ch06.html#cb130-19" tabindex="-1"></a><span class="fu">rm</span>(distegv)</span>
<span id="cb130-20"><a href="Ch06.html#cb130-20" tabindex="-1"></a></span>
<span id="cb130-21"><a href="Ch06.html#cb130-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb130-22"><a href="Ch06.html#cb130-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb130-23"><a href="Ch06.html#cb130-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb130-24"><a href="Ch06.html#cb130-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb130-25"><a href="Ch06.html#cb130-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb130-26"><a href="Ch06.html#cb130-26" tabindex="-1"></a></span>
<span id="cb130-27"><a href="Ch06.html#cb130-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Distance_Builtup_cell.tif&quot;</span></span>
<span id="cb130-28"><a href="Ch06.html#cb130-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb130-29"><a href="Ch06.html#cb130-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb130-30"><a href="Ch06.html#cb130-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb130-31"><a href="Ch06.html#cb130-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb130-32"><a href="Ch06.html#cb130-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb130-33"><a href="Ch06.html#cb130-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb130-34"><a href="Ch06.html#cb130-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb130-35"><a href="Ch06.html#cb130-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb130-36"><a href="Ch06.html#cb130-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb130-37"><a href="Ch06.html#cb130-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb130-38"><a href="Ch06.html#cb130-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb130-39"><a href="Ch06.html#cb130-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_89.png" width="100%" /></p>
</div>
<div id="ch06.090" class="section level2 hasAnchor" number="6.90">
<h2><span class="header-section-number">6.90</span> Distance_ForestInside_cell<a href="Ch06.html#ch06.090" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Distance_ForestInside_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_90</code></p>
<p><strong>English name:</strong> Distance to Forest Edge Inside Forests, average within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Attālums līdz meža malai tā iekšienē, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.03">Landscape classification</a> with values in
a range from 630 to 700 reclassified as 0 and others as 1. Processed
with <code>egvtools::distance2egv()</code>. To protect against possible data loss at
edge cells, inverse distance
weighted (power = 2) gap filling is implemented. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="Ch06.html#cb131-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb131-2"><a href="Ch06.html#cb131-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb131-3"><a href="Ch06.html#cb131-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb131-4"><a href="Ch06.html#cb131-4" tabindex="-1"></a></span>
<span id="cb131-5"><a href="Ch06.html#cb131-5" tabindex="-1"></a><span class="co"># Distance_ForestInside_cell.tif    egv_90 ----</span></span>
<span id="cb131-6"><a href="Ch06.html#cb131-6" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb131-7"><a href="Ch06.html#cb131-7" tabindex="-1"></a>trees_inside<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">&gt;=</span><span class="dv">630</span><span class="sc">&amp;</span>simple_landscape<span class="sc">&lt;</span><span class="dv">700</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb131-8"><a href="Ch06.html#cb131-8" tabindex="-1"></a><span class="fu">plot</span>(trees_inside)</span>
<span id="cb131-9"><a href="Ch06.html#cb131-9" tabindex="-1"></a>distegv<span class="ot">=</span><span class="fu">distance2egv</span>(<span class="at">input =</span> trees_inside,</span>
<span id="cb131-10"><a href="Ch06.html#cb131-10" tabindex="-1"></a>                     <span class="at">template_egv =</span> template100,</span>
<span id="cb131-11"><a href="Ch06.html#cb131-11" tabindex="-1"></a>                     <span class="at">values_as_one =</span> <span class="dv">1</span>,</span>
<span id="cb131-12"><a href="Ch06.html#cb131-12" tabindex="-1"></a>                     <span class="at">fill_gaps =</span> <span class="cn">TRUE</span>, <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb131-13"><a href="Ch06.html#cb131-13" tabindex="-1"></a>                     <span class="at">outlocation =</span> <span class="st">&quot;RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb131-14"><a href="Ch06.html#cb131-14" tabindex="-1"></a>                     <span class="at">outfilename =</span> <span class="st">&quot;Distance_ForestInside_cell.tif&quot;</span>,</span>
<span id="cb131-15"><a href="Ch06.html#cb131-15" tabindex="-1"></a>                     <span class="at">layername =</span> <span class="st">&quot;egv_90&quot;</span>)</span>
<span id="cb131-16"><a href="Ch06.html#cb131-16" tabindex="-1"></a>distegv</span>
<span id="cb131-17"><a href="Ch06.html#cb131-17" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">rast</span>(<span class="st">&quot;RasterGrids_100m/2024/RAW/Distance_ForestInside_cell.tif&quot;</span>))</span>
<span id="cb131-18"><a href="Ch06.html#cb131-18" tabindex="-1"></a><span class="fu">rm</span>(trees_inside)</span>
<span id="cb131-19"><a href="Ch06.html#cb131-19" tabindex="-1"></a><span class="fu">rm</span>(distegv)</span>
<span id="cb131-20"><a href="Ch06.html#cb131-20" tabindex="-1"></a></span>
<span id="cb131-21"><a href="Ch06.html#cb131-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb131-22"><a href="Ch06.html#cb131-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb131-23"><a href="Ch06.html#cb131-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb131-24"><a href="Ch06.html#cb131-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb131-25"><a href="Ch06.html#cb131-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb131-26"><a href="Ch06.html#cb131-26" tabindex="-1"></a></span>
<span id="cb131-27"><a href="Ch06.html#cb131-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Distance_ForestInside_cell.tif&quot;</span></span>
<span id="cb131-28"><a href="Ch06.html#cb131-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb131-29"><a href="Ch06.html#cb131-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb131-30"><a href="Ch06.html#cb131-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb131-31"><a href="Ch06.html#cb131-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb131-32"><a href="Ch06.html#cb131-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb131-33"><a href="Ch06.html#cb131-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb131-34"><a href="Ch06.html#cb131-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb131-35"><a href="Ch06.html#cb131-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb131-36"><a href="Ch06.html#cb131-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb131-37"><a href="Ch06.html#cb131-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb131-38"><a href="Ch06.html#cb131-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb131-39"><a href="Ch06.html#cb131-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_90.png" width="100%" /></p>
</div>
<div id="ch06.091" class="section level2 hasAnchor" number="6.91">
<h2><span class="header-section-number">6.91</span> Distance_GrasslandPermanent_cell<a href="Ch06.html#ch06.091" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Distance_GrasslandPermanent_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_91</code></p>
<p><strong>English name:</strong> Distance to Permanent Grasslands, average within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Attālums līdz ilggadīgiem zālājiem, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>
with <code>PRODUCT_CODE=="710"</code> classified as 1 and the rest of the country as 0. Processed
with <code>egvtools::distance2egv()</code>. To protect against possible data loss at
edge cells, inverse distance weighted (power = 2) gap filling is implemented. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="Ch06.html#cb132-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb132-2"><a href="Ch06.html#cb132-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb132-3"><a href="Ch06.html#cb132-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb132-4"><a href="Ch06.html#cb132-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb132-5"><a href="Ch06.html#cb132-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb132-6"><a href="Ch06.html#cb132-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb132-7"><a href="Ch06.html#cb132-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb132-8"><a href="Ch06.html#cb132-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb132-9"><a href="Ch06.html#cb132-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb132-10"><a href="Ch06.html#cb132-10" tabindex="-1"></a></span>
<span id="cb132-11"><a href="Ch06.html#cb132-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb132-12"><a href="Ch06.html#cb132-12" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb132-13"><a href="Ch06.html#cb132-13" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb132-14"><a href="Ch06.html#cb132-14" tabindex="-1"></a></span>
<span id="cb132-15"><a href="Ch06.html#cb132-15" tabindex="-1"></a>rastra_pamatne<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb132-16"><a href="Ch06.html#cb132-16" tabindex="-1"></a></span>
<span id="cb132-17"><a href="Ch06.html#cb132-17" tabindex="-1"></a><span class="co"># Distance_GrasslandPermanent_cell.tif  egv_91 ----</span></span>
<span id="cb132-18"><a href="Ch06.html#cb132-18" tabindex="-1"></a>kodes<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb132-19"><a href="Ch06.html#cb132-19" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb132-20"><a href="Ch06.html#cb132-20" tabindex="-1"></a>permgrass<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb132-21"><a href="Ch06.html#cb132-21" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE<span class="sc">==</span><span class="st">&quot;710&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb132-22"><a href="Ch06.html#cb132-22" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yes=</span><span class="dv">1</span>)</span>
<span id="cb132-23"><a href="Ch06.html#cb132-23" tabindex="-1"></a>permgrass_r<span class="ot">=</span><span class="fu">fasterize</span>(permgrass,rastra_pamatne,<span class="at">field=</span><span class="st">&quot;yes&quot;</span>,<span class="at">fun=</span><span class="st">&quot;first&quot;</span>)</span>
<span id="cb132-24"><a href="Ch06.html#cb132-24" tabindex="-1"></a>permgrass_t<span class="ot">=</span><span class="fu">rast</span>(permgrass_r)</span>
<span id="cb132-25"><a href="Ch06.html#cb132-25" tabindex="-1"></a>permgrass_t2<span class="ot">=</span><span class="fu">cover</span>(permgrass_t,nulls10)</span>
<span id="cb132-26"><a href="Ch06.html#cb132-26" tabindex="-1"></a><span class="fu">plot</span>(permgrass_t2)</span>
<span id="cb132-27"><a href="Ch06.html#cb132-27" tabindex="-1"></a>distegv<span class="ot">=</span><span class="fu">distance2egv</span>(<span class="at">input =</span> permgrass_t2,</span>
<span id="cb132-28"><a href="Ch06.html#cb132-28" tabindex="-1"></a>                     <span class="at">template_egv =</span> template100,</span>
<span id="cb132-29"><a href="Ch06.html#cb132-29" tabindex="-1"></a>                     <span class="at">values_as_one =</span> <span class="dv">1</span>,</span>
<span id="cb132-30"><a href="Ch06.html#cb132-30" tabindex="-1"></a>                     <span class="at">fill_gaps =</span> <span class="cn">TRUE</span>, <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb132-31"><a href="Ch06.html#cb132-31" tabindex="-1"></a>                     <span class="at">outlocation =</span> <span class="st">&quot;RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb132-32"><a href="Ch06.html#cb132-32" tabindex="-1"></a>                     <span class="at">outfilename =</span> <span class="st">&quot;Distance_GrasslandPermanent_cell.tif&quot;</span>,</span>
<span id="cb132-33"><a href="Ch06.html#cb132-33" tabindex="-1"></a>                     <span class="at">layername =</span> <span class="st">&quot;egv_91&quot;</span>)</span>
<span id="cb132-34"><a href="Ch06.html#cb132-34" tabindex="-1"></a>distegv</span>
<span id="cb132-35"><a href="Ch06.html#cb132-35" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">rast</span>(<span class="st">&quot;RasterGrids_100m/2024/RAW/Distance_GrasslandPermanent_cell.tif&quot;</span>))</span>
<span id="cb132-36"><a href="Ch06.html#cb132-36" tabindex="-1"></a><span class="fu">rm</span>(distegv)</span>
<span id="cb132-37"><a href="Ch06.html#cb132-37" tabindex="-1"></a><span class="fu">rm</span>(kodes)</span>
<span id="cb132-38"><a href="Ch06.html#cb132-38" tabindex="-1"></a><span class="fu">rm</span>(lad)</span>
<span id="cb132-39"><a href="Ch06.html#cb132-39" tabindex="-1"></a><span class="fu">rm</span>(permgrass)</span>
<span id="cb132-40"><a href="Ch06.html#cb132-40" tabindex="-1"></a><span class="fu">rm</span>(permgrass_r)</span>
<span id="cb132-41"><a href="Ch06.html#cb132-41" tabindex="-1"></a><span class="fu">rm</span>(permgrass_t)</span>
<span id="cb132-42"><a href="Ch06.html#cb132-42" tabindex="-1"></a><span class="fu">rm</span>(permgrass_t2)</span>
<span id="cb132-43"><a href="Ch06.html#cb132-43" tabindex="-1"></a></span>
<span id="cb132-44"><a href="Ch06.html#cb132-44" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb132-45"><a href="Ch06.html#cb132-45" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb132-46"><a href="Ch06.html#cb132-46" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb132-47"><a href="Ch06.html#cb132-47" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb132-48"><a href="Ch06.html#cb132-48" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb132-49"><a href="Ch06.html#cb132-49" tabindex="-1"></a></span>
<span id="cb132-50"><a href="Ch06.html#cb132-50" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Distance_GrasslandPermanent_cell.tif&quot;</span></span>
<span id="cb132-51"><a href="Ch06.html#cb132-51" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb132-52"><a href="Ch06.html#cb132-52" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb132-53"><a href="Ch06.html#cb132-53" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb132-54"><a href="Ch06.html#cb132-54" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb132-55"><a href="Ch06.html#cb132-55" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb132-56"><a href="Ch06.html#cb132-56" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb132-57"><a href="Ch06.html#cb132-57" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb132-58"><a href="Ch06.html#cb132-58" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb132-59"><a href="Ch06.html#cb132-59" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb132-60"><a href="Ch06.html#cb132-60" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb132-61"><a href="Ch06.html#cb132-61" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb132-62"><a href="Ch06.html#cb132-62" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_91.png" width="100%" /></p>
</div>
<div id="ch06.092" class="section level2 hasAnchor" number="6.92">
<h2><span class="header-section-number">6.92</span> Distance_Landfill_cell<a href="Ch06.html#ch06.092" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Distance_Landfill_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_92</code></p>
<p><strong>English name:</strong> Distance to Landfills, average within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Attālums līdz atkritumu poligoniem, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.14">Waste and garbage disposal sites, landfills</a>.
1. From the <a href="https://github.com/aavotins/HiQBioDiv_EGVs/blob/main/Data/Geodata/2024/GarbageWasteLandfills/Atkritumi.xlsx">attachaed file</a> read sheet “Poligoni”;</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Create an <code>sf</code> object (epsg:3059);</p></li>
<li><p>Rasterize and cover so that cells of interest are 1 and others are 0;</p></li>
<li><p>create an egv with <code>egvtools::distance2egv()</code>. Expect warning regarding nothing
to do with aggregation. It is because <code>egvtools::distance2egv()</code> already operate at
egv-template not the input-template resolution. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p></li>
</ol>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="Ch06.html#cb133-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb133-2"><a href="Ch06.html#cb133-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb133-3"><a href="Ch06.html#cb133-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb133-4"><a href="Ch06.html#cb133-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb133-5"><a href="Ch06.html#cb133-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb133-6"><a href="Ch06.html#cb133-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb133-7"><a href="Ch06.html#cb133-7" tabindex="-1"></a></span>
<span id="cb133-8"><a href="Ch06.html#cb133-8" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb133-9"><a href="Ch06.html#cb133-9" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb133-10"><a href="Ch06.html#cb133-10" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb133-11"><a href="Ch06.html#cb133-11" tabindex="-1"></a></span>
<span id="cb133-12"><a href="Ch06.html#cb133-12" tabindex="-1"></a><span class="co"># Distance_Landfill_cell.tif egv_92 ----</span></span>
<span id="cb133-13"><a href="Ch06.html#cb133-13" tabindex="-1"></a></span>
<span id="cb133-14"><a href="Ch06.html#cb133-14" tabindex="-1"></a><span class="co"># reading coordinates</span></span>
<span id="cb133-15"><a href="Ch06.html#cb133-15" tabindex="-1"></a>landfills<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/GarbageWasteLandfills/Atkritumi.xlsx&quot;</span>,<span class="at">sheet=</span><span class="st">&quot;Poligoni&quot;</span>)</span>
<span id="cb133-16"><a href="Ch06.html#cb133-16" tabindex="-1"></a><span class="co">#sf object</span></span>
<span id="cb133-17"><a href="Ch06.html#cb133-17" tabindex="-1"></a>landfills_sf<span class="ot">=</span><span class="fu">st_as_sf</span>(landfills,<span class="at">coords=</span><span class="fu">c</span>(<span class="st">&quot;X&quot;</span>,<span class="st">&quot;Y&quot;</span>),<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb133-18"><a href="Ch06.html#cb133-18" tabindex="-1"></a><span class="co"># rasterize</span></span>
<span id="cb133-19"><a href="Ch06.html#cb133-19" tabindex="-1"></a>landfills_rast<span class="ot">=</span><span class="fu">rasterize</span>(landfills_sf,template100)</span>
<span id="cb133-20"><a href="Ch06.html#cb133-20" tabindex="-1"></a><span class="co"># raster to 1=Cell of interest, 0=background</span></span>
<span id="cb133-21"><a href="Ch06.html#cb133-21" tabindex="-1"></a>landfills_bg<span class="ot">=</span><span class="fu">cover</span>(landfills_rast,nulls100)</span>
<span id="cb133-22"><a href="Ch06.html#cb133-22" tabindex="-1"></a></span>
<span id="cb133-23"><a href="Ch06.html#cb133-23" tabindex="-1"></a><span class="co"># create an egv</span></span>
<span id="cb133-24"><a href="Ch06.html#cb133-24" tabindex="-1"></a>distegv<span class="ot">=</span><span class="fu">distance2egv</span>(<span class="at">input =</span> landfills_bg,</span>
<span id="cb133-25"><a href="Ch06.html#cb133-25" tabindex="-1"></a>             <span class="at">template_egv =</span> template100,</span>
<span id="cb133-26"><a href="Ch06.html#cb133-26" tabindex="-1"></a>             <span class="at">values_as_one =</span> <span class="dv">1</span>,</span>
<span id="cb133-27"><a href="Ch06.html#cb133-27" tabindex="-1"></a>             <span class="at">fill_gaps =</span> <span class="cn">TRUE</span>, <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb133-28"><a href="Ch06.html#cb133-28" tabindex="-1"></a>             <span class="at">outlocation =</span> <span class="st">&quot;RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb133-29"><a href="Ch06.html#cb133-29" tabindex="-1"></a>             <span class="at">outfilename =</span> <span class="st">&quot;Distance_Landfill_cell.tif&quot;</span>,</span>
<span id="cb133-30"><a href="Ch06.html#cb133-30" tabindex="-1"></a>             <span class="at">layername =</span> <span class="st">&quot;egv_92&quot;</span>)</span>
<span id="cb133-31"><a href="Ch06.html#cb133-31" tabindex="-1"></a>distegv</span>
<span id="cb133-32"><a href="Ch06.html#cb133-32" tabindex="-1"></a></span>
<span id="cb133-33"><a href="Ch06.html#cb133-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb133-34"><a href="Ch06.html#cb133-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb133-35"><a href="Ch06.html#cb133-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb133-36"><a href="Ch06.html#cb133-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb133-37"><a href="Ch06.html#cb133-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb133-38"><a href="Ch06.html#cb133-38" tabindex="-1"></a></span>
<span id="cb133-39"><a href="Ch06.html#cb133-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Distance_Landfill_cell.tif&quot;</span></span>
<span id="cb133-40"><a href="Ch06.html#cb133-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb133-41"><a href="Ch06.html#cb133-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb133-42"><a href="Ch06.html#cb133-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb133-43"><a href="Ch06.html#cb133-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb133-44"><a href="Ch06.html#cb133-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb133-45"><a href="Ch06.html#cb133-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb133-46"><a href="Ch06.html#cb133-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb133-47"><a href="Ch06.html#cb133-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb133-48"><a href="Ch06.html#cb133-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb133-49"><a href="Ch06.html#cb133-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb133-50"><a href="Ch06.html#cb133-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb133-51"><a href="Ch06.html#cb133-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_92.png" width="100%" /></p>
</div>
<div id="ch06.093" class="section level2 hasAnchor" number="6.93">
<h2><span class="header-section-number">6.93</span> Distance_Sea_cell<a href="Ch06.html#ch06.093" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Distance_Sea_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_93</code></p>
<p><strong>English name:</strong> Distance to Sea, average within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Attālums līdz jūrai, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.16">Latvian Exclusive Economic Zone polygon</a>.
1. Read layer as <code>sf</code> object (it already is epsg:3059);</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Rasterize and cover so that cells of interest are 1 and others are 0;</p></li>
<li><p>create an egv with <code>egvtools::distance2egv()</code>. {fasterize} does not write CRS
with <code>WKT</code> from epsg-string. Therefore it is better to use <code>project_to_template_input=TRUE</code> and
define input-template. However, the only difference is in how the CRS is stored,
therefore this can ignored - distance will be calculated on the input CRS and only
resulting layer will be projected to match egv-template (faster due to 10x aggregation of
resolution). To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p></li>
</ol>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="Ch06.html#cb134-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb134-2"><a href="Ch06.html#cb134-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb134-3"><a href="Ch06.html#cb134-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb134-4"><a href="Ch06.html#cb134-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb134-5"><a href="Ch06.html#cb134-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb134-6"><a href="Ch06.html#cb134-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb134-7"><a href="Ch06.html#cb134-7" tabindex="-1"></a></span>
<span id="cb134-8"><a href="Ch06.html#cb134-8" tabindex="-1"></a></span>
<span id="cb134-9"><a href="Ch06.html#cb134-9" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb134-10"><a href="Ch06.html#cb134-10" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb134-11"><a href="Ch06.html#cb134-11" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb134-12"><a href="Ch06.html#cb134-12" tabindex="-1"></a>rastrs10<span class="ot">=</span>raster<span class="sc">::</span><span class="fu">raster</span>(template10)</span>
<span id="cb134-13"><a href="Ch06.html#cb134-13" tabindex="-1"></a></span>
<span id="cb134-14"><a href="Ch06.html#cb134-14" tabindex="-1"></a></span>
<span id="cb134-15"><a href="Ch06.html#cb134-15" tabindex="-1"></a><span class="co"># Distance_Sea_cell.tif egv_93 ----</span></span>
<span id="cb134-16"><a href="Ch06.html#cb134-16" tabindex="-1"></a></span>
<span id="cb134-17"><a href="Ch06.html#cb134-17" tabindex="-1"></a><span class="co"># sea layer, sf</span></span>
<span id="cb134-18"><a href="Ch06.html#cb134-18" tabindex="-1"></a>sea<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;./Geodata/2024/LV_EEZ/LV_EEZ.shp&quot;</span>)</span>
<span id="cb134-19"><a href="Ch06.html#cb134-19" tabindex="-1"></a></span>
<span id="cb134-20"><a href="Ch06.html#cb134-20" tabindex="-1"></a><span class="co"># quick rasterization</span></span>
<span id="cb134-21"><a href="Ch06.html#cb134-21" tabindex="-1"></a>sea_r<span class="ot">=</span><span class="fu">fasterize</span>(sea,rastrs10,<span class="at">field=</span><span class="st">&quot;LV_EEZ&quot;</span>)</span>
<span id="cb134-22"><a href="Ch06.html#cb134-22" tabindex="-1"></a>sea_rast<span class="ot">=</span><span class="fu">rast</span>(sea_r)</span>
<span id="cb134-23"><a href="Ch06.html#cb134-23" tabindex="-1"></a></span>
<span id="cb134-24"><a href="Ch06.html#cb134-24" tabindex="-1"></a><span class="co"># # raster to 1=Cell of interest, 0=background</span></span>
<span id="cb134-25"><a href="Ch06.html#cb134-25" tabindex="-1"></a>sea_bg<span class="ot">=</span><span class="fu">cover</span>(sea_rast,nulls10)</span>
<span id="cb134-26"><a href="Ch06.html#cb134-26" tabindex="-1"></a></span>
<span id="cb134-27"><a href="Ch06.html#cb134-27" tabindex="-1"></a><span class="co"># create an egv</span></span>
<span id="cb134-28"><a href="Ch06.html#cb134-28" tabindex="-1"></a>distegv<span class="ot">=</span><span class="fu">distance2egv</span>(<span class="at">input =</span> sea_bg,</span>
<span id="cb134-29"><a href="Ch06.html#cb134-29" tabindex="-1"></a>                     <span class="at">template_egv =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb134-30"><a href="Ch06.html#cb134-30" tabindex="-1"></a>                     <span class="at">values_as_one =</span> <span class="dv">1</span>,</span>
<span id="cb134-31"><a href="Ch06.html#cb134-31" tabindex="-1"></a>                     <span class="at">project_to_template_input=</span><span class="cn">TRUE</span>, <span class="co"># fasterize stores CRS differently</span></span>
<span id="cb134-32"><a href="Ch06.html#cb134-32" tabindex="-1"></a>                     <span class="at">template_input=</span>template10,</span>
<span id="cb134-33"><a href="Ch06.html#cb134-33" tabindex="-1"></a>                     <span class="at">fill_gaps =</span> <span class="cn">TRUE</span>, <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb134-34"><a href="Ch06.html#cb134-34" tabindex="-1"></a>                     <span class="at">outlocation =</span> <span class="st">&quot;RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb134-35"><a href="Ch06.html#cb134-35" tabindex="-1"></a>                     <span class="at">outfilename =</span> <span class="st">&quot;Distance_Sea_cell.tif&quot;</span>,</span>
<span id="cb134-36"><a href="Ch06.html#cb134-36" tabindex="-1"></a>                     <span class="at">layername =</span> <span class="st">&quot;egv_93&quot;</span>)</span>
<span id="cb134-37"><a href="Ch06.html#cb134-37" tabindex="-1"></a>distegv</span>
<span id="cb134-38"><a href="Ch06.html#cb134-38" tabindex="-1"></a></span>
<span id="cb134-39"><a href="Ch06.html#cb134-39" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb134-40"><a href="Ch06.html#cb134-40" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb134-41"><a href="Ch06.html#cb134-41" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb134-42"><a href="Ch06.html#cb134-42" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb134-43"><a href="Ch06.html#cb134-43" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb134-44"><a href="Ch06.html#cb134-44" tabindex="-1"></a></span>
<span id="cb134-45"><a href="Ch06.html#cb134-45" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Distance_Sea_cell.tif&quot;</span></span>
<span id="cb134-46"><a href="Ch06.html#cb134-46" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb134-47"><a href="Ch06.html#cb134-47" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb134-48"><a href="Ch06.html#cb134-48" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb134-49"><a href="Ch06.html#cb134-49" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb134-50"><a href="Ch06.html#cb134-50" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb134-51"><a href="Ch06.html#cb134-51" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb134-52"><a href="Ch06.html#cb134-52" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb134-53"><a href="Ch06.html#cb134-53" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb134-54"><a href="Ch06.html#cb134-54" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb134-55"><a href="Ch06.html#cb134-55" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb134-56"><a href="Ch06.html#cb134-56" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb134-57"><a href="Ch06.html#cb134-57" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_93.png" width="100%" /></p>
</div>
<div id="ch06.094" class="section level2 hasAnchor" number="6.94">
<h2><span class="header-section-number">6.94</span> Distance_Trees_cell<a href="Ch06.html#ch06.094" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Distance_Trees_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_94</code></p>
<p><strong>English name:</strong> Distance to Trees, average within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Attālums līdz kokiem, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.03">Landscape classification</a> with values in
a range from 630 to 700 reclassified as 1 and others as 0. Processed
with <code>egvtools::distance2egv()</code>. To protect against possible data loss at
edge cells, inverse distance
weighted (power = 2) gap filling is implemented. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="Ch06.html#cb135-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb135-2"><a href="Ch06.html#cb135-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb135-3"><a href="Ch06.html#cb135-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb135-4"><a href="Ch06.html#cb135-4" tabindex="-1"></a></span>
<span id="cb135-5"><a href="Ch06.html#cb135-5" tabindex="-1"></a><span class="co"># Distance_Trees_cell.tif   egv_94 ----</span></span>
<span id="cb135-6"><a href="Ch06.html#cb135-6" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb135-7"><a href="Ch06.html#cb135-7" tabindex="-1"></a>trees<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">&gt;=</span><span class="dv">630</span><span class="sc">&amp;</span>simple_landscape<span class="sc">&lt;</span><span class="dv">700</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb135-8"><a href="Ch06.html#cb135-8" tabindex="-1"></a><span class="fu">plot</span>(trees)</span>
<span id="cb135-9"><a href="Ch06.html#cb135-9" tabindex="-1"></a>distegv<span class="ot">=</span><span class="fu">distance2egv</span>(<span class="at">input =</span> trees,</span>
<span id="cb135-10"><a href="Ch06.html#cb135-10" tabindex="-1"></a>                     <span class="at">template_egv =</span> template100,</span>
<span id="cb135-11"><a href="Ch06.html#cb135-11" tabindex="-1"></a>                     <span class="at">values_as_one =</span> <span class="dv">1</span>,</span>
<span id="cb135-12"><a href="Ch06.html#cb135-12" tabindex="-1"></a>                     <span class="at">fill_gaps =</span> <span class="cn">TRUE</span>, <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb135-13"><a href="Ch06.html#cb135-13" tabindex="-1"></a>                     <span class="at">outlocation =</span> <span class="st">&quot;RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb135-14"><a href="Ch06.html#cb135-14" tabindex="-1"></a>                     <span class="at">outfilename =</span> <span class="st">&quot;Distance_Trees_cell.tif&quot;</span>,</span>
<span id="cb135-15"><a href="Ch06.html#cb135-15" tabindex="-1"></a>                     <span class="at">layername =</span> <span class="st">&quot;egv_94&quot;</span>)</span>
<span id="cb135-16"><a href="Ch06.html#cb135-16" tabindex="-1"></a>distegv</span>
<span id="cb135-17"><a href="Ch06.html#cb135-17" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">rast</span>(<span class="st">&quot;RasterGrids_100m/2024/RAW/Distance_Trees_cell.tif&quot;</span>))</span>
<span id="cb135-18"><a href="Ch06.html#cb135-18" tabindex="-1"></a><span class="fu">rm</span>(trees)</span>
<span id="cb135-19"><a href="Ch06.html#cb135-19" tabindex="-1"></a><span class="fu">rm</span>(distegv)</span>
<span id="cb135-20"><a href="Ch06.html#cb135-20" tabindex="-1"></a></span>
<span id="cb135-21"><a href="Ch06.html#cb135-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb135-22"><a href="Ch06.html#cb135-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb135-23"><a href="Ch06.html#cb135-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb135-24"><a href="Ch06.html#cb135-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb135-25"><a href="Ch06.html#cb135-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb135-26"><a href="Ch06.html#cb135-26" tabindex="-1"></a></span>
<span id="cb135-27"><a href="Ch06.html#cb135-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Distance_Trees_cell.tif&quot;</span></span>
<span id="cb135-28"><a href="Ch06.html#cb135-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb135-29"><a href="Ch06.html#cb135-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb135-30"><a href="Ch06.html#cb135-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb135-31"><a href="Ch06.html#cb135-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb135-32"><a href="Ch06.html#cb135-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb135-33"><a href="Ch06.html#cb135-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb135-34"><a href="Ch06.html#cb135-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb135-35"><a href="Ch06.html#cb135-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb135-36"><a href="Ch06.html#cb135-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb135-37"><a href="Ch06.html#cb135-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb135-38"><a href="Ch06.html#cb135-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb135-39"><a href="Ch06.html#cb135-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_94.png" width="100%" /></p>
</div>
<div id="ch06.095" class="section level2 hasAnchor" number="6.95">
<h2><span class="header-section-number">6.95</span> Distance_Waste_cell<a href="Ch06.html#ch06.095" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Distance_Waste_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_95</code></p>
<p><strong>English name:</strong> Distance to Waste disposal sites, average within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Attālums līdz atkritumu šķirošanas un uzglabāšanas vietām, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.14">Waste and garbage disposal sites, landfills</a>.
1. From the <a href="https://github.com/aavotins/HiQBioDiv_EGVs/blob/main/Data/Geodata/2024/GarbageWasteLandfills/Atkritumi.xlsx">attachaed file</a> read sheet “AtkritumuVietas” and clean names;</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Create an <code>sf</code> object (epsg:3059);</p></li>
<li><p>Filter to non-deposit collection locations;</p></li>
<li><p>Rasterize and cover so that cells of interest are 1 and others are 0;</p></li>
<li><p>create an egv with <code>egvtools::distance2egv()</code>. Expect warning regarding nothing
to do with aggregation. It is because <code>egvtools::distance2egv()</code> already operate at
egv-template not the input-template resolution. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented.</p></li>
</ol>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="Ch06.html#cb136-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb136-2"><a href="Ch06.html#cb136-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb136-3"><a href="Ch06.html#cb136-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb136-4"><a href="Ch06.html#cb136-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb136-5"><a href="Ch06.html#cb136-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb136-6"><a href="Ch06.html#cb136-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb136-7"><a href="Ch06.html#cb136-7" tabindex="-1"></a></span>
<span id="cb136-8"><a href="Ch06.html#cb136-8" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb136-9"><a href="Ch06.html#cb136-9" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb136-10"><a href="Ch06.html#cb136-10" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb136-11"><a href="Ch06.html#cb136-11" tabindex="-1"></a></span>
<span id="cb136-12"><a href="Ch06.html#cb136-12" tabindex="-1"></a></span>
<span id="cb136-13"><a href="Ch06.html#cb136-13" tabindex="-1"></a><span class="co"># Distance_Waste_cell.tif egv_95 ----</span></span>
<span id="cb136-14"><a href="Ch06.html#cb136-14" tabindex="-1"></a></span>
<span id="cb136-15"><a href="Ch06.html#cb136-15" tabindex="-1"></a><span class="co"># reading coordinates</span></span>
<span id="cb136-16"><a href="Ch06.html#cb136-16" tabindex="-1"></a>waste<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/GarbageWasteLandfills/Atkritumi.xlsx&quot;</span>,<span class="at">sheet=</span><span class="st">&quot;AtkritumuVietas&quot;</span>)</span>
<span id="cb136-17"><a href="Ch06.html#cb136-17" tabindex="-1"></a><span class="co"># cleaning names</span></span>
<span id="cb136-18"><a href="Ch06.html#cb136-18" tabindex="-1"></a>waste2<span class="ot">=</span>janitor<span class="sc">::</span><span class="fu">clean_names</span>(waste)</span>
<span id="cb136-19"><a href="Ch06.html#cb136-19" tabindex="-1"></a><span class="co">#sf object</span></span>
<span id="cb136-20"><a href="Ch06.html#cb136-20" tabindex="-1"></a>waste_sf<span class="ot">=</span><span class="fu">st_as_sf</span>(waste2,<span class="at">coords=</span><span class="fu">c</span>(<span class="st">&quot;y_koordinata_lks92_tm&quot;</span>,<span class="st">&quot;x_koordinata_lks92_tm&quot;</span>),<span class="at">crs=</span><span class="dv">3059</span>)</span>
<span id="cb136-21"><a href="Ch06.html#cb136-21" tabindex="-1"></a><span class="co"># filtering to non-deposit</span></span>
<span id="cb136-22"><a href="Ch06.html#cb136-22" tabindex="-1"></a><span class="fu">table</span>(waste_sf<span class="sc">$</span>pienemsanas_vietas_tips)</span>
<span id="cb136-23"><a href="Ch06.html#cb136-23" tabindex="-1"></a>waste_sf2<span class="ot">=</span>waste_sf <span class="sc">%&gt;%</span> </span>
<span id="cb136-24"><a href="Ch06.html#cb136-24" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(pienemsanas_vietas_tips,<span class="st">&quot;Depozīta&quot;</span>))</span>
<span id="cb136-25"><a href="Ch06.html#cb136-25" tabindex="-1"></a><span class="co"># rasterize</span></span>
<span id="cb136-26"><a href="Ch06.html#cb136-26" tabindex="-1"></a>waste_rast<span class="ot">=</span><span class="fu">rasterize</span>(waste_sf2,template100)</span>
<span id="cb136-27"><a href="Ch06.html#cb136-27" tabindex="-1"></a><span class="co"># raster to 1=Cell of interest, 0=background</span></span>
<span id="cb136-28"><a href="Ch06.html#cb136-28" tabindex="-1"></a>wastw_bg<span class="ot">=</span><span class="fu">cover</span>(waste_rast,nulls100)</span>
<span id="cb136-29"><a href="Ch06.html#cb136-29" tabindex="-1"></a></span>
<span id="cb136-30"><a href="Ch06.html#cb136-30" tabindex="-1"></a><span class="co"># create an egv</span></span>
<span id="cb136-31"><a href="Ch06.html#cb136-31" tabindex="-1"></a>distegv<span class="ot">=</span><span class="fu">distance2egv</span>(<span class="at">input =</span> wastw_bg,</span>
<span id="cb136-32"><a href="Ch06.html#cb136-32" tabindex="-1"></a>                     <span class="at">template_egv =</span> template100,</span>
<span id="cb136-33"><a href="Ch06.html#cb136-33" tabindex="-1"></a>                     <span class="at">values_as_one =</span> <span class="dv">1</span>,</span>
<span id="cb136-34"><a href="Ch06.html#cb136-34" tabindex="-1"></a>                     <span class="at">fill_gaps =</span> <span class="cn">TRUE</span>, <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb136-35"><a href="Ch06.html#cb136-35" tabindex="-1"></a>                     <span class="at">outlocation =</span> <span class="st">&quot;RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb136-36"><a href="Ch06.html#cb136-36" tabindex="-1"></a>                     <span class="at">outfilename =</span> <span class="st">&quot;Distance_Waste_cell.tif&quot;</span>,</span>
<span id="cb136-37"><a href="Ch06.html#cb136-37" tabindex="-1"></a>                     <span class="at">layername =</span> <span class="st">&quot;egv_95&quot;</span>)</span>
<span id="cb136-38"><a href="Ch06.html#cb136-38" tabindex="-1"></a>distegv</span>
<span id="cb136-39"><a href="Ch06.html#cb136-39" tabindex="-1"></a></span>
<span id="cb136-40"><a href="Ch06.html#cb136-40" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb136-41"><a href="Ch06.html#cb136-41" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb136-42"><a href="Ch06.html#cb136-42" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb136-43"><a href="Ch06.html#cb136-43" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb136-44"><a href="Ch06.html#cb136-44" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb136-45"><a href="Ch06.html#cb136-45" tabindex="-1"></a></span>
<span id="cb136-46"><a href="Ch06.html#cb136-46" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Distance_Waste_cell.tif&quot;</span></span>
<span id="cb136-47"><a href="Ch06.html#cb136-47" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb136-48"><a href="Ch06.html#cb136-48" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb136-49"><a href="Ch06.html#cb136-49" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb136-50"><a href="Ch06.html#cb136-50" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb136-51"><a href="Ch06.html#cb136-51" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb136-52"><a href="Ch06.html#cb136-52" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb136-53"><a href="Ch06.html#cb136-53" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb136-54"><a href="Ch06.html#cb136-54" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb136-55"><a href="Ch06.html#cb136-55" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb136-56"><a href="Ch06.html#cb136-56" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb136-57"><a href="Ch06.html#cb136-57" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb136-58"><a href="Ch06.html#cb136-58" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_95.png" width="100%" /></p>
</div>
<div id="ch06.096" class="section level2 hasAnchor" number="6.96">
<h2><span class="header-section-number">6.96</span> Distance_Water_cell<a href="Ch06.html#ch06.096" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Distance_Water_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_96</code></p>
<p><strong>English name:</strong> Distance to Waterbodies, average within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Attālums līdz ūdenstilpēn, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.03">Landscape classification</a> with class 200
reclassified as 1 and others as 0. Processed with <code>egvtools::distance2egv()</code>.
To protect against possible data loss at edge cells, inverse distance
weighted (power = 2) gap filling is implemented. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="Ch06.html#cb137-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb137-2"><a href="Ch06.html#cb137-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb137-3"><a href="Ch06.html#cb137-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb137-4"><a href="Ch06.html#cb137-4" tabindex="-1"></a></span>
<span id="cb137-5"><a href="Ch06.html#cb137-5" tabindex="-1"></a><span class="co"># Distance_Water_cell.tif   egv_96 ----</span></span>
<span id="cb137-6"><a href="Ch06.html#cb137-6" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb137-7"><a href="Ch06.html#cb137-7" tabindex="-1"></a>water<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">200</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb137-8"><a href="Ch06.html#cb137-8" tabindex="-1"></a><span class="fu">plot</span>(water)</span>
<span id="cb137-9"><a href="Ch06.html#cb137-9" tabindex="-1"></a>distegv<span class="ot">=</span><span class="fu">distance2egv</span>(<span class="at">input =</span> water,</span>
<span id="cb137-10"><a href="Ch06.html#cb137-10" tabindex="-1"></a>                     <span class="at">template_egv =</span> template100,</span>
<span id="cb137-11"><a href="Ch06.html#cb137-11" tabindex="-1"></a>                     <span class="at">values_as_one =</span> <span class="dv">1</span>,</span>
<span id="cb137-12"><a href="Ch06.html#cb137-12" tabindex="-1"></a>                     <span class="at">fill_gaps =</span> <span class="cn">TRUE</span>, <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb137-13"><a href="Ch06.html#cb137-13" tabindex="-1"></a>                     <span class="at">outlocation =</span> <span class="st">&quot;RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb137-14"><a href="Ch06.html#cb137-14" tabindex="-1"></a>                     <span class="at">outfilename =</span> <span class="st">&quot;Distance_Water_cell.tif&quot;</span>,</span>
<span id="cb137-15"><a href="Ch06.html#cb137-15" tabindex="-1"></a>                     <span class="at">layername =</span> <span class="st">&quot;egv_96&quot;</span>)</span>
<span id="cb137-16"><a href="Ch06.html#cb137-16" tabindex="-1"></a>distegv</span>
<span id="cb137-17"><a href="Ch06.html#cb137-17" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">rast</span>(<span class="st">&quot;RasterGrids_100m/2024/RAW/Distance_Water_cell.tif&quot;</span>))</span>
<span id="cb137-18"><a href="Ch06.html#cb137-18" tabindex="-1"></a><span class="fu">rm</span>(water)</span>
<span id="cb137-19"><a href="Ch06.html#cb137-19" tabindex="-1"></a><span class="fu">rm</span>(distegv)</span>
<span id="cb137-20"><a href="Ch06.html#cb137-20" tabindex="-1"></a></span>
<span id="cb137-21"><a href="Ch06.html#cb137-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb137-22"><a href="Ch06.html#cb137-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb137-23"><a href="Ch06.html#cb137-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb137-24"><a href="Ch06.html#cb137-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb137-25"><a href="Ch06.html#cb137-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb137-26"><a href="Ch06.html#cb137-26" tabindex="-1"></a></span>
<span id="cb137-27"><a href="Ch06.html#cb137-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Distance_Water_cell.tif&quot;</span></span>
<span id="cb137-28"><a href="Ch06.html#cb137-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb137-29"><a href="Ch06.html#cb137-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb137-30"><a href="Ch06.html#cb137-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb137-31"><a href="Ch06.html#cb137-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb137-32"><a href="Ch06.html#cb137-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb137-33"><a href="Ch06.html#cb137-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb137-34"><a href="Ch06.html#cb137-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb137-35"><a href="Ch06.html#cb137-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb137-36"><a href="Ch06.html#cb137-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb137-37"><a href="Ch06.html#cb137-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb137-38"><a href="Ch06.html#cb137-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb137-39"><a href="Ch06.html#cb137-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_96.png" width="100%" /></p>
</div>
<div id="ch06.097" class="section level2 hasAnchor" number="6.97">
<h2><span class="header-section-number">6.97</span> Distance_WaterInside_cell<a href="Ch06.html#ch06.097" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Distance_WaterInside_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_97</code></p>
<p><strong>English name:</strong> Distance to Waterbody Edge Inside Waterbody, average within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Attālums līdz ūdenstilpes malai tās iekšienē, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.03">Landscape classification</a> with class 200
reclassified as 0 and others as 1. Processed with <code>egvtools::distance2egv()</code>.
To protect against possible data loss at edge cells, inverse distance
weighted (power = 2) gap filling is implemented. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="Ch06.html#cb138-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb138-2"><a href="Ch06.html#cb138-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb138-3"><a href="Ch06.html#cb138-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb138-4"><a href="Ch06.html#cb138-4" tabindex="-1"></a></span>
<span id="cb138-5"><a href="Ch06.html#cb138-5" tabindex="-1"></a><span class="co"># Distance_WaterInside_cell.tif egv_97 ----</span></span>
<span id="cb138-6"><a href="Ch06.html#cb138-6" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb138-7"><a href="Ch06.html#cb138-7" tabindex="-1"></a>water_outside<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">200</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb138-8"><a href="Ch06.html#cb138-8" tabindex="-1"></a><span class="fu">plot</span>(water_outside)</span>
<span id="cb138-9"><a href="Ch06.html#cb138-9" tabindex="-1"></a>distegv<span class="ot">=</span><span class="fu">distance2egv</span>(<span class="at">input =</span> water_outside,</span>
<span id="cb138-10"><a href="Ch06.html#cb138-10" tabindex="-1"></a>                     <span class="at">template_egv =</span> template100,</span>
<span id="cb138-11"><a href="Ch06.html#cb138-11" tabindex="-1"></a>                     <span class="at">values_as_one =</span> <span class="dv">1</span>,</span>
<span id="cb138-12"><a href="Ch06.html#cb138-12" tabindex="-1"></a>                     <span class="at">fill_gaps =</span> <span class="cn">TRUE</span>, <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb138-13"><a href="Ch06.html#cb138-13" tabindex="-1"></a>                     <span class="at">outlocation =</span> <span class="st">&quot;RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb138-14"><a href="Ch06.html#cb138-14" tabindex="-1"></a>                     <span class="at">outfilename =</span> <span class="st">&quot;Distance_WaterInside_cell.tif&quot;</span>,</span>
<span id="cb138-15"><a href="Ch06.html#cb138-15" tabindex="-1"></a>                     <span class="at">layername =</span> <span class="st">&quot;egv_97&quot;</span>)</span>
<span id="cb138-16"><a href="Ch06.html#cb138-16" tabindex="-1"></a>distegv</span>
<span id="cb138-17"><a href="Ch06.html#cb138-17" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">rast</span>(<span class="st">&quot;RasterGrids_100m/2024/RAW/Distance_WaterInside_cell.tif&quot;</span>))</span>
<span id="cb138-18"><a href="Ch06.html#cb138-18" tabindex="-1"></a><span class="fu">rm</span>(water_outside)</span>
<span id="cb138-19"><a href="Ch06.html#cb138-19" tabindex="-1"></a><span class="fu">rm</span>(distegv)</span>
<span id="cb138-20"><a href="Ch06.html#cb138-20" tabindex="-1"></a></span>
<span id="cb138-21"><a href="Ch06.html#cb138-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb138-22"><a href="Ch06.html#cb138-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb138-23"><a href="Ch06.html#cb138-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb138-24"><a href="Ch06.html#cb138-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb138-25"><a href="Ch06.html#cb138-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb138-26"><a href="Ch06.html#cb138-26" tabindex="-1"></a></span>
<span id="cb138-27"><a href="Ch06.html#cb138-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Distance_WaterInside_cell.tif&quot;</span></span>
<span id="cb138-28"><a href="Ch06.html#cb138-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb138-29"><a href="Ch06.html#cb138-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb138-30"><a href="Ch06.html#cb138-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb138-31"><a href="Ch06.html#cb138-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb138-32"><a href="Ch06.html#cb138-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb138-33"><a href="Ch06.html#cb138-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb138-34"><a href="Ch06.html#cb138-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb138-35"><a href="Ch06.html#cb138-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb138-36"><a href="Ch06.html#cb138-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb138-37"><a href="Ch06.html#cb138-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb138-38"><a href="Ch06.html#cb138-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb138-39"><a href="Ch06.html#cb138-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_97.png" width="100%" /></p>
</div>
<div id="ch06.098" class="section level2 hasAnchor" number="6.98">
<h2><span class="header-section-number">6.98</span> Diversity_Farmland_r500<a href="Ch06.html#ch06.098" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Farmland_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_98</code></p>
<p><strong>English name:</strong> Average farmland class α-diversity of 500 m grid cells within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā lauku ainavas klašu 500 m šūnu α-daudzveidība 0.5 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="#Ch05.04.0">Farmland diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="Ch06.html#cb139-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb139-2"><a href="Ch06.html#cb139-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb139-3"><a href="Ch06.html#cb139-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb139-4"><a href="Ch06.html#cb139-4" tabindex="-1"></a></span>
<span id="cb139-5"><a href="Ch06.html#cb139-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb139-6"><a href="Ch06.html#cb139-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb139-7"><a href="Ch06.html#cb139-7" tabindex="-1"></a></span>
<span id="cb139-8"><a href="Ch06.html#cb139-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb139-9"><a href="Ch06.html#cb139-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb139-10"><a href="Ch06.html#cb139-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb139-11"><a href="Ch06.html#cb139-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb139-12"><a href="Ch06.html#cb139-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb139-13"><a href="Ch06.html#cb139-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb139-14"><a href="Ch06.html#cb139-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_Farmland_500x.tif&quot;</span>),</span>
<span id="cb139-15"><a href="Ch06.html#cb139-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Farmland&quot;</span>),</span>
<span id="cb139-16"><a href="Ch06.html#cb139-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb139-17"><a href="Ch06.html#cb139-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb139-18"><a href="Ch06.html#cb139-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb139-19"><a href="Ch06.html#cb139-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb139-20"><a href="Ch06.html#cb139-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb139-21"><a href="Ch06.html#cb139-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb139-22"><a href="Ch06.html#cb139-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb139-23"><a href="Ch06.html#cb139-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb139-24"><a href="Ch06.html#cb139-24" tabindex="-1"></a></span>
<span id="cb139-25"><a href="Ch06.html#cb139-25" tabindex="-1"></a><span class="co"># Diversity_Farmland_r500.tif   egv_98</span></span>
<span id="cb139-26"><a href="Ch06.html#cb139-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Farmland_r500.tif&quot;</span>)</span>
<span id="cb139-27"><a href="Ch06.html#cb139-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_98&quot;</span></span>
<span id="cb139-28"><a href="Ch06.html#cb139-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb139-29"><a href="Ch06.html#cb139-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb139-30"><a href="Ch06.html#cb139-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Farmland_r500.tif&quot;</span>,</span>
<span id="cb139-31"><a href="Ch06.html#cb139-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb139-32"><a href="Ch06.html#cb139-32" tabindex="-1"></a></span>
<span id="cb139-33"><a href="Ch06.html#cb139-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb139-34"><a href="Ch06.html#cb139-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb139-35"><a href="Ch06.html#cb139-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb139-36"><a href="Ch06.html#cb139-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb139-37"><a href="Ch06.html#cb139-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb139-38"><a href="Ch06.html#cb139-38" tabindex="-1"></a></span>
<span id="cb139-39"><a href="Ch06.html#cb139-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Farmland_r500.tif&quot;</span></span>
<span id="cb139-40"><a href="Ch06.html#cb139-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb139-41"><a href="Ch06.html#cb139-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb139-42"><a href="Ch06.html#cb139-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb139-43"><a href="Ch06.html#cb139-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb139-44"><a href="Ch06.html#cb139-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb139-45"><a href="Ch06.html#cb139-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb139-46"><a href="Ch06.html#cb139-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb139-47"><a href="Ch06.html#cb139-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb139-48"><a href="Ch06.html#cb139-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb139-49"><a href="Ch06.html#cb139-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb139-50"><a href="Ch06.html#cb139-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb139-51"><a href="Ch06.html#cb139-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_98.png" width="100%" /></p>
</div>
<div id="ch06.099" class="section level2 hasAnchor" number="6.99">
<h2><span class="header-section-number">6.99</span> Diversity_Farmland_r1250<a href="Ch06.html#ch06.099" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Farmland_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_99</code></p>
<p><strong>English name:</strong> Average farmland class α-diversity of 500 m grid cells within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā lauku ainavas klašu 500 m šūnu α-daudzveidība 1.25 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="#Ch05.04.0">Farmland diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="Ch06.html#cb140-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb140-2"><a href="Ch06.html#cb140-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb140-3"><a href="Ch06.html#cb140-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb140-4"><a href="Ch06.html#cb140-4" tabindex="-1"></a></span>
<span id="cb140-5"><a href="Ch06.html#cb140-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb140-6"><a href="Ch06.html#cb140-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb140-7"><a href="Ch06.html#cb140-7" tabindex="-1"></a></span>
<span id="cb140-8"><a href="Ch06.html#cb140-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb140-9"><a href="Ch06.html#cb140-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb140-10"><a href="Ch06.html#cb140-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb140-11"><a href="Ch06.html#cb140-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb140-12"><a href="Ch06.html#cb140-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb140-13"><a href="Ch06.html#cb140-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb140-14"><a href="Ch06.html#cb140-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_Farmland_500x.tif&quot;</span>),</span>
<span id="cb140-15"><a href="Ch06.html#cb140-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Farmland&quot;</span>),</span>
<span id="cb140-16"><a href="Ch06.html#cb140-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb140-17"><a href="Ch06.html#cb140-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb140-18"><a href="Ch06.html#cb140-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb140-19"><a href="Ch06.html#cb140-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb140-20"><a href="Ch06.html#cb140-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb140-21"><a href="Ch06.html#cb140-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb140-22"><a href="Ch06.html#cb140-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb140-23"><a href="Ch06.html#cb140-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb140-24"><a href="Ch06.html#cb140-24" tabindex="-1"></a></span>
<span id="cb140-25"><a href="Ch06.html#cb140-25" tabindex="-1"></a><span class="co"># Diversity_Farmland_r1250.tif  egv_99</span></span>
<span id="cb140-26"><a href="Ch06.html#cb140-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Farmland_r1250.tif&quot;</span>)</span>
<span id="cb140-27"><a href="Ch06.html#cb140-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_99&quot;</span></span>
<span id="cb140-28"><a href="Ch06.html#cb140-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb140-29"><a href="Ch06.html#cb140-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb140-30"><a href="Ch06.html#cb140-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Farmland_r1250.tif&quot;</span>,</span>
<span id="cb140-31"><a href="Ch06.html#cb140-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb140-32"><a href="Ch06.html#cb140-32" tabindex="-1"></a></span>
<span id="cb140-33"><a href="Ch06.html#cb140-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb140-34"><a href="Ch06.html#cb140-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb140-35"><a href="Ch06.html#cb140-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb140-36"><a href="Ch06.html#cb140-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb140-37"><a href="Ch06.html#cb140-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb140-38"><a href="Ch06.html#cb140-38" tabindex="-1"></a></span>
<span id="cb140-39"><a href="Ch06.html#cb140-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Farmland_r1250.tif&quot;</span></span>
<span id="cb140-40"><a href="Ch06.html#cb140-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb140-41"><a href="Ch06.html#cb140-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb140-42"><a href="Ch06.html#cb140-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb140-43"><a href="Ch06.html#cb140-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb140-44"><a href="Ch06.html#cb140-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb140-45"><a href="Ch06.html#cb140-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb140-46"><a href="Ch06.html#cb140-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb140-47"><a href="Ch06.html#cb140-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb140-48"><a href="Ch06.html#cb140-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb140-49"><a href="Ch06.html#cb140-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb140-50"><a href="Ch06.html#cb140-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb140-51"><a href="Ch06.html#cb140-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_99.png" width="100%" /></p>
</div>
<div id="ch06.100" class="section level2 hasAnchor" number="6.100">
<h2><span class="header-section-number">6.100</span> Diversity_Farmland_r3000<a href="Ch06.html#ch06.100" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Farmland_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_100</code></p>
<p><strong>English name:</strong> Average farmland class α-diversity of 500 m grid cells within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā lauku ainavas klašu 500 m šūnu α-daudzveidība 3 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="#Ch05.04.0">Farmland diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="Ch06.html#cb141-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb141-2"><a href="Ch06.html#cb141-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb141-3"><a href="Ch06.html#cb141-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb141-4"><a href="Ch06.html#cb141-4" tabindex="-1"></a></span>
<span id="cb141-5"><a href="Ch06.html#cb141-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb141-6"><a href="Ch06.html#cb141-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb141-7"><a href="Ch06.html#cb141-7" tabindex="-1"></a></span>
<span id="cb141-8"><a href="Ch06.html#cb141-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb141-9"><a href="Ch06.html#cb141-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb141-10"><a href="Ch06.html#cb141-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb141-11"><a href="Ch06.html#cb141-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb141-12"><a href="Ch06.html#cb141-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb141-13"><a href="Ch06.html#cb141-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb141-14"><a href="Ch06.html#cb141-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_Farmland_500x.tif&quot;</span>),</span>
<span id="cb141-15"><a href="Ch06.html#cb141-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Farmland&quot;</span>),</span>
<span id="cb141-16"><a href="Ch06.html#cb141-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb141-17"><a href="Ch06.html#cb141-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb141-18"><a href="Ch06.html#cb141-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb141-19"><a href="Ch06.html#cb141-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb141-20"><a href="Ch06.html#cb141-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb141-21"><a href="Ch06.html#cb141-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb141-22"><a href="Ch06.html#cb141-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb141-23"><a href="Ch06.html#cb141-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb141-24"><a href="Ch06.html#cb141-24" tabindex="-1"></a></span>
<span id="cb141-25"><a href="Ch06.html#cb141-25" tabindex="-1"></a><span class="co"># Diversity_Farmland_r3000.tif  egv_100</span></span>
<span id="cb141-26"><a href="Ch06.html#cb141-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Farmland_r3000.tif&quot;</span>)</span>
<span id="cb141-27"><a href="Ch06.html#cb141-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_100&quot;</span></span>
<span id="cb141-28"><a href="Ch06.html#cb141-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb141-29"><a href="Ch06.html#cb141-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb141-30"><a href="Ch06.html#cb141-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Farmland_r3000.tif&quot;</span>,</span>
<span id="cb141-31"><a href="Ch06.html#cb141-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb141-32"><a href="Ch06.html#cb141-32" tabindex="-1"></a></span>
<span id="cb141-33"><a href="Ch06.html#cb141-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb141-34"><a href="Ch06.html#cb141-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb141-35"><a href="Ch06.html#cb141-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb141-36"><a href="Ch06.html#cb141-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb141-37"><a href="Ch06.html#cb141-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb141-38"><a href="Ch06.html#cb141-38" tabindex="-1"></a></span>
<span id="cb141-39"><a href="Ch06.html#cb141-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Farmland_r3000.tif&quot;</span></span>
<span id="cb141-40"><a href="Ch06.html#cb141-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb141-41"><a href="Ch06.html#cb141-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb141-42"><a href="Ch06.html#cb141-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb141-43"><a href="Ch06.html#cb141-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb141-44"><a href="Ch06.html#cb141-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb141-45"><a href="Ch06.html#cb141-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb141-46"><a href="Ch06.html#cb141-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb141-47"><a href="Ch06.html#cb141-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb141-48"><a href="Ch06.html#cb141-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb141-49"><a href="Ch06.html#cb141-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb141-50"><a href="Ch06.html#cb141-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb141-51"><a href="Ch06.html#cb141-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_100.png" width="100%" /></p>
</div>
<div id="ch06.101" class="section level2 hasAnchor" number="6.101">
<h2><span class="header-section-number">6.101</span> Diversity_Farmland_r10000<a href="Ch06.html#ch06.101" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Farmland_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_101</code></p>
<p><strong>English name:</strong> Average farmland class α-diversity of 500 m grid cells within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā lauku ainavas klašu 500 m šūnu α-daudzveidība 10 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="#Ch05.04.0">Farmland diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="Ch06.html#cb142-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb142-2"><a href="Ch06.html#cb142-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb142-3"><a href="Ch06.html#cb142-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb142-4"><a href="Ch06.html#cb142-4" tabindex="-1"></a></span>
<span id="cb142-5"><a href="Ch06.html#cb142-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb142-6"><a href="Ch06.html#cb142-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb142-7"><a href="Ch06.html#cb142-7" tabindex="-1"></a></span>
<span id="cb142-8"><a href="Ch06.html#cb142-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb142-9"><a href="Ch06.html#cb142-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb142-10"><a href="Ch06.html#cb142-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb142-11"><a href="Ch06.html#cb142-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb142-12"><a href="Ch06.html#cb142-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb142-13"><a href="Ch06.html#cb142-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb142-14"><a href="Ch06.html#cb142-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_Farmland_500x.tif&quot;</span>),</span>
<span id="cb142-15"><a href="Ch06.html#cb142-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Farmland&quot;</span>),</span>
<span id="cb142-16"><a href="Ch06.html#cb142-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb142-17"><a href="Ch06.html#cb142-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb142-18"><a href="Ch06.html#cb142-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb142-19"><a href="Ch06.html#cb142-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb142-20"><a href="Ch06.html#cb142-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb142-21"><a href="Ch06.html#cb142-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb142-22"><a href="Ch06.html#cb142-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb142-23"><a href="Ch06.html#cb142-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb142-24"><a href="Ch06.html#cb142-24" tabindex="-1"></a></span>
<span id="cb142-25"><a href="Ch06.html#cb142-25" tabindex="-1"></a><span class="co"># Diversity_Farmland_r10000.tif egv_101</span></span>
<span id="cb142-26"><a href="Ch06.html#cb142-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Farmland_r10000.tif&quot;</span>)</span>
<span id="cb142-27"><a href="Ch06.html#cb142-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_101&quot;</span></span>
<span id="cb142-28"><a href="Ch06.html#cb142-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb142-29"><a href="Ch06.html#cb142-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb142-30"><a href="Ch06.html#cb142-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Farmland_r10000.tif&quot;</span>,</span>
<span id="cb142-31"><a href="Ch06.html#cb142-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb142-32"><a href="Ch06.html#cb142-32" tabindex="-1"></a></span>
<span id="cb142-33"><a href="Ch06.html#cb142-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb142-34"><a href="Ch06.html#cb142-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb142-35"><a href="Ch06.html#cb142-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb142-36"><a href="Ch06.html#cb142-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb142-37"><a href="Ch06.html#cb142-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb142-38"><a href="Ch06.html#cb142-38" tabindex="-1"></a></span>
<span id="cb142-39"><a href="Ch06.html#cb142-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Farmland_r10000.tif&quot;</span></span>
<span id="cb142-40"><a href="Ch06.html#cb142-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb142-41"><a href="Ch06.html#cb142-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb142-42"><a href="Ch06.html#cb142-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb142-43"><a href="Ch06.html#cb142-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb142-44"><a href="Ch06.html#cb142-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb142-45"><a href="Ch06.html#cb142-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb142-46"><a href="Ch06.html#cb142-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb142-47"><a href="Ch06.html#cb142-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb142-48"><a href="Ch06.html#cb142-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb142-49"><a href="Ch06.html#cb142-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb142-50"><a href="Ch06.html#cb142-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb142-51"><a href="Ch06.html#cb142-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_101.png" width="100%" /></p>
</div>
<div id="ch06.102" class="section level2 hasAnchor" number="6.102">
<h2><span class="header-section-number">6.102</span> Diversity_Forest_r500<a href="Ch06.html#ch06.102" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Forest_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_102</code></p>
<p><strong>English name:</strong> Average forest class α-diversity of 500 m grid cells within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā mežu ainavas klašu 500 m šūnu α-daudzveidība 0.5 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="Ch05.html#Ch05.04.02">Forest diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="Ch06.html#cb143-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb143-2"><a href="Ch06.html#cb143-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb143-3"><a href="Ch06.html#cb143-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb143-4"><a href="Ch06.html#cb143-4" tabindex="-1"></a></span>
<span id="cb143-5"><a href="Ch06.html#cb143-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb143-6"><a href="Ch06.html#cb143-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb143-7"><a href="Ch06.html#cb143-7" tabindex="-1"></a></span>
<span id="cb143-8"><a href="Ch06.html#cb143-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb143-9"><a href="Ch06.html#cb143-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb143-10"><a href="Ch06.html#cb143-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb143-11"><a href="Ch06.html#cb143-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb143-12"><a href="Ch06.html#cb143-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb143-13"><a href="Ch06.html#cb143-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb143-14"><a href="Ch06.html#cb143-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_Forests_500x.tif&quot;</span>),</span>
<span id="cb143-15"><a href="Ch06.html#cb143-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Forest&quot;</span>),</span>
<span id="cb143-16"><a href="Ch06.html#cb143-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb143-17"><a href="Ch06.html#cb143-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb143-18"><a href="Ch06.html#cb143-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb143-19"><a href="Ch06.html#cb143-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb143-20"><a href="Ch06.html#cb143-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb143-21"><a href="Ch06.html#cb143-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb143-22"><a href="Ch06.html#cb143-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb143-23"><a href="Ch06.html#cb143-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb143-24"><a href="Ch06.html#cb143-24" tabindex="-1"></a></span>
<span id="cb143-25"><a href="Ch06.html#cb143-25" tabindex="-1"></a><span class="co"># Diversity_Forest_r500.tif egv_102</span></span>
<span id="cb143-26"><a href="Ch06.html#cb143-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Forest_r500.tif&quot;</span>)</span>
<span id="cb143-27"><a href="Ch06.html#cb143-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_102&quot;</span></span>
<span id="cb143-28"><a href="Ch06.html#cb143-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb143-29"><a href="Ch06.html#cb143-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb143-30"><a href="Ch06.html#cb143-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Forest_r500.tif&quot;</span>,</span>
<span id="cb143-31"><a href="Ch06.html#cb143-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb143-32"><a href="Ch06.html#cb143-32" tabindex="-1"></a></span>
<span id="cb143-33"><a href="Ch06.html#cb143-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb143-34"><a href="Ch06.html#cb143-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb143-35"><a href="Ch06.html#cb143-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb143-36"><a href="Ch06.html#cb143-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb143-37"><a href="Ch06.html#cb143-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb143-38"><a href="Ch06.html#cb143-38" tabindex="-1"></a></span>
<span id="cb143-39"><a href="Ch06.html#cb143-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Forest_r500.tif&quot;</span></span>
<span id="cb143-40"><a href="Ch06.html#cb143-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb143-41"><a href="Ch06.html#cb143-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb143-42"><a href="Ch06.html#cb143-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb143-43"><a href="Ch06.html#cb143-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb143-44"><a href="Ch06.html#cb143-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb143-45"><a href="Ch06.html#cb143-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb143-46"><a href="Ch06.html#cb143-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb143-47"><a href="Ch06.html#cb143-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb143-48"><a href="Ch06.html#cb143-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb143-49"><a href="Ch06.html#cb143-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb143-50"><a href="Ch06.html#cb143-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb143-51"><a href="Ch06.html#cb143-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_102.png" width="100%" /></p>
</div>
<div id="ch06.103" class="section level2 hasAnchor" number="6.103">
<h2><span class="header-section-number">6.103</span> Diversity_Forest_r1250<a href="Ch06.html#ch06.103" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Forest_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_103</code></p>
<p><strong>English name:</strong> Average forest class α-diversity of 500 m grid cells within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā mežu ainavas klašu 500 m šūnu α-daudzveidība 1.25 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="Ch05.html#Ch05.04.02">Forest diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="Ch06.html#cb144-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb144-2"><a href="Ch06.html#cb144-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb144-3"><a href="Ch06.html#cb144-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb144-4"><a href="Ch06.html#cb144-4" tabindex="-1"></a></span>
<span id="cb144-5"><a href="Ch06.html#cb144-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb144-6"><a href="Ch06.html#cb144-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb144-7"><a href="Ch06.html#cb144-7" tabindex="-1"></a></span>
<span id="cb144-8"><a href="Ch06.html#cb144-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb144-9"><a href="Ch06.html#cb144-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb144-10"><a href="Ch06.html#cb144-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb144-11"><a href="Ch06.html#cb144-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb144-12"><a href="Ch06.html#cb144-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb144-13"><a href="Ch06.html#cb144-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb144-14"><a href="Ch06.html#cb144-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_Forests_500x.tif&quot;</span>),</span>
<span id="cb144-15"><a href="Ch06.html#cb144-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Forest&quot;</span>),</span>
<span id="cb144-16"><a href="Ch06.html#cb144-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb144-17"><a href="Ch06.html#cb144-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb144-18"><a href="Ch06.html#cb144-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb144-19"><a href="Ch06.html#cb144-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb144-20"><a href="Ch06.html#cb144-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb144-21"><a href="Ch06.html#cb144-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb144-22"><a href="Ch06.html#cb144-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb144-23"><a href="Ch06.html#cb144-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb144-24"><a href="Ch06.html#cb144-24" tabindex="-1"></a></span>
<span id="cb144-25"><a href="Ch06.html#cb144-25" tabindex="-1"></a><span class="co"># Diversity_Forest_r1250.tif    egv_103</span></span>
<span id="cb144-26"><a href="Ch06.html#cb144-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Forest_r1250.tif&quot;</span>)</span>
<span id="cb144-27"><a href="Ch06.html#cb144-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_103&quot;</span></span>
<span id="cb144-28"><a href="Ch06.html#cb144-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb144-29"><a href="Ch06.html#cb144-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb144-30"><a href="Ch06.html#cb144-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Forest_r1250.tif&quot;</span>,</span>
<span id="cb144-31"><a href="Ch06.html#cb144-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb144-32"><a href="Ch06.html#cb144-32" tabindex="-1"></a></span>
<span id="cb144-33"><a href="Ch06.html#cb144-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb144-34"><a href="Ch06.html#cb144-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb144-35"><a href="Ch06.html#cb144-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb144-36"><a href="Ch06.html#cb144-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb144-37"><a href="Ch06.html#cb144-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb144-38"><a href="Ch06.html#cb144-38" tabindex="-1"></a></span>
<span id="cb144-39"><a href="Ch06.html#cb144-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Forest_r1250.tif&quot;</span></span>
<span id="cb144-40"><a href="Ch06.html#cb144-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb144-41"><a href="Ch06.html#cb144-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb144-42"><a href="Ch06.html#cb144-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb144-43"><a href="Ch06.html#cb144-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb144-44"><a href="Ch06.html#cb144-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb144-45"><a href="Ch06.html#cb144-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb144-46"><a href="Ch06.html#cb144-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb144-47"><a href="Ch06.html#cb144-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb144-48"><a href="Ch06.html#cb144-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb144-49"><a href="Ch06.html#cb144-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb144-50"><a href="Ch06.html#cb144-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb144-51"><a href="Ch06.html#cb144-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_103.png" width="100%" /></p>
</div>
<div id="ch06.104" class="section level2 hasAnchor" number="6.104">
<h2><span class="header-section-number">6.104</span> Diversity_Forest_r3000<a href="Ch06.html#ch06.104" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Forest_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_104</code></p>
<p><strong>English name:</strong> Average forest class α-diversity of 500 m grid cells within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā mežu ainavas klašu 500 m šūnu α-daudzveidība 3 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="Ch05.html#Ch05.04.02">Forest diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="Ch06.html#cb145-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb145-2"><a href="Ch06.html#cb145-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb145-3"><a href="Ch06.html#cb145-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb145-4"><a href="Ch06.html#cb145-4" tabindex="-1"></a></span>
<span id="cb145-5"><a href="Ch06.html#cb145-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb145-6"><a href="Ch06.html#cb145-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb145-7"><a href="Ch06.html#cb145-7" tabindex="-1"></a></span>
<span id="cb145-8"><a href="Ch06.html#cb145-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb145-9"><a href="Ch06.html#cb145-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb145-10"><a href="Ch06.html#cb145-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb145-11"><a href="Ch06.html#cb145-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb145-12"><a href="Ch06.html#cb145-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb145-13"><a href="Ch06.html#cb145-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb145-14"><a href="Ch06.html#cb145-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_Forests_500x.tif&quot;</span>),</span>
<span id="cb145-15"><a href="Ch06.html#cb145-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Forest&quot;</span>),</span>
<span id="cb145-16"><a href="Ch06.html#cb145-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb145-17"><a href="Ch06.html#cb145-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb145-18"><a href="Ch06.html#cb145-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb145-19"><a href="Ch06.html#cb145-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb145-20"><a href="Ch06.html#cb145-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb145-21"><a href="Ch06.html#cb145-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb145-22"><a href="Ch06.html#cb145-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb145-23"><a href="Ch06.html#cb145-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb145-24"><a href="Ch06.html#cb145-24" tabindex="-1"></a></span>
<span id="cb145-25"><a href="Ch06.html#cb145-25" tabindex="-1"></a><span class="co"># Diversity_Forest_r3000.tif    egv_104</span></span>
<span id="cb145-26"><a href="Ch06.html#cb145-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Forest_r3000.tif&quot;</span>)</span>
<span id="cb145-27"><a href="Ch06.html#cb145-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_104&quot;</span></span>
<span id="cb145-28"><a href="Ch06.html#cb145-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb145-29"><a href="Ch06.html#cb145-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb145-30"><a href="Ch06.html#cb145-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Forest_r3000.tif&quot;</span>,</span>
<span id="cb145-31"><a href="Ch06.html#cb145-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb145-32"><a href="Ch06.html#cb145-32" tabindex="-1"></a></span>
<span id="cb145-33"><a href="Ch06.html#cb145-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb145-34"><a href="Ch06.html#cb145-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb145-35"><a href="Ch06.html#cb145-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb145-36"><a href="Ch06.html#cb145-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb145-37"><a href="Ch06.html#cb145-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb145-38"><a href="Ch06.html#cb145-38" tabindex="-1"></a></span>
<span id="cb145-39"><a href="Ch06.html#cb145-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Forest_r3000.tif&quot;</span></span>
<span id="cb145-40"><a href="Ch06.html#cb145-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb145-41"><a href="Ch06.html#cb145-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb145-42"><a href="Ch06.html#cb145-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb145-43"><a href="Ch06.html#cb145-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb145-44"><a href="Ch06.html#cb145-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb145-45"><a href="Ch06.html#cb145-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb145-46"><a href="Ch06.html#cb145-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb145-47"><a href="Ch06.html#cb145-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb145-48"><a href="Ch06.html#cb145-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb145-49"><a href="Ch06.html#cb145-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb145-50"><a href="Ch06.html#cb145-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb145-51"><a href="Ch06.html#cb145-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_104.png" width="100%" /></p>
</div>
<div id="ch06.105" class="section level2 hasAnchor" number="6.105">
<h2><span class="header-section-number">6.105</span> Diversity_Forest_r10000<a href="Ch06.html#ch06.105" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Forest_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_105</code></p>
<p><strong>English name:</strong> Average forest class α-diversity of 500 m grid cells within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā mežu ainavas klašu 500 m šūnu α-daudzveidība 10 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="Ch05.html#Ch05.04.02">Forest diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="Ch06.html#cb146-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb146-2"><a href="Ch06.html#cb146-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb146-3"><a href="Ch06.html#cb146-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb146-4"><a href="Ch06.html#cb146-4" tabindex="-1"></a></span>
<span id="cb146-5"><a href="Ch06.html#cb146-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb146-6"><a href="Ch06.html#cb146-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb146-7"><a href="Ch06.html#cb146-7" tabindex="-1"></a></span>
<span id="cb146-8"><a href="Ch06.html#cb146-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb146-9"><a href="Ch06.html#cb146-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb146-10"><a href="Ch06.html#cb146-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb146-11"><a href="Ch06.html#cb146-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb146-12"><a href="Ch06.html#cb146-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb146-13"><a href="Ch06.html#cb146-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb146-14"><a href="Ch06.html#cb146-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_Forests_500x.tif&quot;</span>),</span>
<span id="cb146-15"><a href="Ch06.html#cb146-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Forest&quot;</span>),</span>
<span id="cb146-16"><a href="Ch06.html#cb146-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb146-17"><a href="Ch06.html#cb146-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb146-18"><a href="Ch06.html#cb146-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb146-19"><a href="Ch06.html#cb146-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb146-20"><a href="Ch06.html#cb146-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb146-21"><a href="Ch06.html#cb146-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb146-22"><a href="Ch06.html#cb146-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb146-23"><a href="Ch06.html#cb146-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb146-24"><a href="Ch06.html#cb146-24" tabindex="-1"></a></span>
<span id="cb146-25"><a href="Ch06.html#cb146-25" tabindex="-1"></a><span class="co"># Diversity_Forest_r10000.tif   egv_105</span></span>
<span id="cb146-26"><a href="Ch06.html#cb146-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Forest_r10000.tif&quot;</span>)</span>
<span id="cb146-27"><a href="Ch06.html#cb146-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_105&quot;</span></span>
<span id="cb146-28"><a href="Ch06.html#cb146-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb146-29"><a href="Ch06.html#cb146-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb146-30"><a href="Ch06.html#cb146-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Forest_r10000.tif&quot;</span>,</span>
<span id="cb146-31"><a href="Ch06.html#cb146-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb146-32"><a href="Ch06.html#cb146-32" tabindex="-1"></a></span>
<span id="cb146-33"><a href="Ch06.html#cb146-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb146-34"><a href="Ch06.html#cb146-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb146-35"><a href="Ch06.html#cb146-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb146-36"><a href="Ch06.html#cb146-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb146-37"><a href="Ch06.html#cb146-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb146-38"><a href="Ch06.html#cb146-38" tabindex="-1"></a></span>
<span id="cb146-39"><a href="Ch06.html#cb146-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Forest_r10000.tif&quot;</span></span>
<span id="cb146-40"><a href="Ch06.html#cb146-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb146-41"><a href="Ch06.html#cb146-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb146-42"><a href="Ch06.html#cb146-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb146-43"><a href="Ch06.html#cb146-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb146-44"><a href="Ch06.html#cb146-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb146-45"><a href="Ch06.html#cb146-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb146-46"><a href="Ch06.html#cb146-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb146-47"><a href="Ch06.html#cb146-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb146-48"><a href="Ch06.html#cb146-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb146-49"><a href="Ch06.html#cb146-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb146-50"><a href="Ch06.html#cb146-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb146-51"><a href="Ch06.html#cb146-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_105.png" width="100%" /></p>
</div>
<div id="ch06.106" class="section level2 hasAnchor" number="6.106">
<h2><span class="header-section-number">6.106</span> Diversity_Total_r500<a href="Ch06.html#ch06.106" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Total_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_106</code></p>
<p><strong>English name:</strong> Average combined landscape α-diversity of 500 m grid cells within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā visu ainavas klašu 500 m šūnu α-daudzveidība 0.5 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="Ch05.html#Ch05.04.01">Landscape in general diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="Ch06.html#cb147-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb147-2"><a href="Ch06.html#cb147-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb147-3"><a href="Ch06.html#cb147-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb147-4"><a href="Ch06.html#cb147-4" tabindex="-1"></a></span>
<span id="cb147-5"><a href="Ch06.html#cb147-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb147-6"><a href="Ch06.html#cb147-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb147-7"><a href="Ch06.html#cb147-7" tabindex="-1"></a></span>
<span id="cb147-8"><a href="Ch06.html#cb147-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb147-9"><a href="Ch06.html#cb147-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb147-10"><a href="Ch06.html#cb147-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb147-11"><a href="Ch06.html#cb147-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb147-12"><a href="Ch06.html#cb147-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb147-13"><a href="Ch06.html#cb147-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb147-14"><a href="Ch06.html#cb147-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_GeneralLandscape_500x.tif&quot;</span>),</span>
<span id="cb147-15"><a href="Ch06.html#cb147-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Total&quot;</span>),</span>
<span id="cb147-16"><a href="Ch06.html#cb147-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb147-17"><a href="Ch06.html#cb147-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb147-18"><a href="Ch06.html#cb147-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb147-19"><a href="Ch06.html#cb147-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb147-20"><a href="Ch06.html#cb147-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb147-21"><a href="Ch06.html#cb147-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb147-22"><a href="Ch06.html#cb147-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb147-23"><a href="Ch06.html#cb147-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb147-24"><a href="Ch06.html#cb147-24" tabindex="-1"></a></span>
<span id="cb147-25"><a href="Ch06.html#cb147-25" tabindex="-1"></a><span class="co"># Diversity_Total_r500.tif  egv_106</span></span>
<span id="cb147-26"><a href="Ch06.html#cb147-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Total_r500.tif&quot;</span>)</span>
<span id="cb147-27"><a href="Ch06.html#cb147-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_106&quot;</span></span>
<span id="cb147-28"><a href="Ch06.html#cb147-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb147-29"><a href="Ch06.html#cb147-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb147-30"><a href="Ch06.html#cb147-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Total_r500.tif&quot;</span>,</span>
<span id="cb147-31"><a href="Ch06.html#cb147-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb147-32"><a href="Ch06.html#cb147-32" tabindex="-1"></a></span>
<span id="cb147-33"><a href="Ch06.html#cb147-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb147-34"><a href="Ch06.html#cb147-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb147-35"><a href="Ch06.html#cb147-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb147-36"><a href="Ch06.html#cb147-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb147-37"><a href="Ch06.html#cb147-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb147-38"><a href="Ch06.html#cb147-38" tabindex="-1"></a></span>
<span id="cb147-39"><a href="Ch06.html#cb147-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Total_r500.tif&quot;</span></span>
<span id="cb147-40"><a href="Ch06.html#cb147-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb147-41"><a href="Ch06.html#cb147-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb147-42"><a href="Ch06.html#cb147-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb147-43"><a href="Ch06.html#cb147-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb147-44"><a href="Ch06.html#cb147-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb147-45"><a href="Ch06.html#cb147-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb147-46"><a href="Ch06.html#cb147-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb147-47"><a href="Ch06.html#cb147-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb147-48"><a href="Ch06.html#cb147-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb147-49"><a href="Ch06.html#cb147-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb147-50"><a href="Ch06.html#cb147-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb147-51"><a href="Ch06.html#cb147-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_106.png" width="100%" /></p>
</div>
<div id="ch06.107" class="section level2 hasAnchor" number="6.107">
<h2><span class="header-section-number">6.107</span> Diversity_Total_r1250<a href="Ch06.html#ch06.107" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Total_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_107</code></p>
<p><strong>English name:</strong> Average combined landscape α-diversity of 500 m grid cells within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā visu ainavas klašu 500 m šūnu α-daudzveidība 1.25 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="Ch05.html#Ch05.04.01">Landscape in general diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="Ch06.html#cb148-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb148-2"><a href="Ch06.html#cb148-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb148-3"><a href="Ch06.html#cb148-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb148-4"><a href="Ch06.html#cb148-4" tabindex="-1"></a></span>
<span id="cb148-5"><a href="Ch06.html#cb148-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb148-6"><a href="Ch06.html#cb148-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb148-7"><a href="Ch06.html#cb148-7" tabindex="-1"></a></span>
<span id="cb148-8"><a href="Ch06.html#cb148-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb148-9"><a href="Ch06.html#cb148-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb148-10"><a href="Ch06.html#cb148-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb148-11"><a href="Ch06.html#cb148-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb148-12"><a href="Ch06.html#cb148-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb148-13"><a href="Ch06.html#cb148-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb148-14"><a href="Ch06.html#cb148-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_GeneralLandscape_500x.tif&quot;</span>),</span>
<span id="cb148-15"><a href="Ch06.html#cb148-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Total&quot;</span>),</span>
<span id="cb148-16"><a href="Ch06.html#cb148-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb148-17"><a href="Ch06.html#cb148-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb148-18"><a href="Ch06.html#cb148-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb148-19"><a href="Ch06.html#cb148-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb148-20"><a href="Ch06.html#cb148-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb148-21"><a href="Ch06.html#cb148-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb148-22"><a href="Ch06.html#cb148-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb148-23"><a href="Ch06.html#cb148-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb148-24"><a href="Ch06.html#cb148-24" tabindex="-1"></a></span>
<span id="cb148-25"><a href="Ch06.html#cb148-25" tabindex="-1"></a><span class="co"># Diversity_Total_r1250.tif egv_107</span></span>
<span id="cb148-26"><a href="Ch06.html#cb148-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Total_r1250.tif&quot;</span>)</span>
<span id="cb148-27"><a href="Ch06.html#cb148-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_107&quot;</span></span>
<span id="cb148-28"><a href="Ch06.html#cb148-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb148-29"><a href="Ch06.html#cb148-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb148-30"><a href="Ch06.html#cb148-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Total_r1250.tif&quot;</span>,</span>
<span id="cb148-31"><a href="Ch06.html#cb148-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb148-32"><a href="Ch06.html#cb148-32" tabindex="-1"></a></span>
<span id="cb148-33"><a href="Ch06.html#cb148-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb148-34"><a href="Ch06.html#cb148-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb148-35"><a href="Ch06.html#cb148-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb148-36"><a href="Ch06.html#cb148-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb148-37"><a href="Ch06.html#cb148-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb148-38"><a href="Ch06.html#cb148-38" tabindex="-1"></a></span>
<span id="cb148-39"><a href="Ch06.html#cb148-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Total_r1250.tif&quot;</span></span>
<span id="cb148-40"><a href="Ch06.html#cb148-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb148-41"><a href="Ch06.html#cb148-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb148-42"><a href="Ch06.html#cb148-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb148-43"><a href="Ch06.html#cb148-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb148-44"><a href="Ch06.html#cb148-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb148-45"><a href="Ch06.html#cb148-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb148-46"><a href="Ch06.html#cb148-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb148-47"><a href="Ch06.html#cb148-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb148-48"><a href="Ch06.html#cb148-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb148-49"><a href="Ch06.html#cb148-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb148-50"><a href="Ch06.html#cb148-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb148-51"><a href="Ch06.html#cb148-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_107.png" width="100%" /></p>
</div>
<div id="ch06.108" class="section level2 hasAnchor" number="6.108">
<h2><span class="header-section-number">6.108</span> Diversity_Total_r3000<a href="Ch06.html#ch06.108" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Total_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_108</code></p>
<p><strong>English name:</strong> Average combined landscape α-diversity of 500 m grid cells within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā visu ainavas klašu 500 m šūnu α-daudzveidība 3 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="Ch05.html#Ch05.04.01">Landscape in general diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="Ch06.html#cb149-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb149-2"><a href="Ch06.html#cb149-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb149-3"><a href="Ch06.html#cb149-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb149-4"><a href="Ch06.html#cb149-4" tabindex="-1"></a></span>
<span id="cb149-5"><a href="Ch06.html#cb149-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb149-6"><a href="Ch06.html#cb149-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb149-7"><a href="Ch06.html#cb149-7" tabindex="-1"></a></span>
<span id="cb149-8"><a href="Ch06.html#cb149-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb149-9"><a href="Ch06.html#cb149-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb149-10"><a href="Ch06.html#cb149-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb149-11"><a href="Ch06.html#cb149-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb149-12"><a href="Ch06.html#cb149-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb149-13"><a href="Ch06.html#cb149-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb149-14"><a href="Ch06.html#cb149-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_GeneralLandscape_500x.tif&quot;</span>),</span>
<span id="cb149-15"><a href="Ch06.html#cb149-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Total&quot;</span>),</span>
<span id="cb149-16"><a href="Ch06.html#cb149-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb149-17"><a href="Ch06.html#cb149-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb149-18"><a href="Ch06.html#cb149-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb149-19"><a href="Ch06.html#cb149-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb149-20"><a href="Ch06.html#cb149-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb149-21"><a href="Ch06.html#cb149-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb149-22"><a href="Ch06.html#cb149-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb149-23"><a href="Ch06.html#cb149-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb149-24"><a href="Ch06.html#cb149-24" tabindex="-1"></a></span>
<span id="cb149-25"><a href="Ch06.html#cb149-25" tabindex="-1"></a><span class="co"># Diversity_Total_r3000.tif egv_108</span></span>
<span id="cb149-26"><a href="Ch06.html#cb149-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Total_r3000.tif&quot;</span>)</span>
<span id="cb149-27"><a href="Ch06.html#cb149-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_108&quot;</span></span>
<span id="cb149-28"><a href="Ch06.html#cb149-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb149-29"><a href="Ch06.html#cb149-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb149-30"><a href="Ch06.html#cb149-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Total_r3000.tif&quot;</span>,</span>
<span id="cb149-31"><a href="Ch06.html#cb149-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb149-32"><a href="Ch06.html#cb149-32" tabindex="-1"></a></span>
<span id="cb149-33"><a href="Ch06.html#cb149-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb149-34"><a href="Ch06.html#cb149-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb149-35"><a href="Ch06.html#cb149-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb149-36"><a href="Ch06.html#cb149-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb149-37"><a href="Ch06.html#cb149-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb149-38"><a href="Ch06.html#cb149-38" tabindex="-1"></a></span>
<span id="cb149-39"><a href="Ch06.html#cb149-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Total_r3000.tif&quot;</span></span>
<span id="cb149-40"><a href="Ch06.html#cb149-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb149-41"><a href="Ch06.html#cb149-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb149-42"><a href="Ch06.html#cb149-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb149-43"><a href="Ch06.html#cb149-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb149-44"><a href="Ch06.html#cb149-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb149-45"><a href="Ch06.html#cb149-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb149-46"><a href="Ch06.html#cb149-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb149-47"><a href="Ch06.html#cb149-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb149-48"><a href="Ch06.html#cb149-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb149-49"><a href="Ch06.html#cb149-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb149-50"><a href="Ch06.html#cb149-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb149-51"><a href="Ch06.html#cb149-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_108.png" width="100%" /></p>
</div>
<div id="ch06.109" class="section level2 hasAnchor" number="6.109">
<h2><span class="header-section-number">6.109</span> Diversity_Total_r10000<a href="Ch06.html#ch06.109" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Diversity_Total_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_109</code></p>
<p><strong>English name:</strong> Average combined landscape α-diversity of 500 m grid cells within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vidējā visu ainavas klašu 500 m šūnu α-daudzveidība 10 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.04">Landscape diversity</a>, more precisely
<a href="Ch05.html#Ch05.04.01">Landscape in general diversity</a>. Average value of 25 ha
cells diversity index values calculated with <code>egvtools::radius_function()</code>. To
guard against missing values at the edges, inverse distance wieghted (power = 2)
gap filling is allowed. File is written twice, to ensure layername. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="Ch06.html#cb150-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb150-2"><a href="Ch06.html#cb150-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb150-3"><a href="Ch06.html#cb150-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb150-4"><a href="Ch06.html#cb150-4" tabindex="-1"></a></span>
<span id="cb150-5"><a href="Ch06.html#cb150-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb150-6"><a href="Ch06.html#cb150-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb150-7"><a href="Ch06.html#cb150-7" tabindex="-1"></a></span>
<span id="cb150-8"><a href="Ch06.html#cb150-8" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb150-9"><a href="Ch06.html#cb150-9" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb150-10"><a href="Ch06.html#cb150-10" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb150-11"><a href="Ch06.html#cb150-11" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb150-12"><a href="Ch06.html#cb150-12" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb150-13"><a href="Ch06.html#cb150-13" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb150-14"><a href="Ch06.html#cb150-14" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_500m/2024/Diversity_GeneralLandscape_500x.tif&quot;</span>),</span>
<span id="cb150-15"><a href="Ch06.html#cb150-15" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Diversity_Total&quot;</span>),</span>
<span id="cb150-16"><a href="Ch06.html#cb150-16" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb150-17"><a href="Ch06.html#cb150-17" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb150-18"><a href="Ch06.html#cb150-18" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb150-19"><a href="Ch06.html#cb150-19" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb150-20"><a href="Ch06.html#cb150-20" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb150-21"><a href="Ch06.html#cb150-21" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb150-22"><a href="Ch06.html#cb150-22" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb150-23"><a href="Ch06.html#cb150-23" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb150-24"><a href="Ch06.html#cb150-24" tabindex="-1"></a></span>
<span id="cb150-25"><a href="Ch06.html#cb150-25" tabindex="-1"></a><span class="co"># Diversity_Total_r10000.tif    egv_109</span></span>
<span id="cb150-26"><a href="Ch06.html#cb150-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Total_r10000.tif&quot;</span>)</span>
<span id="cb150-27"><a href="Ch06.html#cb150-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_109&quot;</span></span>
<span id="cb150-28"><a href="Ch06.html#cb150-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb150-29"><a href="Ch06.html#cb150-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb150-30"><a href="Ch06.html#cb150-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Diversity_Total_r10000.tif&quot;</span>,</span>
<span id="cb150-31"><a href="Ch06.html#cb150-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb150-32"><a href="Ch06.html#cb150-32" tabindex="-1"></a></span>
<span id="cb150-33"><a href="Ch06.html#cb150-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb150-34"><a href="Ch06.html#cb150-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb150-35"><a href="Ch06.html#cb150-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb150-36"><a href="Ch06.html#cb150-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb150-37"><a href="Ch06.html#cb150-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb150-38"><a href="Ch06.html#cb150-38" tabindex="-1"></a></span>
<span id="cb150-39"><a href="Ch06.html#cb150-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Diversity_Total_r10000.tif&quot;</span></span>
<span id="cb150-40"><a href="Ch06.html#cb150-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb150-41"><a href="Ch06.html#cb150-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb150-42"><a href="Ch06.html#cb150-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb150-43"><a href="Ch06.html#cb150-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb150-44"><a href="Ch06.html#cb150-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb150-45"><a href="Ch06.html#cb150-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb150-46"><a href="Ch06.html#cb150-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb150-47"><a href="Ch06.html#cb150-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb150-48"><a href="Ch06.html#cb150-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb150-49"><a href="Ch06.html#cb150-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb150-50"><a href="Ch06.html#cb150-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb150-51"><a href="Ch06.html#cb150-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_109.png" width="100%" /></p>
</div>
<div id="ch06.110" class="section level2 hasAnchor" number="6.110">
<h2><span class="header-section-number">6.110</span> Edges_Bogs-Trees_cell<a href="Ch06.html#ch06.110" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Bogs-Trees_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_110</code></p>
<p><strong>English name:</strong> Edge pixels of Bogs, Mires bordering with Trees within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Purvu malu ar kokiem garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values from 620 to 700 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 0 and everything else as NA. Then bog and transitional mire layers from <a href="Ch04.html#Ch04.17">EDI</a> are reclassified to presence-only (value 1) and combined. Then, bog-and-mire layer (1=presence) is covered over
tree layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="Ch06.html#cb151-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb151-2"><a href="Ch06.html#cb151-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb151-3"><a href="Ch06.html#cb151-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb151-4"><a href="Ch06.html#cb151-4" tabindex="-1"></a></span>
<span id="cb151-5"><a href="Ch06.html#cb151-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb151-6"><a href="Ch06.html#cb151-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb151-7"><a href="Ch06.html#cb151-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb151-8"><a href="Ch06.html#cb151-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb151-9"><a href="Ch06.html#cb151-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb151-10"><a href="Ch06.html#cb151-10" tabindex="-1"></a></span>
<span id="cb151-11"><a href="Ch06.html#cb151-11" tabindex="-1"></a></span>
<span id="cb151-12"><a href="Ch06.html#cb151-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb151-13"><a href="Ch06.html#cb151-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb151-14"><a href="Ch06.html#cb151-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb151-15"><a href="Ch06.html#cb151-15" tabindex="-1"></a></span>
<span id="cb151-16"><a href="Ch06.html#cb151-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb151-17"><a href="Ch06.html#cb151-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb151-18"><a href="Ch06.html#cb151-18" tabindex="-1"></a></span>
<span id="cb151-19"><a href="Ch06.html#cb151-19" tabindex="-1"></a><span class="co"># Edges_Bogs-Trees_input.tif ----</span></span>
<span id="cb151-20"><a href="Ch06.html#cb151-20" tabindex="-1"></a></span>
<span id="cb151-21"><a href="Ch06.html#cb151-21" tabindex="-1"></a>trees_from620<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">&gt;=</span><span class="dv">620</span> <span class="sc">&amp;</span> simple_landscape<span class="sc">&lt;</span><span class="dv">700</span>,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb151-22"><a href="Ch06.html#cb151-22" tabindex="-1"></a><span class="fu">plot</span>(trees_from620)</span>
<span id="cb151-23"><a href="Ch06.html#cb151-23" tabindex="-1"></a></span>
<span id="cb151-24"><a href="Ch06.html#cb151-24" tabindex="-1"></a>bogs<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/EDI_BogsYN.tif&quot;</span>)</span>
<span id="cb151-25"><a href="Ch06.html#cb151-25" tabindex="-1"></a>bogs<span class="ot">=</span><span class="fu">subst</span>(bogs,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb151-26"><a href="Ch06.html#cb151-26" tabindex="-1"></a><span class="fu">plot</span>(bogs)</span>
<span id="cb151-27"><a href="Ch06.html#cb151-27" tabindex="-1"></a>mires<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/EDI_TransitionalMiresYN.tif&quot;</span>)</span>
<span id="cb151-28"><a href="Ch06.html#cb151-28" tabindex="-1"></a>mires<span class="ot">=</span><span class="fu">subst</span>(mires,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb151-29"><a href="Ch06.html#cb151-29" tabindex="-1"></a><span class="fu">plot</span>(mires)</span>
<span id="cb151-30"><a href="Ch06.html#cb151-30" tabindex="-1"></a>bogs_mires<span class="ot">=</span><span class="fu">cover</span>(bogs,mires)</span>
<span id="cb151-31"><a href="Ch06.html#cb151-31" tabindex="-1"></a><span class="fu">plot</span>(bogs_mires)</span>
<span id="cb151-32"><a href="Ch06.html#cb151-32" tabindex="-1"></a></span>
<span id="cb151-33"><a href="Ch06.html#cb151-33" tabindex="-1"></a>bm_trees<span class="ot">=</span><span class="fu">cover</span>(bogs_mires,trees_from620)</span>
<span id="cb151-34"><a href="Ch06.html#cb151-34" tabindex="-1"></a><span class="fu">plot</span>(bm_trees)</span>
<span id="cb151-35"><a href="Ch06.html#cb151-35" tabindex="-1"></a></span>
<span id="cb151-36"><a href="Ch06.html#cb151-36" tabindex="-1"></a>edge_bm_trees<span class="ot">=</span><span class="fu">project</span>(bm_trees,template10,</span>
<span id="cb151-37"><a href="Ch06.html#cb151-37" tabindex="-1"></a>                      <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_Bogs-Trees_input.tif&quot;</span>,</span>
<span id="cb151-38"><a href="Ch06.html#cb151-38" tabindex="-1"></a>                      <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb151-39"><a href="Ch06.html#cb151-39" tabindex="-1"></a></span>
<span id="cb151-40"><a href="Ch06.html#cb151-40" tabindex="-1"></a><span class="fu">rm</span>(edge_bm_trees)</span>
<span id="cb151-41"><a href="Ch06.html#cb151-41" tabindex="-1"></a><span class="fu">rm</span>(bm_trees)</span>
<span id="cb151-42"><a href="Ch06.html#cb151-42" tabindex="-1"></a></span>
<span id="cb151-43"><a href="Ch06.html#cb151-43" tabindex="-1"></a><span class="co"># Edges_Bogs-Trees_cell.tif egv_110</span></span>
<span id="cb151-44"><a href="Ch06.html#cb151-44" tabindex="-1"></a></span>
<span id="cb151-45"><a href="Ch06.html#cb151-45" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb151-46"><a href="Ch06.html#cb151-46" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_Bogs-Trees_input.tif&quot;</span>,</span>
<span id="cb151-47"><a href="Ch06.html#cb151-47" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb151-48"><a href="Ch06.html#cb151-48" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb151-49"><a href="Ch06.html#cb151-49" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb151-50"><a href="Ch06.html#cb151-50" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb151-51"><a href="Ch06.html#cb151-51" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb151-52"><a href="Ch06.html#cb151-52" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_Bogs-Trees_cell.tif&quot;</span>,</span>
<span id="cb151-53"><a href="Ch06.html#cb151-53" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_110&quot;</span>,</span>
<span id="cb151-54"><a href="Ch06.html#cb151-54" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb151-55"><a href="Ch06.html#cb151-55" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb151-56"><a href="Ch06.html#cb151-56" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb151-57"><a href="Ch06.html#cb151-57" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb151-58"><a href="Ch06.html#cb151-58" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb151-59"><a href="Ch06.html#cb151-59" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb151-60"><a href="Ch06.html#cb151-60" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb151-61"><a href="Ch06.html#cb151-61" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb151-62"><a href="Ch06.html#cb151-62" tabindex="-1"></a>)</span>
<span id="cb151-63"><a href="Ch06.html#cb151-63" tabindex="-1"></a></span>
<span id="cb151-64"><a href="Ch06.html#cb151-64" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb151-65"><a href="Ch06.html#cb151-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb151-66"><a href="Ch06.html#cb151-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb151-67"><a href="Ch06.html#cb151-67" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb151-68"><a href="Ch06.html#cb151-68" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb151-69"><a href="Ch06.html#cb151-69" tabindex="-1"></a></span>
<span id="cb151-70"><a href="Ch06.html#cb151-70" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Bogs-Trees_cell.tif&quot;</span></span>
<span id="cb151-71"><a href="Ch06.html#cb151-71" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb151-72"><a href="Ch06.html#cb151-72" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb151-73"><a href="Ch06.html#cb151-73" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb151-74"><a href="Ch06.html#cb151-74" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb151-75"><a href="Ch06.html#cb151-75" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb151-76"><a href="Ch06.html#cb151-76" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb151-77"><a href="Ch06.html#cb151-77" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb151-78"><a href="Ch06.html#cb151-78" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb151-79"><a href="Ch06.html#cb151-79" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb151-80"><a href="Ch06.html#cb151-80" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb151-81"><a href="Ch06.html#cb151-81" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb151-82"><a href="Ch06.html#cb151-82" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_110.png" width="100%" /></p>
</div>
<div id="ch06.111" class="section level2 hasAnchor" number="6.111">
<h2><span class="header-section-number">6.111</span> Edges_Bogs-Trees_r500<a href="Ch06.html#ch06.111" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Bogs-Trees_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_111</code></p>
<p><strong>English name:</strong> Edge pixels of Bogs, Mires bordering with Trees within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Purvu malu ar kokiem garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.110">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="Ch06.html#cb152-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb152-2"><a href="Ch06.html#cb152-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb152-3"><a href="Ch06.html#cb152-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb152-4"><a href="Ch06.html#cb152-4" tabindex="-1"></a></span>
<span id="cb152-5"><a href="Ch06.html#cb152-5" tabindex="-1"></a></span>
<span id="cb152-6"><a href="Ch06.html#cb152-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb152-7"><a href="Ch06.html#cb152-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb152-8"><a href="Ch06.html#cb152-8" tabindex="-1"></a></span>
<span id="cb152-9"><a href="Ch06.html#cb152-9" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb152-10"><a href="Ch06.html#cb152-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb152-11"><a href="Ch06.html#cb152-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb152-12"><a href="Ch06.html#cb152-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb152-13"><a href="Ch06.html#cb152-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb152-14"><a href="Ch06.html#cb152-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb152-15"><a href="Ch06.html#cb152-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_cell.tif&quot;</span>),</span>
<span id="cb152-16"><a href="Ch06.html#cb152-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Bogs-Trees&quot;</span>),</span>
<span id="cb152-17"><a href="Ch06.html#cb152-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb152-18"><a href="Ch06.html#cb152-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">4</span>,</span>
<span id="cb152-19"><a href="Ch06.html#cb152-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb152-20"><a href="Ch06.html#cb152-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb152-21"><a href="Ch06.html#cb152-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb152-22"><a href="Ch06.html#cb152-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb152-23"><a href="Ch06.html#cb152-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb152-24"><a href="Ch06.html#cb152-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb152-25"><a href="Ch06.html#cb152-25" tabindex="-1"></a></span>
<span id="cb152-26"><a href="Ch06.html#cb152-26" tabindex="-1"></a><span class="co"># Edges_Bogs-Trees_r500.tif egv_111</span></span>
<span id="cb152-27"><a href="Ch06.html#cb152-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_r500.tif&quot;</span>)</span>
<span id="cb152-28"><a href="Ch06.html#cb152-28" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_111&quot;</span></span>
<span id="cb152-29"><a href="Ch06.html#cb152-29" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb152-30"><a href="Ch06.html#cb152-30" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb152-31"><a href="Ch06.html#cb152-31" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_r500.tif&quot;</span>,</span>
<span id="cb152-32"><a href="Ch06.html#cb152-32" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb152-33"><a href="Ch06.html#cb152-33" tabindex="-1"></a></span>
<span id="cb152-34"><a href="Ch06.html#cb152-34" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb152-35"><a href="Ch06.html#cb152-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb152-36"><a href="Ch06.html#cb152-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb152-37"><a href="Ch06.html#cb152-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb152-38"><a href="Ch06.html#cb152-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb152-39"><a href="Ch06.html#cb152-39" tabindex="-1"></a></span>
<span id="cb152-40"><a href="Ch06.html#cb152-40" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Bogs-Trees_r500.tif&quot;</span></span>
<span id="cb152-41"><a href="Ch06.html#cb152-41" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb152-42"><a href="Ch06.html#cb152-42" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb152-43"><a href="Ch06.html#cb152-43" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb152-44"><a href="Ch06.html#cb152-44" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb152-45"><a href="Ch06.html#cb152-45" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb152-46"><a href="Ch06.html#cb152-46" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb152-47"><a href="Ch06.html#cb152-47" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb152-48"><a href="Ch06.html#cb152-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb152-49"><a href="Ch06.html#cb152-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb152-50"><a href="Ch06.html#cb152-50" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb152-51"><a href="Ch06.html#cb152-51" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb152-52"><a href="Ch06.html#cb152-52" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_111.png" width="100%" /></p>
</div>
<div id="ch06.112" class="section level2 hasAnchor" number="6.112">
<h2><span class="header-section-number">6.112</span> Edges_Bogs-Trees_r1250<a href="Ch06.html#ch06.112" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Bogs-Trees_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_112</code></p>
<p><strong>English name:</strong> Edge pixels of Bogs, Mires bordering with Trees within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Purvu malu ar kokiem garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.110">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="Ch06.html#cb153-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb153-2"><a href="Ch06.html#cb153-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb153-3"><a href="Ch06.html#cb153-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb153-4"><a href="Ch06.html#cb153-4" tabindex="-1"></a></span>
<span id="cb153-5"><a href="Ch06.html#cb153-5" tabindex="-1"></a></span>
<span id="cb153-6"><a href="Ch06.html#cb153-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb153-7"><a href="Ch06.html#cb153-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb153-8"><a href="Ch06.html#cb153-8" tabindex="-1"></a></span>
<span id="cb153-9"><a href="Ch06.html#cb153-9" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb153-10"><a href="Ch06.html#cb153-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb153-11"><a href="Ch06.html#cb153-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb153-12"><a href="Ch06.html#cb153-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb153-13"><a href="Ch06.html#cb153-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb153-14"><a href="Ch06.html#cb153-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb153-15"><a href="Ch06.html#cb153-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_cell.tif&quot;</span>),</span>
<span id="cb153-16"><a href="Ch06.html#cb153-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Bogs-Trees&quot;</span>),</span>
<span id="cb153-17"><a href="Ch06.html#cb153-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb153-18"><a href="Ch06.html#cb153-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">4</span>,</span>
<span id="cb153-19"><a href="Ch06.html#cb153-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb153-20"><a href="Ch06.html#cb153-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb153-21"><a href="Ch06.html#cb153-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb153-22"><a href="Ch06.html#cb153-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb153-23"><a href="Ch06.html#cb153-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb153-24"><a href="Ch06.html#cb153-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb153-25"><a href="Ch06.html#cb153-25" tabindex="-1"></a></span>
<span id="cb153-26"><a href="Ch06.html#cb153-26" tabindex="-1"></a><span class="co"># Edges_Bogs-Trees_r1250.tif    egv_112</span></span>
<span id="cb153-27"><a href="Ch06.html#cb153-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_r1250.tif&quot;</span>)</span>
<span id="cb153-28"><a href="Ch06.html#cb153-28" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_112&quot;</span></span>
<span id="cb153-29"><a href="Ch06.html#cb153-29" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb153-30"><a href="Ch06.html#cb153-30" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb153-31"><a href="Ch06.html#cb153-31" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_r1250.tif&quot;</span>,</span>
<span id="cb153-32"><a href="Ch06.html#cb153-32" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb153-33"><a href="Ch06.html#cb153-33" tabindex="-1"></a></span>
<span id="cb153-34"><a href="Ch06.html#cb153-34" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb153-35"><a href="Ch06.html#cb153-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb153-36"><a href="Ch06.html#cb153-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb153-37"><a href="Ch06.html#cb153-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb153-38"><a href="Ch06.html#cb153-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb153-39"><a href="Ch06.html#cb153-39" tabindex="-1"></a></span>
<span id="cb153-40"><a href="Ch06.html#cb153-40" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Bogs-Trees_r1250.tif&quot;</span></span>
<span id="cb153-41"><a href="Ch06.html#cb153-41" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb153-42"><a href="Ch06.html#cb153-42" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb153-43"><a href="Ch06.html#cb153-43" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb153-44"><a href="Ch06.html#cb153-44" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb153-45"><a href="Ch06.html#cb153-45" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb153-46"><a href="Ch06.html#cb153-46" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb153-47"><a href="Ch06.html#cb153-47" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb153-48"><a href="Ch06.html#cb153-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb153-49"><a href="Ch06.html#cb153-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb153-50"><a href="Ch06.html#cb153-50" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb153-51"><a href="Ch06.html#cb153-51" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb153-52"><a href="Ch06.html#cb153-52" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_112.png" width="100%" /></p>
</div>
<div id="ch06.113" class="section level2 hasAnchor" number="6.113">
<h2><span class="header-section-number">6.113</span> Edges_Bogs-Trees_r3000<a href="Ch06.html#ch06.113" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Bogs-Trees_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_113</code></p>
<p><strong>English name:</strong> Edge pixels of Bogs, Mires bordering with Trees within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Purvu malu ar kokiem garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.110">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="Ch06.html#cb154-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb154-2"><a href="Ch06.html#cb154-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb154-3"><a href="Ch06.html#cb154-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb154-4"><a href="Ch06.html#cb154-4" tabindex="-1"></a></span>
<span id="cb154-5"><a href="Ch06.html#cb154-5" tabindex="-1"></a></span>
<span id="cb154-6"><a href="Ch06.html#cb154-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb154-7"><a href="Ch06.html#cb154-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb154-8"><a href="Ch06.html#cb154-8" tabindex="-1"></a></span>
<span id="cb154-9"><a href="Ch06.html#cb154-9" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb154-10"><a href="Ch06.html#cb154-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb154-11"><a href="Ch06.html#cb154-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb154-12"><a href="Ch06.html#cb154-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb154-13"><a href="Ch06.html#cb154-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb154-14"><a href="Ch06.html#cb154-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb154-15"><a href="Ch06.html#cb154-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_cell.tif&quot;</span>),</span>
<span id="cb154-16"><a href="Ch06.html#cb154-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Bogs-Trees&quot;</span>),</span>
<span id="cb154-17"><a href="Ch06.html#cb154-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb154-18"><a href="Ch06.html#cb154-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">4</span>,</span>
<span id="cb154-19"><a href="Ch06.html#cb154-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb154-20"><a href="Ch06.html#cb154-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb154-21"><a href="Ch06.html#cb154-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb154-22"><a href="Ch06.html#cb154-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb154-23"><a href="Ch06.html#cb154-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb154-24"><a href="Ch06.html#cb154-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb154-25"><a href="Ch06.html#cb154-25" tabindex="-1"></a></span>
<span id="cb154-26"><a href="Ch06.html#cb154-26" tabindex="-1"></a><span class="co"># Edges_Bogs-Trees_r3000.tif    egv_113</span></span>
<span id="cb154-27"><a href="Ch06.html#cb154-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_r3000.tif&quot;</span>)</span>
<span id="cb154-28"><a href="Ch06.html#cb154-28" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_113&quot;</span></span>
<span id="cb154-29"><a href="Ch06.html#cb154-29" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb154-30"><a href="Ch06.html#cb154-30" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb154-31"><a href="Ch06.html#cb154-31" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_r3000.tif&quot;</span>,</span>
<span id="cb154-32"><a href="Ch06.html#cb154-32" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb154-33"><a href="Ch06.html#cb154-33" tabindex="-1"></a></span>
<span id="cb154-34"><a href="Ch06.html#cb154-34" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb154-35"><a href="Ch06.html#cb154-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb154-36"><a href="Ch06.html#cb154-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb154-37"><a href="Ch06.html#cb154-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb154-38"><a href="Ch06.html#cb154-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb154-39"><a href="Ch06.html#cb154-39" tabindex="-1"></a></span>
<span id="cb154-40"><a href="Ch06.html#cb154-40" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Bogs-Trees_r3000.tif&quot;</span></span>
<span id="cb154-41"><a href="Ch06.html#cb154-41" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb154-42"><a href="Ch06.html#cb154-42" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb154-43"><a href="Ch06.html#cb154-43" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb154-44"><a href="Ch06.html#cb154-44" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb154-45"><a href="Ch06.html#cb154-45" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb154-46"><a href="Ch06.html#cb154-46" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb154-47"><a href="Ch06.html#cb154-47" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb154-48"><a href="Ch06.html#cb154-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb154-49"><a href="Ch06.html#cb154-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb154-50"><a href="Ch06.html#cb154-50" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb154-51"><a href="Ch06.html#cb154-51" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb154-52"><a href="Ch06.html#cb154-52" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_113.png" width="100%" /></p>
</div>
<div id="ch06.114" class="section level2 hasAnchor" number="6.114">
<h2><span class="header-section-number">6.114</span> Edges_Bogs-Trees_r10000<a href="Ch06.html#ch06.114" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Bogs-Trees_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_114</code></p>
<p><strong>English name:</strong> Edge pixels of Bogs, Mires bordering with Trees within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Purvu malu ar kokiem garums 10 km ainavā</p>
<p><strong>Procedure:</strong>Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.110">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="Ch06.html#cb155-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb155-2"><a href="Ch06.html#cb155-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb155-3"><a href="Ch06.html#cb155-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb155-4"><a href="Ch06.html#cb155-4" tabindex="-1"></a></span>
<span id="cb155-5"><a href="Ch06.html#cb155-5" tabindex="-1"></a></span>
<span id="cb155-6"><a href="Ch06.html#cb155-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb155-7"><a href="Ch06.html#cb155-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb155-8"><a href="Ch06.html#cb155-8" tabindex="-1"></a></span>
<span id="cb155-9"><a href="Ch06.html#cb155-9" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb155-10"><a href="Ch06.html#cb155-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb155-11"><a href="Ch06.html#cb155-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb155-12"><a href="Ch06.html#cb155-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb155-13"><a href="Ch06.html#cb155-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb155-14"><a href="Ch06.html#cb155-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb155-15"><a href="Ch06.html#cb155-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_cell.tif&quot;</span>),</span>
<span id="cb155-16"><a href="Ch06.html#cb155-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Bogs-Trees&quot;</span>),</span>
<span id="cb155-17"><a href="Ch06.html#cb155-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb155-18"><a href="Ch06.html#cb155-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">4</span>,</span>
<span id="cb155-19"><a href="Ch06.html#cb155-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb155-20"><a href="Ch06.html#cb155-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb155-21"><a href="Ch06.html#cb155-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb155-22"><a href="Ch06.html#cb155-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb155-23"><a href="Ch06.html#cb155-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb155-24"><a href="Ch06.html#cb155-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb155-25"><a href="Ch06.html#cb155-25" tabindex="-1"></a></span>
<span id="cb155-26"><a href="Ch06.html#cb155-26" tabindex="-1"></a><span class="co"># Edges_Bogs-Trees_r10000.tif   egv_114</span></span>
<span id="cb155-27"><a href="Ch06.html#cb155-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_r10000.tif&quot;</span>)</span>
<span id="cb155-28"><a href="Ch06.html#cb155-28" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_114&quot;</span></span>
<span id="cb155-29"><a href="Ch06.html#cb155-29" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb155-30"><a href="Ch06.html#cb155-30" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb155-31"><a href="Ch06.html#cb155-31" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Trees_r10000.tif&quot;</span>,</span>
<span id="cb155-32"><a href="Ch06.html#cb155-32" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb155-33"><a href="Ch06.html#cb155-33" tabindex="-1"></a></span>
<span id="cb155-34"><a href="Ch06.html#cb155-34" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb155-35"><a href="Ch06.html#cb155-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb155-36"><a href="Ch06.html#cb155-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb155-37"><a href="Ch06.html#cb155-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb155-38"><a href="Ch06.html#cb155-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb155-39"><a href="Ch06.html#cb155-39" tabindex="-1"></a></span>
<span id="cb155-40"><a href="Ch06.html#cb155-40" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Bogs-Trees_r10000.tif&quot;</span></span>
<span id="cb155-41"><a href="Ch06.html#cb155-41" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb155-42"><a href="Ch06.html#cb155-42" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb155-43"><a href="Ch06.html#cb155-43" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb155-44"><a href="Ch06.html#cb155-44" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb155-45"><a href="Ch06.html#cb155-45" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb155-46"><a href="Ch06.html#cb155-46" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb155-47"><a href="Ch06.html#cb155-47" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb155-48"><a href="Ch06.html#cb155-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb155-49"><a href="Ch06.html#cb155-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb155-50"><a href="Ch06.html#cb155-50" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb155-51"><a href="Ch06.html#cb155-51" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb155-52"><a href="Ch06.html#cb155-52" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_114.png" width="100%" /></p>
</div>
<div id="ch06.115" class="section level2 hasAnchor" number="6.115">
<h2><span class="header-section-number">6.115</span> Edges_Bogs-Water_cell<a href="Ch06.html#ch06.115" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Bogs-Water_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_115</code></p>
<p><strong>English name:</strong> Edge pixels of Bogs, Mires bordering with Water within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Purvu malu ar ūdeni garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values 200 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 0 and everything else as NA. Then bog and transitional mire layers from <a href="Ch04.html#Ch04.17">EDI</a> are reclassified to presence-only (value 1) and combined. Then, bog-and-mire layer (1=presence) is covered over
water layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="Ch06.html#cb156-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb156-2"><a href="Ch06.html#cb156-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb156-3"><a href="Ch06.html#cb156-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb156-4"><a href="Ch06.html#cb156-4" tabindex="-1"></a></span>
<span id="cb156-5"><a href="Ch06.html#cb156-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb156-6"><a href="Ch06.html#cb156-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb156-7"><a href="Ch06.html#cb156-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb156-8"><a href="Ch06.html#cb156-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb156-9"><a href="Ch06.html#cb156-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb156-10"><a href="Ch06.html#cb156-10" tabindex="-1"></a></span>
<span id="cb156-11"><a href="Ch06.html#cb156-11" tabindex="-1"></a></span>
<span id="cb156-12"><a href="Ch06.html#cb156-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb156-13"><a href="Ch06.html#cb156-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb156-14"><a href="Ch06.html#cb156-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb156-15"><a href="Ch06.html#cb156-15" tabindex="-1"></a></span>
<span id="cb156-16"><a href="Ch06.html#cb156-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb156-17"><a href="Ch06.html#cb156-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb156-18"><a href="Ch06.html#cb156-18" tabindex="-1"></a></span>
<span id="cb156-19"><a href="Ch06.html#cb156-19" tabindex="-1"></a><span class="co"># Edges_Bogs-Water_input.tif ----</span></span>
<span id="cb156-20"><a href="Ch06.html#cb156-20" tabindex="-1"></a>bogs<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/EDI_BogsYN.tif&quot;</span>)</span>
<span id="cb156-21"><a href="Ch06.html#cb156-21" tabindex="-1"></a>bogs<span class="ot">=</span><span class="fu">subst</span>(bogs,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb156-22"><a href="Ch06.html#cb156-22" tabindex="-1"></a><span class="fu">plot</span>(bogs)</span>
<span id="cb156-23"><a href="Ch06.html#cb156-23" tabindex="-1"></a>mires<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/EDI_TransitionalMiresYN.tif&quot;</span>)</span>
<span id="cb156-24"><a href="Ch06.html#cb156-24" tabindex="-1"></a>mires<span class="ot">=</span><span class="fu">subst</span>(mires,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb156-25"><a href="Ch06.html#cb156-25" tabindex="-1"></a><span class="fu">plot</span>(mires)</span>
<span id="cb156-26"><a href="Ch06.html#cb156-26" tabindex="-1"></a>bogs_mires<span class="ot">=</span><span class="fu">cover</span>(bogs,mires)</span>
<span id="cb156-27"><a href="Ch06.html#cb156-27" tabindex="-1"></a><span class="fu">plot</span>(bogs_mires)</span>
<span id="cb156-28"><a href="Ch06.html#cb156-28" tabindex="-1"></a></span>
<span id="cb156-29"><a href="Ch06.html#cb156-29" tabindex="-1"></a>water<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">200</span>,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb156-30"><a href="Ch06.html#cb156-30" tabindex="-1"></a><span class="fu">plot</span>(water)</span>
<span id="cb156-31"><a href="Ch06.html#cb156-31" tabindex="-1"></a></span>
<span id="cb156-32"><a href="Ch06.html#cb156-32" tabindex="-1"></a>bm_water<span class="ot">=</span><span class="fu">cover</span>(bogs_mires,water)</span>
<span id="cb156-33"><a href="Ch06.html#cb156-33" tabindex="-1"></a><span class="fu">plot</span>(bm_water)</span>
<span id="cb156-34"><a href="Ch06.html#cb156-34" tabindex="-1"></a></span>
<span id="cb156-35"><a href="Ch06.html#cb156-35" tabindex="-1"></a>edge_bm_water<span class="ot">=</span><span class="fu">project</span>(bm_water,template10,</span>
<span id="cb156-36"><a href="Ch06.html#cb156-36" tabindex="-1"></a>                      <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_Bogs-Water_input.tif&quot;</span>,</span>
<span id="cb156-37"><a href="Ch06.html#cb156-37" tabindex="-1"></a>                      <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb156-38"><a href="Ch06.html#cb156-38" tabindex="-1"></a><span class="fu">rm</span>(edge_bm_water)</span>
<span id="cb156-39"><a href="Ch06.html#cb156-39" tabindex="-1"></a><span class="fu">rm</span>(bm_water)</span>
<span id="cb156-40"><a href="Ch06.html#cb156-40" tabindex="-1"></a></span>
<span id="cb156-41"><a href="Ch06.html#cb156-41" tabindex="-1"></a></span>
<span id="cb156-42"><a href="Ch06.html#cb156-42" tabindex="-1"></a><span class="co"># Edges_Bogs-Water_cell.tif egv_115 ----</span></span>
<span id="cb156-43"><a href="Ch06.html#cb156-43" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb156-44"><a href="Ch06.html#cb156-44" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_Bogs-Water_input.tif&quot;</span>,</span>
<span id="cb156-45"><a href="Ch06.html#cb156-45" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb156-46"><a href="Ch06.html#cb156-46" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb156-47"><a href="Ch06.html#cb156-47" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb156-48"><a href="Ch06.html#cb156-48" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb156-49"><a href="Ch06.html#cb156-49" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb156-50"><a href="Ch06.html#cb156-50" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_Bogs-Water_cell.tif&quot;</span>,</span>
<span id="cb156-51"><a href="Ch06.html#cb156-51" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_115&quot;</span>,</span>
<span id="cb156-52"><a href="Ch06.html#cb156-52" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb156-53"><a href="Ch06.html#cb156-53" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb156-54"><a href="Ch06.html#cb156-54" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb156-55"><a href="Ch06.html#cb156-55" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb156-56"><a href="Ch06.html#cb156-56" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb156-57"><a href="Ch06.html#cb156-57" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb156-58"><a href="Ch06.html#cb156-58" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb156-59"><a href="Ch06.html#cb156-59" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb156-60"><a href="Ch06.html#cb156-60" tabindex="-1"></a>)</span>
<span id="cb156-61"><a href="Ch06.html#cb156-61" tabindex="-1"></a></span>
<span id="cb156-62"><a href="Ch06.html#cb156-62" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb156-63"><a href="Ch06.html#cb156-63" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb156-64"><a href="Ch06.html#cb156-64" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb156-65"><a href="Ch06.html#cb156-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb156-66"><a href="Ch06.html#cb156-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb156-67"><a href="Ch06.html#cb156-67" tabindex="-1"></a></span>
<span id="cb156-68"><a href="Ch06.html#cb156-68" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Bogs-Water_cell.tif&quot;</span></span>
<span id="cb156-69"><a href="Ch06.html#cb156-69" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb156-70"><a href="Ch06.html#cb156-70" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb156-71"><a href="Ch06.html#cb156-71" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb156-72"><a href="Ch06.html#cb156-72" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb156-73"><a href="Ch06.html#cb156-73" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb156-74"><a href="Ch06.html#cb156-74" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb156-75"><a href="Ch06.html#cb156-75" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb156-76"><a href="Ch06.html#cb156-76" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb156-77"><a href="Ch06.html#cb156-77" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb156-78"><a href="Ch06.html#cb156-78" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb156-79"><a href="Ch06.html#cb156-79" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb156-80"><a href="Ch06.html#cb156-80" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_115.png" width="100%" /></p>
</div>
<div id="ch06.116" class="section level2 hasAnchor" number="6.116">
<h2><span class="header-section-number">6.116</span> Edges_Bogs-Water_r500<a href="Ch06.html#ch06.116" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Bogs-Water_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_116</code></p>
<p><strong>English name:</strong> Edge pixels of Bogs, Mires bordering with Water within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Purvu malu ar ūdeni garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.115">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="Ch06.html#cb157-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb157-2"><a href="Ch06.html#cb157-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb157-3"><a href="Ch06.html#cb157-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb157-4"><a href="Ch06.html#cb157-4" tabindex="-1"></a></span>
<span id="cb157-5"><a href="Ch06.html#cb157-5" tabindex="-1"></a></span>
<span id="cb157-6"><a href="Ch06.html#cb157-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb157-7"><a href="Ch06.html#cb157-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb157-8"><a href="Ch06.html#cb157-8" tabindex="-1"></a></span>
<span id="cb157-9"><a href="Ch06.html#cb157-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb157-10"><a href="Ch06.html#cb157-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb157-11"><a href="Ch06.html#cb157-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb157-12"><a href="Ch06.html#cb157-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb157-13"><a href="Ch06.html#cb157-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb157-14"><a href="Ch06.html#cb157-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb157-15"><a href="Ch06.html#cb157-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_cell.tif&quot;</span>),</span>
<span id="cb157-16"><a href="Ch06.html#cb157-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Bogs-Water&quot;</span>),</span>
<span id="cb157-17"><a href="Ch06.html#cb157-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb157-18"><a href="Ch06.html#cb157-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb157-19"><a href="Ch06.html#cb157-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb157-20"><a href="Ch06.html#cb157-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb157-21"><a href="Ch06.html#cb157-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb157-22"><a href="Ch06.html#cb157-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb157-23"><a href="Ch06.html#cb157-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb157-24"><a href="Ch06.html#cb157-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb157-25"><a href="Ch06.html#cb157-25" tabindex="-1"></a></span>
<span id="cb157-26"><a href="Ch06.html#cb157-26" tabindex="-1"></a><span class="co"># Edges_Bogs-Water_r500.tif egv_116</span></span>
<span id="cb157-27"><a href="Ch06.html#cb157-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_r500.tif&quot;</span>)</span>
<span id="cb157-28"><a href="Ch06.html#cb157-28" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_116&quot;</span></span>
<span id="cb157-29"><a href="Ch06.html#cb157-29" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb157-30"><a href="Ch06.html#cb157-30" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb157-31"><a href="Ch06.html#cb157-31" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_r500.tif&quot;</span>,</span>
<span id="cb157-32"><a href="Ch06.html#cb157-32" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb157-33"><a href="Ch06.html#cb157-33" tabindex="-1"></a></span>
<span id="cb157-34"><a href="Ch06.html#cb157-34" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb157-35"><a href="Ch06.html#cb157-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb157-36"><a href="Ch06.html#cb157-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb157-37"><a href="Ch06.html#cb157-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb157-38"><a href="Ch06.html#cb157-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb157-39"><a href="Ch06.html#cb157-39" tabindex="-1"></a></span>
<span id="cb157-40"><a href="Ch06.html#cb157-40" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Bogs-Water_r500.tif&quot;</span></span>
<span id="cb157-41"><a href="Ch06.html#cb157-41" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb157-42"><a href="Ch06.html#cb157-42" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb157-43"><a href="Ch06.html#cb157-43" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb157-44"><a href="Ch06.html#cb157-44" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb157-45"><a href="Ch06.html#cb157-45" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb157-46"><a href="Ch06.html#cb157-46" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb157-47"><a href="Ch06.html#cb157-47" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb157-48"><a href="Ch06.html#cb157-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb157-49"><a href="Ch06.html#cb157-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb157-50"><a href="Ch06.html#cb157-50" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb157-51"><a href="Ch06.html#cb157-51" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb157-52"><a href="Ch06.html#cb157-52" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_116.png" width="100%" /></p>
</div>
<div id="ch06.117" class="section level2 hasAnchor" number="6.117">
<h2><span class="header-section-number">6.117</span> Edges_Bogs-Water_r1250<a href="Ch06.html#ch06.117" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Bogs-Water_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_117</code></p>
<p><strong>English name:</strong> Edge pixels of Bogs, Mires bordering with Water within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Purvu malu ar ūdeni garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.115">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="Ch06.html#cb158-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb158-2"><a href="Ch06.html#cb158-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb158-3"><a href="Ch06.html#cb158-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb158-4"><a href="Ch06.html#cb158-4" tabindex="-1"></a></span>
<span id="cb158-5"><a href="Ch06.html#cb158-5" tabindex="-1"></a></span>
<span id="cb158-6"><a href="Ch06.html#cb158-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb158-7"><a href="Ch06.html#cb158-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb158-8"><a href="Ch06.html#cb158-8" tabindex="-1"></a></span>
<span id="cb158-9"><a href="Ch06.html#cb158-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb158-10"><a href="Ch06.html#cb158-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb158-11"><a href="Ch06.html#cb158-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb158-12"><a href="Ch06.html#cb158-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb158-13"><a href="Ch06.html#cb158-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb158-14"><a href="Ch06.html#cb158-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb158-15"><a href="Ch06.html#cb158-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_cell.tif&quot;</span>),</span>
<span id="cb158-16"><a href="Ch06.html#cb158-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Bogs-Water&quot;</span>),</span>
<span id="cb158-17"><a href="Ch06.html#cb158-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb158-18"><a href="Ch06.html#cb158-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb158-19"><a href="Ch06.html#cb158-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb158-20"><a href="Ch06.html#cb158-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb158-21"><a href="Ch06.html#cb158-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb158-22"><a href="Ch06.html#cb158-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb158-23"><a href="Ch06.html#cb158-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb158-24"><a href="Ch06.html#cb158-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb158-25"><a href="Ch06.html#cb158-25" tabindex="-1"></a></span>
<span id="cb158-26"><a href="Ch06.html#cb158-26" tabindex="-1"></a><span class="co"># Edges_Bogs-Water_r1250.tif    egv_117</span></span>
<span id="cb158-27"><a href="Ch06.html#cb158-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_r1250.tif&quot;</span>)</span>
<span id="cb158-28"><a href="Ch06.html#cb158-28" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_117&quot;</span></span>
<span id="cb158-29"><a href="Ch06.html#cb158-29" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb158-30"><a href="Ch06.html#cb158-30" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb158-31"><a href="Ch06.html#cb158-31" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_r1250.tif&quot;</span>,</span>
<span id="cb158-32"><a href="Ch06.html#cb158-32" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb158-33"><a href="Ch06.html#cb158-33" tabindex="-1"></a></span>
<span id="cb158-34"><a href="Ch06.html#cb158-34" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb158-35"><a href="Ch06.html#cb158-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb158-36"><a href="Ch06.html#cb158-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb158-37"><a href="Ch06.html#cb158-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb158-38"><a href="Ch06.html#cb158-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb158-39"><a href="Ch06.html#cb158-39" tabindex="-1"></a></span>
<span id="cb158-40"><a href="Ch06.html#cb158-40" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Bogs-Water_r1250.tif&quot;</span></span>
<span id="cb158-41"><a href="Ch06.html#cb158-41" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb158-42"><a href="Ch06.html#cb158-42" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb158-43"><a href="Ch06.html#cb158-43" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb158-44"><a href="Ch06.html#cb158-44" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb158-45"><a href="Ch06.html#cb158-45" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb158-46"><a href="Ch06.html#cb158-46" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb158-47"><a href="Ch06.html#cb158-47" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb158-48"><a href="Ch06.html#cb158-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb158-49"><a href="Ch06.html#cb158-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb158-50"><a href="Ch06.html#cb158-50" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb158-51"><a href="Ch06.html#cb158-51" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb158-52"><a href="Ch06.html#cb158-52" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_117.png" width="100%" /></p>
</div>
<div id="ch06.118" class="section level2 hasAnchor" number="6.118">
<h2><span class="header-section-number">6.118</span> Edges_Bogs-Water_r3000<a href="Ch06.html#ch06.118" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Bogs-Water_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_118</code></p>
<p><strong>English name:</strong> Edge pixels of Bogs, Mires bordering with Water within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Purvu malu ar ūdeni garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.115">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="Ch06.html#cb159-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb159-2"><a href="Ch06.html#cb159-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb159-3"><a href="Ch06.html#cb159-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb159-4"><a href="Ch06.html#cb159-4" tabindex="-1"></a></span>
<span id="cb159-5"><a href="Ch06.html#cb159-5" tabindex="-1"></a></span>
<span id="cb159-6"><a href="Ch06.html#cb159-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb159-7"><a href="Ch06.html#cb159-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb159-8"><a href="Ch06.html#cb159-8" tabindex="-1"></a></span>
<span id="cb159-9"><a href="Ch06.html#cb159-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb159-10"><a href="Ch06.html#cb159-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb159-11"><a href="Ch06.html#cb159-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb159-12"><a href="Ch06.html#cb159-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb159-13"><a href="Ch06.html#cb159-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb159-14"><a href="Ch06.html#cb159-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb159-15"><a href="Ch06.html#cb159-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_cell.tif&quot;</span>),</span>
<span id="cb159-16"><a href="Ch06.html#cb159-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Bogs-Water&quot;</span>),</span>
<span id="cb159-17"><a href="Ch06.html#cb159-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb159-18"><a href="Ch06.html#cb159-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb159-19"><a href="Ch06.html#cb159-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb159-20"><a href="Ch06.html#cb159-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb159-21"><a href="Ch06.html#cb159-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb159-22"><a href="Ch06.html#cb159-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb159-23"><a href="Ch06.html#cb159-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb159-24"><a href="Ch06.html#cb159-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb159-25"><a href="Ch06.html#cb159-25" tabindex="-1"></a></span>
<span id="cb159-26"><a href="Ch06.html#cb159-26" tabindex="-1"></a><span class="co"># Edges_Bogs-Water_r3000.tif    egv_118</span></span>
<span id="cb159-27"><a href="Ch06.html#cb159-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_r3000.tif&quot;</span>)</span>
<span id="cb159-28"><a href="Ch06.html#cb159-28" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_118&quot;</span></span>
<span id="cb159-29"><a href="Ch06.html#cb159-29" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb159-30"><a href="Ch06.html#cb159-30" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb159-31"><a href="Ch06.html#cb159-31" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_r3000.tif&quot;</span>,</span>
<span id="cb159-32"><a href="Ch06.html#cb159-32" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb159-33"><a href="Ch06.html#cb159-33" tabindex="-1"></a></span>
<span id="cb159-34"><a href="Ch06.html#cb159-34" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb159-35"><a href="Ch06.html#cb159-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb159-36"><a href="Ch06.html#cb159-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb159-37"><a href="Ch06.html#cb159-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb159-38"><a href="Ch06.html#cb159-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb159-39"><a href="Ch06.html#cb159-39" tabindex="-1"></a></span>
<span id="cb159-40"><a href="Ch06.html#cb159-40" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Bogs-Water_r3000.tif&quot;</span></span>
<span id="cb159-41"><a href="Ch06.html#cb159-41" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb159-42"><a href="Ch06.html#cb159-42" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb159-43"><a href="Ch06.html#cb159-43" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb159-44"><a href="Ch06.html#cb159-44" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb159-45"><a href="Ch06.html#cb159-45" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb159-46"><a href="Ch06.html#cb159-46" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb159-47"><a href="Ch06.html#cb159-47" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb159-48"><a href="Ch06.html#cb159-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb159-49"><a href="Ch06.html#cb159-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb159-50"><a href="Ch06.html#cb159-50" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb159-51"><a href="Ch06.html#cb159-51" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb159-52"><a href="Ch06.html#cb159-52" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_118.png" width="100%" /></p>
</div>
<div id="ch06.119" class="section level2 hasAnchor" number="6.119">
<h2><span class="header-section-number">6.119</span> Edges_Bogs-Water_r10000<a href="Ch06.html#ch06.119" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Bogs-Water_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_119</code></p>
<p><strong>English name:</strong> Edge pixels of Bogs, Mires bordering with Water within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Purvu malu ar ūdeni garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.115">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="Ch06.html#cb160-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb160-2"><a href="Ch06.html#cb160-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb160-3"><a href="Ch06.html#cb160-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb160-4"><a href="Ch06.html#cb160-4" tabindex="-1"></a></span>
<span id="cb160-5"><a href="Ch06.html#cb160-5" tabindex="-1"></a></span>
<span id="cb160-6"><a href="Ch06.html#cb160-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb160-7"><a href="Ch06.html#cb160-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb160-8"><a href="Ch06.html#cb160-8" tabindex="-1"></a></span>
<span id="cb160-9"><a href="Ch06.html#cb160-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb160-10"><a href="Ch06.html#cb160-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb160-11"><a href="Ch06.html#cb160-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb160-12"><a href="Ch06.html#cb160-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb160-13"><a href="Ch06.html#cb160-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb160-14"><a href="Ch06.html#cb160-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb160-15"><a href="Ch06.html#cb160-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_cell.tif&quot;</span>),</span>
<span id="cb160-16"><a href="Ch06.html#cb160-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Bogs-Water&quot;</span>),</span>
<span id="cb160-17"><a href="Ch06.html#cb160-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb160-18"><a href="Ch06.html#cb160-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb160-19"><a href="Ch06.html#cb160-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb160-20"><a href="Ch06.html#cb160-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb160-21"><a href="Ch06.html#cb160-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb160-22"><a href="Ch06.html#cb160-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb160-23"><a href="Ch06.html#cb160-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb160-24"><a href="Ch06.html#cb160-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb160-25"><a href="Ch06.html#cb160-25" tabindex="-1"></a></span>
<span id="cb160-26"><a href="Ch06.html#cb160-26" tabindex="-1"></a><span class="co"># Edges_Bogs-Water_r10000.tif   egv_119</span></span>
<span id="cb160-27"><a href="Ch06.html#cb160-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_r10000.tif&quot;</span>)</span>
<span id="cb160-28"><a href="Ch06.html#cb160-28" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_119&quot;</span></span>
<span id="cb160-29"><a href="Ch06.html#cb160-29" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb160-30"><a href="Ch06.html#cb160-30" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb160-31"><a href="Ch06.html#cb160-31" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Bogs-Water_r10000.tif&quot;</span>,</span>
<span id="cb160-32"><a href="Ch06.html#cb160-32" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb160-33"><a href="Ch06.html#cb160-33" tabindex="-1"></a></span>
<span id="cb160-34"><a href="Ch06.html#cb160-34" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb160-35"><a href="Ch06.html#cb160-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb160-36"><a href="Ch06.html#cb160-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb160-37"><a href="Ch06.html#cb160-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb160-38"><a href="Ch06.html#cb160-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb160-39"><a href="Ch06.html#cb160-39" tabindex="-1"></a></span>
<span id="cb160-40"><a href="Ch06.html#cb160-40" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Bogs-Water_r10000.tif&quot;</span></span>
<span id="cb160-41"><a href="Ch06.html#cb160-41" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb160-42"><a href="Ch06.html#cb160-42" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb160-43"><a href="Ch06.html#cb160-43" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb160-44"><a href="Ch06.html#cb160-44" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb160-45"><a href="Ch06.html#cb160-45" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb160-46"><a href="Ch06.html#cb160-46" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb160-47"><a href="Ch06.html#cb160-47" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb160-48"><a href="Ch06.html#cb160-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb160-49"><a href="Ch06.html#cb160-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb160-50"><a href="Ch06.html#cb160-50" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb160-51"><a href="Ch06.html#cb160-51" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb160-52"><a href="Ch06.html#cb160-52" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_119.png" width="100%" /></p>
</div>
<div id="ch06.120" class="section level2 hasAnchor" number="6.120">
<h2><span class="header-section-number">6.120</span> Edges_Farmland-Builtup_cell<a href="Ch06.html#ch06.120" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Farmland-Builtup_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_120</code></p>
<p><strong>English name:</strong> Edge pixels of Farmland bordering with Built-Up areas within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Lauksaimniecības zemju malu ar apbūvi garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values larger than 300 and smaller than 400 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then values 500 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 0 and everything else as NA. Then, the first layer (1=presence) is covered over
the second layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="Ch06.html#cb161-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb161-2"><a href="Ch06.html#cb161-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb161-3"><a href="Ch06.html#cb161-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb161-4"><a href="Ch06.html#cb161-4" tabindex="-1"></a></span>
<span id="cb161-5"><a href="Ch06.html#cb161-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb161-6"><a href="Ch06.html#cb161-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb161-7"><a href="Ch06.html#cb161-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb161-8"><a href="Ch06.html#cb161-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb161-9"><a href="Ch06.html#cb161-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb161-10"><a href="Ch06.html#cb161-10" tabindex="-1"></a></span>
<span id="cb161-11"><a href="Ch06.html#cb161-11" tabindex="-1"></a></span>
<span id="cb161-12"><a href="Ch06.html#cb161-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb161-13"><a href="Ch06.html#cb161-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb161-14"><a href="Ch06.html#cb161-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb161-15"><a href="Ch06.html#cb161-15" tabindex="-1"></a></span>
<span id="cb161-16"><a href="Ch06.html#cb161-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb161-17"><a href="Ch06.html#cb161-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb161-18"><a href="Ch06.html#cb161-18" tabindex="-1"></a></span>
<span id="cb161-19"><a href="Ch06.html#cb161-19" tabindex="-1"></a><span class="co"># Edges_Farmland-Builtup_input.tif ----</span></span>
<span id="cb161-20"><a href="Ch06.html#cb161-20" tabindex="-1"></a>farmland<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">&gt;</span><span class="dv">300</span> <span class="sc">&amp;</span> simple_landscape<span class="sc">&lt;</span><span class="dv">400</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb161-21"><a href="Ch06.html#cb161-21" tabindex="-1"></a><span class="fu">plot</span>(farmland)</span>
<span id="cb161-22"><a href="Ch06.html#cb161-22" tabindex="-1"></a></span>
<span id="cb161-23"><a href="Ch06.html#cb161-23" tabindex="-1"></a>builtup<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">500</span>,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb161-24"><a href="Ch06.html#cb161-24" tabindex="-1"></a><span class="fu">plot</span>(builtup)</span>
<span id="cb161-25"><a href="Ch06.html#cb161-25" tabindex="-1"></a></span>
<span id="cb161-26"><a href="Ch06.html#cb161-26" tabindex="-1"></a>farmland_builtup<span class="ot">=</span><span class="fu">cover</span>(farmland,builtup)</span>
<span id="cb161-27"><a href="Ch06.html#cb161-27" tabindex="-1"></a><span class="fu">plot</span>(farmland_builtup)</span>
<span id="cb161-28"><a href="Ch06.html#cb161-28" tabindex="-1"></a></span>
<span id="cb161-29"><a href="Ch06.html#cb161-29" tabindex="-1"></a>edge_farmland_builtup<span class="ot">=</span><span class="fu">project</span>(farmland_builtup,template10,</span>
<span id="cb161-30"><a href="Ch06.html#cb161-30" tabindex="-1"></a>                      <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_Farmland-Builtup_input.tif&quot;</span>,</span>
<span id="cb161-31"><a href="Ch06.html#cb161-31" tabindex="-1"></a>                      <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb161-32"><a href="Ch06.html#cb161-32" tabindex="-1"></a><span class="fu">rm</span>(edge_farmland_builtup)</span>
<span id="cb161-33"><a href="Ch06.html#cb161-33" tabindex="-1"></a><span class="fu">rm</span>(farmland_builtup)</span>
<span id="cb161-34"><a href="Ch06.html#cb161-34" tabindex="-1"></a></span>
<span id="cb161-35"><a href="Ch06.html#cb161-35" tabindex="-1"></a></span>
<span id="cb161-36"><a href="Ch06.html#cb161-36" tabindex="-1"></a><span class="co"># Edges_Farmland-Builtup_cell.tif   egv_120 ----</span></span>
<span id="cb161-37"><a href="Ch06.html#cb161-37" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb161-38"><a href="Ch06.html#cb161-38" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_Farmland-Builtup_input.tif&quot;</span>,</span>
<span id="cb161-39"><a href="Ch06.html#cb161-39" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb161-40"><a href="Ch06.html#cb161-40" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb161-41"><a href="Ch06.html#cb161-41" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb161-42"><a href="Ch06.html#cb161-42" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb161-43"><a href="Ch06.html#cb161-43" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb161-44"><a href="Ch06.html#cb161-44" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_Farmland-Builtup_cell.tif&quot;</span>,</span>
<span id="cb161-45"><a href="Ch06.html#cb161-45" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_120&quot;</span>,</span>
<span id="cb161-46"><a href="Ch06.html#cb161-46" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb161-47"><a href="Ch06.html#cb161-47" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb161-48"><a href="Ch06.html#cb161-48" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb161-49"><a href="Ch06.html#cb161-49" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb161-50"><a href="Ch06.html#cb161-50" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb161-51"><a href="Ch06.html#cb161-51" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb161-52"><a href="Ch06.html#cb161-52" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb161-53"><a href="Ch06.html#cb161-53" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb161-54"><a href="Ch06.html#cb161-54" tabindex="-1"></a>)</span>
<span id="cb161-55"><a href="Ch06.html#cb161-55" tabindex="-1"></a></span>
<span id="cb161-56"><a href="Ch06.html#cb161-56" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb161-57"><a href="Ch06.html#cb161-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb161-58"><a href="Ch06.html#cb161-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb161-59"><a href="Ch06.html#cb161-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb161-60"><a href="Ch06.html#cb161-60" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb161-61"><a href="Ch06.html#cb161-61" tabindex="-1"></a></span>
<span id="cb161-62"><a href="Ch06.html#cb161-62" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Farmland-Builtup_cell.tif&quot;</span></span>
<span id="cb161-63"><a href="Ch06.html#cb161-63" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb161-64"><a href="Ch06.html#cb161-64" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb161-65"><a href="Ch06.html#cb161-65" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb161-66"><a href="Ch06.html#cb161-66" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb161-67"><a href="Ch06.html#cb161-67" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb161-68"><a href="Ch06.html#cb161-68" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb161-69"><a href="Ch06.html#cb161-69" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb161-70"><a href="Ch06.html#cb161-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb161-71"><a href="Ch06.html#cb161-71" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb161-72"><a href="Ch06.html#cb161-72" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb161-73"><a href="Ch06.html#cb161-73" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb161-74"><a href="Ch06.html#cb161-74" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_120.png" width="100%" /></p>
</div>
<div id="ch06.121" class="section level2 hasAnchor" number="6.121">
<h2><span class="header-section-number">6.121</span> Edges_Farmland-Builtup_r500<a href="Ch06.html#ch06.121" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Farmland-Builtup_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_121</code></p>
<p><strong>English name:</strong> Edge pixels of Farmland bordering with Built-Up areas within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecības zemju malu ar apbūvi garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.120">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="Ch06.html#cb162-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb162-2"><a href="Ch06.html#cb162-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb162-3"><a href="Ch06.html#cb162-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb162-4"><a href="Ch06.html#cb162-4" tabindex="-1"></a></span>
<span id="cb162-5"><a href="Ch06.html#cb162-5" tabindex="-1"></a></span>
<span id="cb162-6"><a href="Ch06.html#cb162-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb162-7"><a href="Ch06.html#cb162-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb162-8"><a href="Ch06.html#cb162-8" tabindex="-1"></a></span>
<span id="cb162-9"><a href="Ch06.html#cb162-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb162-10"><a href="Ch06.html#cb162-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb162-11"><a href="Ch06.html#cb162-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb162-12"><a href="Ch06.html#cb162-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb162-13"><a href="Ch06.html#cb162-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb162-14"><a href="Ch06.html#cb162-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb162-15"><a href="Ch06.html#cb162-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_cell.tif&quot;</span>),</span>
<span id="cb162-16"><a href="Ch06.html#cb162-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Farmland-Builtup&quot;</span>),</span>
<span id="cb162-17"><a href="Ch06.html#cb162-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb162-18"><a href="Ch06.html#cb162-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb162-19"><a href="Ch06.html#cb162-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb162-20"><a href="Ch06.html#cb162-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb162-21"><a href="Ch06.html#cb162-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb162-22"><a href="Ch06.html#cb162-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb162-23"><a href="Ch06.html#cb162-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb162-24"><a href="Ch06.html#cb162-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb162-25"><a href="Ch06.html#cb162-25" tabindex="-1"></a></span>
<span id="cb162-26"><a href="Ch06.html#cb162-26" tabindex="-1"></a></span>
<span id="cb162-27"><a href="Ch06.html#cb162-27" tabindex="-1"></a><span class="co"># Edges_Farmland-Builtup_r500.tif   egv_121 ----</span></span>
<span id="cb162-28"><a href="Ch06.html#cb162-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_r500.tif&quot;</span>)</span>
<span id="cb162-29"><a href="Ch06.html#cb162-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_121&quot;</span></span>
<span id="cb162-30"><a href="Ch06.html#cb162-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb162-31"><a href="Ch06.html#cb162-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb162-32"><a href="Ch06.html#cb162-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_r500.tif&quot;</span>,</span>
<span id="cb162-33"><a href="Ch06.html#cb162-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb162-34"><a href="Ch06.html#cb162-34" tabindex="-1"></a></span>
<span id="cb162-35"><a href="Ch06.html#cb162-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb162-36"><a href="Ch06.html#cb162-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb162-37"><a href="Ch06.html#cb162-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb162-38"><a href="Ch06.html#cb162-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb162-39"><a href="Ch06.html#cb162-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb162-40"><a href="Ch06.html#cb162-40" tabindex="-1"></a></span>
<span id="cb162-41"><a href="Ch06.html#cb162-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Farmland-Builtup_r500.tif&quot;</span></span>
<span id="cb162-42"><a href="Ch06.html#cb162-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb162-43"><a href="Ch06.html#cb162-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb162-44"><a href="Ch06.html#cb162-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb162-45"><a href="Ch06.html#cb162-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb162-46"><a href="Ch06.html#cb162-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb162-47"><a href="Ch06.html#cb162-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb162-48"><a href="Ch06.html#cb162-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb162-49"><a href="Ch06.html#cb162-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb162-50"><a href="Ch06.html#cb162-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb162-51"><a href="Ch06.html#cb162-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb162-52"><a href="Ch06.html#cb162-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb162-53"><a href="Ch06.html#cb162-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_121.png" width="100%" /></p>
</div>
<div id="ch06.122" class="section level2 hasAnchor" number="6.122">
<h2><span class="header-section-number">6.122</span> Edges_Farmland-Builtup_r1250<a href="Ch06.html#ch06.122" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Farmland-Builtup_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_122</code></p>
<p><strong>English name:</strong> Edge pixels of Farmland bordering with Built-Up areas within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecības zemju malu ar apbūvi garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.120">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="Ch06.html#cb163-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb163-2"><a href="Ch06.html#cb163-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb163-3"><a href="Ch06.html#cb163-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb163-4"><a href="Ch06.html#cb163-4" tabindex="-1"></a></span>
<span id="cb163-5"><a href="Ch06.html#cb163-5" tabindex="-1"></a></span>
<span id="cb163-6"><a href="Ch06.html#cb163-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb163-7"><a href="Ch06.html#cb163-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb163-8"><a href="Ch06.html#cb163-8" tabindex="-1"></a></span>
<span id="cb163-9"><a href="Ch06.html#cb163-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb163-10"><a href="Ch06.html#cb163-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb163-11"><a href="Ch06.html#cb163-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb163-12"><a href="Ch06.html#cb163-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb163-13"><a href="Ch06.html#cb163-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb163-14"><a href="Ch06.html#cb163-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb163-15"><a href="Ch06.html#cb163-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_cell.tif&quot;</span>),</span>
<span id="cb163-16"><a href="Ch06.html#cb163-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Farmland-Builtup&quot;</span>),</span>
<span id="cb163-17"><a href="Ch06.html#cb163-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb163-18"><a href="Ch06.html#cb163-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb163-19"><a href="Ch06.html#cb163-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb163-20"><a href="Ch06.html#cb163-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb163-21"><a href="Ch06.html#cb163-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb163-22"><a href="Ch06.html#cb163-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb163-23"><a href="Ch06.html#cb163-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb163-24"><a href="Ch06.html#cb163-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb163-25"><a href="Ch06.html#cb163-25" tabindex="-1"></a></span>
<span id="cb163-26"><a href="Ch06.html#cb163-26" tabindex="-1"></a></span>
<span id="cb163-27"><a href="Ch06.html#cb163-27" tabindex="-1"></a><span class="co"># Edges_Farmland-Builtup_r1250.tif  egv_122 ----</span></span>
<span id="cb163-28"><a href="Ch06.html#cb163-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_r1250.tif&quot;</span>)</span>
<span id="cb163-29"><a href="Ch06.html#cb163-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_122&quot;</span></span>
<span id="cb163-30"><a href="Ch06.html#cb163-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb163-31"><a href="Ch06.html#cb163-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb163-32"><a href="Ch06.html#cb163-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_r1250.tif&quot;</span>,</span>
<span id="cb163-33"><a href="Ch06.html#cb163-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb163-34"><a href="Ch06.html#cb163-34" tabindex="-1"></a></span>
<span id="cb163-35"><a href="Ch06.html#cb163-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb163-36"><a href="Ch06.html#cb163-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb163-37"><a href="Ch06.html#cb163-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb163-38"><a href="Ch06.html#cb163-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb163-39"><a href="Ch06.html#cb163-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb163-40"><a href="Ch06.html#cb163-40" tabindex="-1"></a></span>
<span id="cb163-41"><a href="Ch06.html#cb163-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Farmland-Builtup_r1250.tif&quot;</span></span>
<span id="cb163-42"><a href="Ch06.html#cb163-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb163-43"><a href="Ch06.html#cb163-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb163-44"><a href="Ch06.html#cb163-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb163-45"><a href="Ch06.html#cb163-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb163-46"><a href="Ch06.html#cb163-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb163-47"><a href="Ch06.html#cb163-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb163-48"><a href="Ch06.html#cb163-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb163-49"><a href="Ch06.html#cb163-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb163-50"><a href="Ch06.html#cb163-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb163-51"><a href="Ch06.html#cb163-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb163-52"><a href="Ch06.html#cb163-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb163-53"><a href="Ch06.html#cb163-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_122.png" width="100%" /></p>
</div>
<div id="ch06.123" class="section level2 hasAnchor" number="6.123">
<h2><span class="header-section-number">6.123</span> Edges_Farmland-Builtup_r3000<a href="Ch06.html#ch06.123" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Farmland-Builtup_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_123</code></p>
<p><strong>English name:</strong> Edge pixels of Farmland bordering with Built-Up areas within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecības zemju malu ar apbūvi garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.120">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="Ch06.html#cb164-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb164-2"><a href="Ch06.html#cb164-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb164-3"><a href="Ch06.html#cb164-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb164-4"><a href="Ch06.html#cb164-4" tabindex="-1"></a></span>
<span id="cb164-5"><a href="Ch06.html#cb164-5" tabindex="-1"></a></span>
<span id="cb164-6"><a href="Ch06.html#cb164-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb164-7"><a href="Ch06.html#cb164-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb164-8"><a href="Ch06.html#cb164-8" tabindex="-1"></a></span>
<span id="cb164-9"><a href="Ch06.html#cb164-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb164-10"><a href="Ch06.html#cb164-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb164-11"><a href="Ch06.html#cb164-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb164-12"><a href="Ch06.html#cb164-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb164-13"><a href="Ch06.html#cb164-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb164-14"><a href="Ch06.html#cb164-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb164-15"><a href="Ch06.html#cb164-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_cell.tif&quot;</span>),</span>
<span id="cb164-16"><a href="Ch06.html#cb164-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Farmland-Builtup&quot;</span>),</span>
<span id="cb164-17"><a href="Ch06.html#cb164-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb164-18"><a href="Ch06.html#cb164-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb164-19"><a href="Ch06.html#cb164-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb164-20"><a href="Ch06.html#cb164-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb164-21"><a href="Ch06.html#cb164-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb164-22"><a href="Ch06.html#cb164-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb164-23"><a href="Ch06.html#cb164-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb164-24"><a href="Ch06.html#cb164-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb164-25"><a href="Ch06.html#cb164-25" tabindex="-1"></a></span>
<span id="cb164-26"><a href="Ch06.html#cb164-26" tabindex="-1"></a></span>
<span id="cb164-27"><a href="Ch06.html#cb164-27" tabindex="-1"></a><span class="co"># Edges_Farmland-Builtup_r3000.tif  egv_123 ----</span></span>
<span id="cb164-28"><a href="Ch06.html#cb164-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_r3000.tif&quot;</span>)</span>
<span id="cb164-29"><a href="Ch06.html#cb164-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_123&quot;</span></span>
<span id="cb164-30"><a href="Ch06.html#cb164-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb164-31"><a href="Ch06.html#cb164-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb164-32"><a href="Ch06.html#cb164-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_r3000.tif&quot;</span>,</span>
<span id="cb164-33"><a href="Ch06.html#cb164-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb164-34"><a href="Ch06.html#cb164-34" tabindex="-1"></a></span>
<span id="cb164-35"><a href="Ch06.html#cb164-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb164-36"><a href="Ch06.html#cb164-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb164-37"><a href="Ch06.html#cb164-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb164-38"><a href="Ch06.html#cb164-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb164-39"><a href="Ch06.html#cb164-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb164-40"><a href="Ch06.html#cb164-40" tabindex="-1"></a></span>
<span id="cb164-41"><a href="Ch06.html#cb164-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Farmland-Builtup_r3000.tif&quot;</span></span>
<span id="cb164-42"><a href="Ch06.html#cb164-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb164-43"><a href="Ch06.html#cb164-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb164-44"><a href="Ch06.html#cb164-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb164-45"><a href="Ch06.html#cb164-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb164-46"><a href="Ch06.html#cb164-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb164-47"><a href="Ch06.html#cb164-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb164-48"><a href="Ch06.html#cb164-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb164-49"><a href="Ch06.html#cb164-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb164-50"><a href="Ch06.html#cb164-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb164-51"><a href="Ch06.html#cb164-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb164-52"><a href="Ch06.html#cb164-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb164-53"><a href="Ch06.html#cb164-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_123.png" width="100%" /></p>
</div>
<div id="ch06.124" class="section level2 hasAnchor" number="6.124">
<h2><span class="header-section-number">6.124</span> Edges_Farmland-Builtup_r10000<a href="Ch06.html#ch06.124" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Farmland-Builtup_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_124</code></p>
<p><strong>English name:</strong> Edge pixels of Farmland bordering with Built-Up areas within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecības zemju malu ar apbūvi garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.120">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="Ch06.html#cb165-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb165-2"><a href="Ch06.html#cb165-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb165-3"><a href="Ch06.html#cb165-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb165-4"><a href="Ch06.html#cb165-4" tabindex="-1"></a></span>
<span id="cb165-5"><a href="Ch06.html#cb165-5" tabindex="-1"></a></span>
<span id="cb165-6"><a href="Ch06.html#cb165-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb165-7"><a href="Ch06.html#cb165-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb165-8"><a href="Ch06.html#cb165-8" tabindex="-1"></a></span>
<span id="cb165-9"><a href="Ch06.html#cb165-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb165-10"><a href="Ch06.html#cb165-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb165-11"><a href="Ch06.html#cb165-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb165-12"><a href="Ch06.html#cb165-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb165-13"><a href="Ch06.html#cb165-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb165-14"><a href="Ch06.html#cb165-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb165-15"><a href="Ch06.html#cb165-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_cell.tif&quot;</span>),</span>
<span id="cb165-16"><a href="Ch06.html#cb165-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Farmland-Builtup&quot;</span>),</span>
<span id="cb165-17"><a href="Ch06.html#cb165-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb165-18"><a href="Ch06.html#cb165-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb165-19"><a href="Ch06.html#cb165-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb165-20"><a href="Ch06.html#cb165-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb165-21"><a href="Ch06.html#cb165-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb165-22"><a href="Ch06.html#cb165-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb165-23"><a href="Ch06.html#cb165-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb165-24"><a href="Ch06.html#cb165-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb165-25"><a href="Ch06.html#cb165-25" tabindex="-1"></a></span>
<span id="cb165-26"><a href="Ch06.html#cb165-26" tabindex="-1"></a></span>
<span id="cb165-27"><a href="Ch06.html#cb165-27" tabindex="-1"></a><span class="co"># Edges_Farmland-Builtup_r10000.tif egv_124 ----</span></span>
<span id="cb165-28"><a href="Ch06.html#cb165-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_r10000.tif&quot;</span>)</span>
<span id="cb165-29"><a href="Ch06.html#cb165-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_124&quot;</span></span>
<span id="cb165-30"><a href="Ch06.html#cb165-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb165-31"><a href="Ch06.html#cb165-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb165-32"><a href="Ch06.html#cb165-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Farmland-Builtup_r10000.tif&quot;</span>,</span>
<span id="cb165-33"><a href="Ch06.html#cb165-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb165-34"><a href="Ch06.html#cb165-34" tabindex="-1"></a></span>
<span id="cb165-35"><a href="Ch06.html#cb165-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb165-36"><a href="Ch06.html#cb165-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb165-37"><a href="Ch06.html#cb165-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb165-38"><a href="Ch06.html#cb165-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb165-39"><a href="Ch06.html#cb165-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb165-40"><a href="Ch06.html#cb165-40" tabindex="-1"></a></span>
<span id="cb165-41"><a href="Ch06.html#cb165-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Farmland-Builtup_r10000.tif&quot;</span></span>
<span id="cb165-42"><a href="Ch06.html#cb165-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb165-43"><a href="Ch06.html#cb165-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb165-44"><a href="Ch06.html#cb165-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb165-45"><a href="Ch06.html#cb165-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb165-46"><a href="Ch06.html#cb165-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb165-47"><a href="Ch06.html#cb165-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb165-48"><a href="Ch06.html#cb165-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb165-49"><a href="Ch06.html#cb165-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb165-50"><a href="Ch06.html#cb165-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb165-51"><a href="Ch06.html#cb165-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb165-52"><a href="Ch06.html#cb165-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb165-53"><a href="Ch06.html#cb165-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_124.png" width="100%" /></p>
</div>
<div id="ch06.125" class="section level2 hasAnchor" number="6.125">
<h2><span class="header-section-number">6.125</span> Edges_Trees-Builtup_cell<a href="Ch06.html#ch06.125" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Trees-Builtup_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_125</code></p>
<p><strong>English name:</strong> Edge pixels of Trees bordering with Built-Up areas within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Koku malu ar apbūvi garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values larger than 630 and smaller than 700 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then values 500 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 0 and everything else as NA. Then, the first layer (1=presence) is covered over
the second layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="Ch06.html#cb166-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb166-2"><a href="Ch06.html#cb166-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb166-3"><a href="Ch06.html#cb166-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb166-4"><a href="Ch06.html#cb166-4" tabindex="-1"></a></span>
<span id="cb166-5"><a href="Ch06.html#cb166-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb166-6"><a href="Ch06.html#cb166-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb166-7"><a href="Ch06.html#cb166-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb166-8"><a href="Ch06.html#cb166-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb166-9"><a href="Ch06.html#cb166-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb166-10"><a href="Ch06.html#cb166-10" tabindex="-1"></a></span>
<span id="cb166-11"><a href="Ch06.html#cb166-11" tabindex="-1"></a></span>
<span id="cb166-12"><a href="Ch06.html#cb166-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb166-13"><a href="Ch06.html#cb166-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb166-14"><a href="Ch06.html#cb166-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb166-15"><a href="Ch06.html#cb166-15" tabindex="-1"></a></span>
<span id="cb166-16"><a href="Ch06.html#cb166-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb166-17"><a href="Ch06.html#cb166-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb166-18"><a href="Ch06.html#cb166-18" tabindex="-1"></a></span>
<span id="cb166-19"><a href="Ch06.html#cb166-19" tabindex="-1"></a><span class="co"># Edges_Trees-Builtup_input.tif ----</span></span>
<span id="cb166-20"><a href="Ch06.html#cb166-20" tabindex="-1"></a>trees_from630<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">&gt;=</span><span class="dv">630</span> <span class="sc">&amp;</span> simple_landscape<span class="sc">&lt;</span><span class="dv">700</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb166-21"><a href="Ch06.html#cb166-21" tabindex="-1"></a><span class="fu">plot</span>(trees_from630)</span>
<span id="cb166-22"><a href="Ch06.html#cb166-22" tabindex="-1"></a></span>
<span id="cb166-23"><a href="Ch06.html#cb166-23" tabindex="-1"></a>builtup<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">500</span>,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb166-24"><a href="Ch06.html#cb166-24" tabindex="-1"></a><span class="fu">plot</span>(builtup)</span>
<span id="cb166-25"><a href="Ch06.html#cb166-25" tabindex="-1"></a></span>
<span id="cb166-26"><a href="Ch06.html#cb166-26" tabindex="-1"></a>trees630_builtup<span class="ot">=</span><span class="fu">cover</span>(trees_from630,builtup)</span>
<span id="cb166-27"><a href="Ch06.html#cb166-27" tabindex="-1"></a><span class="fu">plot</span>(trees630_builtup)</span>
<span id="cb166-28"><a href="Ch06.html#cb166-28" tabindex="-1"></a></span>
<span id="cb166-29"><a href="Ch06.html#cb166-29" tabindex="-1"></a>edge_trees630_builtup<span class="ot">=</span><span class="fu">project</span>(trees630_builtup,template10,</span>
<span id="cb166-30"><a href="Ch06.html#cb166-30" tabindex="-1"></a>                              <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_Trees-Builtup_input.tif&quot;</span>,</span>
<span id="cb166-31"><a href="Ch06.html#cb166-31" tabindex="-1"></a>                              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb166-32"><a href="Ch06.html#cb166-32" tabindex="-1"></a><span class="fu">rm</span>(edge_trees630_builtup)</span>
<span id="cb166-33"><a href="Ch06.html#cb166-33" tabindex="-1"></a><span class="fu">rm</span>(trees630_builtup)</span>
<span id="cb166-34"><a href="Ch06.html#cb166-34" tabindex="-1"></a></span>
<span id="cb166-35"><a href="Ch06.html#cb166-35" tabindex="-1"></a></span>
<span id="cb166-36"><a href="Ch06.html#cb166-36" tabindex="-1"></a><span class="co"># Edges_Trees-Builtup_cell.tif  egv_125 ----</span></span>
<span id="cb166-37"><a href="Ch06.html#cb166-37" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb166-38"><a href="Ch06.html#cb166-38" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_Trees-Builtup_input.tif&quot;</span>,</span>
<span id="cb166-39"><a href="Ch06.html#cb166-39" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb166-40"><a href="Ch06.html#cb166-40" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb166-41"><a href="Ch06.html#cb166-41" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb166-42"><a href="Ch06.html#cb166-42" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb166-43"><a href="Ch06.html#cb166-43" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb166-44"><a href="Ch06.html#cb166-44" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_Trees-Builtup_cell.tif&quot;</span>,</span>
<span id="cb166-45"><a href="Ch06.html#cb166-45" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_125&quot;</span>,</span>
<span id="cb166-46"><a href="Ch06.html#cb166-46" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb166-47"><a href="Ch06.html#cb166-47" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb166-48"><a href="Ch06.html#cb166-48" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb166-49"><a href="Ch06.html#cb166-49" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb166-50"><a href="Ch06.html#cb166-50" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb166-51"><a href="Ch06.html#cb166-51" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb166-52"><a href="Ch06.html#cb166-52" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb166-53"><a href="Ch06.html#cb166-53" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb166-54"><a href="Ch06.html#cb166-54" tabindex="-1"></a>)</span>
<span id="cb166-55"><a href="Ch06.html#cb166-55" tabindex="-1"></a></span>
<span id="cb166-56"><a href="Ch06.html#cb166-56" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb166-57"><a href="Ch06.html#cb166-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb166-58"><a href="Ch06.html#cb166-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb166-59"><a href="Ch06.html#cb166-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb166-60"><a href="Ch06.html#cb166-60" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb166-61"><a href="Ch06.html#cb166-61" tabindex="-1"></a></span>
<span id="cb166-62"><a href="Ch06.html#cb166-62" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Trees-Builtup_cell.tif&quot;</span></span>
<span id="cb166-63"><a href="Ch06.html#cb166-63" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb166-64"><a href="Ch06.html#cb166-64" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb166-65"><a href="Ch06.html#cb166-65" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb166-66"><a href="Ch06.html#cb166-66" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb166-67"><a href="Ch06.html#cb166-67" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb166-68"><a href="Ch06.html#cb166-68" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb166-69"><a href="Ch06.html#cb166-69" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb166-70"><a href="Ch06.html#cb166-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb166-71"><a href="Ch06.html#cb166-71" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb166-72"><a href="Ch06.html#cb166-72" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb166-73"><a href="Ch06.html#cb166-73" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb166-74"><a href="Ch06.html#cb166-74" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_125.png" width="100%" /></p>
</div>
<div id="ch06.126" class="section level2 hasAnchor" number="6.126">
<h2><span class="header-section-number">6.126</span> Edges_Trees-Builtup_r500<a href="Ch06.html#ch06.126" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Trees-Builtup_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_126</code></p>
<p><strong>English name:</strong> Edge pixels of Trees bordering with Built-Up areas within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Koku malu ar apbūvi garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.125">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="Ch06.html#cb167-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb167-2"><a href="Ch06.html#cb167-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb167-3"><a href="Ch06.html#cb167-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb167-4"><a href="Ch06.html#cb167-4" tabindex="-1"></a></span>
<span id="cb167-5"><a href="Ch06.html#cb167-5" tabindex="-1"></a></span>
<span id="cb167-6"><a href="Ch06.html#cb167-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb167-7"><a href="Ch06.html#cb167-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb167-8"><a href="Ch06.html#cb167-8" tabindex="-1"></a></span>
<span id="cb167-9"><a href="Ch06.html#cb167-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb167-10"><a href="Ch06.html#cb167-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb167-11"><a href="Ch06.html#cb167-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb167-12"><a href="Ch06.html#cb167-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb167-13"><a href="Ch06.html#cb167-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb167-14"><a href="Ch06.html#cb167-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb167-15"><a href="Ch06.html#cb167-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_cell.tif&quot;</span>),</span>
<span id="cb167-16"><a href="Ch06.html#cb167-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Trees-Builtup&quot;</span>),</span>
<span id="cb167-17"><a href="Ch06.html#cb167-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb167-18"><a href="Ch06.html#cb167-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb167-19"><a href="Ch06.html#cb167-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb167-20"><a href="Ch06.html#cb167-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb167-21"><a href="Ch06.html#cb167-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb167-22"><a href="Ch06.html#cb167-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb167-23"><a href="Ch06.html#cb167-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb167-24"><a href="Ch06.html#cb167-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb167-25"><a href="Ch06.html#cb167-25" tabindex="-1"></a></span>
<span id="cb167-26"><a href="Ch06.html#cb167-26" tabindex="-1"></a></span>
<span id="cb167-27"><a href="Ch06.html#cb167-27" tabindex="-1"></a><span class="co"># Edges_Trees-Builtup_r500.tif  egv_126 ----</span></span>
<span id="cb167-28"><a href="Ch06.html#cb167-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_r500.tif&quot;</span>)</span>
<span id="cb167-29"><a href="Ch06.html#cb167-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_126&quot;</span></span>
<span id="cb167-30"><a href="Ch06.html#cb167-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb167-31"><a href="Ch06.html#cb167-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb167-32"><a href="Ch06.html#cb167-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_r500.tif&quot;</span>,</span>
<span id="cb167-33"><a href="Ch06.html#cb167-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb167-34"><a href="Ch06.html#cb167-34" tabindex="-1"></a></span>
<span id="cb167-35"><a href="Ch06.html#cb167-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb167-36"><a href="Ch06.html#cb167-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb167-37"><a href="Ch06.html#cb167-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb167-38"><a href="Ch06.html#cb167-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb167-39"><a href="Ch06.html#cb167-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb167-40"><a href="Ch06.html#cb167-40" tabindex="-1"></a></span>
<span id="cb167-41"><a href="Ch06.html#cb167-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Trees-Builtup_r500.tif&quot;</span></span>
<span id="cb167-42"><a href="Ch06.html#cb167-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb167-43"><a href="Ch06.html#cb167-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb167-44"><a href="Ch06.html#cb167-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb167-45"><a href="Ch06.html#cb167-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb167-46"><a href="Ch06.html#cb167-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb167-47"><a href="Ch06.html#cb167-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb167-48"><a href="Ch06.html#cb167-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb167-49"><a href="Ch06.html#cb167-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb167-50"><a href="Ch06.html#cb167-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb167-51"><a href="Ch06.html#cb167-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb167-52"><a href="Ch06.html#cb167-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb167-53"><a href="Ch06.html#cb167-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_126.png" width="100%" /></p>
</div>
<div id="ch06.127" class="section level2 hasAnchor" number="6.127">
<h2><span class="header-section-number">6.127</span> Edges_Trees-Builtup_r1250<a href="Ch06.html#ch06.127" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Trees-Builtup_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_127</code></p>
<p><strong>English name:</strong> Edge pixels of Trees bordering with Built-Up areas within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Koku malu ar apbūvi garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.125">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="Ch06.html#cb168-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb168-2"><a href="Ch06.html#cb168-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb168-3"><a href="Ch06.html#cb168-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb168-4"><a href="Ch06.html#cb168-4" tabindex="-1"></a></span>
<span id="cb168-5"><a href="Ch06.html#cb168-5" tabindex="-1"></a></span>
<span id="cb168-6"><a href="Ch06.html#cb168-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb168-7"><a href="Ch06.html#cb168-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb168-8"><a href="Ch06.html#cb168-8" tabindex="-1"></a></span>
<span id="cb168-9"><a href="Ch06.html#cb168-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb168-10"><a href="Ch06.html#cb168-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb168-11"><a href="Ch06.html#cb168-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb168-12"><a href="Ch06.html#cb168-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb168-13"><a href="Ch06.html#cb168-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb168-14"><a href="Ch06.html#cb168-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb168-15"><a href="Ch06.html#cb168-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_cell.tif&quot;</span>),</span>
<span id="cb168-16"><a href="Ch06.html#cb168-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Trees-Builtup&quot;</span>),</span>
<span id="cb168-17"><a href="Ch06.html#cb168-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb168-18"><a href="Ch06.html#cb168-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb168-19"><a href="Ch06.html#cb168-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb168-20"><a href="Ch06.html#cb168-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb168-21"><a href="Ch06.html#cb168-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb168-22"><a href="Ch06.html#cb168-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb168-23"><a href="Ch06.html#cb168-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb168-24"><a href="Ch06.html#cb168-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb168-25"><a href="Ch06.html#cb168-25" tabindex="-1"></a></span>
<span id="cb168-26"><a href="Ch06.html#cb168-26" tabindex="-1"></a></span>
<span id="cb168-27"><a href="Ch06.html#cb168-27" tabindex="-1"></a><span class="co"># Edges_Trees-Builtup_r1250.tif egv_127 ----</span></span>
<span id="cb168-28"><a href="Ch06.html#cb168-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_r1250.tif&quot;</span>)</span>
<span id="cb168-29"><a href="Ch06.html#cb168-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_127&quot;</span></span>
<span id="cb168-30"><a href="Ch06.html#cb168-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb168-31"><a href="Ch06.html#cb168-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb168-32"><a href="Ch06.html#cb168-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_r1250.tif&quot;</span>,</span>
<span id="cb168-33"><a href="Ch06.html#cb168-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb168-34"><a href="Ch06.html#cb168-34" tabindex="-1"></a></span>
<span id="cb168-35"><a href="Ch06.html#cb168-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb168-36"><a href="Ch06.html#cb168-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb168-37"><a href="Ch06.html#cb168-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb168-38"><a href="Ch06.html#cb168-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb168-39"><a href="Ch06.html#cb168-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb168-40"><a href="Ch06.html#cb168-40" tabindex="-1"></a></span>
<span id="cb168-41"><a href="Ch06.html#cb168-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Trees-Builtup_r1250.tif&quot;</span></span>
<span id="cb168-42"><a href="Ch06.html#cb168-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb168-43"><a href="Ch06.html#cb168-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb168-44"><a href="Ch06.html#cb168-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb168-45"><a href="Ch06.html#cb168-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb168-46"><a href="Ch06.html#cb168-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb168-47"><a href="Ch06.html#cb168-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb168-48"><a href="Ch06.html#cb168-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb168-49"><a href="Ch06.html#cb168-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb168-50"><a href="Ch06.html#cb168-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb168-51"><a href="Ch06.html#cb168-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb168-52"><a href="Ch06.html#cb168-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb168-53"><a href="Ch06.html#cb168-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_127.png" width="100%" /></p>
</div>
<div id="ch06.128" class="section level2 hasAnchor" number="6.128">
<h2><span class="header-section-number">6.128</span> Edges_Trees-Builtup_r3000<a href="Ch06.html#ch06.128" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Trees-Builtup_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_128</code></p>
<p><strong>English name:</strong> Edge pixels of Trees bordering with Built-Up areas within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Koku malu ar apbūvi garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.125">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="Ch06.html#cb169-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb169-2"><a href="Ch06.html#cb169-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb169-3"><a href="Ch06.html#cb169-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb169-4"><a href="Ch06.html#cb169-4" tabindex="-1"></a></span>
<span id="cb169-5"><a href="Ch06.html#cb169-5" tabindex="-1"></a></span>
<span id="cb169-6"><a href="Ch06.html#cb169-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb169-7"><a href="Ch06.html#cb169-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb169-8"><a href="Ch06.html#cb169-8" tabindex="-1"></a></span>
<span id="cb169-9"><a href="Ch06.html#cb169-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb169-10"><a href="Ch06.html#cb169-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb169-11"><a href="Ch06.html#cb169-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb169-12"><a href="Ch06.html#cb169-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb169-13"><a href="Ch06.html#cb169-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb169-14"><a href="Ch06.html#cb169-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb169-15"><a href="Ch06.html#cb169-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_cell.tif&quot;</span>),</span>
<span id="cb169-16"><a href="Ch06.html#cb169-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Trees-Builtup&quot;</span>),</span>
<span id="cb169-17"><a href="Ch06.html#cb169-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb169-18"><a href="Ch06.html#cb169-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb169-19"><a href="Ch06.html#cb169-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb169-20"><a href="Ch06.html#cb169-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb169-21"><a href="Ch06.html#cb169-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb169-22"><a href="Ch06.html#cb169-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb169-23"><a href="Ch06.html#cb169-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb169-24"><a href="Ch06.html#cb169-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb169-25"><a href="Ch06.html#cb169-25" tabindex="-1"></a></span>
<span id="cb169-26"><a href="Ch06.html#cb169-26" tabindex="-1"></a></span>
<span id="cb169-27"><a href="Ch06.html#cb169-27" tabindex="-1"></a><span class="co"># Edges_Trees-Builtup_r3000.tif egv_128 ----</span></span>
<span id="cb169-28"><a href="Ch06.html#cb169-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_r3000.tif&quot;</span>)</span>
<span id="cb169-29"><a href="Ch06.html#cb169-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_128&quot;</span></span>
<span id="cb169-30"><a href="Ch06.html#cb169-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb169-31"><a href="Ch06.html#cb169-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb169-32"><a href="Ch06.html#cb169-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_r3000.tif&quot;</span>,</span>
<span id="cb169-33"><a href="Ch06.html#cb169-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb169-34"><a href="Ch06.html#cb169-34" tabindex="-1"></a></span>
<span id="cb169-35"><a href="Ch06.html#cb169-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb169-36"><a href="Ch06.html#cb169-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb169-37"><a href="Ch06.html#cb169-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb169-38"><a href="Ch06.html#cb169-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb169-39"><a href="Ch06.html#cb169-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb169-40"><a href="Ch06.html#cb169-40" tabindex="-1"></a></span>
<span id="cb169-41"><a href="Ch06.html#cb169-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Trees-Builtup_r3000.tif&quot;</span></span>
<span id="cb169-42"><a href="Ch06.html#cb169-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb169-43"><a href="Ch06.html#cb169-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb169-44"><a href="Ch06.html#cb169-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb169-45"><a href="Ch06.html#cb169-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb169-46"><a href="Ch06.html#cb169-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb169-47"><a href="Ch06.html#cb169-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb169-48"><a href="Ch06.html#cb169-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb169-49"><a href="Ch06.html#cb169-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb169-50"><a href="Ch06.html#cb169-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb169-51"><a href="Ch06.html#cb169-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb169-52"><a href="Ch06.html#cb169-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb169-53"><a href="Ch06.html#cb169-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_128.png" width="100%" /></p>
</div>
<div id="ch06.129" class="section level2 hasAnchor" number="6.129">
<h2><span class="header-section-number">6.129</span> Edges_Trees-Builtup_r10000<a href="Ch06.html#ch06.129" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Trees-Builtup_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_129</code></p>
<p><strong>English name:</strong> Edge pixels of Trees bordering with Built-Up areas within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Koku malu ar apbūvi garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.125">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="Ch06.html#cb170-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb170-2"><a href="Ch06.html#cb170-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb170-3"><a href="Ch06.html#cb170-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb170-4"><a href="Ch06.html#cb170-4" tabindex="-1"></a></span>
<span id="cb170-5"><a href="Ch06.html#cb170-5" tabindex="-1"></a></span>
<span id="cb170-6"><a href="Ch06.html#cb170-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb170-7"><a href="Ch06.html#cb170-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb170-8"><a href="Ch06.html#cb170-8" tabindex="-1"></a></span>
<span id="cb170-9"><a href="Ch06.html#cb170-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb170-10"><a href="Ch06.html#cb170-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb170-11"><a href="Ch06.html#cb170-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb170-12"><a href="Ch06.html#cb170-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb170-13"><a href="Ch06.html#cb170-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb170-14"><a href="Ch06.html#cb170-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb170-15"><a href="Ch06.html#cb170-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_cell.tif&quot;</span>),</span>
<span id="cb170-16"><a href="Ch06.html#cb170-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Trees-Builtup&quot;</span>),</span>
<span id="cb170-17"><a href="Ch06.html#cb170-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb170-18"><a href="Ch06.html#cb170-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb170-19"><a href="Ch06.html#cb170-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb170-20"><a href="Ch06.html#cb170-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb170-21"><a href="Ch06.html#cb170-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb170-22"><a href="Ch06.html#cb170-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb170-23"><a href="Ch06.html#cb170-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb170-24"><a href="Ch06.html#cb170-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb170-25"><a href="Ch06.html#cb170-25" tabindex="-1"></a></span>
<span id="cb170-26"><a href="Ch06.html#cb170-26" tabindex="-1"></a></span>
<span id="cb170-27"><a href="Ch06.html#cb170-27" tabindex="-1"></a><span class="co"># Edges_Trees-Builtup_r10000.tif    egv_129 ----</span></span>
<span id="cb170-28"><a href="Ch06.html#cb170-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_r10000.tif&quot;</span>)</span>
<span id="cb170-29"><a href="Ch06.html#cb170-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_129&quot;</span></span>
<span id="cb170-30"><a href="Ch06.html#cb170-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb170-31"><a href="Ch06.html#cb170-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb170-32"><a href="Ch06.html#cb170-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees-Builtup_r10000.tif&quot;</span>,</span>
<span id="cb170-33"><a href="Ch06.html#cb170-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb170-34"><a href="Ch06.html#cb170-34" tabindex="-1"></a></span>
<span id="cb170-35"><a href="Ch06.html#cb170-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb170-36"><a href="Ch06.html#cb170-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb170-37"><a href="Ch06.html#cb170-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb170-38"><a href="Ch06.html#cb170-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb170-39"><a href="Ch06.html#cb170-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb170-40"><a href="Ch06.html#cb170-40" tabindex="-1"></a></span>
<span id="cb170-41"><a href="Ch06.html#cb170-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Trees-Builtup_r10000.tif&quot;</span></span>
<span id="cb170-42"><a href="Ch06.html#cb170-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb170-43"><a href="Ch06.html#cb170-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb170-44"><a href="Ch06.html#cb170-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb170-45"><a href="Ch06.html#cb170-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb170-46"><a href="Ch06.html#cb170-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb170-47"><a href="Ch06.html#cb170-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb170-48"><a href="Ch06.html#cb170-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb170-49"><a href="Ch06.html#cb170-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb170-50"><a href="Ch06.html#cb170-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb170-51"><a href="Ch06.html#cb170-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb170-52"><a href="Ch06.html#cb170-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb170-53"><a href="Ch06.html#cb170-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_129.png" width="100%" /></p>
</div>
<div id="ch06.130" class="section level2 hasAnchor" number="6.130">
<h2><span class="header-section-number">6.130</span> Edges_CropsFallow_cell<a href="Ch06.html#ch06.130" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_CropsFallow_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_130</code></p>
<p><strong>English name:</strong> Edge pixels of Cropland, Fallow land within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Aramzemju malu garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values larger than or equal to 310 and smaller than 325 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then, the layer (1=presence) is covered over
the nulls layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="Ch06.html#cb171-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb171-2"><a href="Ch06.html#cb171-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb171-3"><a href="Ch06.html#cb171-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb171-4"><a href="Ch06.html#cb171-4" tabindex="-1"></a></span>
<span id="cb171-5"><a href="Ch06.html#cb171-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb171-6"><a href="Ch06.html#cb171-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb171-7"><a href="Ch06.html#cb171-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb171-8"><a href="Ch06.html#cb171-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb171-9"><a href="Ch06.html#cb171-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb171-10"><a href="Ch06.html#cb171-10" tabindex="-1"></a></span>
<span id="cb171-11"><a href="Ch06.html#cb171-11" tabindex="-1"></a></span>
<span id="cb171-12"><a href="Ch06.html#cb171-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb171-13"><a href="Ch06.html#cb171-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb171-14"><a href="Ch06.html#cb171-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb171-15"><a href="Ch06.html#cb171-15" tabindex="-1"></a></span>
<span id="cb171-16"><a href="Ch06.html#cb171-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb171-17"><a href="Ch06.html#cb171-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb171-18"><a href="Ch06.html#cb171-18" tabindex="-1"></a></span>
<span id="cb171-19"><a href="Ch06.html#cb171-19" tabindex="-1"></a><span class="co"># Edges_CropsFallow_input.tif ----</span></span>
<span id="cb171-20"><a href="Ch06.html#cb171-20" tabindex="-1"></a>cropsfallow<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">&gt;=</span><span class="dv">310</span> <span class="sc">&amp;</span> simple_landscape<span class="sc">&lt;</span><span class="dv">325</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb171-21"><a href="Ch06.html#cb171-21" tabindex="-1"></a><span class="fu">plot</span>(cropsfallow)</span>
<span id="cb171-22"><a href="Ch06.html#cb171-22" tabindex="-1"></a>cropsfallow<span class="ot">=</span><span class="fu">cover</span>(cropsfallow,nulls10)</span>
<span id="cb171-23"><a href="Ch06.html#cb171-23" tabindex="-1"></a><span class="fu">plot</span>(cropsfallow)</span>
<span id="cb171-24"><a href="Ch06.html#cb171-24" tabindex="-1"></a></span>
<span id="cb171-25"><a href="Ch06.html#cb171-25" tabindex="-1"></a>edge_cropsfallow<span class="ot">=</span><span class="fu">project</span>(cropsfallow,template10,</span>
<span id="cb171-26"><a href="Ch06.html#cb171-26" tabindex="-1"></a>                       <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_CropsFallow_input.tif&quot;</span>,</span>
<span id="cb171-27"><a href="Ch06.html#cb171-27" tabindex="-1"></a>                       <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb171-28"><a href="Ch06.html#cb171-28" tabindex="-1"></a><span class="fu">rm</span>(edge_cropsfallow)</span>
<span id="cb171-29"><a href="Ch06.html#cb171-29" tabindex="-1"></a></span>
<span id="cb171-30"><a href="Ch06.html#cb171-30" tabindex="-1"></a></span>
<span id="cb171-31"><a href="Ch06.html#cb171-31" tabindex="-1"></a><span class="co"># Edges_CropsFallow_cell.tif    egv_130 ----</span></span>
<span id="cb171-32"><a href="Ch06.html#cb171-32" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb171-33"><a href="Ch06.html#cb171-33" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_CropsFallow_input.tif&quot;</span>,</span>
<span id="cb171-34"><a href="Ch06.html#cb171-34" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb171-35"><a href="Ch06.html#cb171-35" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb171-36"><a href="Ch06.html#cb171-36" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb171-37"><a href="Ch06.html#cb171-37" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb171-38"><a href="Ch06.html#cb171-38" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb171-39"><a href="Ch06.html#cb171-39" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_CropsFallow_cell.tif&quot;</span>,</span>
<span id="cb171-40"><a href="Ch06.html#cb171-40" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_130&quot;</span>,</span>
<span id="cb171-41"><a href="Ch06.html#cb171-41" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb171-42"><a href="Ch06.html#cb171-42" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb171-43"><a href="Ch06.html#cb171-43" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb171-44"><a href="Ch06.html#cb171-44" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb171-45"><a href="Ch06.html#cb171-45" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb171-46"><a href="Ch06.html#cb171-46" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb171-47"><a href="Ch06.html#cb171-47" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb171-48"><a href="Ch06.html#cb171-48" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb171-49"><a href="Ch06.html#cb171-49" tabindex="-1"></a>)</span>
<span id="cb171-50"><a href="Ch06.html#cb171-50" tabindex="-1"></a></span>
<span id="cb171-51"><a href="Ch06.html#cb171-51" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb171-52"><a href="Ch06.html#cb171-52" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb171-53"><a href="Ch06.html#cb171-53" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb171-54"><a href="Ch06.html#cb171-54" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb171-55"><a href="Ch06.html#cb171-55" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb171-56"><a href="Ch06.html#cb171-56" tabindex="-1"></a></span>
<span id="cb171-57"><a href="Ch06.html#cb171-57" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_CropsFallow_cell.tif&quot;</span></span>
<span id="cb171-58"><a href="Ch06.html#cb171-58" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb171-59"><a href="Ch06.html#cb171-59" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb171-60"><a href="Ch06.html#cb171-60" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb171-61"><a href="Ch06.html#cb171-61" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb171-62"><a href="Ch06.html#cb171-62" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb171-63"><a href="Ch06.html#cb171-63" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb171-64"><a href="Ch06.html#cb171-64" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb171-65"><a href="Ch06.html#cb171-65" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb171-66"><a href="Ch06.html#cb171-66" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb171-67"><a href="Ch06.html#cb171-67" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb171-68"><a href="Ch06.html#cb171-68" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb171-69"><a href="Ch06.html#cb171-69" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_130.png" width="100%" /></p>
</div>
<div id="ch06.131" class="section level2 hasAnchor" number="6.131">
<h2><span class="header-section-number">6.131</span> Edges_CropsFallow_r500<a href="Ch06.html#ch06.131" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_CropsFallow_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_131</code></p>
<p><strong>English name:</strong> Edge pixels of Cropland, Fallow land within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju malu garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.130">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="Ch06.html#cb172-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb172-2"><a href="Ch06.html#cb172-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb172-3"><a href="Ch06.html#cb172-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb172-4"><a href="Ch06.html#cb172-4" tabindex="-1"></a></span>
<span id="cb172-5"><a href="Ch06.html#cb172-5" tabindex="-1"></a></span>
<span id="cb172-6"><a href="Ch06.html#cb172-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb172-7"><a href="Ch06.html#cb172-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb172-8"><a href="Ch06.html#cb172-8" tabindex="-1"></a></span>
<span id="cb172-9"><a href="Ch06.html#cb172-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb172-10"><a href="Ch06.html#cb172-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb172-11"><a href="Ch06.html#cb172-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb172-12"><a href="Ch06.html#cb172-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb172-13"><a href="Ch06.html#cb172-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb172-14"><a href="Ch06.html#cb172-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb172-15"><a href="Ch06.html#cb172-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_cell.tif&quot;</span>),</span>
<span id="cb172-16"><a href="Ch06.html#cb172-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_CropsFallow&quot;</span>),</span>
<span id="cb172-17"><a href="Ch06.html#cb172-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb172-18"><a href="Ch06.html#cb172-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb172-19"><a href="Ch06.html#cb172-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb172-20"><a href="Ch06.html#cb172-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb172-21"><a href="Ch06.html#cb172-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb172-22"><a href="Ch06.html#cb172-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb172-23"><a href="Ch06.html#cb172-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb172-24"><a href="Ch06.html#cb172-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb172-25"><a href="Ch06.html#cb172-25" tabindex="-1"></a></span>
<span id="cb172-26"><a href="Ch06.html#cb172-26" tabindex="-1"></a></span>
<span id="cb172-27"><a href="Ch06.html#cb172-27" tabindex="-1"></a><span class="co"># Edges_CropsFallow_r500.tif    egv_131 ----</span></span>
<span id="cb172-28"><a href="Ch06.html#cb172-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_r500.tif&quot;</span>)</span>
<span id="cb172-29"><a href="Ch06.html#cb172-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_131&quot;</span></span>
<span id="cb172-30"><a href="Ch06.html#cb172-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb172-31"><a href="Ch06.html#cb172-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb172-32"><a href="Ch06.html#cb172-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_r500.tif&quot;</span>,</span>
<span id="cb172-33"><a href="Ch06.html#cb172-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb172-34"><a href="Ch06.html#cb172-34" tabindex="-1"></a></span>
<span id="cb172-35"><a href="Ch06.html#cb172-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb172-36"><a href="Ch06.html#cb172-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb172-37"><a href="Ch06.html#cb172-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb172-38"><a href="Ch06.html#cb172-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb172-39"><a href="Ch06.html#cb172-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb172-40"><a href="Ch06.html#cb172-40" tabindex="-1"></a></span>
<span id="cb172-41"><a href="Ch06.html#cb172-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_CropsFallow_r500.tif&quot;</span></span>
<span id="cb172-42"><a href="Ch06.html#cb172-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb172-43"><a href="Ch06.html#cb172-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb172-44"><a href="Ch06.html#cb172-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb172-45"><a href="Ch06.html#cb172-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb172-46"><a href="Ch06.html#cb172-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb172-47"><a href="Ch06.html#cb172-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb172-48"><a href="Ch06.html#cb172-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb172-49"><a href="Ch06.html#cb172-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb172-50"><a href="Ch06.html#cb172-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb172-51"><a href="Ch06.html#cb172-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb172-52"><a href="Ch06.html#cb172-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb172-53"><a href="Ch06.html#cb172-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_131.png" width="100%" /></p>
</div>
<div id="ch06.132" class="section level2 hasAnchor" number="6.132">
<h2><span class="header-section-number">6.132</span> Edges_CropsFallow_r1250<a href="Ch06.html#ch06.132" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_CropsFallow_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_132</code></p>
<p><strong>English name:</strong> Edge pixels of Cropland, Fallow land within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju malu garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.130">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="Ch06.html#cb173-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb173-2"><a href="Ch06.html#cb173-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb173-3"><a href="Ch06.html#cb173-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb173-4"><a href="Ch06.html#cb173-4" tabindex="-1"></a></span>
<span id="cb173-5"><a href="Ch06.html#cb173-5" tabindex="-1"></a></span>
<span id="cb173-6"><a href="Ch06.html#cb173-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb173-7"><a href="Ch06.html#cb173-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb173-8"><a href="Ch06.html#cb173-8" tabindex="-1"></a></span>
<span id="cb173-9"><a href="Ch06.html#cb173-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb173-10"><a href="Ch06.html#cb173-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb173-11"><a href="Ch06.html#cb173-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb173-12"><a href="Ch06.html#cb173-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb173-13"><a href="Ch06.html#cb173-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb173-14"><a href="Ch06.html#cb173-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb173-15"><a href="Ch06.html#cb173-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_cell.tif&quot;</span>),</span>
<span id="cb173-16"><a href="Ch06.html#cb173-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_CropsFallow&quot;</span>),</span>
<span id="cb173-17"><a href="Ch06.html#cb173-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb173-18"><a href="Ch06.html#cb173-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb173-19"><a href="Ch06.html#cb173-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb173-20"><a href="Ch06.html#cb173-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb173-21"><a href="Ch06.html#cb173-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb173-22"><a href="Ch06.html#cb173-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb173-23"><a href="Ch06.html#cb173-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb173-24"><a href="Ch06.html#cb173-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb173-25"><a href="Ch06.html#cb173-25" tabindex="-1"></a></span>
<span id="cb173-26"><a href="Ch06.html#cb173-26" tabindex="-1"></a></span>
<span id="cb173-27"><a href="Ch06.html#cb173-27" tabindex="-1"></a><span class="co"># Edges_CropsFallow_r1250.tif   egv_132 ----</span></span>
<span id="cb173-28"><a href="Ch06.html#cb173-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_r1250.tif&quot;</span>)</span>
<span id="cb173-29"><a href="Ch06.html#cb173-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_132&quot;</span></span>
<span id="cb173-30"><a href="Ch06.html#cb173-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb173-31"><a href="Ch06.html#cb173-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb173-32"><a href="Ch06.html#cb173-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_r1250.tif&quot;</span>,</span>
<span id="cb173-33"><a href="Ch06.html#cb173-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb173-34"><a href="Ch06.html#cb173-34" tabindex="-1"></a></span>
<span id="cb173-35"><a href="Ch06.html#cb173-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb173-36"><a href="Ch06.html#cb173-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb173-37"><a href="Ch06.html#cb173-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb173-38"><a href="Ch06.html#cb173-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb173-39"><a href="Ch06.html#cb173-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb173-40"><a href="Ch06.html#cb173-40" tabindex="-1"></a></span>
<span id="cb173-41"><a href="Ch06.html#cb173-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_CropsFallow_r1250.tif&quot;</span></span>
<span id="cb173-42"><a href="Ch06.html#cb173-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb173-43"><a href="Ch06.html#cb173-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb173-44"><a href="Ch06.html#cb173-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb173-45"><a href="Ch06.html#cb173-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb173-46"><a href="Ch06.html#cb173-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb173-47"><a href="Ch06.html#cb173-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb173-48"><a href="Ch06.html#cb173-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb173-49"><a href="Ch06.html#cb173-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb173-50"><a href="Ch06.html#cb173-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb173-51"><a href="Ch06.html#cb173-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb173-52"><a href="Ch06.html#cb173-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb173-53"><a href="Ch06.html#cb173-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_132.png" width="100%" /></p>
</div>
<div id="ch06.133" class="section level2 hasAnchor" number="6.133">
<h2><span class="header-section-number">6.133</span> Edges_CropsFallow_r3000<a href="Ch06.html#ch06.133" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_CropsFallow_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_133</code></p>
<p><strong>English name:</strong> Edge pixels of Cropland, Fallow land within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju malu garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.130">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="Ch06.html#cb174-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb174-2"><a href="Ch06.html#cb174-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb174-3"><a href="Ch06.html#cb174-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb174-4"><a href="Ch06.html#cb174-4" tabindex="-1"></a></span>
<span id="cb174-5"><a href="Ch06.html#cb174-5" tabindex="-1"></a></span>
<span id="cb174-6"><a href="Ch06.html#cb174-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb174-7"><a href="Ch06.html#cb174-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb174-8"><a href="Ch06.html#cb174-8" tabindex="-1"></a></span>
<span id="cb174-9"><a href="Ch06.html#cb174-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb174-10"><a href="Ch06.html#cb174-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb174-11"><a href="Ch06.html#cb174-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb174-12"><a href="Ch06.html#cb174-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb174-13"><a href="Ch06.html#cb174-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb174-14"><a href="Ch06.html#cb174-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb174-15"><a href="Ch06.html#cb174-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_cell.tif&quot;</span>),</span>
<span id="cb174-16"><a href="Ch06.html#cb174-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_CropsFallow&quot;</span>),</span>
<span id="cb174-17"><a href="Ch06.html#cb174-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb174-18"><a href="Ch06.html#cb174-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb174-19"><a href="Ch06.html#cb174-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb174-20"><a href="Ch06.html#cb174-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb174-21"><a href="Ch06.html#cb174-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb174-22"><a href="Ch06.html#cb174-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb174-23"><a href="Ch06.html#cb174-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb174-24"><a href="Ch06.html#cb174-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb174-25"><a href="Ch06.html#cb174-25" tabindex="-1"></a></span>
<span id="cb174-26"><a href="Ch06.html#cb174-26" tabindex="-1"></a></span>
<span id="cb174-27"><a href="Ch06.html#cb174-27" tabindex="-1"></a><span class="co"># Edges_CropsFallow_r3000.tif   egv_133 ----</span></span>
<span id="cb174-28"><a href="Ch06.html#cb174-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_r3000.tif&quot;</span>)</span>
<span id="cb174-29"><a href="Ch06.html#cb174-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_133&quot;</span></span>
<span id="cb174-30"><a href="Ch06.html#cb174-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb174-31"><a href="Ch06.html#cb174-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb174-32"><a href="Ch06.html#cb174-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_r3000.tif&quot;</span>,</span>
<span id="cb174-33"><a href="Ch06.html#cb174-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb174-34"><a href="Ch06.html#cb174-34" tabindex="-1"></a></span>
<span id="cb174-35"><a href="Ch06.html#cb174-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb174-36"><a href="Ch06.html#cb174-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb174-37"><a href="Ch06.html#cb174-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb174-38"><a href="Ch06.html#cb174-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb174-39"><a href="Ch06.html#cb174-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb174-40"><a href="Ch06.html#cb174-40" tabindex="-1"></a></span>
<span id="cb174-41"><a href="Ch06.html#cb174-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_CropsFallow_r3000.tif&quot;</span></span>
<span id="cb174-42"><a href="Ch06.html#cb174-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb174-43"><a href="Ch06.html#cb174-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb174-44"><a href="Ch06.html#cb174-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb174-45"><a href="Ch06.html#cb174-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb174-46"><a href="Ch06.html#cb174-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb174-47"><a href="Ch06.html#cb174-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb174-48"><a href="Ch06.html#cb174-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb174-49"><a href="Ch06.html#cb174-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb174-50"><a href="Ch06.html#cb174-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb174-51"><a href="Ch06.html#cb174-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb174-52"><a href="Ch06.html#cb174-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb174-53"><a href="Ch06.html#cb174-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_133.png" width="100%" /></p>
</div>
<div id="ch06.134" class="section level2 hasAnchor" number="6.134">
<h2><span class="header-section-number">6.134</span> Edges_CropsFallow_r10000<a href="Ch06.html#ch06.134" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_CropsFallow_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_134</code></p>
<p><strong>English name:</strong> Edge pixels of Cropland, Fallow land within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju malu garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.130">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="Ch06.html#cb175-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb175-2"><a href="Ch06.html#cb175-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb175-3"><a href="Ch06.html#cb175-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb175-4"><a href="Ch06.html#cb175-4" tabindex="-1"></a></span>
<span id="cb175-5"><a href="Ch06.html#cb175-5" tabindex="-1"></a></span>
<span id="cb175-6"><a href="Ch06.html#cb175-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb175-7"><a href="Ch06.html#cb175-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb175-8"><a href="Ch06.html#cb175-8" tabindex="-1"></a></span>
<span id="cb175-9"><a href="Ch06.html#cb175-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb175-10"><a href="Ch06.html#cb175-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb175-11"><a href="Ch06.html#cb175-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb175-12"><a href="Ch06.html#cb175-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb175-13"><a href="Ch06.html#cb175-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb175-14"><a href="Ch06.html#cb175-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb175-15"><a href="Ch06.html#cb175-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_cell.tif&quot;</span>),</span>
<span id="cb175-16"><a href="Ch06.html#cb175-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_CropsFallow&quot;</span>),</span>
<span id="cb175-17"><a href="Ch06.html#cb175-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb175-18"><a href="Ch06.html#cb175-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb175-19"><a href="Ch06.html#cb175-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb175-20"><a href="Ch06.html#cb175-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb175-21"><a href="Ch06.html#cb175-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb175-22"><a href="Ch06.html#cb175-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb175-23"><a href="Ch06.html#cb175-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb175-24"><a href="Ch06.html#cb175-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb175-25"><a href="Ch06.html#cb175-25" tabindex="-1"></a></span>
<span id="cb175-26"><a href="Ch06.html#cb175-26" tabindex="-1"></a></span>
<span id="cb175-27"><a href="Ch06.html#cb175-27" tabindex="-1"></a><span class="co"># Edges_CropsFallow_r10000.tif  egv_134 ----</span></span>
<span id="cb175-28"><a href="Ch06.html#cb175-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_r10000.tif&quot;</span>)</span>
<span id="cb175-29"><a href="Ch06.html#cb175-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_134&quot;</span></span>
<span id="cb175-30"><a href="Ch06.html#cb175-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb175-31"><a href="Ch06.html#cb175-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb175-32"><a href="Ch06.html#cb175-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_CropsFallow_r10000.tif&quot;</span>,</span>
<span id="cb175-33"><a href="Ch06.html#cb175-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb175-34"><a href="Ch06.html#cb175-34" tabindex="-1"></a></span>
<span id="cb175-35"><a href="Ch06.html#cb175-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb175-36"><a href="Ch06.html#cb175-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb175-37"><a href="Ch06.html#cb175-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb175-38"><a href="Ch06.html#cb175-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb175-39"><a href="Ch06.html#cb175-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb175-40"><a href="Ch06.html#cb175-40" tabindex="-1"></a></span>
<span id="cb175-41"><a href="Ch06.html#cb175-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_CropsFallow_r10000.tif&quot;</span></span>
<span id="cb175-42"><a href="Ch06.html#cb175-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb175-43"><a href="Ch06.html#cb175-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb175-44"><a href="Ch06.html#cb175-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb175-45"><a href="Ch06.html#cb175-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb175-46"><a href="Ch06.html#cb175-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb175-47"><a href="Ch06.html#cb175-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb175-48"><a href="Ch06.html#cb175-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb175-49"><a href="Ch06.html#cb175-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb175-50"><a href="Ch06.html#cb175-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb175-51"><a href="Ch06.html#cb175-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb175-52"><a href="Ch06.html#cb175-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb175-53"><a href="Ch06.html#cb175-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_134.png" width="100%" /></p>
</div>
<div id="ch06.135" class="section level2 hasAnchor" number="6.135">
<h2><span class="header-section-number">6.135</span> Edges_FarmlandShrubs-Trees_cell<a href="Ch06.html#ch06.135" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_FarmlandShrubs-Trees_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_135</code></p>
<p><strong>English name:</strong> Edge pixels of Farmland, Clear-Cuts, Shrubs bordering with Trees within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Lauksaimniecības zemju, izcirtumu, krūmu malu ar kokiem garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values between 300 and 400 and between 600 and 630 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 0 and everything else as NA. Then values larger than or equal to 630 to 700 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then, the first layer (1=presence) is covered over
the second layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="Ch06.html#cb176-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb176-2"><a href="Ch06.html#cb176-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb176-3"><a href="Ch06.html#cb176-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb176-4"><a href="Ch06.html#cb176-4" tabindex="-1"></a></span>
<span id="cb176-5"><a href="Ch06.html#cb176-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb176-6"><a href="Ch06.html#cb176-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb176-7"><a href="Ch06.html#cb176-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb176-8"><a href="Ch06.html#cb176-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb176-9"><a href="Ch06.html#cb176-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb176-10"><a href="Ch06.html#cb176-10" tabindex="-1"></a></span>
<span id="cb176-11"><a href="Ch06.html#cb176-11" tabindex="-1"></a></span>
<span id="cb176-12"><a href="Ch06.html#cb176-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb176-13"><a href="Ch06.html#cb176-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb176-14"><a href="Ch06.html#cb176-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb176-15"><a href="Ch06.html#cb176-15" tabindex="-1"></a></span>
<span id="cb176-16"><a href="Ch06.html#cb176-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb176-17"><a href="Ch06.html#cb176-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb176-18"><a href="Ch06.html#cb176-18" tabindex="-1"></a></span>
<span id="cb176-19"><a href="Ch06.html#cb176-19" tabindex="-1"></a><span class="co"># Edges_FarmlandShrubs-Trees_input.tif ----</span></span>
<span id="cb176-20"><a href="Ch06.html#cb176-20" tabindex="-1"></a>farmshrub<span class="ot">=</span><span class="fu">ifel</span>((simple_landscape<span class="sc">&gt;</span><span class="dv">300</span> <span class="sc">&amp;</span> simple_landscape<span class="sc">&lt;</span><span class="dv">400</span>)<span class="sc">|</span></span>
<span id="cb176-21"><a href="Ch06.html#cb176-21" tabindex="-1"></a>                 (simple_landscape<span class="sc">&gt;</span><span class="dv">600</span> <span class="sc">&amp;</span> simple_landscape<span class="sc">&lt;</span><span class="dv">630</span>),<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb176-22"><a href="Ch06.html#cb176-22" tabindex="-1"></a></span>
<span id="cb176-23"><a href="Ch06.html#cb176-23" tabindex="-1"></a>trees_from630<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">&gt;=</span><span class="dv">630</span> <span class="sc">&amp;</span> simple_landscape<span class="sc">&lt;</span><span class="dv">700</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb176-24"><a href="Ch06.html#cb176-24" tabindex="-1"></a><span class="fu">plot</span>(trees_from630)</span>
<span id="cb176-25"><a href="Ch06.html#cb176-25" tabindex="-1"></a></span>
<span id="cb176-26"><a href="Ch06.html#cb176-26" tabindex="-1"></a>farmshrub_trees630<span class="ot">=</span><span class="fu">cover</span>(farmshrub,trees_from630)</span>
<span id="cb176-27"><a href="Ch06.html#cb176-27" tabindex="-1"></a><span class="fu">plot</span>(farmshrub_trees630)</span>
<span id="cb176-28"><a href="Ch06.html#cb176-28" tabindex="-1"></a></span>
<span id="cb176-29"><a href="Ch06.html#cb176-29" tabindex="-1"></a>edge_farmshrub_trees630<span class="ot">=</span><span class="fu">project</span>(farmshrub_trees630,template10,</span>
<span id="cb176-30"><a href="Ch06.html#cb176-30" tabindex="-1"></a>                              <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_FarmlandShrubs-Trees_input.tif&quot;</span>,</span>
<span id="cb176-31"><a href="Ch06.html#cb176-31" tabindex="-1"></a>                              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb176-32"><a href="Ch06.html#cb176-32" tabindex="-1"></a><span class="fu">rm</span>(edge_farmshrub_trees630)</span>
<span id="cb176-33"><a href="Ch06.html#cb176-33" tabindex="-1"></a><span class="fu">rm</span>(farmshrub_trees630)</span>
<span id="cb176-34"><a href="Ch06.html#cb176-34" tabindex="-1"></a></span>
<span id="cb176-35"><a href="Ch06.html#cb176-35" tabindex="-1"></a></span>
<span id="cb176-36"><a href="Ch06.html#cb176-36" tabindex="-1"></a><span class="co"># Edges_FarmlandShrubs-Trees_cell.tif   egv_135 ----</span></span>
<span id="cb176-37"><a href="Ch06.html#cb176-37" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb176-38"><a href="Ch06.html#cb176-38" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_FarmlandShrubs-Trees_input.tif&quot;</span>,</span>
<span id="cb176-39"><a href="Ch06.html#cb176-39" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb176-40"><a href="Ch06.html#cb176-40" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb176-41"><a href="Ch06.html#cb176-41" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb176-42"><a href="Ch06.html#cb176-42" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb176-43"><a href="Ch06.html#cb176-43" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb176-44"><a href="Ch06.html#cb176-44" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_FarmlandShrubs-Trees_cell.tif&quot;</span>,</span>
<span id="cb176-45"><a href="Ch06.html#cb176-45" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_135&quot;</span>,</span>
<span id="cb176-46"><a href="Ch06.html#cb176-46" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb176-47"><a href="Ch06.html#cb176-47" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb176-48"><a href="Ch06.html#cb176-48" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb176-49"><a href="Ch06.html#cb176-49" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb176-50"><a href="Ch06.html#cb176-50" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb176-51"><a href="Ch06.html#cb176-51" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb176-52"><a href="Ch06.html#cb176-52" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb176-53"><a href="Ch06.html#cb176-53" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb176-54"><a href="Ch06.html#cb176-54" tabindex="-1"></a>)</span>
<span id="cb176-55"><a href="Ch06.html#cb176-55" tabindex="-1"></a></span>
<span id="cb176-56"><a href="Ch06.html#cb176-56" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb176-57"><a href="Ch06.html#cb176-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb176-58"><a href="Ch06.html#cb176-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb176-59"><a href="Ch06.html#cb176-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb176-60"><a href="Ch06.html#cb176-60" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb176-61"><a href="Ch06.html#cb176-61" tabindex="-1"></a></span>
<span id="cb176-62"><a href="Ch06.html#cb176-62" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_FarmlandShrubs-Trees_cell.tif&quot;</span></span>
<span id="cb176-63"><a href="Ch06.html#cb176-63" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb176-64"><a href="Ch06.html#cb176-64" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb176-65"><a href="Ch06.html#cb176-65" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb176-66"><a href="Ch06.html#cb176-66" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb176-67"><a href="Ch06.html#cb176-67" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb176-68"><a href="Ch06.html#cb176-68" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb176-69"><a href="Ch06.html#cb176-69" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb176-70"><a href="Ch06.html#cb176-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb176-71"><a href="Ch06.html#cb176-71" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb176-72"><a href="Ch06.html#cb176-72" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb176-73"><a href="Ch06.html#cb176-73" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb176-74"><a href="Ch06.html#cb176-74" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_135.png" width="100%" /></p>
</div>
<div id="ch06.136" class="section level2 hasAnchor" number="6.136">
<h2><span class="header-section-number">6.136</span> Edges_FarmlandShrubs-Trees_r500<a href="Ch06.html#ch06.136" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_FarmlandShrubs-Trees_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_136</code></p>
<p><strong>English name:</strong> Edge pixels of Farmland, Clear-Cuts, Shrubs bordering with Trees within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecības zemju, izcirtumu, krūmu malu ar kokiem garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.135">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="Ch06.html#cb177-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb177-2"><a href="Ch06.html#cb177-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb177-3"><a href="Ch06.html#cb177-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb177-4"><a href="Ch06.html#cb177-4" tabindex="-1"></a></span>
<span id="cb177-5"><a href="Ch06.html#cb177-5" tabindex="-1"></a></span>
<span id="cb177-6"><a href="Ch06.html#cb177-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb177-7"><a href="Ch06.html#cb177-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb177-8"><a href="Ch06.html#cb177-8" tabindex="-1"></a></span>
<span id="cb177-9"><a href="Ch06.html#cb177-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb177-10"><a href="Ch06.html#cb177-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb177-11"><a href="Ch06.html#cb177-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb177-12"><a href="Ch06.html#cb177-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb177-13"><a href="Ch06.html#cb177-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb177-14"><a href="Ch06.html#cb177-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb177-15"><a href="Ch06.html#cb177-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_cell.tif&quot;</span>),</span>
<span id="cb177-16"><a href="Ch06.html#cb177-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_FarmlandShrubs-Trees&quot;</span>),</span>
<span id="cb177-17"><a href="Ch06.html#cb177-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb177-18"><a href="Ch06.html#cb177-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb177-19"><a href="Ch06.html#cb177-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb177-20"><a href="Ch06.html#cb177-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb177-21"><a href="Ch06.html#cb177-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb177-22"><a href="Ch06.html#cb177-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb177-23"><a href="Ch06.html#cb177-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb177-24"><a href="Ch06.html#cb177-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb177-25"><a href="Ch06.html#cb177-25" tabindex="-1"></a></span>
<span id="cb177-26"><a href="Ch06.html#cb177-26" tabindex="-1"></a></span>
<span id="cb177-27"><a href="Ch06.html#cb177-27" tabindex="-1"></a><span class="co"># Edges_FarmlandShrubs-Trees_r500.tif   egv_136 ----</span></span>
<span id="cb177-28"><a href="Ch06.html#cb177-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_r500.tif&quot;</span>)</span>
<span id="cb177-29"><a href="Ch06.html#cb177-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_136&quot;</span></span>
<span id="cb177-30"><a href="Ch06.html#cb177-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb177-31"><a href="Ch06.html#cb177-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb177-32"><a href="Ch06.html#cb177-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_r500.tif&quot;</span>,</span>
<span id="cb177-33"><a href="Ch06.html#cb177-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb177-34"><a href="Ch06.html#cb177-34" tabindex="-1"></a></span>
<span id="cb177-35"><a href="Ch06.html#cb177-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb177-36"><a href="Ch06.html#cb177-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb177-37"><a href="Ch06.html#cb177-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb177-38"><a href="Ch06.html#cb177-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb177-39"><a href="Ch06.html#cb177-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb177-40"><a href="Ch06.html#cb177-40" tabindex="-1"></a></span>
<span id="cb177-41"><a href="Ch06.html#cb177-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_FarmlandShrubs-Trees_r500.tif&quot;</span></span>
<span id="cb177-42"><a href="Ch06.html#cb177-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb177-43"><a href="Ch06.html#cb177-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb177-44"><a href="Ch06.html#cb177-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb177-45"><a href="Ch06.html#cb177-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb177-46"><a href="Ch06.html#cb177-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb177-47"><a href="Ch06.html#cb177-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb177-48"><a href="Ch06.html#cb177-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb177-49"><a href="Ch06.html#cb177-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb177-50"><a href="Ch06.html#cb177-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb177-51"><a href="Ch06.html#cb177-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb177-52"><a href="Ch06.html#cb177-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb177-53"><a href="Ch06.html#cb177-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_136.png" width="100%" /></p>
</div>
<div id="ch06.137" class="section level2 hasAnchor" number="6.137">
<h2><span class="header-section-number">6.137</span> Edges_FarmlandShrubs-Trees_r1250<a href="Ch06.html#ch06.137" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_FarmlandShrubs-Trees_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_137</code></p>
<p><strong>English name:</strong> Edge pixels of Farmland, Clear-Cuts, Shrubs bordering with Trees within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecības zemju, izcirtumu, krūmu malu ar kokiem garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.135">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="Ch06.html#cb178-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb178-2"><a href="Ch06.html#cb178-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb178-3"><a href="Ch06.html#cb178-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb178-4"><a href="Ch06.html#cb178-4" tabindex="-1"></a></span>
<span id="cb178-5"><a href="Ch06.html#cb178-5" tabindex="-1"></a></span>
<span id="cb178-6"><a href="Ch06.html#cb178-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb178-7"><a href="Ch06.html#cb178-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb178-8"><a href="Ch06.html#cb178-8" tabindex="-1"></a></span>
<span id="cb178-9"><a href="Ch06.html#cb178-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb178-10"><a href="Ch06.html#cb178-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb178-11"><a href="Ch06.html#cb178-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb178-12"><a href="Ch06.html#cb178-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb178-13"><a href="Ch06.html#cb178-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb178-14"><a href="Ch06.html#cb178-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb178-15"><a href="Ch06.html#cb178-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_cell.tif&quot;</span>),</span>
<span id="cb178-16"><a href="Ch06.html#cb178-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_FarmlandShrubs-Trees&quot;</span>),</span>
<span id="cb178-17"><a href="Ch06.html#cb178-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb178-18"><a href="Ch06.html#cb178-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb178-19"><a href="Ch06.html#cb178-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb178-20"><a href="Ch06.html#cb178-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb178-21"><a href="Ch06.html#cb178-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb178-22"><a href="Ch06.html#cb178-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb178-23"><a href="Ch06.html#cb178-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb178-24"><a href="Ch06.html#cb178-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb178-25"><a href="Ch06.html#cb178-25" tabindex="-1"></a></span>
<span id="cb178-26"><a href="Ch06.html#cb178-26" tabindex="-1"></a></span>
<span id="cb178-27"><a href="Ch06.html#cb178-27" tabindex="-1"></a><span class="co"># Edges_FarmlandShrubs-Trees_r1250.tif  egv_137 ----</span></span>
<span id="cb178-28"><a href="Ch06.html#cb178-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_r1250.tif&quot;</span>)</span>
<span id="cb178-29"><a href="Ch06.html#cb178-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_137&quot;</span></span>
<span id="cb178-30"><a href="Ch06.html#cb178-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb178-31"><a href="Ch06.html#cb178-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb178-32"><a href="Ch06.html#cb178-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_r1250.tif&quot;</span>,</span>
<span id="cb178-33"><a href="Ch06.html#cb178-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb178-34"><a href="Ch06.html#cb178-34" tabindex="-1"></a></span>
<span id="cb178-35"><a href="Ch06.html#cb178-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb178-36"><a href="Ch06.html#cb178-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb178-37"><a href="Ch06.html#cb178-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb178-38"><a href="Ch06.html#cb178-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb178-39"><a href="Ch06.html#cb178-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb178-40"><a href="Ch06.html#cb178-40" tabindex="-1"></a></span>
<span id="cb178-41"><a href="Ch06.html#cb178-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_FarmlandShrubs-Trees_r1250.tif&quot;</span></span>
<span id="cb178-42"><a href="Ch06.html#cb178-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb178-43"><a href="Ch06.html#cb178-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb178-44"><a href="Ch06.html#cb178-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb178-45"><a href="Ch06.html#cb178-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb178-46"><a href="Ch06.html#cb178-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb178-47"><a href="Ch06.html#cb178-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb178-48"><a href="Ch06.html#cb178-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb178-49"><a href="Ch06.html#cb178-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb178-50"><a href="Ch06.html#cb178-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb178-51"><a href="Ch06.html#cb178-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb178-52"><a href="Ch06.html#cb178-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb178-53"><a href="Ch06.html#cb178-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_137.png" width="100%" /></p>
</div>
<div id="ch06.138" class="section level2 hasAnchor" number="6.138">
<h2><span class="header-section-number">6.138</span> Edges_FarmlandShrubs-Trees_r3000<a href="Ch06.html#ch06.138" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_FarmlandShrubs-Trees_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_138</code></p>
<p><strong>English name:</strong> Edge pixels of Farmland, Clear-Cuts, Shrubs bordering with Trees within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecības zemju, izcirtumu, krūmu malu ar kokiem garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.135">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="Ch06.html#cb179-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb179-2"><a href="Ch06.html#cb179-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb179-3"><a href="Ch06.html#cb179-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb179-4"><a href="Ch06.html#cb179-4" tabindex="-1"></a></span>
<span id="cb179-5"><a href="Ch06.html#cb179-5" tabindex="-1"></a></span>
<span id="cb179-6"><a href="Ch06.html#cb179-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb179-7"><a href="Ch06.html#cb179-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb179-8"><a href="Ch06.html#cb179-8" tabindex="-1"></a></span>
<span id="cb179-9"><a href="Ch06.html#cb179-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb179-10"><a href="Ch06.html#cb179-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb179-11"><a href="Ch06.html#cb179-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb179-12"><a href="Ch06.html#cb179-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb179-13"><a href="Ch06.html#cb179-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb179-14"><a href="Ch06.html#cb179-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb179-15"><a href="Ch06.html#cb179-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_cell.tif&quot;</span>),</span>
<span id="cb179-16"><a href="Ch06.html#cb179-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_FarmlandShrubs-Trees&quot;</span>),</span>
<span id="cb179-17"><a href="Ch06.html#cb179-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb179-18"><a href="Ch06.html#cb179-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb179-19"><a href="Ch06.html#cb179-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb179-20"><a href="Ch06.html#cb179-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb179-21"><a href="Ch06.html#cb179-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb179-22"><a href="Ch06.html#cb179-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb179-23"><a href="Ch06.html#cb179-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb179-24"><a href="Ch06.html#cb179-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb179-25"><a href="Ch06.html#cb179-25" tabindex="-1"></a></span>
<span id="cb179-26"><a href="Ch06.html#cb179-26" tabindex="-1"></a></span>
<span id="cb179-27"><a href="Ch06.html#cb179-27" tabindex="-1"></a><span class="co"># Edges_FarmlandShrubs-Trees_r3000.tif  egv_138 ----</span></span>
<span id="cb179-28"><a href="Ch06.html#cb179-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_r3000.tif&quot;</span>)</span>
<span id="cb179-29"><a href="Ch06.html#cb179-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_138&quot;</span></span>
<span id="cb179-30"><a href="Ch06.html#cb179-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb179-31"><a href="Ch06.html#cb179-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb179-32"><a href="Ch06.html#cb179-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_r3000.tif&quot;</span>,</span>
<span id="cb179-33"><a href="Ch06.html#cb179-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb179-34"><a href="Ch06.html#cb179-34" tabindex="-1"></a></span>
<span id="cb179-35"><a href="Ch06.html#cb179-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb179-36"><a href="Ch06.html#cb179-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb179-37"><a href="Ch06.html#cb179-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb179-38"><a href="Ch06.html#cb179-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb179-39"><a href="Ch06.html#cb179-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb179-40"><a href="Ch06.html#cb179-40" tabindex="-1"></a></span>
<span id="cb179-41"><a href="Ch06.html#cb179-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_FarmlandShrubs-Trees_r3000.tif&quot;</span></span>
<span id="cb179-42"><a href="Ch06.html#cb179-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb179-43"><a href="Ch06.html#cb179-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb179-44"><a href="Ch06.html#cb179-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb179-45"><a href="Ch06.html#cb179-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb179-46"><a href="Ch06.html#cb179-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb179-47"><a href="Ch06.html#cb179-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb179-48"><a href="Ch06.html#cb179-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb179-49"><a href="Ch06.html#cb179-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb179-50"><a href="Ch06.html#cb179-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb179-51"><a href="Ch06.html#cb179-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb179-52"><a href="Ch06.html#cb179-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb179-53"><a href="Ch06.html#cb179-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_138.png" width="100%" /></p>
</div>
<div id="ch06.139" class="section level2 hasAnchor" number="6.139">
<h2><span class="header-section-number">6.139</span> Edges_FarmlandShrubs-Trees_r10000<a href="Ch06.html#ch06.139" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_FarmlandShrubs-Trees_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_139</code></p>
<p><strong>English name:</strong> Edge pixels of Farmland, Clear-Cuts, Shrubs bordering with Trees within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecības zemju, izcirtumu, krūmu malu ar kokiem garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.135">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="Ch06.html#cb180-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb180-2"><a href="Ch06.html#cb180-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb180-3"><a href="Ch06.html#cb180-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb180-4"><a href="Ch06.html#cb180-4" tabindex="-1"></a></span>
<span id="cb180-5"><a href="Ch06.html#cb180-5" tabindex="-1"></a></span>
<span id="cb180-6"><a href="Ch06.html#cb180-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb180-7"><a href="Ch06.html#cb180-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb180-8"><a href="Ch06.html#cb180-8" tabindex="-1"></a></span>
<span id="cb180-9"><a href="Ch06.html#cb180-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb180-10"><a href="Ch06.html#cb180-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb180-11"><a href="Ch06.html#cb180-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb180-12"><a href="Ch06.html#cb180-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb180-13"><a href="Ch06.html#cb180-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb180-14"><a href="Ch06.html#cb180-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb180-15"><a href="Ch06.html#cb180-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_cell.tif&quot;</span>),</span>
<span id="cb180-16"><a href="Ch06.html#cb180-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_FarmlandShrubs-Trees&quot;</span>),</span>
<span id="cb180-17"><a href="Ch06.html#cb180-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb180-18"><a href="Ch06.html#cb180-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb180-19"><a href="Ch06.html#cb180-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb180-20"><a href="Ch06.html#cb180-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb180-21"><a href="Ch06.html#cb180-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb180-22"><a href="Ch06.html#cb180-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb180-23"><a href="Ch06.html#cb180-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb180-24"><a href="Ch06.html#cb180-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb180-25"><a href="Ch06.html#cb180-25" tabindex="-1"></a></span>
<span id="cb180-26"><a href="Ch06.html#cb180-26" tabindex="-1"></a></span>
<span id="cb180-27"><a href="Ch06.html#cb180-27" tabindex="-1"></a><span class="co"># Edges_FarmlandShrubs-Trees_r10000.tif egv_139 ----</span></span>
<span id="cb180-28"><a href="Ch06.html#cb180-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_r10000.tif&quot;</span>)</span>
<span id="cb180-29"><a href="Ch06.html#cb180-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_139&quot;</span></span>
<span id="cb180-30"><a href="Ch06.html#cb180-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb180-31"><a href="Ch06.html#cb180-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb180-32"><a href="Ch06.html#cb180-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_FarmlandShrubs-Trees_r10000.tif&quot;</span>,</span>
<span id="cb180-33"><a href="Ch06.html#cb180-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb180-34"><a href="Ch06.html#cb180-34" tabindex="-1"></a></span>
<span id="cb180-35"><a href="Ch06.html#cb180-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb180-36"><a href="Ch06.html#cb180-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb180-37"><a href="Ch06.html#cb180-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb180-38"><a href="Ch06.html#cb180-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb180-39"><a href="Ch06.html#cb180-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb180-40"><a href="Ch06.html#cb180-40" tabindex="-1"></a></span>
<span id="cb180-41"><a href="Ch06.html#cb180-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_FarmlandShrubs-Trees_r10000.tif&quot;</span></span>
<span id="cb180-42"><a href="Ch06.html#cb180-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb180-43"><a href="Ch06.html#cb180-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb180-44"><a href="Ch06.html#cb180-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb180-45"><a href="Ch06.html#cb180-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb180-46"><a href="Ch06.html#cb180-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb180-47"><a href="Ch06.html#cb180-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb180-48"><a href="Ch06.html#cb180-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb180-49"><a href="Ch06.html#cb180-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb180-50"><a href="Ch06.html#cb180-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb180-51"><a href="Ch06.html#cb180-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb180-52"><a href="Ch06.html#cb180-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb180-53"><a href="Ch06.html#cb180-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_139.png" width="100%" /></p>
</div>
<div id="ch06.140" class="section level2 hasAnchor" number="6.140">
<h2><span class="header-section-number">6.140</span> Edges_Grasslands_cell<a href="Ch06.html#ch06.140" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Grasslands_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_140</code></p>
<p><strong>English name:</strong> Edge pixels of Grassland within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Zālāju malu garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values equal to 330 and from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then, the layer (1=presence) is covered over
the nulls layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="Ch06.html#cb181-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb181-2"><a href="Ch06.html#cb181-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb181-3"><a href="Ch06.html#cb181-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb181-4"><a href="Ch06.html#cb181-4" tabindex="-1"></a></span>
<span id="cb181-5"><a href="Ch06.html#cb181-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb181-6"><a href="Ch06.html#cb181-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb181-7"><a href="Ch06.html#cb181-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb181-8"><a href="Ch06.html#cb181-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb181-9"><a href="Ch06.html#cb181-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb181-10"><a href="Ch06.html#cb181-10" tabindex="-1"></a></span>
<span id="cb181-11"><a href="Ch06.html#cb181-11" tabindex="-1"></a></span>
<span id="cb181-12"><a href="Ch06.html#cb181-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb181-13"><a href="Ch06.html#cb181-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb181-14"><a href="Ch06.html#cb181-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb181-15"><a href="Ch06.html#cb181-15" tabindex="-1"></a></span>
<span id="cb181-16"><a href="Ch06.html#cb181-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb181-17"><a href="Ch06.html#cb181-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb181-18"><a href="Ch06.html#cb181-18" tabindex="-1"></a></span>
<span id="cb181-19"><a href="Ch06.html#cb181-19" tabindex="-1"></a><span class="co"># Edges_Grasslands_input.tif ----</span></span>
<span id="cb181-20"><a href="Ch06.html#cb181-20" tabindex="-1"></a>grassland<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">330</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb181-21"><a href="Ch06.html#cb181-21" tabindex="-1"></a><span class="fu">plot</span>(grassland)</span>
<span id="cb181-22"><a href="Ch06.html#cb181-22" tabindex="-1"></a>grassland<span class="ot">=</span><span class="fu">cover</span>(grassland,nulls10)</span>
<span id="cb181-23"><a href="Ch06.html#cb181-23" tabindex="-1"></a><span class="fu">plot</span>(grassland)</span>
<span id="cb181-24"><a href="Ch06.html#cb181-24" tabindex="-1"></a></span>
<span id="cb181-25"><a href="Ch06.html#cb181-25" tabindex="-1"></a>edge_grassland<span class="ot">=</span><span class="fu">project</span>(grassland,template10,</span>
<span id="cb181-26"><a href="Ch06.html#cb181-26" tabindex="-1"></a>                           <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_Grasslands_input.tif&quot;</span>,</span>
<span id="cb181-27"><a href="Ch06.html#cb181-27" tabindex="-1"></a>                           <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb181-28"><a href="Ch06.html#cb181-28" tabindex="-1"></a><span class="fu">rm</span>(edge_grassland)</span>
<span id="cb181-29"><a href="Ch06.html#cb181-29" tabindex="-1"></a></span>
<span id="cb181-30"><a href="Ch06.html#cb181-30" tabindex="-1"></a></span>
<span id="cb181-31"><a href="Ch06.html#cb181-31" tabindex="-1"></a><span class="co"># Edges_Grasslands_cell.tif egv_140 ----</span></span>
<span id="cb181-32"><a href="Ch06.html#cb181-32" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb181-33"><a href="Ch06.html#cb181-33" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_Grasslands_input.tif&quot;</span>,</span>
<span id="cb181-34"><a href="Ch06.html#cb181-34" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb181-35"><a href="Ch06.html#cb181-35" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb181-36"><a href="Ch06.html#cb181-36" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb181-37"><a href="Ch06.html#cb181-37" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb181-38"><a href="Ch06.html#cb181-38" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb181-39"><a href="Ch06.html#cb181-39" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_Grasslands_cell.tif&quot;</span>,</span>
<span id="cb181-40"><a href="Ch06.html#cb181-40" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_140&quot;</span>,</span>
<span id="cb181-41"><a href="Ch06.html#cb181-41" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb181-42"><a href="Ch06.html#cb181-42" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb181-43"><a href="Ch06.html#cb181-43" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb181-44"><a href="Ch06.html#cb181-44" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb181-45"><a href="Ch06.html#cb181-45" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb181-46"><a href="Ch06.html#cb181-46" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb181-47"><a href="Ch06.html#cb181-47" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb181-48"><a href="Ch06.html#cb181-48" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb181-49"><a href="Ch06.html#cb181-49" tabindex="-1"></a>)</span>
<span id="cb181-50"><a href="Ch06.html#cb181-50" tabindex="-1"></a></span>
<span id="cb181-51"><a href="Ch06.html#cb181-51" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb181-52"><a href="Ch06.html#cb181-52" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb181-53"><a href="Ch06.html#cb181-53" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb181-54"><a href="Ch06.html#cb181-54" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb181-55"><a href="Ch06.html#cb181-55" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb181-56"><a href="Ch06.html#cb181-56" tabindex="-1"></a></span>
<span id="cb181-57"><a href="Ch06.html#cb181-57" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Grasslands_cell.tif&quot;</span></span>
<span id="cb181-58"><a href="Ch06.html#cb181-58" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb181-59"><a href="Ch06.html#cb181-59" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb181-60"><a href="Ch06.html#cb181-60" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb181-61"><a href="Ch06.html#cb181-61" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb181-62"><a href="Ch06.html#cb181-62" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb181-63"><a href="Ch06.html#cb181-63" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb181-64"><a href="Ch06.html#cb181-64" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb181-65"><a href="Ch06.html#cb181-65" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb181-66"><a href="Ch06.html#cb181-66" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb181-67"><a href="Ch06.html#cb181-67" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb181-68"><a href="Ch06.html#cb181-68" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb181-69"><a href="Ch06.html#cb181-69" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_140.png" width="100%" /></p>
</div>
<div id="ch06.141" class="section level2 hasAnchor" number="6.141">
<h2><span class="header-section-number">6.141</span> Edges_Grasslands_r500<a href="Ch06.html#ch06.141" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Grasslands_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_141</code></p>
<p><strong>English name:</strong> Edge pixels of Grassland within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju malu garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.140">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="Ch06.html#cb182-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb182-2"><a href="Ch06.html#cb182-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb182-3"><a href="Ch06.html#cb182-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb182-4"><a href="Ch06.html#cb182-4" tabindex="-1"></a></span>
<span id="cb182-5"><a href="Ch06.html#cb182-5" tabindex="-1"></a></span>
<span id="cb182-6"><a href="Ch06.html#cb182-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb182-7"><a href="Ch06.html#cb182-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb182-8"><a href="Ch06.html#cb182-8" tabindex="-1"></a></span>
<span id="cb182-9"><a href="Ch06.html#cb182-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb182-10"><a href="Ch06.html#cb182-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb182-11"><a href="Ch06.html#cb182-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb182-12"><a href="Ch06.html#cb182-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb182-13"><a href="Ch06.html#cb182-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb182-14"><a href="Ch06.html#cb182-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb182-15"><a href="Ch06.html#cb182-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_cell.tif&quot;</span>),</span>
<span id="cb182-16"><a href="Ch06.html#cb182-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Grasslands&quot;</span>),</span>
<span id="cb182-17"><a href="Ch06.html#cb182-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb182-18"><a href="Ch06.html#cb182-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb182-19"><a href="Ch06.html#cb182-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb182-20"><a href="Ch06.html#cb182-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb182-21"><a href="Ch06.html#cb182-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb182-22"><a href="Ch06.html#cb182-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb182-23"><a href="Ch06.html#cb182-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb182-24"><a href="Ch06.html#cb182-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb182-25"><a href="Ch06.html#cb182-25" tabindex="-1"></a></span>
<span id="cb182-26"><a href="Ch06.html#cb182-26" tabindex="-1"></a></span>
<span id="cb182-27"><a href="Ch06.html#cb182-27" tabindex="-1"></a><span class="co"># Edges_Grasslands_r500.tif egv_141 ----</span></span>
<span id="cb182-28"><a href="Ch06.html#cb182-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_r500.tif&quot;</span>)</span>
<span id="cb182-29"><a href="Ch06.html#cb182-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_141&quot;</span></span>
<span id="cb182-30"><a href="Ch06.html#cb182-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb182-31"><a href="Ch06.html#cb182-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb182-32"><a href="Ch06.html#cb182-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_r500.tif&quot;</span>,</span>
<span id="cb182-33"><a href="Ch06.html#cb182-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb182-34"><a href="Ch06.html#cb182-34" tabindex="-1"></a></span>
<span id="cb182-35"><a href="Ch06.html#cb182-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb182-36"><a href="Ch06.html#cb182-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb182-37"><a href="Ch06.html#cb182-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb182-38"><a href="Ch06.html#cb182-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb182-39"><a href="Ch06.html#cb182-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb182-40"><a href="Ch06.html#cb182-40" tabindex="-1"></a></span>
<span id="cb182-41"><a href="Ch06.html#cb182-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Grasslands_r500.tif&quot;</span></span>
<span id="cb182-42"><a href="Ch06.html#cb182-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb182-43"><a href="Ch06.html#cb182-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb182-44"><a href="Ch06.html#cb182-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb182-45"><a href="Ch06.html#cb182-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb182-46"><a href="Ch06.html#cb182-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb182-47"><a href="Ch06.html#cb182-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb182-48"><a href="Ch06.html#cb182-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb182-49"><a href="Ch06.html#cb182-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb182-50"><a href="Ch06.html#cb182-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb182-51"><a href="Ch06.html#cb182-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb182-52"><a href="Ch06.html#cb182-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb182-53"><a href="Ch06.html#cb182-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_141.png" width="100%" /></p>
</div>
<div id="ch06.142" class="section level2 hasAnchor" number="6.142">
<h2><span class="header-section-number">6.142</span> Edges_Grasslands_r1250<a href="Ch06.html#ch06.142" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Grasslands_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_142</code></p>
<p><strong>English name:</strong> Edge pixels of Grassland within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju malu garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.140">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="Ch06.html#cb183-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb183-2"><a href="Ch06.html#cb183-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb183-3"><a href="Ch06.html#cb183-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb183-4"><a href="Ch06.html#cb183-4" tabindex="-1"></a></span>
<span id="cb183-5"><a href="Ch06.html#cb183-5" tabindex="-1"></a></span>
<span id="cb183-6"><a href="Ch06.html#cb183-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb183-7"><a href="Ch06.html#cb183-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb183-8"><a href="Ch06.html#cb183-8" tabindex="-1"></a></span>
<span id="cb183-9"><a href="Ch06.html#cb183-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb183-10"><a href="Ch06.html#cb183-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb183-11"><a href="Ch06.html#cb183-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb183-12"><a href="Ch06.html#cb183-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb183-13"><a href="Ch06.html#cb183-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb183-14"><a href="Ch06.html#cb183-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb183-15"><a href="Ch06.html#cb183-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_cell.tif&quot;</span>),</span>
<span id="cb183-16"><a href="Ch06.html#cb183-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Grasslands&quot;</span>),</span>
<span id="cb183-17"><a href="Ch06.html#cb183-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb183-18"><a href="Ch06.html#cb183-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb183-19"><a href="Ch06.html#cb183-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb183-20"><a href="Ch06.html#cb183-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb183-21"><a href="Ch06.html#cb183-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb183-22"><a href="Ch06.html#cb183-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb183-23"><a href="Ch06.html#cb183-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb183-24"><a href="Ch06.html#cb183-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb183-25"><a href="Ch06.html#cb183-25" tabindex="-1"></a></span>
<span id="cb183-26"><a href="Ch06.html#cb183-26" tabindex="-1"></a></span>
<span id="cb183-27"><a href="Ch06.html#cb183-27" tabindex="-1"></a><span class="co"># Edges_Grasslands_r1250.tif    egv_142 ----</span></span>
<span id="cb183-28"><a href="Ch06.html#cb183-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_r1250.tif&quot;</span>)</span>
<span id="cb183-29"><a href="Ch06.html#cb183-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_142&quot;</span></span>
<span id="cb183-30"><a href="Ch06.html#cb183-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb183-31"><a href="Ch06.html#cb183-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb183-32"><a href="Ch06.html#cb183-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_r1250.tif&quot;</span>,</span>
<span id="cb183-33"><a href="Ch06.html#cb183-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb183-34"><a href="Ch06.html#cb183-34" tabindex="-1"></a></span>
<span id="cb183-35"><a href="Ch06.html#cb183-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb183-36"><a href="Ch06.html#cb183-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb183-37"><a href="Ch06.html#cb183-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb183-38"><a href="Ch06.html#cb183-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb183-39"><a href="Ch06.html#cb183-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb183-40"><a href="Ch06.html#cb183-40" tabindex="-1"></a></span>
<span id="cb183-41"><a href="Ch06.html#cb183-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Grasslands_r1250.tif&quot;</span></span>
<span id="cb183-42"><a href="Ch06.html#cb183-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb183-43"><a href="Ch06.html#cb183-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb183-44"><a href="Ch06.html#cb183-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb183-45"><a href="Ch06.html#cb183-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb183-46"><a href="Ch06.html#cb183-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb183-47"><a href="Ch06.html#cb183-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb183-48"><a href="Ch06.html#cb183-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb183-49"><a href="Ch06.html#cb183-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb183-50"><a href="Ch06.html#cb183-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb183-51"><a href="Ch06.html#cb183-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb183-52"><a href="Ch06.html#cb183-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb183-53"><a href="Ch06.html#cb183-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_142.png" width="100%" /></p>
</div>
<div id="ch06.143" class="section level2 hasAnchor" number="6.143">
<h2><span class="header-section-number">6.143</span> Edges_Grasslands_r3000<a href="Ch06.html#ch06.143" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Grasslands_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_143</code></p>
<p><strong>English name:</strong> Edge pixels of Grassland within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju malu garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.140">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="Ch06.html#cb184-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb184-2"><a href="Ch06.html#cb184-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb184-3"><a href="Ch06.html#cb184-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb184-4"><a href="Ch06.html#cb184-4" tabindex="-1"></a></span>
<span id="cb184-5"><a href="Ch06.html#cb184-5" tabindex="-1"></a></span>
<span id="cb184-6"><a href="Ch06.html#cb184-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb184-7"><a href="Ch06.html#cb184-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb184-8"><a href="Ch06.html#cb184-8" tabindex="-1"></a></span>
<span id="cb184-9"><a href="Ch06.html#cb184-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb184-10"><a href="Ch06.html#cb184-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb184-11"><a href="Ch06.html#cb184-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb184-12"><a href="Ch06.html#cb184-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb184-13"><a href="Ch06.html#cb184-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb184-14"><a href="Ch06.html#cb184-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb184-15"><a href="Ch06.html#cb184-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_cell.tif&quot;</span>),</span>
<span id="cb184-16"><a href="Ch06.html#cb184-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Grasslands&quot;</span>),</span>
<span id="cb184-17"><a href="Ch06.html#cb184-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb184-18"><a href="Ch06.html#cb184-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb184-19"><a href="Ch06.html#cb184-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb184-20"><a href="Ch06.html#cb184-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb184-21"><a href="Ch06.html#cb184-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb184-22"><a href="Ch06.html#cb184-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb184-23"><a href="Ch06.html#cb184-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb184-24"><a href="Ch06.html#cb184-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb184-25"><a href="Ch06.html#cb184-25" tabindex="-1"></a></span>
<span id="cb184-26"><a href="Ch06.html#cb184-26" tabindex="-1"></a></span>
<span id="cb184-27"><a href="Ch06.html#cb184-27" tabindex="-1"></a><span class="co"># Edges_Grasslands_r3000.tif    egv_143 ----</span></span>
<span id="cb184-28"><a href="Ch06.html#cb184-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_r3000.tif&quot;</span>)</span>
<span id="cb184-29"><a href="Ch06.html#cb184-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_143&quot;</span></span>
<span id="cb184-30"><a href="Ch06.html#cb184-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb184-31"><a href="Ch06.html#cb184-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb184-32"><a href="Ch06.html#cb184-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_r3000.tif&quot;</span>,</span>
<span id="cb184-33"><a href="Ch06.html#cb184-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb184-34"><a href="Ch06.html#cb184-34" tabindex="-1"></a></span>
<span id="cb184-35"><a href="Ch06.html#cb184-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb184-36"><a href="Ch06.html#cb184-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb184-37"><a href="Ch06.html#cb184-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb184-38"><a href="Ch06.html#cb184-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb184-39"><a href="Ch06.html#cb184-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb184-40"><a href="Ch06.html#cb184-40" tabindex="-1"></a></span>
<span id="cb184-41"><a href="Ch06.html#cb184-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Grasslands_r3000.tif&quot;</span></span>
<span id="cb184-42"><a href="Ch06.html#cb184-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb184-43"><a href="Ch06.html#cb184-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb184-44"><a href="Ch06.html#cb184-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb184-45"><a href="Ch06.html#cb184-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb184-46"><a href="Ch06.html#cb184-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb184-47"><a href="Ch06.html#cb184-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb184-48"><a href="Ch06.html#cb184-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb184-49"><a href="Ch06.html#cb184-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb184-50"><a href="Ch06.html#cb184-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb184-51"><a href="Ch06.html#cb184-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb184-52"><a href="Ch06.html#cb184-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb184-53"><a href="Ch06.html#cb184-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_143.png" width="100%" /></p>
</div>
<div id="ch06.144" class="section level2 hasAnchor" number="6.144">
<h2><span class="header-section-number">6.144</span> Edges_Grasslands_r10000<a href="Ch06.html#ch06.144" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Grasslands_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_144</code></p>
<p><strong>English name:</strong> Edge pixels of Grassland within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju malu garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.140">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="Ch06.html#cb185-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb185-2"><a href="Ch06.html#cb185-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb185-3"><a href="Ch06.html#cb185-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb185-4"><a href="Ch06.html#cb185-4" tabindex="-1"></a></span>
<span id="cb185-5"><a href="Ch06.html#cb185-5" tabindex="-1"></a></span>
<span id="cb185-6"><a href="Ch06.html#cb185-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb185-7"><a href="Ch06.html#cb185-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb185-8"><a href="Ch06.html#cb185-8" tabindex="-1"></a></span>
<span id="cb185-9"><a href="Ch06.html#cb185-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb185-10"><a href="Ch06.html#cb185-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb185-11"><a href="Ch06.html#cb185-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb185-12"><a href="Ch06.html#cb185-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb185-13"><a href="Ch06.html#cb185-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb185-14"><a href="Ch06.html#cb185-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb185-15"><a href="Ch06.html#cb185-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_cell.tif&quot;</span>),</span>
<span id="cb185-16"><a href="Ch06.html#cb185-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Grasslands&quot;</span>),</span>
<span id="cb185-17"><a href="Ch06.html#cb185-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb185-18"><a href="Ch06.html#cb185-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb185-19"><a href="Ch06.html#cb185-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb185-20"><a href="Ch06.html#cb185-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb185-21"><a href="Ch06.html#cb185-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb185-22"><a href="Ch06.html#cb185-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb185-23"><a href="Ch06.html#cb185-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb185-24"><a href="Ch06.html#cb185-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb185-25"><a href="Ch06.html#cb185-25" tabindex="-1"></a></span>
<span id="cb185-26"><a href="Ch06.html#cb185-26" tabindex="-1"></a></span>
<span id="cb185-27"><a href="Ch06.html#cb185-27" tabindex="-1"></a><span class="co"># Edges_Grasslands_r10000.tif   egv_144 ----</span></span>
<span id="cb185-28"><a href="Ch06.html#cb185-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_r10000.tif&quot;</span>)</span>
<span id="cb185-29"><a href="Ch06.html#cb185-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_144&quot;</span></span>
<span id="cb185-30"><a href="Ch06.html#cb185-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb185-31"><a href="Ch06.html#cb185-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb185-32"><a href="Ch06.html#cb185-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Grasslands_r10000.tif&quot;</span>,</span>
<span id="cb185-33"><a href="Ch06.html#cb185-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb185-34"><a href="Ch06.html#cb185-34" tabindex="-1"></a></span>
<span id="cb185-35"><a href="Ch06.html#cb185-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb185-36"><a href="Ch06.html#cb185-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb185-37"><a href="Ch06.html#cb185-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb185-38"><a href="Ch06.html#cb185-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb185-39"><a href="Ch06.html#cb185-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb185-40"><a href="Ch06.html#cb185-40" tabindex="-1"></a></span>
<span id="cb185-41"><a href="Ch06.html#cb185-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Grasslands_r10000.tif&quot;</span></span>
<span id="cb185-42"><a href="Ch06.html#cb185-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb185-43"><a href="Ch06.html#cb185-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb185-44"><a href="Ch06.html#cb185-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb185-45"><a href="Ch06.html#cb185-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb185-46"><a href="Ch06.html#cb185-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb185-47"><a href="Ch06.html#cb185-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb185-48"><a href="Ch06.html#cb185-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb185-49"><a href="Ch06.html#cb185-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb185-50"><a href="Ch06.html#cb185-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb185-51"><a href="Ch06.html#cb185-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb185-52"><a href="Ch06.html#cb185-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb185-53"><a href="Ch06.html#cb185-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_144.png" width="100%" /></p>
</div>
<div id="ch06.145" class="section level2 hasAnchor" number="6.145">
<h2><span class="header-section-number">6.145</span> Edges_OldForests_cell<a href="Ch06.html#ch06.145" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_OldForests_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_145</code></p>
<p><strong>English name:</strong> Edge pixels of Forests Over Rotation Age within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Pieaugušo un pāraugušo mežaudžu malu garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, raster layer with forest stands from <a href="Ch04.html#Ch04.01">MVR</a> at age groups 4 and 5 is prepared (presence = 1, everything else = NA). Then, the layer (1=presence) is covered over
the nulls layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="Ch06.html#cb186-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb186-2"><a href="Ch06.html#cb186-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb186-3"><a href="Ch06.html#cb186-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb186-4"><a href="Ch06.html#cb186-4" tabindex="-1"></a></span>
<span id="cb186-5"><a href="Ch06.html#cb186-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb186-6"><a href="Ch06.html#cb186-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb186-7"><a href="Ch06.html#cb186-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb186-8"><a href="Ch06.html#cb186-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb186-9"><a href="Ch06.html#cb186-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb186-10"><a href="Ch06.html#cb186-10" tabindex="-1"></a></span>
<span id="cb186-11"><a href="Ch06.html#cb186-11" tabindex="-1"></a></span>
<span id="cb186-12"><a href="Ch06.html#cb186-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb186-13"><a href="Ch06.html#cb186-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb186-14"><a href="Ch06.html#cb186-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb186-15"><a href="Ch06.html#cb186-15" tabindex="-1"></a></span>
<span id="cb186-16"><a href="Ch06.html#cb186-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb186-17"><a href="Ch06.html#cb186-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb186-18"><a href="Ch06.html#cb186-18" tabindex="-1"></a></span>
<span id="cb186-19"><a href="Ch06.html#cb186-19" tabindex="-1"></a><span class="co"># Edges_OldForests_input.tif ----</span></span>
<span id="cb186-20"><a href="Ch06.html#cb186-20" tabindex="-1"></a>mvr<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/MVR/nogabali_2024janv.parquet&quot;</span>)</span>
<span id="cb186-21"><a href="Ch06.html#cb186-21" tabindex="-1"></a>mvr2<span class="ot">=</span>mvr <span class="sc">%&gt;%</span> </span>
<span id="cb186-22"><a href="Ch06.html#cb186-22" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">forest_age=</span><span class="fu">ifelse</span>(vgr<span class="sc">==</span><span class="st">&quot;4&quot;</span><span class="sc">|</span>vgr<span class="sc">==</span><span class="st">&quot;5&quot;</span>,<span class="dv">1</span>,<span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb186-23"><a href="Ch06.html#cb186-23" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(forest_age))</span>
<span id="cb186-24"><a href="Ch06.html#cb186-24" tabindex="-1"></a></span>
<span id="cb186-25"><a href="Ch06.html#cb186-25" tabindex="-1"></a>rast_old<span class="ot">=</span><span class="fu">fasterize</span>(mvr2,<span class="fu">raster</span>(template10),<span class="at">field=</span><span class="st">&quot;forest_age&quot;</span>)</span>
<span id="cb186-26"><a href="Ch06.html#cb186-26" tabindex="-1"></a>terra_old<span class="ot">=</span><span class="fu">rast</span>(rast_old)</span>
<span id="cb186-27"><a href="Ch06.html#cb186-27" tabindex="-1"></a><span class="fu">plot</span>(terra_old)</span>
<span id="cb186-28"><a href="Ch06.html#cb186-28" tabindex="-1"></a>terra_old<span class="ot">=</span><span class="fu">cover</span>(terra_old,nulls10)</span>
<span id="cb186-29"><a href="Ch06.html#cb186-29" tabindex="-1"></a><span class="fu">plot</span>(terra_old)</span>
<span id="cb186-30"><a href="Ch06.html#cb186-30" tabindex="-1"></a></span>
<span id="cb186-31"><a href="Ch06.html#cb186-31" tabindex="-1"></a>edge_old<span class="ot">=</span><span class="fu">project</span>(terra_old,template10,</span>
<span id="cb186-32"><a href="Ch06.html#cb186-32" tabindex="-1"></a>                       <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_OldForests_input.tif&quot;</span>,</span>
<span id="cb186-33"><a href="Ch06.html#cb186-33" tabindex="-1"></a>                       <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb186-34"><a href="Ch06.html#cb186-34" tabindex="-1"></a><span class="fu">rm</span>(mvr)</span>
<span id="cb186-35"><a href="Ch06.html#cb186-35" tabindex="-1"></a><span class="fu">rm</span>(mvr2)</span>
<span id="cb186-36"><a href="Ch06.html#cb186-36" tabindex="-1"></a><span class="fu">rm</span>(rast_old)</span>
<span id="cb186-37"><a href="Ch06.html#cb186-37" tabindex="-1"></a><span class="fu">rm</span>(terra_old)</span>
<span id="cb186-38"><a href="Ch06.html#cb186-38" tabindex="-1"></a><span class="fu">rm</span>(edge_old)</span>
<span id="cb186-39"><a href="Ch06.html#cb186-39" tabindex="-1"></a></span>
<span id="cb186-40"><a href="Ch06.html#cb186-40" tabindex="-1"></a></span>
<span id="cb186-41"><a href="Ch06.html#cb186-41" tabindex="-1"></a><span class="co"># Edges_OldForests_cell.tif egv_145 ----</span></span>
<span id="cb186-42"><a href="Ch06.html#cb186-42" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb186-43"><a href="Ch06.html#cb186-43" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_OldForests_input.tif&quot;</span>,</span>
<span id="cb186-44"><a href="Ch06.html#cb186-44" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb186-45"><a href="Ch06.html#cb186-45" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb186-46"><a href="Ch06.html#cb186-46" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb186-47"><a href="Ch06.html#cb186-47" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb186-48"><a href="Ch06.html#cb186-48" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb186-49"><a href="Ch06.html#cb186-49" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_OldForests_cell.tif&quot;</span>,</span>
<span id="cb186-50"><a href="Ch06.html#cb186-50" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_145&quot;</span>,</span>
<span id="cb186-51"><a href="Ch06.html#cb186-51" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb186-52"><a href="Ch06.html#cb186-52" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb186-53"><a href="Ch06.html#cb186-53" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb186-54"><a href="Ch06.html#cb186-54" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb186-55"><a href="Ch06.html#cb186-55" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb186-56"><a href="Ch06.html#cb186-56" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb186-57"><a href="Ch06.html#cb186-57" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb186-58"><a href="Ch06.html#cb186-58" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb186-59"><a href="Ch06.html#cb186-59" tabindex="-1"></a>)</span>
<span id="cb186-60"><a href="Ch06.html#cb186-60" tabindex="-1"></a></span>
<span id="cb186-61"><a href="Ch06.html#cb186-61" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb186-62"><a href="Ch06.html#cb186-62" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb186-63"><a href="Ch06.html#cb186-63" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb186-64"><a href="Ch06.html#cb186-64" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb186-65"><a href="Ch06.html#cb186-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb186-66"><a href="Ch06.html#cb186-66" tabindex="-1"></a></span>
<span id="cb186-67"><a href="Ch06.html#cb186-67" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_OldForests_cell.tif&quot;</span></span>
<span id="cb186-68"><a href="Ch06.html#cb186-68" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb186-69"><a href="Ch06.html#cb186-69" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb186-70"><a href="Ch06.html#cb186-70" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb186-71"><a href="Ch06.html#cb186-71" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb186-72"><a href="Ch06.html#cb186-72" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb186-73"><a href="Ch06.html#cb186-73" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb186-74"><a href="Ch06.html#cb186-74" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb186-75"><a href="Ch06.html#cb186-75" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb186-76"><a href="Ch06.html#cb186-76" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb186-77"><a href="Ch06.html#cb186-77" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb186-78"><a href="Ch06.html#cb186-78" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb186-79"><a href="Ch06.html#cb186-79" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_145.png" width="100%" /></p>
</div>
<div id="ch06.146" class="section level2 hasAnchor" number="6.146">
<h2><span class="header-section-number">6.146</span> Edges_OldForests_r500<a href="Ch06.html#ch06.146" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_OldForests_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_146</code></p>
<p><strong>English name:</strong> Edge pixels of Forests Over Rotation Age within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Pieaugušo un pāraugušo mežaudžu malu garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.145">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="Ch06.html#cb187-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb187-2"><a href="Ch06.html#cb187-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb187-3"><a href="Ch06.html#cb187-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb187-4"><a href="Ch06.html#cb187-4" tabindex="-1"></a></span>
<span id="cb187-5"><a href="Ch06.html#cb187-5" tabindex="-1"></a></span>
<span id="cb187-6"><a href="Ch06.html#cb187-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb187-7"><a href="Ch06.html#cb187-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb187-8"><a href="Ch06.html#cb187-8" tabindex="-1"></a></span>
<span id="cb187-9"><a href="Ch06.html#cb187-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb187-10"><a href="Ch06.html#cb187-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb187-11"><a href="Ch06.html#cb187-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb187-12"><a href="Ch06.html#cb187-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb187-13"><a href="Ch06.html#cb187-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb187-14"><a href="Ch06.html#cb187-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb187-15"><a href="Ch06.html#cb187-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_cell.tif&quot;</span>),</span>
<span id="cb187-16"><a href="Ch06.html#cb187-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_OldForests&quot;</span>),</span>
<span id="cb187-17"><a href="Ch06.html#cb187-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb187-18"><a href="Ch06.html#cb187-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb187-19"><a href="Ch06.html#cb187-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb187-20"><a href="Ch06.html#cb187-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb187-21"><a href="Ch06.html#cb187-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb187-22"><a href="Ch06.html#cb187-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb187-23"><a href="Ch06.html#cb187-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb187-24"><a href="Ch06.html#cb187-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb187-25"><a href="Ch06.html#cb187-25" tabindex="-1"></a></span>
<span id="cb187-26"><a href="Ch06.html#cb187-26" tabindex="-1"></a></span>
<span id="cb187-27"><a href="Ch06.html#cb187-27" tabindex="-1"></a><span class="co"># Edges_OldForests_r500.tif egv_146 ----</span></span>
<span id="cb187-28"><a href="Ch06.html#cb187-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_r500.tif&quot;</span>)</span>
<span id="cb187-29"><a href="Ch06.html#cb187-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_146&quot;</span></span>
<span id="cb187-30"><a href="Ch06.html#cb187-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb187-31"><a href="Ch06.html#cb187-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb187-32"><a href="Ch06.html#cb187-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_r500.tif&quot;</span>,</span>
<span id="cb187-33"><a href="Ch06.html#cb187-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb187-34"><a href="Ch06.html#cb187-34" tabindex="-1"></a></span>
<span id="cb187-35"><a href="Ch06.html#cb187-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb187-36"><a href="Ch06.html#cb187-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb187-37"><a href="Ch06.html#cb187-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb187-38"><a href="Ch06.html#cb187-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb187-39"><a href="Ch06.html#cb187-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb187-40"><a href="Ch06.html#cb187-40" tabindex="-1"></a></span>
<span id="cb187-41"><a href="Ch06.html#cb187-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_OldForests_r500.tif&quot;</span></span>
<span id="cb187-42"><a href="Ch06.html#cb187-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb187-43"><a href="Ch06.html#cb187-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb187-44"><a href="Ch06.html#cb187-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb187-45"><a href="Ch06.html#cb187-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb187-46"><a href="Ch06.html#cb187-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb187-47"><a href="Ch06.html#cb187-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb187-48"><a href="Ch06.html#cb187-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb187-49"><a href="Ch06.html#cb187-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb187-50"><a href="Ch06.html#cb187-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb187-51"><a href="Ch06.html#cb187-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb187-52"><a href="Ch06.html#cb187-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb187-53"><a href="Ch06.html#cb187-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_146.png" width="100%" /></p>
</div>
<div id="ch06.147" class="section level2 hasAnchor" number="6.147">
<h2><span class="header-section-number">6.147</span> Edges_OldForests_r1250<a href="Ch06.html#ch06.147" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_OldForests_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_147</code></p>
<p><strong>English name:</strong> Edge pixels of Forests Over Rotation Age within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Pieaugušo un pāraugušo mežaudžu malu garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.145">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="Ch06.html#cb188-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb188-2"><a href="Ch06.html#cb188-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb188-3"><a href="Ch06.html#cb188-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb188-4"><a href="Ch06.html#cb188-4" tabindex="-1"></a></span>
<span id="cb188-5"><a href="Ch06.html#cb188-5" tabindex="-1"></a></span>
<span id="cb188-6"><a href="Ch06.html#cb188-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb188-7"><a href="Ch06.html#cb188-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb188-8"><a href="Ch06.html#cb188-8" tabindex="-1"></a></span>
<span id="cb188-9"><a href="Ch06.html#cb188-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb188-10"><a href="Ch06.html#cb188-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb188-11"><a href="Ch06.html#cb188-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb188-12"><a href="Ch06.html#cb188-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb188-13"><a href="Ch06.html#cb188-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb188-14"><a href="Ch06.html#cb188-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb188-15"><a href="Ch06.html#cb188-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_cell.tif&quot;</span>),</span>
<span id="cb188-16"><a href="Ch06.html#cb188-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_OldForests&quot;</span>),</span>
<span id="cb188-17"><a href="Ch06.html#cb188-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb188-18"><a href="Ch06.html#cb188-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb188-19"><a href="Ch06.html#cb188-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb188-20"><a href="Ch06.html#cb188-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb188-21"><a href="Ch06.html#cb188-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb188-22"><a href="Ch06.html#cb188-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb188-23"><a href="Ch06.html#cb188-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb188-24"><a href="Ch06.html#cb188-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb188-25"><a href="Ch06.html#cb188-25" tabindex="-1"></a></span>
<span id="cb188-26"><a href="Ch06.html#cb188-26" tabindex="-1"></a></span>
<span id="cb188-27"><a href="Ch06.html#cb188-27" tabindex="-1"></a><span class="co"># Edges_OldForests_r1250.tif    egv_147 ----</span></span>
<span id="cb188-28"><a href="Ch06.html#cb188-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_r1250.tif&quot;</span>)</span>
<span id="cb188-29"><a href="Ch06.html#cb188-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_147&quot;</span></span>
<span id="cb188-30"><a href="Ch06.html#cb188-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb188-31"><a href="Ch06.html#cb188-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb188-32"><a href="Ch06.html#cb188-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_r1250.tif&quot;</span>,</span>
<span id="cb188-33"><a href="Ch06.html#cb188-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb188-34"><a href="Ch06.html#cb188-34" tabindex="-1"></a></span>
<span id="cb188-35"><a href="Ch06.html#cb188-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb188-36"><a href="Ch06.html#cb188-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb188-37"><a href="Ch06.html#cb188-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb188-38"><a href="Ch06.html#cb188-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb188-39"><a href="Ch06.html#cb188-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb188-40"><a href="Ch06.html#cb188-40" tabindex="-1"></a></span>
<span id="cb188-41"><a href="Ch06.html#cb188-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_OldForests_r1250.tif&quot;</span></span>
<span id="cb188-42"><a href="Ch06.html#cb188-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb188-43"><a href="Ch06.html#cb188-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb188-44"><a href="Ch06.html#cb188-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb188-45"><a href="Ch06.html#cb188-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb188-46"><a href="Ch06.html#cb188-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb188-47"><a href="Ch06.html#cb188-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb188-48"><a href="Ch06.html#cb188-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb188-49"><a href="Ch06.html#cb188-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb188-50"><a href="Ch06.html#cb188-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb188-51"><a href="Ch06.html#cb188-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb188-52"><a href="Ch06.html#cb188-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb188-53"><a href="Ch06.html#cb188-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_147.png" width="100%" /></p>
</div>
<div id="ch06.148" class="section level2 hasAnchor" number="6.148">
<h2><span class="header-section-number">6.148</span> Edges_OldForests_r3000<a href="Ch06.html#ch06.148" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_OldForests_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_148</code></p>
<p><strong>English name:</strong> Edge pixels of Forests Over Rotation Age within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Pieaugušo un pāraugušo mežaudžu malu garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.145">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="Ch06.html#cb189-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb189-2"><a href="Ch06.html#cb189-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb189-3"><a href="Ch06.html#cb189-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb189-4"><a href="Ch06.html#cb189-4" tabindex="-1"></a></span>
<span id="cb189-5"><a href="Ch06.html#cb189-5" tabindex="-1"></a></span>
<span id="cb189-6"><a href="Ch06.html#cb189-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb189-7"><a href="Ch06.html#cb189-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb189-8"><a href="Ch06.html#cb189-8" tabindex="-1"></a></span>
<span id="cb189-9"><a href="Ch06.html#cb189-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb189-10"><a href="Ch06.html#cb189-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb189-11"><a href="Ch06.html#cb189-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb189-12"><a href="Ch06.html#cb189-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb189-13"><a href="Ch06.html#cb189-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb189-14"><a href="Ch06.html#cb189-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb189-15"><a href="Ch06.html#cb189-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_cell.tif&quot;</span>),</span>
<span id="cb189-16"><a href="Ch06.html#cb189-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_OldForests&quot;</span>),</span>
<span id="cb189-17"><a href="Ch06.html#cb189-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb189-18"><a href="Ch06.html#cb189-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb189-19"><a href="Ch06.html#cb189-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb189-20"><a href="Ch06.html#cb189-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb189-21"><a href="Ch06.html#cb189-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb189-22"><a href="Ch06.html#cb189-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb189-23"><a href="Ch06.html#cb189-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb189-24"><a href="Ch06.html#cb189-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb189-25"><a href="Ch06.html#cb189-25" tabindex="-1"></a></span>
<span id="cb189-26"><a href="Ch06.html#cb189-26" tabindex="-1"></a></span>
<span id="cb189-27"><a href="Ch06.html#cb189-27" tabindex="-1"></a><span class="co"># Edges_OldForests_r3000.tif    egv_148 ----</span></span>
<span id="cb189-28"><a href="Ch06.html#cb189-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_r3000.tif&quot;</span>)</span>
<span id="cb189-29"><a href="Ch06.html#cb189-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_148&quot;</span></span>
<span id="cb189-30"><a href="Ch06.html#cb189-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb189-31"><a href="Ch06.html#cb189-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb189-32"><a href="Ch06.html#cb189-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_r3000.tif&quot;</span>,</span>
<span id="cb189-33"><a href="Ch06.html#cb189-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb189-34"><a href="Ch06.html#cb189-34" tabindex="-1"></a></span>
<span id="cb189-35"><a href="Ch06.html#cb189-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb189-36"><a href="Ch06.html#cb189-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb189-37"><a href="Ch06.html#cb189-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb189-38"><a href="Ch06.html#cb189-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb189-39"><a href="Ch06.html#cb189-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb189-40"><a href="Ch06.html#cb189-40" tabindex="-1"></a></span>
<span id="cb189-41"><a href="Ch06.html#cb189-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_OldForests_r3000.tif&quot;</span></span>
<span id="cb189-42"><a href="Ch06.html#cb189-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb189-43"><a href="Ch06.html#cb189-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb189-44"><a href="Ch06.html#cb189-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb189-45"><a href="Ch06.html#cb189-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb189-46"><a href="Ch06.html#cb189-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb189-47"><a href="Ch06.html#cb189-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb189-48"><a href="Ch06.html#cb189-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb189-49"><a href="Ch06.html#cb189-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb189-50"><a href="Ch06.html#cb189-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb189-51"><a href="Ch06.html#cb189-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb189-52"><a href="Ch06.html#cb189-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb189-53"><a href="Ch06.html#cb189-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_148.png" width="100%" /></p>
</div>
<div id="ch06.149" class="section level2 hasAnchor" number="6.149">
<h2><span class="header-section-number">6.149</span> Edges_OldForests_r10000<a href="Ch06.html#ch06.149" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_OldForests_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_149</code></p>
<p><strong>English name:</strong> Edge pixels of Forests Over Rotation Age within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Pieaugušo un pāraugušo mežaudžu malu garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.145">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="Ch06.html#cb190-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb190-2"><a href="Ch06.html#cb190-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb190-3"><a href="Ch06.html#cb190-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb190-4"><a href="Ch06.html#cb190-4" tabindex="-1"></a></span>
<span id="cb190-5"><a href="Ch06.html#cb190-5" tabindex="-1"></a></span>
<span id="cb190-6"><a href="Ch06.html#cb190-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb190-7"><a href="Ch06.html#cb190-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb190-8"><a href="Ch06.html#cb190-8" tabindex="-1"></a></span>
<span id="cb190-9"><a href="Ch06.html#cb190-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb190-10"><a href="Ch06.html#cb190-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb190-11"><a href="Ch06.html#cb190-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb190-12"><a href="Ch06.html#cb190-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb190-13"><a href="Ch06.html#cb190-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb190-14"><a href="Ch06.html#cb190-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb190-15"><a href="Ch06.html#cb190-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_cell.tif&quot;</span>),</span>
<span id="cb190-16"><a href="Ch06.html#cb190-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_OldForests&quot;</span>),</span>
<span id="cb190-17"><a href="Ch06.html#cb190-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb190-18"><a href="Ch06.html#cb190-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb190-19"><a href="Ch06.html#cb190-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb190-20"><a href="Ch06.html#cb190-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb190-21"><a href="Ch06.html#cb190-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb190-22"><a href="Ch06.html#cb190-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb190-23"><a href="Ch06.html#cb190-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb190-24"><a href="Ch06.html#cb190-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb190-25"><a href="Ch06.html#cb190-25" tabindex="-1"></a></span>
<span id="cb190-26"><a href="Ch06.html#cb190-26" tabindex="-1"></a></span>
<span id="cb190-27"><a href="Ch06.html#cb190-27" tabindex="-1"></a><span class="co"># Edges_OldForests_r10000.tif   egv_149 ----</span></span>
<span id="cb190-28"><a href="Ch06.html#cb190-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_r10000.tif&quot;</span>)</span>
<span id="cb190-29"><a href="Ch06.html#cb190-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_149&quot;</span></span>
<span id="cb190-30"><a href="Ch06.html#cb190-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb190-31"><a href="Ch06.html#cb190-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb190-32"><a href="Ch06.html#cb190-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_OldForests_r10000.tif&quot;</span>,</span>
<span id="cb190-33"><a href="Ch06.html#cb190-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb190-34"><a href="Ch06.html#cb190-34" tabindex="-1"></a></span>
<span id="cb190-35"><a href="Ch06.html#cb190-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb190-36"><a href="Ch06.html#cb190-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb190-37"><a href="Ch06.html#cb190-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb190-38"><a href="Ch06.html#cb190-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb190-39"><a href="Ch06.html#cb190-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb190-40"><a href="Ch06.html#cb190-40" tabindex="-1"></a></span>
<span id="cb190-41"><a href="Ch06.html#cb190-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_OldForests_r10000.tif&quot;</span></span>
<span id="cb190-42"><a href="Ch06.html#cb190-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb190-43"><a href="Ch06.html#cb190-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb190-44"><a href="Ch06.html#cb190-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb190-45"><a href="Ch06.html#cb190-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb190-46"><a href="Ch06.html#cb190-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb190-47"><a href="Ch06.html#cb190-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb190-48"><a href="Ch06.html#cb190-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb190-49"><a href="Ch06.html#cb190-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb190-50"><a href="Ch06.html#cb190-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb190-51"><a href="Ch06.html#cb190-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb190-52"><a href="Ch06.html#cb190-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb190-53"><a href="Ch06.html#cb190-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_149.png" width="100%" /></p>
</div>
<div id="ch06.150" class="section level2 hasAnchor" number="6.150">
<h2><span class="header-section-number">6.150</span> Edges_Roads_cell<a href="Ch06.html#ch06.150" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Roads_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_150</code></p>
<p><strong>English name:</strong> Edge pixels of Roads within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ceļu malu garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values equal to 100 and from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then, the layer (1=presence) is covered over
the nulls layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="Ch06.html#cb191-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb191-2"><a href="Ch06.html#cb191-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb191-3"><a href="Ch06.html#cb191-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb191-4"><a href="Ch06.html#cb191-4" tabindex="-1"></a></span>
<span id="cb191-5"><a href="Ch06.html#cb191-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb191-6"><a href="Ch06.html#cb191-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb191-7"><a href="Ch06.html#cb191-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb191-8"><a href="Ch06.html#cb191-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb191-9"><a href="Ch06.html#cb191-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb191-10"><a href="Ch06.html#cb191-10" tabindex="-1"></a></span>
<span id="cb191-11"><a href="Ch06.html#cb191-11" tabindex="-1"></a></span>
<span id="cb191-12"><a href="Ch06.html#cb191-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb191-13"><a href="Ch06.html#cb191-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb191-14"><a href="Ch06.html#cb191-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb191-15"><a href="Ch06.html#cb191-15" tabindex="-1"></a></span>
<span id="cb191-16"><a href="Ch06.html#cb191-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb191-17"><a href="Ch06.html#cb191-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb191-18"><a href="Ch06.html#cb191-18" tabindex="-1"></a></span>
<span id="cb191-19"><a href="Ch06.html#cb191-19" tabindex="-1"></a><span class="co"># Edges_Roads_input.tif ----</span></span>
<span id="cb191-20"><a href="Ch06.html#cb191-20" tabindex="-1"></a>roads<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">100</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb191-21"><a href="Ch06.html#cb191-21" tabindex="-1"></a><span class="fu">plot</span>(roads)</span>
<span id="cb191-22"><a href="Ch06.html#cb191-22" tabindex="-1"></a>roads<span class="ot">=</span><span class="fu">cover</span>(roads,nulls10)</span>
<span id="cb191-23"><a href="Ch06.html#cb191-23" tabindex="-1"></a><span class="fu">plot</span>(roads)</span>
<span id="cb191-24"><a href="Ch06.html#cb191-24" tabindex="-1"></a></span>
<span id="cb191-25"><a href="Ch06.html#cb191-25" tabindex="-1"></a>edge_roads<span class="ot">=</span><span class="fu">project</span>(roads,template10,</span>
<span id="cb191-26"><a href="Ch06.html#cb191-26" tabindex="-1"></a>                   <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_Roads_input.tif&quot;</span>,</span>
<span id="cb191-27"><a href="Ch06.html#cb191-27" tabindex="-1"></a>                   <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb191-28"><a href="Ch06.html#cb191-28" tabindex="-1"></a><span class="fu">rm</span>(edge_roads)</span>
<span id="cb191-29"><a href="Ch06.html#cb191-29" tabindex="-1"></a></span>
<span id="cb191-30"><a href="Ch06.html#cb191-30" tabindex="-1"></a></span>
<span id="cb191-31"><a href="Ch06.html#cb191-31" tabindex="-1"></a><span class="co"># Edges_Roads_cell.tif  egv_150 ----</span></span>
<span id="cb191-32"><a href="Ch06.html#cb191-32" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb191-33"><a href="Ch06.html#cb191-33" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_Roads_input.tif&quot;</span>,</span>
<span id="cb191-34"><a href="Ch06.html#cb191-34" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb191-35"><a href="Ch06.html#cb191-35" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb191-36"><a href="Ch06.html#cb191-36" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb191-37"><a href="Ch06.html#cb191-37" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb191-38"><a href="Ch06.html#cb191-38" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb191-39"><a href="Ch06.html#cb191-39" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_Roads_cell.tif&quot;</span>,</span>
<span id="cb191-40"><a href="Ch06.html#cb191-40" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_150&quot;</span>,</span>
<span id="cb191-41"><a href="Ch06.html#cb191-41" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb191-42"><a href="Ch06.html#cb191-42" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb191-43"><a href="Ch06.html#cb191-43" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb191-44"><a href="Ch06.html#cb191-44" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb191-45"><a href="Ch06.html#cb191-45" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb191-46"><a href="Ch06.html#cb191-46" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb191-47"><a href="Ch06.html#cb191-47" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb191-48"><a href="Ch06.html#cb191-48" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb191-49"><a href="Ch06.html#cb191-49" tabindex="-1"></a>)</span>
<span id="cb191-50"><a href="Ch06.html#cb191-50" tabindex="-1"></a></span>
<span id="cb191-51"><a href="Ch06.html#cb191-51" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb191-52"><a href="Ch06.html#cb191-52" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb191-53"><a href="Ch06.html#cb191-53" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb191-54"><a href="Ch06.html#cb191-54" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb191-55"><a href="Ch06.html#cb191-55" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb191-56"><a href="Ch06.html#cb191-56" tabindex="-1"></a></span>
<span id="cb191-57"><a href="Ch06.html#cb191-57" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Roads_cell.tif&quot;</span></span>
<span id="cb191-58"><a href="Ch06.html#cb191-58" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb191-59"><a href="Ch06.html#cb191-59" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb191-60"><a href="Ch06.html#cb191-60" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb191-61"><a href="Ch06.html#cb191-61" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb191-62"><a href="Ch06.html#cb191-62" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb191-63"><a href="Ch06.html#cb191-63" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb191-64"><a href="Ch06.html#cb191-64" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb191-65"><a href="Ch06.html#cb191-65" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb191-66"><a href="Ch06.html#cb191-66" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb191-67"><a href="Ch06.html#cb191-67" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb191-68"><a href="Ch06.html#cb191-68" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb191-69"><a href="Ch06.html#cb191-69" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_150.png" width="100%" /></p>
</div>
<div id="ch06.151" class="section level2 hasAnchor" number="6.151">
<h2><span class="header-section-number">6.151</span> Edges_Roads_r500<a href="Ch06.html#ch06.151" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Roads_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_151</code></p>
<p><strong>English name:</strong> Edge pixels of Roads within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Ceļu malu garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.145">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="Ch06.html#cb192-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb192-2"><a href="Ch06.html#cb192-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb192-3"><a href="Ch06.html#cb192-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb192-4"><a href="Ch06.html#cb192-4" tabindex="-1"></a></span>
<span id="cb192-5"><a href="Ch06.html#cb192-5" tabindex="-1"></a></span>
<span id="cb192-6"><a href="Ch06.html#cb192-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb192-7"><a href="Ch06.html#cb192-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb192-8"><a href="Ch06.html#cb192-8" tabindex="-1"></a></span>
<span id="cb192-9"><a href="Ch06.html#cb192-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb192-10"><a href="Ch06.html#cb192-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb192-11"><a href="Ch06.html#cb192-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb192-12"><a href="Ch06.html#cb192-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb192-13"><a href="Ch06.html#cb192-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb192-14"><a href="Ch06.html#cb192-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb192-15"><a href="Ch06.html#cb192-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_cell.tif&quot;</span>),</span>
<span id="cb192-16"><a href="Ch06.html#cb192-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Roads&quot;</span>),</span>
<span id="cb192-17"><a href="Ch06.html#cb192-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb192-18"><a href="Ch06.html#cb192-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb192-19"><a href="Ch06.html#cb192-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb192-20"><a href="Ch06.html#cb192-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb192-21"><a href="Ch06.html#cb192-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb192-22"><a href="Ch06.html#cb192-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb192-23"><a href="Ch06.html#cb192-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb192-24"><a href="Ch06.html#cb192-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb192-25"><a href="Ch06.html#cb192-25" tabindex="-1"></a></span>
<span id="cb192-26"><a href="Ch06.html#cb192-26" tabindex="-1"></a></span>
<span id="cb192-27"><a href="Ch06.html#cb192-27" tabindex="-1"></a><span class="co"># Edges_Roads_r500.tif  egv_151 ----</span></span>
<span id="cb192-28"><a href="Ch06.html#cb192-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_r500.tif&quot;</span>)</span>
<span id="cb192-29"><a href="Ch06.html#cb192-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_151&quot;</span></span>
<span id="cb192-30"><a href="Ch06.html#cb192-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb192-31"><a href="Ch06.html#cb192-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb192-32"><a href="Ch06.html#cb192-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_r500.tif&quot;</span>,</span>
<span id="cb192-33"><a href="Ch06.html#cb192-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb192-34"><a href="Ch06.html#cb192-34" tabindex="-1"></a></span>
<span id="cb192-35"><a href="Ch06.html#cb192-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb192-36"><a href="Ch06.html#cb192-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb192-37"><a href="Ch06.html#cb192-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb192-38"><a href="Ch06.html#cb192-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb192-39"><a href="Ch06.html#cb192-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb192-40"><a href="Ch06.html#cb192-40" tabindex="-1"></a></span>
<span id="cb192-41"><a href="Ch06.html#cb192-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Roads_r500.tif&quot;</span></span>
<span id="cb192-42"><a href="Ch06.html#cb192-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb192-43"><a href="Ch06.html#cb192-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb192-44"><a href="Ch06.html#cb192-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb192-45"><a href="Ch06.html#cb192-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb192-46"><a href="Ch06.html#cb192-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb192-47"><a href="Ch06.html#cb192-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb192-48"><a href="Ch06.html#cb192-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb192-49"><a href="Ch06.html#cb192-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb192-50"><a href="Ch06.html#cb192-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb192-51"><a href="Ch06.html#cb192-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb192-52"><a href="Ch06.html#cb192-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb192-53"><a href="Ch06.html#cb192-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_151.png" width="100%" /></p>
</div>
<div id="ch06.152" class="section level2 hasAnchor" number="6.152">
<h2><span class="header-section-number">6.152</span> Edges_Roads_r1250<a href="Ch06.html#ch06.152" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Roads_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_152</code></p>
<p><strong>English name:</strong> Edge pixels of Roads within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Ceļu malu garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.145">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="Ch06.html#cb193-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb193-2"><a href="Ch06.html#cb193-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb193-3"><a href="Ch06.html#cb193-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb193-4"><a href="Ch06.html#cb193-4" tabindex="-1"></a></span>
<span id="cb193-5"><a href="Ch06.html#cb193-5" tabindex="-1"></a></span>
<span id="cb193-6"><a href="Ch06.html#cb193-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb193-7"><a href="Ch06.html#cb193-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb193-8"><a href="Ch06.html#cb193-8" tabindex="-1"></a></span>
<span id="cb193-9"><a href="Ch06.html#cb193-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb193-10"><a href="Ch06.html#cb193-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb193-11"><a href="Ch06.html#cb193-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb193-12"><a href="Ch06.html#cb193-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb193-13"><a href="Ch06.html#cb193-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb193-14"><a href="Ch06.html#cb193-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb193-15"><a href="Ch06.html#cb193-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_cell.tif&quot;</span>),</span>
<span id="cb193-16"><a href="Ch06.html#cb193-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Roads&quot;</span>),</span>
<span id="cb193-17"><a href="Ch06.html#cb193-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb193-18"><a href="Ch06.html#cb193-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb193-19"><a href="Ch06.html#cb193-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb193-20"><a href="Ch06.html#cb193-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb193-21"><a href="Ch06.html#cb193-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb193-22"><a href="Ch06.html#cb193-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb193-23"><a href="Ch06.html#cb193-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb193-24"><a href="Ch06.html#cb193-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb193-25"><a href="Ch06.html#cb193-25" tabindex="-1"></a></span>
<span id="cb193-26"><a href="Ch06.html#cb193-26" tabindex="-1"></a></span>
<span id="cb193-27"><a href="Ch06.html#cb193-27" tabindex="-1"></a><span class="co"># Edges_Roads_r1250.tif egv_152 ----</span></span>
<span id="cb193-28"><a href="Ch06.html#cb193-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_r1250.tif&quot;</span>)</span>
<span id="cb193-29"><a href="Ch06.html#cb193-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_152&quot;</span></span>
<span id="cb193-30"><a href="Ch06.html#cb193-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb193-31"><a href="Ch06.html#cb193-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb193-32"><a href="Ch06.html#cb193-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_r1250.tif&quot;</span>,</span>
<span id="cb193-33"><a href="Ch06.html#cb193-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb193-34"><a href="Ch06.html#cb193-34" tabindex="-1"></a></span>
<span id="cb193-35"><a href="Ch06.html#cb193-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb193-36"><a href="Ch06.html#cb193-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb193-37"><a href="Ch06.html#cb193-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb193-38"><a href="Ch06.html#cb193-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb193-39"><a href="Ch06.html#cb193-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb193-40"><a href="Ch06.html#cb193-40" tabindex="-1"></a></span>
<span id="cb193-41"><a href="Ch06.html#cb193-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Roads_r1250.tif&quot;</span></span>
<span id="cb193-42"><a href="Ch06.html#cb193-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb193-43"><a href="Ch06.html#cb193-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb193-44"><a href="Ch06.html#cb193-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb193-45"><a href="Ch06.html#cb193-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb193-46"><a href="Ch06.html#cb193-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb193-47"><a href="Ch06.html#cb193-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb193-48"><a href="Ch06.html#cb193-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb193-49"><a href="Ch06.html#cb193-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb193-50"><a href="Ch06.html#cb193-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb193-51"><a href="Ch06.html#cb193-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb193-52"><a href="Ch06.html#cb193-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb193-53"><a href="Ch06.html#cb193-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_152.png" width="100%" /></p>
</div>
<div id="ch06.153" class="section level2 hasAnchor" number="6.153">
<h2><span class="header-section-number">6.153</span> Edges_Roads_r3000<a href="Ch06.html#ch06.153" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Roads_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_153</code></p>
<p><strong>English name:</strong> Edge pixels of Roads within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Ceļu malu garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.145">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="Ch06.html#cb194-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb194-2"><a href="Ch06.html#cb194-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb194-3"><a href="Ch06.html#cb194-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb194-4"><a href="Ch06.html#cb194-4" tabindex="-1"></a></span>
<span id="cb194-5"><a href="Ch06.html#cb194-5" tabindex="-1"></a></span>
<span id="cb194-6"><a href="Ch06.html#cb194-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb194-7"><a href="Ch06.html#cb194-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb194-8"><a href="Ch06.html#cb194-8" tabindex="-1"></a></span>
<span id="cb194-9"><a href="Ch06.html#cb194-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb194-10"><a href="Ch06.html#cb194-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb194-11"><a href="Ch06.html#cb194-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb194-12"><a href="Ch06.html#cb194-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb194-13"><a href="Ch06.html#cb194-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb194-14"><a href="Ch06.html#cb194-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb194-15"><a href="Ch06.html#cb194-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_cell.tif&quot;</span>),</span>
<span id="cb194-16"><a href="Ch06.html#cb194-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Roads&quot;</span>),</span>
<span id="cb194-17"><a href="Ch06.html#cb194-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb194-18"><a href="Ch06.html#cb194-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb194-19"><a href="Ch06.html#cb194-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb194-20"><a href="Ch06.html#cb194-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb194-21"><a href="Ch06.html#cb194-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb194-22"><a href="Ch06.html#cb194-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb194-23"><a href="Ch06.html#cb194-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb194-24"><a href="Ch06.html#cb194-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb194-25"><a href="Ch06.html#cb194-25" tabindex="-1"></a></span>
<span id="cb194-26"><a href="Ch06.html#cb194-26" tabindex="-1"></a></span>
<span id="cb194-27"><a href="Ch06.html#cb194-27" tabindex="-1"></a><span class="co"># Edges_Roads_r3000.tif egv_153 ----</span></span>
<span id="cb194-28"><a href="Ch06.html#cb194-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_r3000.tif&quot;</span>)</span>
<span id="cb194-29"><a href="Ch06.html#cb194-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_153&quot;</span></span>
<span id="cb194-30"><a href="Ch06.html#cb194-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb194-31"><a href="Ch06.html#cb194-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb194-32"><a href="Ch06.html#cb194-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_r3000.tif&quot;</span>,</span>
<span id="cb194-33"><a href="Ch06.html#cb194-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb194-34"><a href="Ch06.html#cb194-34" tabindex="-1"></a></span>
<span id="cb194-35"><a href="Ch06.html#cb194-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb194-36"><a href="Ch06.html#cb194-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb194-37"><a href="Ch06.html#cb194-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb194-38"><a href="Ch06.html#cb194-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb194-39"><a href="Ch06.html#cb194-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb194-40"><a href="Ch06.html#cb194-40" tabindex="-1"></a></span>
<span id="cb194-41"><a href="Ch06.html#cb194-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Roads_r3000.tif&quot;</span></span>
<span id="cb194-42"><a href="Ch06.html#cb194-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb194-43"><a href="Ch06.html#cb194-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb194-44"><a href="Ch06.html#cb194-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb194-45"><a href="Ch06.html#cb194-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb194-46"><a href="Ch06.html#cb194-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb194-47"><a href="Ch06.html#cb194-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb194-48"><a href="Ch06.html#cb194-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb194-49"><a href="Ch06.html#cb194-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb194-50"><a href="Ch06.html#cb194-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb194-51"><a href="Ch06.html#cb194-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb194-52"><a href="Ch06.html#cb194-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb194-53"><a href="Ch06.html#cb194-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_153.png" width="100%" /></p>
</div>
<div id="ch06.154" class="section level2 hasAnchor" number="6.154">
<h2><span class="header-section-number">6.154</span> Edges_Roads_r10000<a href="Ch06.html#ch06.154" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Roads_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_154</code></p>
<p><strong>English name:</strong> Edge pixels of Roads within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Ceļu malu garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.145">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="Ch06.html#cb195-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb195-2"><a href="Ch06.html#cb195-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb195-3"><a href="Ch06.html#cb195-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb195-4"><a href="Ch06.html#cb195-4" tabindex="-1"></a></span>
<span id="cb195-5"><a href="Ch06.html#cb195-5" tabindex="-1"></a></span>
<span id="cb195-6"><a href="Ch06.html#cb195-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb195-7"><a href="Ch06.html#cb195-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb195-8"><a href="Ch06.html#cb195-8" tabindex="-1"></a></span>
<span id="cb195-9"><a href="Ch06.html#cb195-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb195-10"><a href="Ch06.html#cb195-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb195-11"><a href="Ch06.html#cb195-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb195-12"><a href="Ch06.html#cb195-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb195-13"><a href="Ch06.html#cb195-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb195-14"><a href="Ch06.html#cb195-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb195-15"><a href="Ch06.html#cb195-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_cell.tif&quot;</span>),</span>
<span id="cb195-16"><a href="Ch06.html#cb195-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Roads&quot;</span>),</span>
<span id="cb195-17"><a href="Ch06.html#cb195-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb195-18"><a href="Ch06.html#cb195-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb195-19"><a href="Ch06.html#cb195-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb195-20"><a href="Ch06.html#cb195-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb195-21"><a href="Ch06.html#cb195-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb195-22"><a href="Ch06.html#cb195-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb195-23"><a href="Ch06.html#cb195-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb195-24"><a href="Ch06.html#cb195-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb195-25"><a href="Ch06.html#cb195-25" tabindex="-1"></a></span>
<span id="cb195-26"><a href="Ch06.html#cb195-26" tabindex="-1"></a></span>
<span id="cb195-27"><a href="Ch06.html#cb195-27" tabindex="-1"></a><span class="co"># Edges_Roads_r10000.tif    egv_154 ----</span></span>
<span id="cb195-28"><a href="Ch06.html#cb195-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_r10000.tif&quot;</span>)</span>
<span id="cb195-29"><a href="Ch06.html#cb195-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_154&quot;</span></span>
<span id="cb195-30"><a href="Ch06.html#cb195-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb195-31"><a href="Ch06.html#cb195-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb195-32"><a href="Ch06.html#cb195-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Roads_r10000.tif&quot;</span>,</span>
<span id="cb195-33"><a href="Ch06.html#cb195-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb195-34"><a href="Ch06.html#cb195-34" tabindex="-1"></a></span>
<span id="cb195-35"><a href="Ch06.html#cb195-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb195-36"><a href="Ch06.html#cb195-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb195-37"><a href="Ch06.html#cb195-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb195-38"><a href="Ch06.html#cb195-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb195-39"><a href="Ch06.html#cb195-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb195-40"><a href="Ch06.html#cb195-40" tabindex="-1"></a></span>
<span id="cb195-41"><a href="Ch06.html#cb195-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Roads_r10000.tif&quot;</span></span>
<span id="cb195-42"><a href="Ch06.html#cb195-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb195-43"><a href="Ch06.html#cb195-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb195-44"><a href="Ch06.html#cb195-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb195-45"><a href="Ch06.html#cb195-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb195-46"><a href="Ch06.html#cb195-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb195-47"><a href="Ch06.html#cb195-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb195-48"><a href="Ch06.html#cb195-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb195-49"><a href="Ch06.html#cb195-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb195-50"><a href="Ch06.html#cb195-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb195-51"><a href="Ch06.html#cb195-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb195-52"><a href="Ch06.html#cb195-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb195-53"><a href="Ch06.html#cb195-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_154.png" width="100%" /></p>
</div>
<div id="ch06.155" class="section level2 hasAnchor" number="6.155">
<h2><span class="header-section-number">6.155</span> Edges_Trees_cell<a href="Ch06.html#ch06.155" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Trees_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_155</code></p>
<p><strong>English name:</strong> Edge pixels of Trees within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Koku malu garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values larger or equal to 630 and smaller than 700 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then, the layer (1=presence) is covered over
the nulls layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="Ch06.html#cb196-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb196-2"><a href="Ch06.html#cb196-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb196-3"><a href="Ch06.html#cb196-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb196-4"><a href="Ch06.html#cb196-4" tabindex="-1"></a></span>
<span id="cb196-5"><a href="Ch06.html#cb196-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb196-6"><a href="Ch06.html#cb196-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb196-7"><a href="Ch06.html#cb196-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb196-8"><a href="Ch06.html#cb196-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb196-9"><a href="Ch06.html#cb196-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb196-10"><a href="Ch06.html#cb196-10" tabindex="-1"></a></span>
<span id="cb196-11"><a href="Ch06.html#cb196-11" tabindex="-1"></a></span>
<span id="cb196-12"><a href="Ch06.html#cb196-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb196-13"><a href="Ch06.html#cb196-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb196-14"><a href="Ch06.html#cb196-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb196-15"><a href="Ch06.html#cb196-15" tabindex="-1"></a></span>
<span id="cb196-16"><a href="Ch06.html#cb196-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb196-17"><a href="Ch06.html#cb196-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb196-18"><a href="Ch06.html#cb196-18" tabindex="-1"></a></span>
<span id="cb196-19"><a href="Ch06.html#cb196-19" tabindex="-1"></a><span class="co"># Edges_Trees_input.tif ----</span></span>
<span id="cb196-20"><a href="Ch06.html#cb196-20" tabindex="-1"></a>trees_from630<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">&gt;=</span><span class="dv">630</span> <span class="sc">&amp;</span> simple_landscape<span class="sc">&lt;</span><span class="dv">700</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb196-21"><a href="Ch06.html#cb196-21" tabindex="-1"></a><span class="fu">plot</span>(trees_from630)</span>
<span id="cb196-22"><a href="Ch06.html#cb196-22" tabindex="-1"></a>trees_from630<span class="ot">=</span><span class="fu">cover</span>(trees_from630,nulls10)</span>
<span id="cb196-23"><a href="Ch06.html#cb196-23" tabindex="-1"></a><span class="fu">plot</span>(trees_from630)</span>
<span id="cb196-24"><a href="Ch06.html#cb196-24" tabindex="-1"></a></span>
<span id="cb196-25"><a href="Ch06.html#cb196-25" tabindex="-1"></a>edge_trees_from630<span class="ot">=</span><span class="fu">project</span>(trees_from630,template10,</span>
<span id="cb196-26"><a href="Ch06.html#cb196-26" tabindex="-1"></a>                   <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_Trees_input.tif&quot;</span>,</span>
<span id="cb196-27"><a href="Ch06.html#cb196-27" tabindex="-1"></a>                   <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb196-28"><a href="Ch06.html#cb196-28" tabindex="-1"></a><span class="fu">rm</span>(edge_trees_from630)</span>
<span id="cb196-29"><a href="Ch06.html#cb196-29" tabindex="-1"></a></span>
<span id="cb196-30"><a href="Ch06.html#cb196-30" tabindex="-1"></a></span>
<span id="cb196-31"><a href="Ch06.html#cb196-31" tabindex="-1"></a><span class="co"># Edges_Trees_cell.tif  egv_155</span></span>
<span id="cb196-32"><a href="Ch06.html#cb196-32" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb196-33"><a href="Ch06.html#cb196-33" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_Trees_input.tif&quot;</span>,</span>
<span id="cb196-34"><a href="Ch06.html#cb196-34" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb196-35"><a href="Ch06.html#cb196-35" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb196-36"><a href="Ch06.html#cb196-36" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb196-37"><a href="Ch06.html#cb196-37" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb196-38"><a href="Ch06.html#cb196-38" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb196-39"><a href="Ch06.html#cb196-39" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_Trees_cell.tif&quot;</span>,</span>
<span id="cb196-40"><a href="Ch06.html#cb196-40" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_155&quot;</span>,</span>
<span id="cb196-41"><a href="Ch06.html#cb196-41" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb196-42"><a href="Ch06.html#cb196-42" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb196-43"><a href="Ch06.html#cb196-43" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb196-44"><a href="Ch06.html#cb196-44" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb196-45"><a href="Ch06.html#cb196-45" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb196-46"><a href="Ch06.html#cb196-46" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb196-47"><a href="Ch06.html#cb196-47" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb196-48"><a href="Ch06.html#cb196-48" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb196-49"><a href="Ch06.html#cb196-49" tabindex="-1"></a>)</span>
<span id="cb196-50"><a href="Ch06.html#cb196-50" tabindex="-1"></a></span>
<span id="cb196-51"><a href="Ch06.html#cb196-51" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb196-52"><a href="Ch06.html#cb196-52" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb196-53"><a href="Ch06.html#cb196-53" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb196-54"><a href="Ch06.html#cb196-54" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb196-55"><a href="Ch06.html#cb196-55" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb196-56"><a href="Ch06.html#cb196-56" tabindex="-1"></a></span>
<span id="cb196-57"><a href="Ch06.html#cb196-57" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Trees_cell.tif&quot;</span></span>
<span id="cb196-58"><a href="Ch06.html#cb196-58" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb196-59"><a href="Ch06.html#cb196-59" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb196-60"><a href="Ch06.html#cb196-60" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb196-61"><a href="Ch06.html#cb196-61" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb196-62"><a href="Ch06.html#cb196-62" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb196-63"><a href="Ch06.html#cb196-63" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb196-64"><a href="Ch06.html#cb196-64" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb196-65"><a href="Ch06.html#cb196-65" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb196-66"><a href="Ch06.html#cb196-66" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb196-67"><a href="Ch06.html#cb196-67" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb196-68"><a href="Ch06.html#cb196-68" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb196-69"><a href="Ch06.html#cb196-69" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_155.png" width="100%" /></p>
</div>
<div id="ch06.156" class="section level2 hasAnchor" number="6.156">
<h2><span class="header-section-number">6.156</span> Edges_Trees_r500<a href="Ch06.html#ch06.156" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Trees_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_156</code></p>
<p><strong>English name:</strong> Edge pixels of Trees within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Koku malu garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.155">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="Ch06.html#cb197-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb197-2"><a href="Ch06.html#cb197-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb197-3"><a href="Ch06.html#cb197-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb197-4"><a href="Ch06.html#cb197-4" tabindex="-1"></a></span>
<span id="cb197-5"><a href="Ch06.html#cb197-5" tabindex="-1"></a></span>
<span id="cb197-6"><a href="Ch06.html#cb197-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb197-7"><a href="Ch06.html#cb197-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb197-8"><a href="Ch06.html#cb197-8" tabindex="-1"></a></span>
<span id="cb197-9"><a href="Ch06.html#cb197-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb197-10"><a href="Ch06.html#cb197-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb197-11"><a href="Ch06.html#cb197-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb197-12"><a href="Ch06.html#cb197-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb197-13"><a href="Ch06.html#cb197-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb197-14"><a href="Ch06.html#cb197-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb197-15"><a href="Ch06.html#cb197-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_cell.tif&quot;</span>),</span>
<span id="cb197-16"><a href="Ch06.html#cb197-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Trees&quot;</span>),</span>
<span id="cb197-17"><a href="Ch06.html#cb197-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb197-18"><a href="Ch06.html#cb197-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb197-19"><a href="Ch06.html#cb197-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb197-20"><a href="Ch06.html#cb197-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb197-21"><a href="Ch06.html#cb197-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb197-22"><a href="Ch06.html#cb197-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb197-23"><a href="Ch06.html#cb197-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb197-24"><a href="Ch06.html#cb197-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb197-25"><a href="Ch06.html#cb197-25" tabindex="-1"></a></span>
<span id="cb197-26"><a href="Ch06.html#cb197-26" tabindex="-1"></a></span>
<span id="cb197-27"><a href="Ch06.html#cb197-27" tabindex="-1"></a><span class="co"># Edges_Trees_r500.tif  egv_156 ----</span></span>
<span id="cb197-28"><a href="Ch06.html#cb197-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_r500.tif&quot;</span>)</span>
<span id="cb197-29"><a href="Ch06.html#cb197-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_156&quot;</span></span>
<span id="cb197-30"><a href="Ch06.html#cb197-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb197-31"><a href="Ch06.html#cb197-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb197-32"><a href="Ch06.html#cb197-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_r500.tif&quot;</span>,</span>
<span id="cb197-33"><a href="Ch06.html#cb197-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb197-34"><a href="Ch06.html#cb197-34" tabindex="-1"></a></span>
<span id="cb197-35"><a href="Ch06.html#cb197-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb197-36"><a href="Ch06.html#cb197-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb197-37"><a href="Ch06.html#cb197-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb197-38"><a href="Ch06.html#cb197-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb197-39"><a href="Ch06.html#cb197-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb197-40"><a href="Ch06.html#cb197-40" tabindex="-1"></a></span>
<span id="cb197-41"><a href="Ch06.html#cb197-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Trees_r500.tif&quot;</span></span>
<span id="cb197-42"><a href="Ch06.html#cb197-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb197-43"><a href="Ch06.html#cb197-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb197-44"><a href="Ch06.html#cb197-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb197-45"><a href="Ch06.html#cb197-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb197-46"><a href="Ch06.html#cb197-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb197-47"><a href="Ch06.html#cb197-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb197-48"><a href="Ch06.html#cb197-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb197-49"><a href="Ch06.html#cb197-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb197-50"><a href="Ch06.html#cb197-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb197-51"><a href="Ch06.html#cb197-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb197-52"><a href="Ch06.html#cb197-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb197-53"><a href="Ch06.html#cb197-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_156.png" width="100%" /></p>
</div>
<div id="ch06.157" class="section level2 hasAnchor" number="6.157">
<h2><span class="header-section-number">6.157</span> Edges_Trees_r1250<a href="Ch06.html#ch06.157" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Trees_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_157</code></p>
<p><strong>English name:</strong> Edge pixels of Trees within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Koku malu garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.155">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="Ch06.html#cb198-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb198-2"><a href="Ch06.html#cb198-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb198-3"><a href="Ch06.html#cb198-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb198-4"><a href="Ch06.html#cb198-4" tabindex="-1"></a></span>
<span id="cb198-5"><a href="Ch06.html#cb198-5" tabindex="-1"></a></span>
<span id="cb198-6"><a href="Ch06.html#cb198-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb198-7"><a href="Ch06.html#cb198-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb198-8"><a href="Ch06.html#cb198-8" tabindex="-1"></a></span>
<span id="cb198-9"><a href="Ch06.html#cb198-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb198-10"><a href="Ch06.html#cb198-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb198-11"><a href="Ch06.html#cb198-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb198-12"><a href="Ch06.html#cb198-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb198-13"><a href="Ch06.html#cb198-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb198-14"><a href="Ch06.html#cb198-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb198-15"><a href="Ch06.html#cb198-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_cell.tif&quot;</span>),</span>
<span id="cb198-16"><a href="Ch06.html#cb198-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Trees&quot;</span>),</span>
<span id="cb198-17"><a href="Ch06.html#cb198-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb198-18"><a href="Ch06.html#cb198-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb198-19"><a href="Ch06.html#cb198-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb198-20"><a href="Ch06.html#cb198-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb198-21"><a href="Ch06.html#cb198-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb198-22"><a href="Ch06.html#cb198-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb198-23"><a href="Ch06.html#cb198-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb198-24"><a href="Ch06.html#cb198-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb198-25"><a href="Ch06.html#cb198-25" tabindex="-1"></a></span>
<span id="cb198-26"><a href="Ch06.html#cb198-26" tabindex="-1"></a></span>
<span id="cb198-27"><a href="Ch06.html#cb198-27" tabindex="-1"></a><span class="co"># Edges_Trees_r1250.tif egv_157 ----</span></span>
<span id="cb198-28"><a href="Ch06.html#cb198-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_r1250.tif&quot;</span>)</span>
<span id="cb198-29"><a href="Ch06.html#cb198-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_157&quot;</span></span>
<span id="cb198-30"><a href="Ch06.html#cb198-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb198-31"><a href="Ch06.html#cb198-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb198-32"><a href="Ch06.html#cb198-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_r1250.tif&quot;</span>,</span>
<span id="cb198-33"><a href="Ch06.html#cb198-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb198-34"><a href="Ch06.html#cb198-34" tabindex="-1"></a></span>
<span id="cb198-35"><a href="Ch06.html#cb198-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb198-36"><a href="Ch06.html#cb198-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb198-37"><a href="Ch06.html#cb198-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb198-38"><a href="Ch06.html#cb198-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb198-39"><a href="Ch06.html#cb198-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb198-40"><a href="Ch06.html#cb198-40" tabindex="-1"></a></span>
<span id="cb198-41"><a href="Ch06.html#cb198-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Trees_r1250.tif&quot;</span></span>
<span id="cb198-42"><a href="Ch06.html#cb198-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb198-43"><a href="Ch06.html#cb198-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb198-44"><a href="Ch06.html#cb198-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb198-45"><a href="Ch06.html#cb198-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb198-46"><a href="Ch06.html#cb198-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb198-47"><a href="Ch06.html#cb198-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb198-48"><a href="Ch06.html#cb198-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb198-49"><a href="Ch06.html#cb198-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb198-50"><a href="Ch06.html#cb198-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb198-51"><a href="Ch06.html#cb198-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb198-52"><a href="Ch06.html#cb198-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb198-53"><a href="Ch06.html#cb198-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_157.png" width="100%" /></p>
</div>
<div id="ch06.158" class="section level2 hasAnchor" number="6.158">
<h2><span class="header-section-number">6.158</span> Edges_Trees_r3000<a href="Ch06.html#ch06.158" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Trees_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_158</code></p>
<p><strong>English name:</strong> Edge pixels of Trees within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Koku malu garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.155">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="Ch06.html#cb199-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb199-2"><a href="Ch06.html#cb199-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb199-3"><a href="Ch06.html#cb199-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb199-4"><a href="Ch06.html#cb199-4" tabindex="-1"></a></span>
<span id="cb199-5"><a href="Ch06.html#cb199-5" tabindex="-1"></a></span>
<span id="cb199-6"><a href="Ch06.html#cb199-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb199-7"><a href="Ch06.html#cb199-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb199-8"><a href="Ch06.html#cb199-8" tabindex="-1"></a></span>
<span id="cb199-9"><a href="Ch06.html#cb199-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb199-10"><a href="Ch06.html#cb199-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb199-11"><a href="Ch06.html#cb199-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb199-12"><a href="Ch06.html#cb199-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb199-13"><a href="Ch06.html#cb199-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb199-14"><a href="Ch06.html#cb199-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb199-15"><a href="Ch06.html#cb199-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_cell.tif&quot;</span>),</span>
<span id="cb199-16"><a href="Ch06.html#cb199-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Trees&quot;</span>),</span>
<span id="cb199-17"><a href="Ch06.html#cb199-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb199-18"><a href="Ch06.html#cb199-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb199-19"><a href="Ch06.html#cb199-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb199-20"><a href="Ch06.html#cb199-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb199-21"><a href="Ch06.html#cb199-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb199-22"><a href="Ch06.html#cb199-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb199-23"><a href="Ch06.html#cb199-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb199-24"><a href="Ch06.html#cb199-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb199-25"><a href="Ch06.html#cb199-25" tabindex="-1"></a></span>
<span id="cb199-26"><a href="Ch06.html#cb199-26" tabindex="-1"></a></span>
<span id="cb199-27"><a href="Ch06.html#cb199-27" tabindex="-1"></a><span class="co"># Edges_Trees_r3000.tif egv_158 ----</span></span>
<span id="cb199-28"><a href="Ch06.html#cb199-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_r3000.tif&quot;</span>)</span>
<span id="cb199-29"><a href="Ch06.html#cb199-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_158&quot;</span></span>
<span id="cb199-30"><a href="Ch06.html#cb199-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb199-31"><a href="Ch06.html#cb199-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb199-32"><a href="Ch06.html#cb199-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_r3000.tif&quot;</span>,</span>
<span id="cb199-33"><a href="Ch06.html#cb199-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb199-34"><a href="Ch06.html#cb199-34" tabindex="-1"></a></span>
<span id="cb199-35"><a href="Ch06.html#cb199-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb199-36"><a href="Ch06.html#cb199-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb199-37"><a href="Ch06.html#cb199-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb199-38"><a href="Ch06.html#cb199-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb199-39"><a href="Ch06.html#cb199-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb199-40"><a href="Ch06.html#cb199-40" tabindex="-1"></a></span>
<span id="cb199-41"><a href="Ch06.html#cb199-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Trees_r3000.tif&quot;</span></span>
<span id="cb199-42"><a href="Ch06.html#cb199-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb199-43"><a href="Ch06.html#cb199-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb199-44"><a href="Ch06.html#cb199-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb199-45"><a href="Ch06.html#cb199-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb199-46"><a href="Ch06.html#cb199-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb199-47"><a href="Ch06.html#cb199-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb199-48"><a href="Ch06.html#cb199-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb199-49"><a href="Ch06.html#cb199-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb199-50"><a href="Ch06.html#cb199-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb199-51"><a href="Ch06.html#cb199-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb199-52"><a href="Ch06.html#cb199-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb199-53"><a href="Ch06.html#cb199-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_158.png" width="100%" /></p>
</div>
<div id="ch06.159" class="section level2 hasAnchor" number="6.159">
<h2><span class="header-section-number">6.159</span> Edges_Trees_r10000<a href="Ch06.html#ch06.159" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Trees_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_159</code></p>
<p><strong>English name:</strong> Edge pixels of Trees within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Koku malu garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.155">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="Ch06.html#cb200-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb200-2"><a href="Ch06.html#cb200-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb200-3"><a href="Ch06.html#cb200-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb200-4"><a href="Ch06.html#cb200-4" tabindex="-1"></a></span>
<span id="cb200-5"><a href="Ch06.html#cb200-5" tabindex="-1"></a></span>
<span id="cb200-6"><a href="Ch06.html#cb200-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb200-7"><a href="Ch06.html#cb200-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb200-8"><a href="Ch06.html#cb200-8" tabindex="-1"></a></span>
<span id="cb200-9"><a href="Ch06.html#cb200-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb200-10"><a href="Ch06.html#cb200-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb200-11"><a href="Ch06.html#cb200-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb200-12"><a href="Ch06.html#cb200-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb200-13"><a href="Ch06.html#cb200-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb200-14"><a href="Ch06.html#cb200-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb200-15"><a href="Ch06.html#cb200-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_cell.tif&quot;</span>),</span>
<span id="cb200-16"><a href="Ch06.html#cb200-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Trees&quot;</span>),</span>
<span id="cb200-17"><a href="Ch06.html#cb200-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb200-18"><a href="Ch06.html#cb200-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb200-19"><a href="Ch06.html#cb200-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb200-20"><a href="Ch06.html#cb200-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb200-21"><a href="Ch06.html#cb200-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb200-22"><a href="Ch06.html#cb200-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb200-23"><a href="Ch06.html#cb200-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb200-24"><a href="Ch06.html#cb200-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb200-25"><a href="Ch06.html#cb200-25" tabindex="-1"></a></span>
<span id="cb200-26"><a href="Ch06.html#cb200-26" tabindex="-1"></a></span>
<span id="cb200-27"><a href="Ch06.html#cb200-27" tabindex="-1"></a><span class="co"># Edges_Trees_r10000.tif    egv_159 ----</span></span>
<span id="cb200-28"><a href="Ch06.html#cb200-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_r10000.tif&quot;</span>)</span>
<span id="cb200-29"><a href="Ch06.html#cb200-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_159&quot;</span></span>
<span id="cb200-30"><a href="Ch06.html#cb200-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb200-31"><a href="Ch06.html#cb200-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb200-32"><a href="Ch06.html#cb200-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Trees_r10000.tif&quot;</span>,</span>
<span id="cb200-33"><a href="Ch06.html#cb200-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb200-34"><a href="Ch06.html#cb200-34" tabindex="-1"></a></span>
<span id="cb200-35"><a href="Ch06.html#cb200-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb200-36"><a href="Ch06.html#cb200-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb200-37"><a href="Ch06.html#cb200-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb200-38"><a href="Ch06.html#cb200-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb200-39"><a href="Ch06.html#cb200-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb200-40"><a href="Ch06.html#cb200-40" tabindex="-1"></a></span>
<span id="cb200-41"><a href="Ch06.html#cb200-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Trees_r10000.tif&quot;</span></span>
<span id="cb200-42"><a href="Ch06.html#cb200-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb200-43"><a href="Ch06.html#cb200-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb200-44"><a href="Ch06.html#cb200-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb200-45"><a href="Ch06.html#cb200-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb200-46"><a href="Ch06.html#cb200-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb200-47"><a href="Ch06.html#cb200-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb200-48"><a href="Ch06.html#cb200-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb200-49"><a href="Ch06.html#cb200-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb200-50"><a href="Ch06.html#cb200-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb200-51"><a href="Ch06.html#cb200-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb200-52"><a href="Ch06.html#cb200-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb200-53"><a href="Ch06.html#cb200-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_159.png" width="100%" /></p>
</div>
<div id="ch06.160" class="section level2 hasAnchor" number="6.160">
<h2><span class="header-section-number">6.160</span> Edges_Water_cell<a href="Ch06.html#ch06.160" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_160</code></p>
<p><strong>English name:</strong> Edge pixels of Water within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ūdenstilpju malu garums nalīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values equal to 200 and from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then, the layer (1=presence) is covered over
the nulls layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="Ch06.html#cb201-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb201-2"><a href="Ch06.html#cb201-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb201-3"><a href="Ch06.html#cb201-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb201-4"><a href="Ch06.html#cb201-4" tabindex="-1"></a></span>
<span id="cb201-5"><a href="Ch06.html#cb201-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb201-6"><a href="Ch06.html#cb201-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb201-7"><a href="Ch06.html#cb201-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb201-8"><a href="Ch06.html#cb201-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb201-9"><a href="Ch06.html#cb201-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb201-10"><a href="Ch06.html#cb201-10" tabindex="-1"></a></span>
<span id="cb201-11"><a href="Ch06.html#cb201-11" tabindex="-1"></a></span>
<span id="cb201-12"><a href="Ch06.html#cb201-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb201-13"><a href="Ch06.html#cb201-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb201-14"><a href="Ch06.html#cb201-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb201-15"><a href="Ch06.html#cb201-15" tabindex="-1"></a></span>
<span id="cb201-16"><a href="Ch06.html#cb201-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb201-17"><a href="Ch06.html#cb201-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb201-18"><a href="Ch06.html#cb201-18" tabindex="-1"></a></span>
<span id="cb201-19"><a href="Ch06.html#cb201-19" tabindex="-1"></a><span class="co"># Edges_Water_input.tif ----</span></span>
<span id="cb201-20"><a href="Ch06.html#cb201-20" tabindex="-1"></a>water<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">200</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb201-21"><a href="Ch06.html#cb201-21" tabindex="-1"></a><span class="fu">plot</span>(water)</span>
<span id="cb201-22"><a href="Ch06.html#cb201-22" tabindex="-1"></a>water<span class="ot">=</span><span class="fu">cover</span>(water,nulls10)</span>
<span id="cb201-23"><a href="Ch06.html#cb201-23" tabindex="-1"></a><span class="fu">plot</span>(water)</span>
<span id="cb201-24"><a href="Ch06.html#cb201-24" tabindex="-1"></a></span>
<span id="cb201-25"><a href="Ch06.html#cb201-25" tabindex="-1"></a>edge_water<span class="ot">=</span><span class="fu">project</span>(water,template10,</span>
<span id="cb201-26"><a href="Ch06.html#cb201-26" tabindex="-1"></a>                            <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_Water_input.tif&quot;</span>,</span>
<span id="cb201-27"><a href="Ch06.html#cb201-27" tabindex="-1"></a>                            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb201-28"><a href="Ch06.html#cb201-28" tabindex="-1"></a></span>
<span id="cb201-29"><a href="Ch06.html#cb201-29" tabindex="-1"></a></span>
<span id="cb201-30"><a href="Ch06.html#cb201-30" tabindex="-1"></a><span class="co"># Edges_Water_cell.tif  egv_160 ----</span></span>
<span id="cb201-31"><a href="Ch06.html#cb201-31" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb201-32"><a href="Ch06.html#cb201-32" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_Water_input.tif&quot;</span>,</span>
<span id="cb201-33"><a href="Ch06.html#cb201-33" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb201-34"><a href="Ch06.html#cb201-34" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb201-35"><a href="Ch06.html#cb201-35" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb201-36"><a href="Ch06.html#cb201-36" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb201-37"><a href="Ch06.html#cb201-37" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb201-38"><a href="Ch06.html#cb201-38" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_Water_cell.tif&quot;</span>,</span>
<span id="cb201-39"><a href="Ch06.html#cb201-39" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_160&quot;</span>,</span>
<span id="cb201-40"><a href="Ch06.html#cb201-40" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb201-41"><a href="Ch06.html#cb201-41" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb201-42"><a href="Ch06.html#cb201-42" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb201-43"><a href="Ch06.html#cb201-43" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb201-44"><a href="Ch06.html#cb201-44" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb201-45"><a href="Ch06.html#cb201-45" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb201-46"><a href="Ch06.html#cb201-46" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb201-47"><a href="Ch06.html#cb201-47" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb201-48"><a href="Ch06.html#cb201-48" tabindex="-1"></a>)</span>
<span id="cb201-49"><a href="Ch06.html#cb201-49" tabindex="-1"></a></span>
<span id="cb201-50"><a href="Ch06.html#cb201-50" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb201-51"><a href="Ch06.html#cb201-51" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb201-52"><a href="Ch06.html#cb201-52" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb201-53"><a href="Ch06.html#cb201-53" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb201-54"><a href="Ch06.html#cb201-54" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb201-55"><a href="Ch06.html#cb201-55" tabindex="-1"></a></span>
<span id="cb201-56"><a href="Ch06.html#cb201-56" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water_cell.tif&quot;</span></span>
<span id="cb201-57"><a href="Ch06.html#cb201-57" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb201-58"><a href="Ch06.html#cb201-58" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb201-59"><a href="Ch06.html#cb201-59" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb201-60"><a href="Ch06.html#cb201-60" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb201-61"><a href="Ch06.html#cb201-61" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb201-62"><a href="Ch06.html#cb201-62" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb201-63"><a href="Ch06.html#cb201-63" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb201-64"><a href="Ch06.html#cb201-64" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb201-65"><a href="Ch06.html#cb201-65" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb201-66"><a href="Ch06.html#cb201-66" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb201-67"><a href="Ch06.html#cb201-67" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb201-68"><a href="Ch06.html#cb201-68" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_160.png" width="100%" /></p>
</div>
<div id="ch06.161" class="section level2 hasAnchor" number="6.161">
<h2><span class="header-section-number">6.161</span> Edges_Water_r500<a href="Ch06.html#ch06.161" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_161</code></p>
<p><strong>English name:</strong> Edge pixels of Water within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpju malu garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.160">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="Ch06.html#cb202-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb202-2"><a href="Ch06.html#cb202-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb202-3"><a href="Ch06.html#cb202-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb202-4"><a href="Ch06.html#cb202-4" tabindex="-1"></a></span>
<span id="cb202-5"><a href="Ch06.html#cb202-5" tabindex="-1"></a></span>
<span id="cb202-6"><a href="Ch06.html#cb202-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb202-7"><a href="Ch06.html#cb202-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb202-8"><a href="Ch06.html#cb202-8" tabindex="-1"></a></span>
<span id="cb202-9"><a href="Ch06.html#cb202-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb202-10"><a href="Ch06.html#cb202-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb202-11"><a href="Ch06.html#cb202-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb202-12"><a href="Ch06.html#cb202-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb202-13"><a href="Ch06.html#cb202-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb202-14"><a href="Ch06.html#cb202-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb202-15"><a href="Ch06.html#cb202-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_cell.tif&quot;</span>),</span>
<span id="cb202-16"><a href="Ch06.html#cb202-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water&quot;</span>),</span>
<span id="cb202-17"><a href="Ch06.html#cb202-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb202-18"><a href="Ch06.html#cb202-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb202-19"><a href="Ch06.html#cb202-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb202-20"><a href="Ch06.html#cb202-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb202-21"><a href="Ch06.html#cb202-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb202-22"><a href="Ch06.html#cb202-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb202-23"><a href="Ch06.html#cb202-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb202-24"><a href="Ch06.html#cb202-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb202-25"><a href="Ch06.html#cb202-25" tabindex="-1"></a></span>
<span id="cb202-26"><a href="Ch06.html#cb202-26" tabindex="-1"></a></span>
<span id="cb202-27"><a href="Ch06.html#cb202-27" tabindex="-1"></a><span class="co"># Edges_Water_r500.tif  egv_161 ----</span></span>
<span id="cb202-28"><a href="Ch06.html#cb202-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_r500.tif&quot;</span>)</span>
<span id="cb202-29"><a href="Ch06.html#cb202-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_161&quot;</span></span>
<span id="cb202-30"><a href="Ch06.html#cb202-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb202-31"><a href="Ch06.html#cb202-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb202-32"><a href="Ch06.html#cb202-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_r500.tif&quot;</span>,</span>
<span id="cb202-33"><a href="Ch06.html#cb202-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb202-34"><a href="Ch06.html#cb202-34" tabindex="-1"></a></span>
<span id="cb202-35"><a href="Ch06.html#cb202-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb202-36"><a href="Ch06.html#cb202-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb202-37"><a href="Ch06.html#cb202-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb202-38"><a href="Ch06.html#cb202-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb202-39"><a href="Ch06.html#cb202-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb202-40"><a href="Ch06.html#cb202-40" tabindex="-1"></a></span>
<span id="cb202-41"><a href="Ch06.html#cb202-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water_r500.tif&quot;</span></span>
<span id="cb202-42"><a href="Ch06.html#cb202-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb202-43"><a href="Ch06.html#cb202-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb202-44"><a href="Ch06.html#cb202-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb202-45"><a href="Ch06.html#cb202-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb202-46"><a href="Ch06.html#cb202-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb202-47"><a href="Ch06.html#cb202-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb202-48"><a href="Ch06.html#cb202-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb202-49"><a href="Ch06.html#cb202-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb202-50"><a href="Ch06.html#cb202-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb202-51"><a href="Ch06.html#cb202-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb202-52"><a href="Ch06.html#cb202-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb202-53"><a href="Ch06.html#cb202-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_161.png" width="100%" /></p>
</div>
<div id="ch06.162" class="section level2 hasAnchor" number="6.162">
<h2><span class="header-section-number">6.162</span> Edges_Water_r1250<a href="Ch06.html#ch06.162" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_162</code></p>
<p><strong>English name:</strong> Edge pixels of Water within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpju malu garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.160">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="Ch06.html#cb203-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb203-2"><a href="Ch06.html#cb203-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb203-3"><a href="Ch06.html#cb203-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb203-4"><a href="Ch06.html#cb203-4" tabindex="-1"></a></span>
<span id="cb203-5"><a href="Ch06.html#cb203-5" tabindex="-1"></a></span>
<span id="cb203-6"><a href="Ch06.html#cb203-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb203-7"><a href="Ch06.html#cb203-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb203-8"><a href="Ch06.html#cb203-8" tabindex="-1"></a></span>
<span id="cb203-9"><a href="Ch06.html#cb203-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb203-10"><a href="Ch06.html#cb203-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb203-11"><a href="Ch06.html#cb203-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb203-12"><a href="Ch06.html#cb203-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb203-13"><a href="Ch06.html#cb203-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb203-14"><a href="Ch06.html#cb203-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb203-15"><a href="Ch06.html#cb203-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_cell.tif&quot;</span>),</span>
<span id="cb203-16"><a href="Ch06.html#cb203-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water&quot;</span>),</span>
<span id="cb203-17"><a href="Ch06.html#cb203-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb203-18"><a href="Ch06.html#cb203-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb203-19"><a href="Ch06.html#cb203-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb203-20"><a href="Ch06.html#cb203-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb203-21"><a href="Ch06.html#cb203-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb203-22"><a href="Ch06.html#cb203-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb203-23"><a href="Ch06.html#cb203-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb203-24"><a href="Ch06.html#cb203-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb203-25"><a href="Ch06.html#cb203-25" tabindex="-1"></a></span>
<span id="cb203-26"><a href="Ch06.html#cb203-26" tabindex="-1"></a></span>
<span id="cb203-27"><a href="Ch06.html#cb203-27" tabindex="-1"></a><span class="co"># Edges_Water_r1250.tif egv_162 ----</span></span>
<span id="cb203-28"><a href="Ch06.html#cb203-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_r1250.tif&quot;</span>)</span>
<span id="cb203-29"><a href="Ch06.html#cb203-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_162&quot;</span></span>
<span id="cb203-30"><a href="Ch06.html#cb203-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb203-31"><a href="Ch06.html#cb203-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb203-32"><a href="Ch06.html#cb203-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_r1250.tif&quot;</span>,</span>
<span id="cb203-33"><a href="Ch06.html#cb203-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb203-34"><a href="Ch06.html#cb203-34" tabindex="-1"></a></span>
<span id="cb203-35"><a href="Ch06.html#cb203-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb203-36"><a href="Ch06.html#cb203-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb203-37"><a href="Ch06.html#cb203-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb203-38"><a href="Ch06.html#cb203-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb203-39"><a href="Ch06.html#cb203-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb203-40"><a href="Ch06.html#cb203-40" tabindex="-1"></a></span>
<span id="cb203-41"><a href="Ch06.html#cb203-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water_r1250.tif&quot;</span></span>
<span id="cb203-42"><a href="Ch06.html#cb203-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb203-43"><a href="Ch06.html#cb203-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb203-44"><a href="Ch06.html#cb203-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb203-45"><a href="Ch06.html#cb203-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb203-46"><a href="Ch06.html#cb203-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb203-47"><a href="Ch06.html#cb203-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb203-48"><a href="Ch06.html#cb203-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb203-49"><a href="Ch06.html#cb203-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb203-50"><a href="Ch06.html#cb203-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb203-51"><a href="Ch06.html#cb203-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb203-52"><a href="Ch06.html#cb203-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb203-53"><a href="Ch06.html#cb203-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_162.png" width="100%" /></p>
</div>
<div id="ch06.163" class="section level2 hasAnchor" number="6.163">
<h2><span class="header-section-number">6.163</span> Edges_Water_r3000<a href="Ch06.html#ch06.163" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_163</code></p>
<p><strong>English name:</strong> Edge pixels of Water within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpju malu garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.160">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="Ch06.html#cb204-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb204-2"><a href="Ch06.html#cb204-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb204-3"><a href="Ch06.html#cb204-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb204-4"><a href="Ch06.html#cb204-4" tabindex="-1"></a></span>
<span id="cb204-5"><a href="Ch06.html#cb204-5" tabindex="-1"></a></span>
<span id="cb204-6"><a href="Ch06.html#cb204-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb204-7"><a href="Ch06.html#cb204-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb204-8"><a href="Ch06.html#cb204-8" tabindex="-1"></a></span>
<span id="cb204-9"><a href="Ch06.html#cb204-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb204-10"><a href="Ch06.html#cb204-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb204-11"><a href="Ch06.html#cb204-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb204-12"><a href="Ch06.html#cb204-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb204-13"><a href="Ch06.html#cb204-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb204-14"><a href="Ch06.html#cb204-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb204-15"><a href="Ch06.html#cb204-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_cell.tif&quot;</span>),</span>
<span id="cb204-16"><a href="Ch06.html#cb204-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water&quot;</span>),</span>
<span id="cb204-17"><a href="Ch06.html#cb204-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb204-18"><a href="Ch06.html#cb204-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb204-19"><a href="Ch06.html#cb204-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb204-20"><a href="Ch06.html#cb204-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb204-21"><a href="Ch06.html#cb204-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb204-22"><a href="Ch06.html#cb204-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb204-23"><a href="Ch06.html#cb204-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb204-24"><a href="Ch06.html#cb204-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb204-25"><a href="Ch06.html#cb204-25" tabindex="-1"></a></span>
<span id="cb204-26"><a href="Ch06.html#cb204-26" tabindex="-1"></a></span>
<span id="cb204-27"><a href="Ch06.html#cb204-27" tabindex="-1"></a><span class="co"># Edges_Water_r3000.tif egv_163 ----</span></span>
<span id="cb204-28"><a href="Ch06.html#cb204-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_r3000.tif&quot;</span>)</span>
<span id="cb204-29"><a href="Ch06.html#cb204-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_163&quot;</span></span>
<span id="cb204-30"><a href="Ch06.html#cb204-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb204-31"><a href="Ch06.html#cb204-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb204-32"><a href="Ch06.html#cb204-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_r3000.tif&quot;</span>,</span>
<span id="cb204-33"><a href="Ch06.html#cb204-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb204-34"><a href="Ch06.html#cb204-34" tabindex="-1"></a></span>
<span id="cb204-35"><a href="Ch06.html#cb204-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb204-36"><a href="Ch06.html#cb204-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb204-37"><a href="Ch06.html#cb204-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb204-38"><a href="Ch06.html#cb204-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb204-39"><a href="Ch06.html#cb204-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb204-40"><a href="Ch06.html#cb204-40" tabindex="-1"></a></span>
<span id="cb204-41"><a href="Ch06.html#cb204-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water_r3000.tif&quot;</span></span>
<span id="cb204-42"><a href="Ch06.html#cb204-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb204-43"><a href="Ch06.html#cb204-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb204-44"><a href="Ch06.html#cb204-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb204-45"><a href="Ch06.html#cb204-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb204-46"><a href="Ch06.html#cb204-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb204-47"><a href="Ch06.html#cb204-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb204-48"><a href="Ch06.html#cb204-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb204-49"><a href="Ch06.html#cb204-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb204-50"><a href="Ch06.html#cb204-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb204-51"><a href="Ch06.html#cb204-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb204-52"><a href="Ch06.html#cb204-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb204-53"><a href="Ch06.html#cb204-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_163.png" width="100%" /></p>
</div>
<div id="ch06.164" class="section level2 hasAnchor" number="6.164">
<h2><span class="header-section-number">6.164</span> Edges_Water_r10000<a href="Ch06.html#ch06.164" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_164</code></p>
<p><strong>English name:</strong> Edge pixels of Water within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpju malu garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.160">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="Ch06.html#cb205-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb205-2"><a href="Ch06.html#cb205-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb205-3"><a href="Ch06.html#cb205-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb205-4"><a href="Ch06.html#cb205-4" tabindex="-1"></a></span>
<span id="cb205-5"><a href="Ch06.html#cb205-5" tabindex="-1"></a></span>
<span id="cb205-6"><a href="Ch06.html#cb205-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb205-7"><a href="Ch06.html#cb205-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb205-8"><a href="Ch06.html#cb205-8" tabindex="-1"></a></span>
<span id="cb205-9"><a href="Ch06.html#cb205-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb205-10"><a href="Ch06.html#cb205-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb205-11"><a href="Ch06.html#cb205-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb205-12"><a href="Ch06.html#cb205-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb205-13"><a href="Ch06.html#cb205-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb205-14"><a href="Ch06.html#cb205-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb205-15"><a href="Ch06.html#cb205-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_cell.tif&quot;</span>),</span>
<span id="cb205-16"><a href="Ch06.html#cb205-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water&quot;</span>),</span>
<span id="cb205-17"><a href="Ch06.html#cb205-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb205-18"><a href="Ch06.html#cb205-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb205-19"><a href="Ch06.html#cb205-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb205-20"><a href="Ch06.html#cb205-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb205-21"><a href="Ch06.html#cb205-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb205-22"><a href="Ch06.html#cb205-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb205-23"><a href="Ch06.html#cb205-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb205-24"><a href="Ch06.html#cb205-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb205-25"><a href="Ch06.html#cb205-25" tabindex="-1"></a></span>
<span id="cb205-26"><a href="Ch06.html#cb205-26" tabindex="-1"></a></span>
<span id="cb205-27"><a href="Ch06.html#cb205-27" tabindex="-1"></a><span class="co"># Edges_Water_r10000.tif    egv_164 ----</span></span>
<span id="cb205-28"><a href="Ch06.html#cb205-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_r10000.tif&quot;</span>)</span>
<span id="cb205-29"><a href="Ch06.html#cb205-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_164&quot;</span></span>
<span id="cb205-30"><a href="Ch06.html#cb205-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb205-31"><a href="Ch06.html#cb205-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb205-32"><a href="Ch06.html#cb205-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water_r10000.tif&quot;</span>,</span>
<span id="cb205-33"><a href="Ch06.html#cb205-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb205-34"><a href="Ch06.html#cb205-34" tabindex="-1"></a></span>
<span id="cb205-35"><a href="Ch06.html#cb205-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb205-36"><a href="Ch06.html#cb205-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb205-37"><a href="Ch06.html#cb205-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb205-38"><a href="Ch06.html#cb205-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb205-39"><a href="Ch06.html#cb205-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb205-40"><a href="Ch06.html#cb205-40" tabindex="-1"></a></span>
<span id="cb205-41"><a href="Ch06.html#cb205-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water_r10000.tif&quot;</span></span>
<span id="cb205-42"><a href="Ch06.html#cb205-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb205-43"><a href="Ch06.html#cb205-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb205-44"><a href="Ch06.html#cb205-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb205-45"><a href="Ch06.html#cb205-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb205-46"><a href="Ch06.html#cb205-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb205-47"><a href="Ch06.html#cb205-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb205-48"><a href="Ch06.html#cb205-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb205-49"><a href="Ch06.html#cb205-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb205-50"><a href="Ch06.html#cb205-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb205-51"><a href="Ch06.html#cb205-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb205-52"><a href="Ch06.html#cb205-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb205-53"><a href="Ch06.html#cb205-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_164.png" width="100%" /></p>
</div>
<div id="ch06.165" class="section level2 hasAnchor" number="6.165">
<h2><span class="header-section-number">6.165</span> Edges_Water-Farmland_cell<a href="Ch06.html#ch06.165" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water-Farmland_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_165</code></p>
<p><strong>English name:</strong> Edge pixels of Water bordering with Farmland within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ūdenstilpu malu ar lauksaimniecības zemēm garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values larger than 300 and smaller than 400 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then values equal to 200 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 0 and everything else as NA. Then, the first layer (1=presence) is covered over
the second layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="Ch06.html#cb206-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb206-2"><a href="Ch06.html#cb206-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb206-3"><a href="Ch06.html#cb206-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb206-4"><a href="Ch06.html#cb206-4" tabindex="-1"></a></span>
<span id="cb206-5"><a href="Ch06.html#cb206-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb206-6"><a href="Ch06.html#cb206-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb206-7"><a href="Ch06.html#cb206-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb206-8"><a href="Ch06.html#cb206-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb206-9"><a href="Ch06.html#cb206-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb206-10"><a href="Ch06.html#cb206-10" tabindex="-1"></a></span>
<span id="cb206-11"><a href="Ch06.html#cb206-11" tabindex="-1"></a></span>
<span id="cb206-12"><a href="Ch06.html#cb206-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb206-13"><a href="Ch06.html#cb206-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb206-14"><a href="Ch06.html#cb206-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb206-15"><a href="Ch06.html#cb206-15" tabindex="-1"></a></span>
<span id="cb206-16"><a href="Ch06.html#cb206-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb206-17"><a href="Ch06.html#cb206-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb206-18"><a href="Ch06.html#cb206-18" tabindex="-1"></a></span>
<span id="cb206-19"><a href="Ch06.html#cb206-19" tabindex="-1"></a><span class="co"># Edges_Water-Farmland_input.tif ----</span></span>
<span id="cb206-20"><a href="Ch06.html#cb206-20" tabindex="-1"></a>water<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">200</span>,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb206-21"><a href="Ch06.html#cb206-21" tabindex="-1"></a><span class="fu">plot</span>(water)</span>
<span id="cb206-22"><a href="Ch06.html#cb206-22" tabindex="-1"></a></span>
<span id="cb206-23"><a href="Ch06.html#cb206-23" tabindex="-1"></a>farmland<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">&gt;</span><span class="dv">300</span> <span class="sc">&amp;</span> simple_landscape<span class="sc">&lt;</span><span class="dv">400</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb206-24"><a href="Ch06.html#cb206-24" tabindex="-1"></a><span class="fu">plot</span>(farmland)</span>
<span id="cb206-25"><a href="Ch06.html#cb206-25" tabindex="-1"></a></span>
<span id="cb206-26"><a href="Ch06.html#cb206-26" tabindex="-1"></a>water_farmland<span class="ot">=</span><span class="fu">cover</span>(water,farmland)</span>
<span id="cb206-27"><a href="Ch06.html#cb206-27" tabindex="-1"></a><span class="fu">plot</span>(water_farmland)</span>
<span id="cb206-28"><a href="Ch06.html#cb206-28" tabindex="-1"></a></span>
<span id="cb206-29"><a href="Ch06.html#cb206-29" tabindex="-1"></a>edge_water_farmland<span class="ot">=</span><span class="fu">project</span>(water_farmland,template10,</span>
<span id="cb206-30"><a href="Ch06.html#cb206-30" tabindex="-1"></a>                              <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_Water-Farmland_input.tif&quot;</span>,</span>
<span id="cb206-31"><a href="Ch06.html#cb206-31" tabindex="-1"></a>                              <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb206-32"><a href="Ch06.html#cb206-32" tabindex="-1"></a><span class="fu">rm</span>(edge_water_farmland)</span>
<span id="cb206-33"><a href="Ch06.html#cb206-33" tabindex="-1"></a><span class="fu">rm</span>(water_farmland)</span>
<span id="cb206-34"><a href="Ch06.html#cb206-34" tabindex="-1"></a></span>
<span id="cb206-35"><a href="Ch06.html#cb206-35" tabindex="-1"></a></span>
<span id="cb206-36"><a href="Ch06.html#cb206-36" tabindex="-1"></a><span class="co"># Edges_Water-Farmland_cell.tif egv_165 ----</span></span>
<span id="cb206-37"><a href="Ch06.html#cb206-37" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb206-38"><a href="Ch06.html#cb206-38" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_Water-Farmland_input.tif&quot;</span>,</span>
<span id="cb206-39"><a href="Ch06.html#cb206-39" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb206-40"><a href="Ch06.html#cb206-40" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb206-41"><a href="Ch06.html#cb206-41" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb206-42"><a href="Ch06.html#cb206-42" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb206-43"><a href="Ch06.html#cb206-43" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb206-44"><a href="Ch06.html#cb206-44" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_Water-Farmland_cell.tif&quot;</span>,</span>
<span id="cb206-45"><a href="Ch06.html#cb206-45" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_165&quot;</span>,</span>
<span id="cb206-46"><a href="Ch06.html#cb206-46" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb206-47"><a href="Ch06.html#cb206-47" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb206-48"><a href="Ch06.html#cb206-48" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb206-49"><a href="Ch06.html#cb206-49" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb206-50"><a href="Ch06.html#cb206-50" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb206-51"><a href="Ch06.html#cb206-51" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb206-52"><a href="Ch06.html#cb206-52" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb206-53"><a href="Ch06.html#cb206-53" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb206-54"><a href="Ch06.html#cb206-54" tabindex="-1"></a>)</span>
<span id="cb206-55"><a href="Ch06.html#cb206-55" tabindex="-1"></a></span>
<span id="cb206-56"><a href="Ch06.html#cb206-56" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb206-57"><a href="Ch06.html#cb206-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb206-58"><a href="Ch06.html#cb206-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb206-59"><a href="Ch06.html#cb206-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb206-60"><a href="Ch06.html#cb206-60" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb206-61"><a href="Ch06.html#cb206-61" tabindex="-1"></a></span>
<span id="cb206-62"><a href="Ch06.html#cb206-62" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water-Farmland_cell.tif&quot;</span></span>
<span id="cb206-63"><a href="Ch06.html#cb206-63" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb206-64"><a href="Ch06.html#cb206-64" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb206-65"><a href="Ch06.html#cb206-65" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb206-66"><a href="Ch06.html#cb206-66" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb206-67"><a href="Ch06.html#cb206-67" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb206-68"><a href="Ch06.html#cb206-68" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb206-69"><a href="Ch06.html#cb206-69" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb206-70"><a href="Ch06.html#cb206-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb206-71"><a href="Ch06.html#cb206-71" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb206-72"><a href="Ch06.html#cb206-72" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb206-73"><a href="Ch06.html#cb206-73" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb206-74"><a href="Ch06.html#cb206-74" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_165.png" width="100%" /></p>
</div>
<div id="ch06.166" class="section level2 hasAnchor" number="6.166">
<h2><span class="header-section-number">6.166</span> Edges_Water-Farmland_r500<a href="Ch06.html#ch06.166" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water-Farmland_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_166</code></p>
<p><strong>English name:</strong> Edge pixels of Water bordering with Farmland within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpu malu ar lauksaimniecības zemēm garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.165">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="Ch06.html#cb207-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb207-2"><a href="Ch06.html#cb207-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb207-3"><a href="Ch06.html#cb207-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb207-4"><a href="Ch06.html#cb207-4" tabindex="-1"></a></span>
<span id="cb207-5"><a href="Ch06.html#cb207-5" tabindex="-1"></a></span>
<span id="cb207-6"><a href="Ch06.html#cb207-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb207-7"><a href="Ch06.html#cb207-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb207-8"><a href="Ch06.html#cb207-8" tabindex="-1"></a></span>
<span id="cb207-9"><a href="Ch06.html#cb207-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb207-10"><a href="Ch06.html#cb207-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb207-11"><a href="Ch06.html#cb207-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb207-12"><a href="Ch06.html#cb207-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb207-13"><a href="Ch06.html#cb207-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb207-14"><a href="Ch06.html#cb207-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb207-15"><a href="Ch06.html#cb207-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_cell.tif&quot;</span>),</span>
<span id="cb207-16"><a href="Ch06.html#cb207-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water-Farmland&quot;</span>),</span>
<span id="cb207-17"><a href="Ch06.html#cb207-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb207-18"><a href="Ch06.html#cb207-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb207-19"><a href="Ch06.html#cb207-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb207-20"><a href="Ch06.html#cb207-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb207-21"><a href="Ch06.html#cb207-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb207-22"><a href="Ch06.html#cb207-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb207-23"><a href="Ch06.html#cb207-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb207-24"><a href="Ch06.html#cb207-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb207-25"><a href="Ch06.html#cb207-25" tabindex="-1"></a></span>
<span id="cb207-26"><a href="Ch06.html#cb207-26" tabindex="-1"></a></span>
<span id="cb207-27"><a href="Ch06.html#cb207-27" tabindex="-1"></a><span class="co"># Edges_Water-Farmland_r500.tif egv_166 -----</span></span>
<span id="cb207-28"><a href="Ch06.html#cb207-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_r500.tif&quot;</span>)</span>
<span id="cb207-29"><a href="Ch06.html#cb207-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_166&quot;</span></span>
<span id="cb207-30"><a href="Ch06.html#cb207-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb207-31"><a href="Ch06.html#cb207-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb207-32"><a href="Ch06.html#cb207-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_r500.tif&quot;</span>,</span>
<span id="cb207-33"><a href="Ch06.html#cb207-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb207-34"><a href="Ch06.html#cb207-34" tabindex="-1"></a></span>
<span id="cb207-35"><a href="Ch06.html#cb207-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb207-36"><a href="Ch06.html#cb207-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb207-37"><a href="Ch06.html#cb207-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb207-38"><a href="Ch06.html#cb207-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb207-39"><a href="Ch06.html#cb207-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb207-40"><a href="Ch06.html#cb207-40" tabindex="-1"></a></span>
<span id="cb207-41"><a href="Ch06.html#cb207-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water-Farmland_r500.tif&quot;</span></span>
<span id="cb207-42"><a href="Ch06.html#cb207-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb207-43"><a href="Ch06.html#cb207-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb207-44"><a href="Ch06.html#cb207-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb207-45"><a href="Ch06.html#cb207-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb207-46"><a href="Ch06.html#cb207-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb207-47"><a href="Ch06.html#cb207-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb207-48"><a href="Ch06.html#cb207-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb207-49"><a href="Ch06.html#cb207-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb207-50"><a href="Ch06.html#cb207-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb207-51"><a href="Ch06.html#cb207-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb207-52"><a href="Ch06.html#cb207-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb207-53"><a href="Ch06.html#cb207-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_166.png" width="100%" /></p>
</div>
<div id="ch06.167" class="section level2 hasAnchor" number="6.167">
<h2><span class="header-section-number">6.167</span> Edges_Water-Farmland_r1250<a href="Ch06.html#ch06.167" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water-Farmland_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_167</code></p>
<p><strong>English name:</strong> Edge pixels of Water bordering with Farmland within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpu malu ar lauksaimniecības zemēm garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.165">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="Ch06.html#cb208-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb208-2"><a href="Ch06.html#cb208-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb208-3"><a href="Ch06.html#cb208-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb208-4"><a href="Ch06.html#cb208-4" tabindex="-1"></a></span>
<span id="cb208-5"><a href="Ch06.html#cb208-5" tabindex="-1"></a></span>
<span id="cb208-6"><a href="Ch06.html#cb208-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb208-7"><a href="Ch06.html#cb208-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb208-8"><a href="Ch06.html#cb208-8" tabindex="-1"></a></span>
<span id="cb208-9"><a href="Ch06.html#cb208-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb208-10"><a href="Ch06.html#cb208-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb208-11"><a href="Ch06.html#cb208-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb208-12"><a href="Ch06.html#cb208-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb208-13"><a href="Ch06.html#cb208-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb208-14"><a href="Ch06.html#cb208-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb208-15"><a href="Ch06.html#cb208-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_cell.tif&quot;</span>),</span>
<span id="cb208-16"><a href="Ch06.html#cb208-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water-Farmland&quot;</span>),</span>
<span id="cb208-17"><a href="Ch06.html#cb208-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb208-18"><a href="Ch06.html#cb208-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb208-19"><a href="Ch06.html#cb208-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb208-20"><a href="Ch06.html#cb208-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb208-21"><a href="Ch06.html#cb208-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb208-22"><a href="Ch06.html#cb208-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb208-23"><a href="Ch06.html#cb208-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb208-24"><a href="Ch06.html#cb208-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb208-25"><a href="Ch06.html#cb208-25" tabindex="-1"></a></span>
<span id="cb208-26"><a href="Ch06.html#cb208-26" tabindex="-1"></a></span>
<span id="cb208-27"><a href="Ch06.html#cb208-27" tabindex="-1"></a><span class="co"># Edges_Water-Farmland_r1250.tif    egv_167 ----</span></span>
<span id="cb208-28"><a href="Ch06.html#cb208-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_r1250.tif&quot;</span>)</span>
<span id="cb208-29"><a href="Ch06.html#cb208-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_167&quot;</span></span>
<span id="cb208-30"><a href="Ch06.html#cb208-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb208-31"><a href="Ch06.html#cb208-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb208-32"><a href="Ch06.html#cb208-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_r1250.tif&quot;</span>,</span>
<span id="cb208-33"><a href="Ch06.html#cb208-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb208-34"><a href="Ch06.html#cb208-34" tabindex="-1"></a></span>
<span id="cb208-35"><a href="Ch06.html#cb208-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb208-36"><a href="Ch06.html#cb208-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb208-37"><a href="Ch06.html#cb208-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb208-38"><a href="Ch06.html#cb208-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb208-39"><a href="Ch06.html#cb208-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb208-40"><a href="Ch06.html#cb208-40" tabindex="-1"></a></span>
<span id="cb208-41"><a href="Ch06.html#cb208-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water-Farmland_r1250.tif&quot;</span></span>
<span id="cb208-42"><a href="Ch06.html#cb208-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb208-43"><a href="Ch06.html#cb208-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb208-44"><a href="Ch06.html#cb208-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb208-45"><a href="Ch06.html#cb208-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb208-46"><a href="Ch06.html#cb208-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb208-47"><a href="Ch06.html#cb208-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb208-48"><a href="Ch06.html#cb208-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb208-49"><a href="Ch06.html#cb208-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb208-50"><a href="Ch06.html#cb208-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb208-51"><a href="Ch06.html#cb208-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb208-52"><a href="Ch06.html#cb208-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb208-53"><a href="Ch06.html#cb208-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_167.png" width="100%" /></p>
</div>
<div id="ch06.168" class="section level2 hasAnchor" number="6.168">
<h2><span class="header-section-number">6.168</span> Edges_Water-Farmland_r3000<a href="Ch06.html#ch06.168" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water-Farmland_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_168</code></p>
<p><strong>English name:</strong> Edge pixels of Water bordering with Farmland within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpu malu ar lauksaimniecības zemēm garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.165">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="Ch06.html#cb209-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb209-2"><a href="Ch06.html#cb209-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb209-3"><a href="Ch06.html#cb209-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb209-4"><a href="Ch06.html#cb209-4" tabindex="-1"></a></span>
<span id="cb209-5"><a href="Ch06.html#cb209-5" tabindex="-1"></a></span>
<span id="cb209-6"><a href="Ch06.html#cb209-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb209-7"><a href="Ch06.html#cb209-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb209-8"><a href="Ch06.html#cb209-8" tabindex="-1"></a></span>
<span id="cb209-9"><a href="Ch06.html#cb209-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb209-10"><a href="Ch06.html#cb209-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb209-11"><a href="Ch06.html#cb209-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb209-12"><a href="Ch06.html#cb209-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb209-13"><a href="Ch06.html#cb209-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb209-14"><a href="Ch06.html#cb209-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb209-15"><a href="Ch06.html#cb209-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_cell.tif&quot;</span>),</span>
<span id="cb209-16"><a href="Ch06.html#cb209-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water-Farmland&quot;</span>),</span>
<span id="cb209-17"><a href="Ch06.html#cb209-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb209-18"><a href="Ch06.html#cb209-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb209-19"><a href="Ch06.html#cb209-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb209-20"><a href="Ch06.html#cb209-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb209-21"><a href="Ch06.html#cb209-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb209-22"><a href="Ch06.html#cb209-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb209-23"><a href="Ch06.html#cb209-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb209-24"><a href="Ch06.html#cb209-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb209-25"><a href="Ch06.html#cb209-25" tabindex="-1"></a></span>
<span id="cb209-26"><a href="Ch06.html#cb209-26" tabindex="-1"></a></span>
<span id="cb209-27"><a href="Ch06.html#cb209-27" tabindex="-1"></a><span class="co"># Edges_Water-Farmland_r3000.tif    egv_168 ----</span></span>
<span id="cb209-28"><a href="Ch06.html#cb209-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_r3000.tif&quot;</span>)</span>
<span id="cb209-29"><a href="Ch06.html#cb209-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_168&quot;</span></span>
<span id="cb209-30"><a href="Ch06.html#cb209-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb209-31"><a href="Ch06.html#cb209-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb209-32"><a href="Ch06.html#cb209-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_r3000.tif&quot;</span>,</span>
<span id="cb209-33"><a href="Ch06.html#cb209-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb209-34"><a href="Ch06.html#cb209-34" tabindex="-1"></a></span>
<span id="cb209-35"><a href="Ch06.html#cb209-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb209-36"><a href="Ch06.html#cb209-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb209-37"><a href="Ch06.html#cb209-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb209-38"><a href="Ch06.html#cb209-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb209-39"><a href="Ch06.html#cb209-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb209-40"><a href="Ch06.html#cb209-40" tabindex="-1"></a></span>
<span id="cb209-41"><a href="Ch06.html#cb209-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water-Farmland_r3000.tif&quot;</span></span>
<span id="cb209-42"><a href="Ch06.html#cb209-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb209-43"><a href="Ch06.html#cb209-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb209-44"><a href="Ch06.html#cb209-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb209-45"><a href="Ch06.html#cb209-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb209-46"><a href="Ch06.html#cb209-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb209-47"><a href="Ch06.html#cb209-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb209-48"><a href="Ch06.html#cb209-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb209-49"><a href="Ch06.html#cb209-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb209-50"><a href="Ch06.html#cb209-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb209-51"><a href="Ch06.html#cb209-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb209-52"><a href="Ch06.html#cb209-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb209-53"><a href="Ch06.html#cb209-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_168.png" width="100%" /></p>
</div>
<div id="ch06.169" class="section level2 hasAnchor" number="6.169">
<h2><span class="header-section-number">6.169</span> Edges_Water-Farmland_r10000<a href="Ch06.html#ch06.169" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water-Farmland_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_169</code></p>
<p><strong>English name:</strong> Edge pixels of Water bordering with Farmland within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpu malu ar lauksaimniecības zemēm garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.165">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="Ch06.html#cb210-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb210-2"><a href="Ch06.html#cb210-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb210-3"><a href="Ch06.html#cb210-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb210-4"><a href="Ch06.html#cb210-4" tabindex="-1"></a></span>
<span id="cb210-5"><a href="Ch06.html#cb210-5" tabindex="-1"></a></span>
<span id="cb210-6"><a href="Ch06.html#cb210-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb210-7"><a href="Ch06.html#cb210-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb210-8"><a href="Ch06.html#cb210-8" tabindex="-1"></a></span>
<span id="cb210-9"><a href="Ch06.html#cb210-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb210-10"><a href="Ch06.html#cb210-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb210-11"><a href="Ch06.html#cb210-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb210-12"><a href="Ch06.html#cb210-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb210-13"><a href="Ch06.html#cb210-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb210-14"><a href="Ch06.html#cb210-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb210-15"><a href="Ch06.html#cb210-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_cell.tif&quot;</span>),</span>
<span id="cb210-16"><a href="Ch06.html#cb210-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water-Farmland&quot;</span>),</span>
<span id="cb210-17"><a href="Ch06.html#cb210-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb210-18"><a href="Ch06.html#cb210-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb210-19"><a href="Ch06.html#cb210-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb210-20"><a href="Ch06.html#cb210-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb210-21"><a href="Ch06.html#cb210-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb210-22"><a href="Ch06.html#cb210-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb210-23"><a href="Ch06.html#cb210-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb210-24"><a href="Ch06.html#cb210-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb210-25"><a href="Ch06.html#cb210-25" tabindex="-1"></a></span>
<span id="cb210-26"><a href="Ch06.html#cb210-26" tabindex="-1"></a></span>
<span id="cb210-27"><a href="Ch06.html#cb210-27" tabindex="-1"></a><span class="co"># Edges_Water-Farmland_r10000.tif   egv_169 ----</span></span>
<span id="cb210-28"><a href="Ch06.html#cb210-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_r10000.tif&quot;</span>)</span>
<span id="cb210-29"><a href="Ch06.html#cb210-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_169&quot;</span></span>
<span id="cb210-30"><a href="Ch06.html#cb210-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb210-31"><a href="Ch06.html#cb210-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb210-32"><a href="Ch06.html#cb210-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Farmland_r10000.tif&quot;</span>,</span>
<span id="cb210-33"><a href="Ch06.html#cb210-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb210-34"><a href="Ch06.html#cb210-34" tabindex="-1"></a></span>
<span id="cb210-35"><a href="Ch06.html#cb210-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb210-36"><a href="Ch06.html#cb210-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb210-37"><a href="Ch06.html#cb210-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb210-38"><a href="Ch06.html#cb210-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb210-39"><a href="Ch06.html#cb210-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb210-40"><a href="Ch06.html#cb210-40" tabindex="-1"></a></span>
<span id="cb210-41"><a href="Ch06.html#cb210-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water-Farmland_r10000.tif&quot;</span></span>
<span id="cb210-42"><a href="Ch06.html#cb210-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb210-43"><a href="Ch06.html#cb210-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb210-44"><a href="Ch06.html#cb210-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb210-45"><a href="Ch06.html#cb210-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb210-46"><a href="Ch06.html#cb210-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb210-47"><a href="Ch06.html#cb210-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb210-48"><a href="Ch06.html#cb210-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb210-49"><a href="Ch06.html#cb210-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb210-50"><a href="Ch06.html#cb210-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb210-51"><a href="Ch06.html#cb210-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb210-52"><a href="Ch06.html#cb210-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb210-53"><a href="Ch06.html#cb210-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_169.png" width="100%" /></p>
</div>
<div id="ch06.170" class="section level2 hasAnchor" number="6.170">
<h2><span class="header-section-number">6.170</span> Edges_Water-Grassland_cell<a href="Ch06.html#ch06.170" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water-Grassland_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_170</code></p>
<p><strong>English name:</strong> Edge pixels of Water bordering with Grassland within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ūdenstilpu malu ar zālājiem garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values lequal to 330 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then values equal to 200 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 0 and everything else as NA. Then, the first layer (1=presence) is covered over
the second layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="Ch06.html#cb211-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb211-2"><a href="Ch06.html#cb211-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb211-3"><a href="Ch06.html#cb211-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb211-4"><a href="Ch06.html#cb211-4" tabindex="-1"></a></span>
<span id="cb211-5"><a href="Ch06.html#cb211-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb211-6"><a href="Ch06.html#cb211-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb211-7"><a href="Ch06.html#cb211-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb211-8"><a href="Ch06.html#cb211-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb211-9"><a href="Ch06.html#cb211-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb211-10"><a href="Ch06.html#cb211-10" tabindex="-1"></a></span>
<span id="cb211-11"><a href="Ch06.html#cb211-11" tabindex="-1"></a></span>
<span id="cb211-12"><a href="Ch06.html#cb211-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb211-13"><a href="Ch06.html#cb211-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb211-14"><a href="Ch06.html#cb211-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb211-15"><a href="Ch06.html#cb211-15" tabindex="-1"></a></span>
<span id="cb211-16"><a href="Ch06.html#cb211-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb211-17"><a href="Ch06.html#cb211-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb211-18"><a href="Ch06.html#cb211-18" tabindex="-1"></a></span>
<span id="cb211-19"><a href="Ch06.html#cb211-19" tabindex="-1"></a><span class="co"># Edges_Water-Grassland_input.tif ----</span></span>
<span id="cb211-20"><a href="Ch06.html#cb211-20" tabindex="-1"></a>water<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">200</span>,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb211-21"><a href="Ch06.html#cb211-21" tabindex="-1"></a><span class="fu">plot</span>(water)</span>
<span id="cb211-22"><a href="Ch06.html#cb211-22" tabindex="-1"></a></span>
<span id="cb211-23"><a href="Ch06.html#cb211-23" tabindex="-1"></a>grassland<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">330</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb211-24"><a href="Ch06.html#cb211-24" tabindex="-1"></a><span class="fu">plot</span>(grassland)</span>
<span id="cb211-25"><a href="Ch06.html#cb211-25" tabindex="-1"></a></span>
<span id="cb211-26"><a href="Ch06.html#cb211-26" tabindex="-1"></a>water_grassland<span class="ot">=</span><span class="fu">cover</span>(water,grassland)</span>
<span id="cb211-27"><a href="Ch06.html#cb211-27" tabindex="-1"></a><span class="fu">plot</span>(water_grassland)</span>
<span id="cb211-28"><a href="Ch06.html#cb211-28" tabindex="-1"></a></span>
<span id="cb211-29"><a href="Ch06.html#cb211-29" tabindex="-1"></a>edge_water_grassland<span class="ot">=</span><span class="fu">project</span>(water_grassland,template10,</span>
<span id="cb211-30"><a href="Ch06.html#cb211-30" tabindex="-1"></a>                            <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_Water-Grassland_input.tif&quot;</span>,</span>
<span id="cb211-31"><a href="Ch06.html#cb211-31" tabindex="-1"></a>                            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb211-32"><a href="Ch06.html#cb211-32" tabindex="-1"></a><span class="fu">rm</span>(edge_water_grassland)</span>
<span id="cb211-33"><a href="Ch06.html#cb211-33" tabindex="-1"></a><span class="fu">rm</span>(water_grassland)</span>
<span id="cb211-34"><a href="Ch06.html#cb211-34" tabindex="-1"></a></span>
<span id="cb211-35"><a href="Ch06.html#cb211-35" tabindex="-1"></a></span>
<span id="cb211-36"><a href="Ch06.html#cb211-36" tabindex="-1"></a><span class="co"># Edges_Water-Grassland_cell.tif    egv_170 ----</span></span>
<span id="cb211-37"><a href="Ch06.html#cb211-37" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb211-38"><a href="Ch06.html#cb211-38" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_Water-Grassland_input.tif&quot;</span>,</span>
<span id="cb211-39"><a href="Ch06.html#cb211-39" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb211-40"><a href="Ch06.html#cb211-40" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb211-41"><a href="Ch06.html#cb211-41" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb211-42"><a href="Ch06.html#cb211-42" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb211-43"><a href="Ch06.html#cb211-43" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb211-44"><a href="Ch06.html#cb211-44" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_Water-Grassland_cell.tif&quot;</span>,</span>
<span id="cb211-45"><a href="Ch06.html#cb211-45" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_170&quot;</span>,</span>
<span id="cb211-46"><a href="Ch06.html#cb211-46" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb211-47"><a href="Ch06.html#cb211-47" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb211-48"><a href="Ch06.html#cb211-48" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb211-49"><a href="Ch06.html#cb211-49" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb211-50"><a href="Ch06.html#cb211-50" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb211-51"><a href="Ch06.html#cb211-51" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb211-52"><a href="Ch06.html#cb211-52" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb211-53"><a href="Ch06.html#cb211-53" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb211-54"><a href="Ch06.html#cb211-54" tabindex="-1"></a>)</span>
<span id="cb211-55"><a href="Ch06.html#cb211-55" tabindex="-1"></a></span>
<span id="cb211-56"><a href="Ch06.html#cb211-56" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb211-57"><a href="Ch06.html#cb211-57" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb211-58"><a href="Ch06.html#cb211-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb211-59"><a href="Ch06.html#cb211-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb211-60"><a href="Ch06.html#cb211-60" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb211-61"><a href="Ch06.html#cb211-61" tabindex="-1"></a></span>
<span id="cb211-62"><a href="Ch06.html#cb211-62" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water-Grassland_cell.tif&quot;</span></span>
<span id="cb211-63"><a href="Ch06.html#cb211-63" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb211-64"><a href="Ch06.html#cb211-64" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb211-65"><a href="Ch06.html#cb211-65" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb211-66"><a href="Ch06.html#cb211-66" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb211-67"><a href="Ch06.html#cb211-67" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb211-68"><a href="Ch06.html#cb211-68" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb211-69"><a href="Ch06.html#cb211-69" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb211-70"><a href="Ch06.html#cb211-70" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb211-71"><a href="Ch06.html#cb211-71" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb211-72"><a href="Ch06.html#cb211-72" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb211-73"><a href="Ch06.html#cb211-73" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb211-74"><a href="Ch06.html#cb211-74" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_170.png" width="100%" /></p>
</div>
<div id="ch06.171" class="section level2 hasAnchor" number="6.171">
<h2><span class="header-section-number">6.171</span> Edges_Water-Grassland_r500<a href="Ch06.html#ch06.171" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water-Grassland_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_171</code></p>
<p><strong>English name:</strong> Edge pixels of Water bordering with Grassland within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpu malu ar zālājiem garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.170">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="Ch06.html#cb212-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb212-2"><a href="Ch06.html#cb212-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb212-3"><a href="Ch06.html#cb212-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb212-4"><a href="Ch06.html#cb212-4" tabindex="-1"></a></span>
<span id="cb212-5"><a href="Ch06.html#cb212-5" tabindex="-1"></a></span>
<span id="cb212-6"><a href="Ch06.html#cb212-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb212-7"><a href="Ch06.html#cb212-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb212-8"><a href="Ch06.html#cb212-8" tabindex="-1"></a></span>
<span id="cb212-9"><a href="Ch06.html#cb212-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb212-10"><a href="Ch06.html#cb212-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb212-11"><a href="Ch06.html#cb212-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb212-12"><a href="Ch06.html#cb212-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb212-13"><a href="Ch06.html#cb212-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb212-14"><a href="Ch06.html#cb212-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb212-15"><a href="Ch06.html#cb212-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_cell.tif&quot;</span>),</span>
<span id="cb212-16"><a href="Ch06.html#cb212-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water-Grassland&quot;</span>),</span>
<span id="cb212-17"><a href="Ch06.html#cb212-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb212-18"><a href="Ch06.html#cb212-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb212-19"><a href="Ch06.html#cb212-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb212-20"><a href="Ch06.html#cb212-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb212-21"><a href="Ch06.html#cb212-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb212-22"><a href="Ch06.html#cb212-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb212-23"><a href="Ch06.html#cb212-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb212-24"><a href="Ch06.html#cb212-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb212-25"><a href="Ch06.html#cb212-25" tabindex="-1"></a></span>
<span id="cb212-26"><a href="Ch06.html#cb212-26" tabindex="-1"></a></span>
<span id="cb212-27"><a href="Ch06.html#cb212-27" tabindex="-1"></a><span class="co"># Edges_Water-Grassland_r500.tif    egv_171 ----</span></span>
<span id="cb212-28"><a href="Ch06.html#cb212-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_r500.tif&quot;</span>)</span>
<span id="cb212-29"><a href="Ch06.html#cb212-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_171&quot;</span></span>
<span id="cb212-30"><a href="Ch06.html#cb212-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb212-31"><a href="Ch06.html#cb212-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb212-32"><a href="Ch06.html#cb212-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_r500.tif&quot;</span>,</span>
<span id="cb212-33"><a href="Ch06.html#cb212-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb212-34"><a href="Ch06.html#cb212-34" tabindex="-1"></a></span>
<span id="cb212-35"><a href="Ch06.html#cb212-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb212-36"><a href="Ch06.html#cb212-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb212-37"><a href="Ch06.html#cb212-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb212-38"><a href="Ch06.html#cb212-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb212-39"><a href="Ch06.html#cb212-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb212-40"><a href="Ch06.html#cb212-40" tabindex="-1"></a></span>
<span id="cb212-41"><a href="Ch06.html#cb212-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water-Grassland_r500.tif&quot;</span></span>
<span id="cb212-42"><a href="Ch06.html#cb212-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb212-43"><a href="Ch06.html#cb212-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb212-44"><a href="Ch06.html#cb212-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb212-45"><a href="Ch06.html#cb212-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb212-46"><a href="Ch06.html#cb212-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb212-47"><a href="Ch06.html#cb212-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb212-48"><a href="Ch06.html#cb212-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb212-49"><a href="Ch06.html#cb212-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb212-50"><a href="Ch06.html#cb212-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb212-51"><a href="Ch06.html#cb212-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb212-52"><a href="Ch06.html#cb212-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb212-53"><a href="Ch06.html#cb212-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_171.png" width="100%" /></p>
</div>
<div id="ch06.172" class="section level2 hasAnchor" number="6.172">
<h2><span class="header-section-number">6.172</span> Edges_Water-Grassland_r1250<a href="Ch06.html#ch06.172" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water-Grassland_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_172</code></p>
<p><strong>English name:</strong> Edge pixels of Water bordering with Grassland within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpu malu ar zālājiem garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.170">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="Ch06.html#cb213-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb213-2"><a href="Ch06.html#cb213-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb213-3"><a href="Ch06.html#cb213-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb213-4"><a href="Ch06.html#cb213-4" tabindex="-1"></a></span>
<span id="cb213-5"><a href="Ch06.html#cb213-5" tabindex="-1"></a></span>
<span id="cb213-6"><a href="Ch06.html#cb213-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb213-7"><a href="Ch06.html#cb213-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb213-8"><a href="Ch06.html#cb213-8" tabindex="-1"></a></span>
<span id="cb213-9"><a href="Ch06.html#cb213-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb213-10"><a href="Ch06.html#cb213-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb213-11"><a href="Ch06.html#cb213-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb213-12"><a href="Ch06.html#cb213-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb213-13"><a href="Ch06.html#cb213-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb213-14"><a href="Ch06.html#cb213-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb213-15"><a href="Ch06.html#cb213-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_cell.tif&quot;</span>),</span>
<span id="cb213-16"><a href="Ch06.html#cb213-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water-Grassland&quot;</span>),</span>
<span id="cb213-17"><a href="Ch06.html#cb213-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb213-18"><a href="Ch06.html#cb213-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb213-19"><a href="Ch06.html#cb213-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb213-20"><a href="Ch06.html#cb213-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb213-21"><a href="Ch06.html#cb213-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb213-22"><a href="Ch06.html#cb213-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb213-23"><a href="Ch06.html#cb213-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb213-24"><a href="Ch06.html#cb213-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb213-25"><a href="Ch06.html#cb213-25" tabindex="-1"></a></span>
<span id="cb213-26"><a href="Ch06.html#cb213-26" tabindex="-1"></a></span>
<span id="cb213-27"><a href="Ch06.html#cb213-27" tabindex="-1"></a><span class="co"># Edges_Water-Grassland_r1250.tif   egv_172 ----</span></span>
<span id="cb213-28"><a href="Ch06.html#cb213-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_r1250.tif&quot;</span>)</span>
<span id="cb213-29"><a href="Ch06.html#cb213-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_172&quot;</span></span>
<span id="cb213-30"><a href="Ch06.html#cb213-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb213-31"><a href="Ch06.html#cb213-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb213-32"><a href="Ch06.html#cb213-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_r1250.tif&quot;</span>,</span>
<span id="cb213-33"><a href="Ch06.html#cb213-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb213-34"><a href="Ch06.html#cb213-34" tabindex="-1"></a></span>
<span id="cb213-35"><a href="Ch06.html#cb213-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb213-36"><a href="Ch06.html#cb213-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb213-37"><a href="Ch06.html#cb213-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb213-38"><a href="Ch06.html#cb213-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb213-39"><a href="Ch06.html#cb213-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb213-40"><a href="Ch06.html#cb213-40" tabindex="-1"></a></span>
<span id="cb213-41"><a href="Ch06.html#cb213-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water-Grassland_r1250.tif&quot;</span></span>
<span id="cb213-42"><a href="Ch06.html#cb213-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb213-43"><a href="Ch06.html#cb213-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb213-44"><a href="Ch06.html#cb213-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb213-45"><a href="Ch06.html#cb213-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb213-46"><a href="Ch06.html#cb213-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb213-47"><a href="Ch06.html#cb213-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb213-48"><a href="Ch06.html#cb213-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb213-49"><a href="Ch06.html#cb213-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb213-50"><a href="Ch06.html#cb213-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb213-51"><a href="Ch06.html#cb213-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb213-52"><a href="Ch06.html#cb213-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb213-53"><a href="Ch06.html#cb213-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_172.png" width="100%" /></p>
</div>
<div id="ch06.173" class="section level2 hasAnchor" number="6.173">
<h2><span class="header-section-number">6.173</span> Edges_Water-Grassland_r3000<a href="Ch06.html#ch06.173" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water-Grassland_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_173</code></p>
<p><strong>English name:</strong> Edge pixels of Water bordering with Grassland within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpu malu ar zālājiem garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.170">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="Ch06.html#cb214-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb214-2"><a href="Ch06.html#cb214-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb214-3"><a href="Ch06.html#cb214-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb214-4"><a href="Ch06.html#cb214-4" tabindex="-1"></a></span>
<span id="cb214-5"><a href="Ch06.html#cb214-5" tabindex="-1"></a></span>
<span id="cb214-6"><a href="Ch06.html#cb214-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb214-7"><a href="Ch06.html#cb214-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb214-8"><a href="Ch06.html#cb214-8" tabindex="-1"></a></span>
<span id="cb214-9"><a href="Ch06.html#cb214-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb214-10"><a href="Ch06.html#cb214-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb214-11"><a href="Ch06.html#cb214-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb214-12"><a href="Ch06.html#cb214-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb214-13"><a href="Ch06.html#cb214-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb214-14"><a href="Ch06.html#cb214-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb214-15"><a href="Ch06.html#cb214-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_cell.tif&quot;</span>),</span>
<span id="cb214-16"><a href="Ch06.html#cb214-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water-Grassland&quot;</span>),</span>
<span id="cb214-17"><a href="Ch06.html#cb214-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb214-18"><a href="Ch06.html#cb214-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb214-19"><a href="Ch06.html#cb214-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb214-20"><a href="Ch06.html#cb214-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb214-21"><a href="Ch06.html#cb214-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb214-22"><a href="Ch06.html#cb214-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb214-23"><a href="Ch06.html#cb214-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb214-24"><a href="Ch06.html#cb214-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb214-25"><a href="Ch06.html#cb214-25" tabindex="-1"></a></span>
<span id="cb214-26"><a href="Ch06.html#cb214-26" tabindex="-1"></a></span>
<span id="cb214-27"><a href="Ch06.html#cb214-27" tabindex="-1"></a><span class="co"># Edges_Water-Grassland_r3000.tif   egv_173 ----</span></span>
<span id="cb214-28"><a href="Ch06.html#cb214-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_r3000.tif&quot;</span>)</span>
<span id="cb214-29"><a href="Ch06.html#cb214-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_173&quot;</span></span>
<span id="cb214-30"><a href="Ch06.html#cb214-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb214-31"><a href="Ch06.html#cb214-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb214-32"><a href="Ch06.html#cb214-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_r3000.tif&quot;</span>,</span>
<span id="cb214-33"><a href="Ch06.html#cb214-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb214-34"><a href="Ch06.html#cb214-34" tabindex="-1"></a></span>
<span id="cb214-35"><a href="Ch06.html#cb214-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb214-36"><a href="Ch06.html#cb214-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb214-37"><a href="Ch06.html#cb214-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb214-38"><a href="Ch06.html#cb214-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb214-39"><a href="Ch06.html#cb214-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb214-40"><a href="Ch06.html#cb214-40" tabindex="-1"></a></span>
<span id="cb214-41"><a href="Ch06.html#cb214-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water-Grassland_r3000.tif&quot;</span></span>
<span id="cb214-42"><a href="Ch06.html#cb214-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb214-43"><a href="Ch06.html#cb214-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb214-44"><a href="Ch06.html#cb214-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb214-45"><a href="Ch06.html#cb214-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb214-46"><a href="Ch06.html#cb214-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb214-47"><a href="Ch06.html#cb214-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb214-48"><a href="Ch06.html#cb214-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb214-49"><a href="Ch06.html#cb214-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb214-50"><a href="Ch06.html#cb214-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb214-51"><a href="Ch06.html#cb214-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb214-52"><a href="Ch06.html#cb214-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb214-53"><a href="Ch06.html#cb214-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_173.png" width="100%" /></p>
</div>
<div id="ch06.174" class="section level2 hasAnchor" number="6.174">
<h2><span class="header-section-number">6.174</span> Edges_Water-Grassland_r10000<a href="Ch06.html#ch06.174" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_Water-Grassland_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_174</code></p>
<p><strong>English name:</strong> Edge pixels of Water bordering with Grassland within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpu malu ar zālājiem garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.170">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="Ch06.html#cb215-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb215-2"><a href="Ch06.html#cb215-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb215-3"><a href="Ch06.html#cb215-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb215-4"><a href="Ch06.html#cb215-4" tabindex="-1"></a></span>
<span id="cb215-5"><a href="Ch06.html#cb215-5" tabindex="-1"></a></span>
<span id="cb215-6"><a href="Ch06.html#cb215-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb215-7"><a href="Ch06.html#cb215-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb215-8"><a href="Ch06.html#cb215-8" tabindex="-1"></a></span>
<span id="cb215-9"><a href="Ch06.html#cb215-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb215-10"><a href="Ch06.html#cb215-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb215-11"><a href="Ch06.html#cb215-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb215-12"><a href="Ch06.html#cb215-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb215-13"><a href="Ch06.html#cb215-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb215-14"><a href="Ch06.html#cb215-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb215-15"><a href="Ch06.html#cb215-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_cell.tif&quot;</span>),</span>
<span id="cb215-16"><a href="Ch06.html#cb215-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_Water-Grassland&quot;</span>),</span>
<span id="cb215-17"><a href="Ch06.html#cb215-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb215-18"><a href="Ch06.html#cb215-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb215-19"><a href="Ch06.html#cb215-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb215-20"><a href="Ch06.html#cb215-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb215-21"><a href="Ch06.html#cb215-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb215-22"><a href="Ch06.html#cb215-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb215-23"><a href="Ch06.html#cb215-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb215-24"><a href="Ch06.html#cb215-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb215-25"><a href="Ch06.html#cb215-25" tabindex="-1"></a></span>
<span id="cb215-26"><a href="Ch06.html#cb215-26" tabindex="-1"></a></span>
<span id="cb215-27"><a href="Ch06.html#cb215-27" tabindex="-1"></a><span class="co"># Edges_Water-Grassland_r10000.tif  egv_174 ----</span></span>
<span id="cb215-28"><a href="Ch06.html#cb215-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_r10000.tif&quot;</span>)</span>
<span id="cb215-29"><a href="Ch06.html#cb215-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_174&quot;</span></span>
<span id="cb215-30"><a href="Ch06.html#cb215-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb215-31"><a href="Ch06.html#cb215-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb215-32"><a href="Ch06.html#cb215-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_Water-Grassland_r10000.tif&quot;</span>,</span>
<span id="cb215-33"><a href="Ch06.html#cb215-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb215-34"><a href="Ch06.html#cb215-34" tabindex="-1"></a></span>
<span id="cb215-35"><a href="Ch06.html#cb215-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb215-36"><a href="Ch06.html#cb215-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb215-37"><a href="Ch06.html#cb215-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb215-38"><a href="Ch06.html#cb215-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb215-39"><a href="Ch06.html#cb215-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb215-40"><a href="Ch06.html#cb215-40" tabindex="-1"></a></span>
<span id="cb215-41"><a href="Ch06.html#cb215-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_Water-Grassland_r10000.tif&quot;</span></span>
<span id="cb215-42"><a href="Ch06.html#cb215-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb215-43"><a href="Ch06.html#cb215-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb215-44"><a href="Ch06.html#cb215-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb215-45"><a href="Ch06.html#cb215-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb215-46"><a href="Ch06.html#cb215-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb215-47"><a href="Ch06.html#cb215-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb215-48"><a href="Ch06.html#cb215-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb215-49"><a href="Ch06.html#cb215-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb215-50"><a href="Ch06.html#cb215-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb215-51"><a href="Ch06.html#cb215-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb215-52"><a href="Ch06.html#cb215-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb215-53"><a href="Ch06.html#cb215-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_174.png" width="100%" /></p>
</div>
<div id="ch06.175" class="section level2 hasAnchor" number="6.175">
<h2><span class="header-section-number">6.175</span> Edges_ReedSedgeRushBeds-Water_cell<a href="Ch06.html#ch06.175" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_ReedSedgeRushBeds-Water_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_175</code></p>
<p><strong>English name:</strong> Edge pixels of Reed-, Sedge-, Rush- Beds bordering with Water within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Niedrāju, grīslāju, meldrāju malu ar ūdeni garums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, values lequal to 720 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 1 and everything else as NA. Then values equal to 200 from <a href="Ch05.html#Ch05.03">Landscape classification</a> are coded as 0 and everything else as NA. Then, the first layer (1=presence) is covered over
the second layer (presence=0) and written to file (matching the input). Finally, with
the function <code>egvtools::landscape_function()</code> total edge between the two classes
is calculated. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="Ch06.html#cb216-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb216-2"><a href="Ch06.html#cb216-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb216-3"><a href="Ch06.html#cb216-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb216-4"><a href="Ch06.html#cb216-4" tabindex="-1"></a></span>
<span id="cb216-5"><a href="Ch06.html#cb216-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb216-6"><a href="Ch06.html#cb216-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb216-7"><a href="Ch06.html#cb216-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb216-8"><a href="Ch06.html#cb216-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb216-9"><a href="Ch06.html#cb216-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb216-10"><a href="Ch06.html#cb216-10" tabindex="-1"></a></span>
<span id="cb216-11"><a href="Ch06.html#cb216-11" tabindex="-1"></a></span>
<span id="cb216-12"><a href="Ch06.html#cb216-12" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb216-13"><a href="Ch06.html#cb216-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb216-14"><a href="Ch06.html#cb216-14" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb216-15"><a href="Ch06.html#cb216-15" tabindex="-1"></a></span>
<span id="cb216-16"><a href="Ch06.html#cb216-16" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb216-17"><a href="Ch06.html#cb216-17" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb216-18"><a href="Ch06.html#cb216-18" tabindex="-1"></a></span>
<span id="cb216-19"><a href="Ch06.html#cb216-19" tabindex="-1"></a><span class="co"># Edges_ReedSedgeRushBeds-Water_input.tif ----</span></span>
<span id="cb216-20"><a href="Ch06.html#cb216-20" tabindex="-1"></a>water<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">200</span>,<span class="dv">0</span>,<span class="cn">NA</span>)</span>
<span id="cb216-21"><a href="Ch06.html#cb216-21" tabindex="-1"></a><span class="fu">plot</span>(water)</span>
<span id="cb216-22"><a href="Ch06.html#cb216-22" tabindex="-1"></a></span>
<span id="cb216-23"><a href="Ch06.html#cb216-23" tabindex="-1"></a>reedsedgerush<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">720</span>,<span class="dv">1</span>,<span class="cn">NA</span>)</span>
<span id="cb216-24"><a href="Ch06.html#cb216-24" tabindex="-1"></a><span class="fu">plot</span>(reedsedgerush)</span>
<span id="cb216-25"><a href="Ch06.html#cb216-25" tabindex="-1"></a></span>
<span id="cb216-26"><a href="Ch06.html#cb216-26" tabindex="-1"></a></span>
<span id="cb216-27"><a href="Ch06.html#cb216-27" tabindex="-1"></a>reedsedgerush_water<span class="ot">=</span><span class="fu">cover</span>(reedsedgerush,water)</span>
<span id="cb216-28"><a href="Ch06.html#cb216-28" tabindex="-1"></a><span class="fu">plot</span>(reedsedgerush_water)</span>
<span id="cb216-29"><a href="Ch06.html#cb216-29" tabindex="-1"></a></span>
<span id="cb216-30"><a href="Ch06.html#cb216-30" tabindex="-1"></a>edge_reedsedgerush_water<span class="ot">=</span><span class="fu">project</span>(reedsedgerush_water,template10,</span>
<span id="cb216-31"><a href="Ch06.html#cb216-31" tabindex="-1"></a>                             <span class="at">filename=</span><span class="st">&quot;./RasterGrids_10m/2024/Edges_ReedSedgeRushBeds-Water_input.tif&quot;</span>,</span>
<span id="cb216-32"><a href="Ch06.html#cb216-32" tabindex="-1"></a>                             <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb216-33"><a href="Ch06.html#cb216-33" tabindex="-1"></a><span class="fu">rm</span>(edge_reedsedgerush_water)</span>
<span id="cb216-34"><a href="Ch06.html#cb216-34" tabindex="-1"></a><span class="fu">rm</span>(reedsedgerush_water)</span>
<span id="cb216-35"><a href="Ch06.html#cb216-35" tabindex="-1"></a></span>
<span id="cb216-36"><a href="Ch06.html#cb216-36" tabindex="-1"></a></span>
<span id="cb216-37"><a href="Ch06.html#cb216-37" tabindex="-1"></a><span class="co"># Edges_ReedSedgeRushBeds-Water_cell.tif    egv_175 ----</span></span>
<span id="cb216-38"><a href="Ch06.html#cb216-38" tabindex="-1"></a><span class="fu">landscape_function</span>(</span>
<span id="cb216-39"><a href="Ch06.html#cb216-39" tabindex="-1"></a>  <span class="at">landscape      =</span> <span class="st">&quot;./RasterGrids_10m/2024/Edges_ReedSedgeRushBeds-Water_input.tif&quot;</span>,</span>
<span id="cb216-40"><a href="Ch06.html#cb216-40" tabindex="-1"></a>  <span class="at">zones          =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb216-41"><a href="Ch06.html#cb216-41" tabindex="-1"></a>  <span class="at">id_field       =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb216-42"><a href="Ch06.html#cb216-42" tabindex="-1"></a>  <span class="at">tile_field     =</span> <span class="st">&quot;tks50km&quot;</span>,</span>
<span id="cb216-43"><a href="Ch06.html#cb216-43" tabindex="-1"></a>  <span class="at">template       =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb216-44"><a href="Ch06.html#cb216-44" tabindex="-1"></a>  <span class="at">out_dir        =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW&quot;</span>,</span>
<span id="cb216-45"><a href="Ch06.html#cb216-45" tabindex="-1"></a>  <span class="at">out_filename   =</span> <span class="st">&quot;Edges_ReedSedgeRushBeds-Water_cell.tif&quot;</span>,</span>
<span id="cb216-46"><a href="Ch06.html#cb216-46" tabindex="-1"></a>  <span class="at">out_layername  =</span> <span class="st">&quot;egv_175&quot;</span>,</span>
<span id="cb216-47"><a href="Ch06.html#cb216-47" tabindex="-1"></a>  <span class="at">what             =</span> <span class="st">&quot;lsm_l_te&quot;</span>,</span>
<span id="cb216-48"><a href="Ch06.html#cb216-48" tabindex="-1"></a>  <span class="at">lm_args          =</span> <span class="fu">list</span>(<span class="at">count_boundary =</span> <span class="cn">FALSE</span>),</span>
<span id="cb216-49"><a href="Ch06.html#cb216-49" tabindex="-1"></a>  <span class="at">rasterize_engine =</span> <span class="st">&quot;fasterize&quot;</span>,</span>
<span id="cb216-50"><a href="Ch06.html#cb216-50" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb216-51"><a href="Ch06.html#cb216-51" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb216-52"><a href="Ch06.html#cb216-52" tabindex="-1"></a>  <span class="at">fill_gaps      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb216-53"><a href="Ch06.html#cb216-53" tabindex="-1"></a>  <span class="at">plot_gaps      =</span> <span class="cn">FALSE</span>,</span>
<span id="cb216-54"><a href="Ch06.html#cb216-54" tabindex="-1"></a>  <span class="at">plot_result    =</span> <span class="cn">FALSE</span></span>
<span id="cb216-55"><a href="Ch06.html#cb216-55" tabindex="-1"></a>)</span>
<span id="cb216-56"><a href="Ch06.html#cb216-56" tabindex="-1"></a></span>
<span id="cb216-57"><a href="Ch06.html#cb216-57" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb216-58"><a href="Ch06.html#cb216-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb216-59"><a href="Ch06.html#cb216-59" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb216-60"><a href="Ch06.html#cb216-60" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb216-61"><a href="Ch06.html#cb216-61" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb216-62"><a href="Ch06.html#cb216-62" tabindex="-1"></a></span>
<span id="cb216-63"><a href="Ch06.html#cb216-63" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_ReedSedgeRushBeds-Water_cell.tif&quot;</span></span>
<span id="cb216-64"><a href="Ch06.html#cb216-64" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb216-65"><a href="Ch06.html#cb216-65" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb216-66"><a href="Ch06.html#cb216-66" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb216-67"><a href="Ch06.html#cb216-67" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb216-68"><a href="Ch06.html#cb216-68" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb216-69"><a href="Ch06.html#cb216-69" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb216-70"><a href="Ch06.html#cb216-70" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb216-71"><a href="Ch06.html#cb216-71" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb216-72"><a href="Ch06.html#cb216-72" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb216-73"><a href="Ch06.html#cb216-73" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb216-74"><a href="Ch06.html#cb216-74" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb216-75"><a href="Ch06.html#cb216-75" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_175.png" width="100%" /></p>
</div>
<div id="ch06.176" class="section level2 hasAnchor" number="6.176">
<h2><span class="header-section-number">6.176</span> Edges_ReedSedgeRushBeds-Water_r500<a href="Ch06.html#ch06.176" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_ReedSedgeRushBeds-Water_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_176</code></p>
<p><strong>English name:</strong> Edge pixels of Reed-, Sedge-, Rush- Beds bordering with Water within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Niedrāju, grīslāju, meldrāju malu ar ūdeni garums 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 500 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.175">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="Ch06.html#cb217-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb217-2"><a href="Ch06.html#cb217-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb217-3"><a href="Ch06.html#cb217-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb217-4"><a href="Ch06.html#cb217-4" tabindex="-1"></a></span>
<span id="cb217-5"><a href="Ch06.html#cb217-5" tabindex="-1"></a></span>
<span id="cb217-6"><a href="Ch06.html#cb217-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb217-7"><a href="Ch06.html#cb217-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb217-8"><a href="Ch06.html#cb217-8" tabindex="-1"></a></span>
<span id="cb217-9"><a href="Ch06.html#cb217-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb217-10"><a href="Ch06.html#cb217-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb217-11"><a href="Ch06.html#cb217-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb217-12"><a href="Ch06.html#cb217-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb217-13"><a href="Ch06.html#cb217-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb217-14"><a href="Ch06.html#cb217-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb217-15"><a href="Ch06.html#cb217-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_cell.tif&quot;</span>),</span>
<span id="cb217-16"><a href="Ch06.html#cb217-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_ReedSedgeRushBeds-Water&quot;</span>),</span>
<span id="cb217-17"><a href="Ch06.html#cb217-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb217-18"><a href="Ch06.html#cb217-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb217-19"><a href="Ch06.html#cb217-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb217-20"><a href="Ch06.html#cb217-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb217-21"><a href="Ch06.html#cb217-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb217-22"><a href="Ch06.html#cb217-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb217-23"><a href="Ch06.html#cb217-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb217-24"><a href="Ch06.html#cb217-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb217-25"><a href="Ch06.html#cb217-25" tabindex="-1"></a></span>
<span id="cb217-26"><a href="Ch06.html#cb217-26" tabindex="-1"></a></span>
<span id="cb217-27"><a href="Ch06.html#cb217-27" tabindex="-1"></a><span class="co"># Edges_ReedSedgeRushBeds-Water_r500.tif    egv_176 ----</span></span>
<span id="cb217-28"><a href="Ch06.html#cb217-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_r500.tif&quot;</span>)</span>
<span id="cb217-29"><a href="Ch06.html#cb217-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_176&quot;</span></span>
<span id="cb217-30"><a href="Ch06.html#cb217-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb217-31"><a href="Ch06.html#cb217-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb217-32"><a href="Ch06.html#cb217-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_r500.tif&quot;</span>,</span>
<span id="cb217-33"><a href="Ch06.html#cb217-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb217-34"><a href="Ch06.html#cb217-34" tabindex="-1"></a></span>
<span id="cb217-35"><a href="Ch06.html#cb217-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb217-36"><a href="Ch06.html#cb217-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb217-37"><a href="Ch06.html#cb217-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb217-38"><a href="Ch06.html#cb217-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb217-39"><a href="Ch06.html#cb217-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb217-40"><a href="Ch06.html#cb217-40" tabindex="-1"></a></span>
<span id="cb217-41"><a href="Ch06.html#cb217-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_ReedSedgeRushBeds-Water_r500.tif&quot;</span></span>
<span id="cb217-42"><a href="Ch06.html#cb217-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb217-43"><a href="Ch06.html#cb217-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb217-44"><a href="Ch06.html#cb217-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb217-45"><a href="Ch06.html#cb217-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb217-46"><a href="Ch06.html#cb217-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb217-47"><a href="Ch06.html#cb217-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb217-48"><a href="Ch06.html#cb217-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb217-49"><a href="Ch06.html#cb217-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb217-50"><a href="Ch06.html#cb217-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb217-51"><a href="Ch06.html#cb217-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb217-52"><a href="Ch06.html#cb217-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb217-53"><a href="Ch06.html#cb217-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_176.png" width="100%" /></p>
</div>
<div id="ch06.177" class="section level2 hasAnchor" number="6.177">
<h2><span class="header-section-number">6.177</span> Edges_ReedSedgeRushBeds-Water_r1250<a href="Ch06.html#ch06.177" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_ReedSedgeRushBeds-Water_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_177</code></p>
<p><strong>English name:</strong> Edge pixels of Reed-, Sedge-, Rush- Beds bordering with Water within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Niedrāju, grīslāju, meldrāju malu ar ūdeni garums 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 1250 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.175">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="Ch06.html#cb218-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb218-2"><a href="Ch06.html#cb218-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb218-3"><a href="Ch06.html#cb218-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb218-4"><a href="Ch06.html#cb218-4" tabindex="-1"></a></span>
<span id="cb218-5"><a href="Ch06.html#cb218-5" tabindex="-1"></a></span>
<span id="cb218-6"><a href="Ch06.html#cb218-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb218-7"><a href="Ch06.html#cb218-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb218-8"><a href="Ch06.html#cb218-8" tabindex="-1"></a></span>
<span id="cb218-9"><a href="Ch06.html#cb218-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb218-10"><a href="Ch06.html#cb218-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb218-11"><a href="Ch06.html#cb218-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb218-12"><a href="Ch06.html#cb218-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb218-13"><a href="Ch06.html#cb218-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb218-14"><a href="Ch06.html#cb218-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb218-15"><a href="Ch06.html#cb218-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_cell.tif&quot;</span>),</span>
<span id="cb218-16"><a href="Ch06.html#cb218-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_ReedSedgeRushBeds-Water&quot;</span>),</span>
<span id="cb218-17"><a href="Ch06.html#cb218-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb218-18"><a href="Ch06.html#cb218-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb218-19"><a href="Ch06.html#cb218-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb218-20"><a href="Ch06.html#cb218-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb218-21"><a href="Ch06.html#cb218-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb218-22"><a href="Ch06.html#cb218-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb218-23"><a href="Ch06.html#cb218-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb218-24"><a href="Ch06.html#cb218-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb218-25"><a href="Ch06.html#cb218-25" tabindex="-1"></a></span>
<span id="cb218-26"><a href="Ch06.html#cb218-26" tabindex="-1"></a></span>
<span id="cb218-27"><a href="Ch06.html#cb218-27" tabindex="-1"></a><span class="co"># Edges_ReedSedgeRushBeds-Water_r1250.tif   egv_177 ----</span></span>
<span id="cb218-28"><a href="Ch06.html#cb218-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_r1250.tif&quot;</span>)</span>
<span id="cb218-29"><a href="Ch06.html#cb218-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_177&quot;</span></span>
<span id="cb218-30"><a href="Ch06.html#cb218-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb218-31"><a href="Ch06.html#cb218-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb218-32"><a href="Ch06.html#cb218-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_r1250.tif&quot;</span>,</span>
<span id="cb218-33"><a href="Ch06.html#cb218-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb218-34"><a href="Ch06.html#cb218-34" tabindex="-1"></a></span>
<span id="cb218-35"><a href="Ch06.html#cb218-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb218-36"><a href="Ch06.html#cb218-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb218-37"><a href="Ch06.html#cb218-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb218-38"><a href="Ch06.html#cb218-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb218-39"><a href="Ch06.html#cb218-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb218-40"><a href="Ch06.html#cb218-40" tabindex="-1"></a></span>
<span id="cb218-41"><a href="Ch06.html#cb218-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_ReedSedgeRushBeds-Water_r1250.tif&quot;</span></span>
<span id="cb218-42"><a href="Ch06.html#cb218-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb218-43"><a href="Ch06.html#cb218-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb218-44"><a href="Ch06.html#cb218-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb218-45"><a href="Ch06.html#cb218-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb218-46"><a href="Ch06.html#cb218-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb218-47"><a href="Ch06.html#cb218-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb218-48"><a href="Ch06.html#cb218-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb218-49"><a href="Ch06.html#cb218-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb218-50"><a href="Ch06.html#cb218-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb218-51"><a href="Ch06.html#cb218-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb218-52"><a href="Ch06.html#cb218-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb218-53"><a href="Ch06.html#cb218-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_177.png" width="100%" /></p>
</div>
<div id="ch06.178" class="section level2 hasAnchor" number="6.178">
<h2><span class="header-section-number">6.178</span> Edges_ReedSedgeRushBeds-Water_r3000<a href="Ch06.html#ch06.178" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_ReedSedgeRushBeds-Water_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_178</code></p>
<p><strong>English name:</strong> Edge pixels of Reed-, Sedge-, Rush- Beds bordering with Water within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Niedrāju, grīslāju, meldrāju malu ar ūdeni garums 3 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 3000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.175">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="Ch06.html#cb219-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb219-2"><a href="Ch06.html#cb219-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb219-3"><a href="Ch06.html#cb219-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb219-4"><a href="Ch06.html#cb219-4" tabindex="-1"></a></span>
<span id="cb219-5"><a href="Ch06.html#cb219-5" tabindex="-1"></a></span>
<span id="cb219-6"><a href="Ch06.html#cb219-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb219-7"><a href="Ch06.html#cb219-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb219-8"><a href="Ch06.html#cb219-8" tabindex="-1"></a></span>
<span id="cb219-9"><a href="Ch06.html#cb219-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb219-10"><a href="Ch06.html#cb219-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb219-11"><a href="Ch06.html#cb219-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb219-12"><a href="Ch06.html#cb219-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb219-13"><a href="Ch06.html#cb219-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb219-14"><a href="Ch06.html#cb219-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb219-15"><a href="Ch06.html#cb219-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_cell.tif&quot;</span>),</span>
<span id="cb219-16"><a href="Ch06.html#cb219-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_ReedSedgeRushBeds-Water&quot;</span>),</span>
<span id="cb219-17"><a href="Ch06.html#cb219-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb219-18"><a href="Ch06.html#cb219-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb219-19"><a href="Ch06.html#cb219-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb219-20"><a href="Ch06.html#cb219-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb219-21"><a href="Ch06.html#cb219-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb219-22"><a href="Ch06.html#cb219-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb219-23"><a href="Ch06.html#cb219-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb219-24"><a href="Ch06.html#cb219-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb219-25"><a href="Ch06.html#cb219-25" tabindex="-1"></a></span>
<span id="cb219-26"><a href="Ch06.html#cb219-26" tabindex="-1"></a></span>
<span id="cb219-27"><a href="Ch06.html#cb219-27" tabindex="-1"></a><span class="co"># Edges_ReedSedgeRushBeds-Water_r3000.tif   egv_178 ----</span></span>
<span id="cb219-28"><a href="Ch06.html#cb219-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_r3000.tif&quot;</span>)</span>
<span id="cb219-29"><a href="Ch06.html#cb219-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_178&quot;</span></span>
<span id="cb219-30"><a href="Ch06.html#cb219-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb219-31"><a href="Ch06.html#cb219-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb219-32"><a href="Ch06.html#cb219-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_r3000.tif&quot;</span>,</span>
<span id="cb219-33"><a href="Ch06.html#cb219-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb219-34"><a href="Ch06.html#cb219-34" tabindex="-1"></a></span>
<span id="cb219-35"><a href="Ch06.html#cb219-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb219-36"><a href="Ch06.html#cb219-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb219-37"><a href="Ch06.html#cb219-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb219-38"><a href="Ch06.html#cb219-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb219-39"><a href="Ch06.html#cb219-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb219-40"><a href="Ch06.html#cb219-40" tabindex="-1"></a></span>
<span id="cb219-41"><a href="Ch06.html#cb219-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_ReedSedgeRushBeds-Water_r3000.tif&quot;</span></span>
<span id="cb219-42"><a href="Ch06.html#cb219-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb219-43"><a href="Ch06.html#cb219-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb219-44"><a href="Ch06.html#cb219-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb219-45"><a href="Ch06.html#cb219-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb219-46"><a href="Ch06.html#cb219-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb219-47"><a href="Ch06.html#cb219-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb219-48"><a href="Ch06.html#cb219-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb219-49"><a href="Ch06.html#cb219-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb219-50"><a href="Ch06.html#cb219-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb219-51"><a href="Ch06.html#cb219-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb219-52"><a href="Ch06.html#cb219-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb219-53"><a href="Ch06.html#cb219-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_178.png" width="100%" /></p>
</div>
<div id="ch06.179" class="section level2 hasAnchor" number="6.179">
<h2><span class="header-section-number">6.179</span> Edges_ReedSedgeRushBeds-Water_r10000<a href="Ch06.html#ch06.179" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Edges_ReedSedgeRushBeds-Water_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_179</code></p>
<p><strong>English name:</strong> Edge pixels of Reed-, Sedge-, Rush- Beds bordering with Water within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Niedrāju, grīslāju, meldrāju malu ar ūdeni garums 10 km ainavā</p>
<p><strong>Procedure:</strong> Total edge at 10000 m radius around the analysis grid cell, is calculated as the area-weighted sum of <a href="Ch06.html#ch06.175">analysis cells</a> inside the buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric, inverse distance weighted (power = 2) gap filling on the output is initialized to ensure no missing values at the edges. Finally, layer is rewritten to ensure layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="Ch06.html#cb220-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb220-2"><a href="Ch06.html#cb220-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb220-3"><a href="Ch06.html#cb220-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb220-4"><a href="Ch06.html#cb220-4" tabindex="-1"></a></span>
<span id="cb220-5"><a href="Ch06.html#cb220-5" tabindex="-1"></a></span>
<span id="cb220-6"><a href="Ch06.html#cb220-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb220-7"><a href="Ch06.html#cb220-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb220-8"><a href="Ch06.html#cb220-8" tabindex="-1"></a></span>
<span id="cb220-9"><a href="Ch06.html#cb220-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb220-10"><a href="Ch06.html#cb220-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb220-11"><a href="Ch06.html#cb220-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb220-12"><a href="Ch06.html#cb220-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb220-13"><a href="Ch06.html#cb220-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb220-14"><a href="Ch06.html#cb220-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb220-15"><a href="Ch06.html#cb220-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_cell.tif&quot;</span>),</span>
<span id="cb220-16"><a href="Ch06.html#cb220-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Edges_ReedSedgeRushBeds-Water&quot;</span>),</span>
<span id="cb220-17"><a href="Ch06.html#cb220-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb220-18"><a href="Ch06.html#cb220-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">12</span>,</span>
<span id="cb220-19"><a href="Ch06.html#cb220-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb220-20"><a href="Ch06.html#cb220-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb220-21"><a href="Ch06.html#cb220-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb220-22"><a href="Ch06.html#cb220-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb220-23"><a href="Ch06.html#cb220-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb220-24"><a href="Ch06.html#cb220-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb220-25"><a href="Ch06.html#cb220-25" tabindex="-1"></a></span>
<span id="cb220-26"><a href="Ch06.html#cb220-26" tabindex="-1"></a></span>
<span id="cb220-27"><a href="Ch06.html#cb220-27" tabindex="-1"></a><span class="co"># Edges_ReedSedgeRushBeds-Water_r10000.tif  egv_179 ----</span></span>
<span id="cb220-28"><a href="Ch06.html#cb220-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_r10000.tif&quot;</span>)</span>
<span id="cb220-29"><a href="Ch06.html#cb220-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_179&quot;</span></span>
<span id="cb220-30"><a href="Ch06.html#cb220-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb220-31"><a href="Ch06.html#cb220-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb220-32"><a href="Ch06.html#cb220-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Edges_ReedSedgeRushBeds-Water_r10000.tif&quot;</span>,</span>
<span id="cb220-33"><a href="Ch06.html#cb220-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb220-34"><a href="Ch06.html#cb220-34" tabindex="-1"></a></span>
<span id="cb220-35"><a href="Ch06.html#cb220-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb220-36"><a href="Ch06.html#cb220-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb220-37"><a href="Ch06.html#cb220-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb220-38"><a href="Ch06.html#cb220-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb220-39"><a href="Ch06.html#cb220-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb220-40"><a href="Ch06.html#cb220-40" tabindex="-1"></a></span>
<span id="cb220-41"><a href="Ch06.html#cb220-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Edges_ReedSedgeRushBeds-Water_r10000.tif&quot;</span></span>
<span id="cb220-42"><a href="Ch06.html#cb220-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb220-43"><a href="Ch06.html#cb220-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb220-44"><a href="Ch06.html#cb220-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb220-45"><a href="Ch06.html#cb220-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb220-46"><a href="Ch06.html#cb220-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb220-47"><a href="Ch06.html#cb220-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb220-48"><a href="Ch06.html#cb220-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb220-49"><a href="Ch06.html#cb220-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb220-50"><a href="Ch06.html#cb220-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb220-51"><a href="Ch06.html#cb220-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb220-52"><a href="Ch06.html#cb220-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb220-53"><a href="Ch06.html#cb220-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_179.png" width="100%" /></p>
</div>
<div id="ch06.180" class="section level2 hasAnchor" number="6.180">
<h2><span class="header-section-number">6.180</span> FarmlandCrops_CropsAll_cell<a href="Ch06.html#ch06.180" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsAll_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_180</code></p>
<p><strong>English name:</strong> Fractional cover of Crops (all types) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Aramzemju (dažādu lauksaimniecības kultūru) platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels with any type of crops are selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>. These geometries
were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="Ch06.html#cb221-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb221-2"><a href="Ch06.html#cb221-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb221-3"><a href="Ch06.html#cb221-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb221-4"><a href="Ch06.html#cb221-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb221-5"><a href="Ch06.html#cb221-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb221-6"><a href="Ch06.html#cb221-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb221-7"><a href="Ch06.html#cb221-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb221-8"><a href="Ch06.html#cb221-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb221-9"><a href="Ch06.html#cb221-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb221-10"><a href="Ch06.html#cb221-10" tabindex="-1"></a></span>
<span id="cb221-11"><a href="Ch06.html#cb221-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb221-12"><a href="Ch06.html#cb221-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb221-13"><a href="Ch06.html#cb221-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb221-14"><a href="Ch06.html#cb221-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb221-15"><a href="Ch06.html#cb221-15" tabindex="-1"></a></span>
<span id="cb221-16"><a href="Ch06.html#cb221-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb221-17"><a href="Ch06.html#cb221-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb221-18"><a href="Ch06.html#cb221-18" tabindex="-1"></a></span>
<span id="cb221-19"><a href="Ch06.html#cb221-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb221-20"><a href="Ch06.html#cb221-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb221-21"><a href="Ch06.html#cb221-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb221-22"><a href="Ch06.html#cb221-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb221-23"><a href="Ch06.html#cb221-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb221-24"><a href="Ch06.html#cb221-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb221-25"><a href="Ch06.html#cb221-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb221-26"><a href="Ch06.html#cb221-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb221-27"><a href="Ch06.html#cb221-27" tabindex="-1"></a></span>
<span id="cb221-28"><a href="Ch06.html#cb221-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb221-29"><a href="Ch06.html#cb221-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb221-30"><a href="Ch06.html#cb221-30" tabindex="-1"></a></span>
<span id="cb221-31"><a href="Ch06.html#cb221-31" tabindex="-1"></a></span>
<span id="cb221-32"><a href="Ch06.html#cb221-32" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsAll_cell.tif   egv_180 ----</span></span>
<span id="cb221-33"><a href="Ch06.html#cb221-33" tabindex="-1"></a>aramzemes<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb221-34"><a href="Ch06.html#cb221-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(SDM_grupa_sakums,<span class="st">&quot;aramz&quot;</span>))</span>
<span id="cb221-35"><a href="Ch06.html#cb221-35" tabindex="-1"></a></span>
<span id="cb221-36"><a href="Ch06.html#cb221-36" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> aramzemes,</span>
<span id="cb221-37"><a href="Ch06.html#cb221-37" tabindex="-1"></a>                        <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb221-38"><a href="Ch06.html#cb221-38" tabindex="-1"></a>                        <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb221-39"><a href="Ch06.html#cb221-39" tabindex="-1"></a>                        <span class="at">file_name =</span> <span class="st">&quot;FarmlandCrops_CropsAll_input.tif&quot;</span>,</span>
<span id="cb221-40"><a href="Ch06.html#cb221-40" tabindex="-1"></a>                        <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb221-41"><a href="Ch06.html#cb221-41" tabindex="-1"></a>                        <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb221-42"><a href="Ch06.html#cb221-42" tabindex="-1"></a>                        <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb221-43"><a href="Ch06.html#cb221-43" tabindex="-1"></a>                        <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb221-44"><a href="Ch06.html#cb221-44" tabindex="-1"></a>p2i_rez</span>
<span id="cb221-45"><a href="Ch06.html#cb221-45" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb221-46"><a href="Ch06.html#cb221-46" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandCrops_CropsAll_input.tif&quot;</span>),</span>
<span id="cb221-47"><a href="Ch06.html#cb221-47" tabindex="-1"></a>                    <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb221-48"><a href="Ch06.html#cb221-48" tabindex="-1"></a>                    <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb221-49"><a href="Ch06.html#cb221-49" tabindex="-1"></a>                    <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb221-50"><a href="Ch06.html#cb221-50" tabindex="-1"></a>                    <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb221-51"><a href="Ch06.html#cb221-51" tabindex="-1"></a>                    <span class="at">outfilename =</span> <span class="st">&quot;FarmlandCrops_CropsAll_cell.tif&quot;</span>,</span>
<span id="cb221-52"><a href="Ch06.html#cb221-52" tabindex="-1"></a>                    <span class="at">layername =</span> <span class="st">&quot;egv_180&quot;</span>,</span>
<span id="cb221-53"><a href="Ch06.html#cb221-53" tabindex="-1"></a>                    <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb221-54"><a href="Ch06.html#cb221-54" tabindex="-1"></a>                    <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb221-55"><a href="Ch06.html#cb221-55" tabindex="-1"></a>i2e_rez</span>
<span id="cb221-56"><a href="Ch06.html#cb221-56" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb221-57"><a href="Ch06.html#cb221-57" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb221-58"><a href="Ch06.html#cb221-58" tabindex="-1"></a><span class="fu">rm</span>(aramzemes)</span>
<span id="cb221-59"><a href="Ch06.html#cb221-59" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandCrops_CropsAll_input.tif&quot;</span>)</span>
<span id="cb221-60"><a href="Ch06.html#cb221-60" tabindex="-1"></a></span>
<span id="cb221-61"><a href="Ch06.html#cb221-61" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb221-62"><a href="Ch06.html#cb221-62" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb221-63"><a href="Ch06.html#cb221-63" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb221-64"><a href="Ch06.html#cb221-64" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb221-65"><a href="Ch06.html#cb221-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb221-66"><a href="Ch06.html#cb221-66" tabindex="-1"></a></span>
<span id="cb221-67"><a href="Ch06.html#cb221-67" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsAll_cell.tif&quot;</span></span>
<span id="cb221-68"><a href="Ch06.html#cb221-68" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb221-69"><a href="Ch06.html#cb221-69" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb221-70"><a href="Ch06.html#cb221-70" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb221-71"><a href="Ch06.html#cb221-71" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb221-72"><a href="Ch06.html#cb221-72" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb221-73"><a href="Ch06.html#cb221-73" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb221-74"><a href="Ch06.html#cb221-74" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb221-75"><a href="Ch06.html#cb221-75" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb221-76"><a href="Ch06.html#cb221-76" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb221-77"><a href="Ch06.html#cb221-77" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb221-78"><a href="Ch06.html#cb221-78" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb221-79"><a href="Ch06.html#cb221-79" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_180.png" width="100%" /></p>
</div>
<div id="ch06.181" class="section level2 hasAnchor" number="6.181">
<h2><span class="header-section-number">6.181</span> FarmlandCrops_CropsAll_r500<a href="Ch06.html#ch06.181" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsAll_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_181</code></p>
<p><strong>English name:</strong> Fractional cover of Crops (all types) within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju (dažādu lauksaimniecības kultūru) platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.180">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="Ch06.html#cb222-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb222-2"><a href="Ch06.html#cb222-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb222-3"><a href="Ch06.html#cb222-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb222-4"><a href="Ch06.html#cb222-4" tabindex="-1"></a></span>
<span id="cb222-5"><a href="Ch06.html#cb222-5" tabindex="-1"></a></span>
<span id="cb222-6"><a href="Ch06.html#cb222-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb222-7"><a href="Ch06.html#cb222-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb222-8"><a href="Ch06.html#cb222-8" tabindex="-1"></a></span>
<span id="cb222-9"><a href="Ch06.html#cb222-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb222-10"><a href="Ch06.html#cb222-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb222-11"><a href="Ch06.html#cb222-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb222-12"><a href="Ch06.html#cb222-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb222-13"><a href="Ch06.html#cb222-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb222-14"><a href="Ch06.html#cb222-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb222-15"><a href="Ch06.html#cb222-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_cell.tif&quot;</span>),</span>
<span id="cb222-16"><a href="Ch06.html#cb222-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsAll&quot;</span>),</span>
<span id="cb222-17"><a href="Ch06.html#cb222-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb222-18"><a href="Ch06.html#cb222-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb222-19"><a href="Ch06.html#cb222-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb222-20"><a href="Ch06.html#cb222-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb222-21"><a href="Ch06.html#cb222-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb222-22"><a href="Ch06.html#cb222-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb222-23"><a href="Ch06.html#cb222-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb222-24"><a href="Ch06.html#cb222-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb222-25"><a href="Ch06.html#cb222-25" tabindex="-1"></a></span>
<span id="cb222-26"><a href="Ch06.html#cb222-26" tabindex="-1"></a></span>
<span id="cb222-27"><a href="Ch06.html#cb222-27" tabindex="-1"></a></span>
<span id="cb222-28"><a href="Ch06.html#cb222-28" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsAll_r500.tif   egv_181 ----</span></span>
<span id="cb222-29"><a href="Ch06.html#cb222-29" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_r500.tif&quot;</span>)</span>
<span id="cb222-30"><a href="Ch06.html#cb222-30" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_181&quot;</span></span>
<span id="cb222-31"><a href="Ch06.html#cb222-31" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb222-32"><a href="Ch06.html#cb222-32" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb222-33"><a href="Ch06.html#cb222-33" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_r500.tif&quot;</span>,</span>
<span id="cb222-34"><a href="Ch06.html#cb222-34" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb222-35"><a href="Ch06.html#cb222-35" tabindex="-1"></a></span>
<span id="cb222-36"><a href="Ch06.html#cb222-36" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb222-37"><a href="Ch06.html#cb222-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb222-38"><a href="Ch06.html#cb222-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb222-39"><a href="Ch06.html#cb222-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb222-40"><a href="Ch06.html#cb222-40" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb222-41"><a href="Ch06.html#cb222-41" tabindex="-1"></a></span>
<span id="cb222-42"><a href="Ch06.html#cb222-42" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsAll_r500.tif&quot;</span></span>
<span id="cb222-43"><a href="Ch06.html#cb222-43" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb222-44"><a href="Ch06.html#cb222-44" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb222-45"><a href="Ch06.html#cb222-45" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb222-46"><a href="Ch06.html#cb222-46" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb222-47"><a href="Ch06.html#cb222-47" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb222-48"><a href="Ch06.html#cb222-48" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb222-49"><a href="Ch06.html#cb222-49" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb222-50"><a href="Ch06.html#cb222-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb222-51"><a href="Ch06.html#cb222-51" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb222-52"><a href="Ch06.html#cb222-52" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb222-53"><a href="Ch06.html#cb222-53" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb222-54"><a href="Ch06.html#cb222-54" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_181.png" width="100%" /></p>
</div>
<div id="ch06.182" class="section level2 hasAnchor" number="6.182">
<h2><span class="header-section-number">6.182</span> FarmlandCrops_CropsAll_r1250<a href="Ch06.html#ch06.182" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsAll_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_182</code></p>
<p><strong>English name:</strong> Fractional cover of Crops (all types) within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju (dažādu lauksaimniecības kultūru) platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.180">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="Ch06.html#cb223-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb223-2"><a href="Ch06.html#cb223-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb223-3"><a href="Ch06.html#cb223-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb223-4"><a href="Ch06.html#cb223-4" tabindex="-1"></a></span>
<span id="cb223-5"><a href="Ch06.html#cb223-5" tabindex="-1"></a></span>
<span id="cb223-6"><a href="Ch06.html#cb223-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb223-7"><a href="Ch06.html#cb223-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb223-8"><a href="Ch06.html#cb223-8" tabindex="-1"></a></span>
<span id="cb223-9"><a href="Ch06.html#cb223-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb223-10"><a href="Ch06.html#cb223-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb223-11"><a href="Ch06.html#cb223-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb223-12"><a href="Ch06.html#cb223-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb223-13"><a href="Ch06.html#cb223-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb223-14"><a href="Ch06.html#cb223-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb223-15"><a href="Ch06.html#cb223-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_cell.tif&quot;</span>),</span>
<span id="cb223-16"><a href="Ch06.html#cb223-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsAll&quot;</span>),</span>
<span id="cb223-17"><a href="Ch06.html#cb223-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb223-18"><a href="Ch06.html#cb223-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb223-19"><a href="Ch06.html#cb223-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb223-20"><a href="Ch06.html#cb223-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb223-21"><a href="Ch06.html#cb223-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb223-22"><a href="Ch06.html#cb223-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb223-23"><a href="Ch06.html#cb223-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb223-24"><a href="Ch06.html#cb223-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb223-25"><a href="Ch06.html#cb223-25" tabindex="-1"></a></span>
<span id="cb223-26"><a href="Ch06.html#cb223-26" tabindex="-1"></a></span>
<span id="cb223-27"><a href="Ch06.html#cb223-27" tabindex="-1"></a></span>
<span id="cb223-28"><a href="Ch06.html#cb223-28" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsAll_r1250.tif  egv_182 ----</span></span>
<span id="cb223-29"><a href="Ch06.html#cb223-29" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_r1250.tif&quot;</span>)</span>
<span id="cb223-30"><a href="Ch06.html#cb223-30" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_182&quot;</span></span>
<span id="cb223-31"><a href="Ch06.html#cb223-31" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb223-32"><a href="Ch06.html#cb223-32" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb223-33"><a href="Ch06.html#cb223-33" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_r1250.tif&quot;</span>,</span>
<span id="cb223-34"><a href="Ch06.html#cb223-34" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb223-35"><a href="Ch06.html#cb223-35" tabindex="-1"></a></span>
<span id="cb223-36"><a href="Ch06.html#cb223-36" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb223-37"><a href="Ch06.html#cb223-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb223-38"><a href="Ch06.html#cb223-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb223-39"><a href="Ch06.html#cb223-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb223-40"><a href="Ch06.html#cb223-40" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb223-41"><a href="Ch06.html#cb223-41" tabindex="-1"></a></span>
<span id="cb223-42"><a href="Ch06.html#cb223-42" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsAll_r1250.tif&quot;</span></span>
<span id="cb223-43"><a href="Ch06.html#cb223-43" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb223-44"><a href="Ch06.html#cb223-44" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb223-45"><a href="Ch06.html#cb223-45" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb223-46"><a href="Ch06.html#cb223-46" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb223-47"><a href="Ch06.html#cb223-47" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb223-48"><a href="Ch06.html#cb223-48" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb223-49"><a href="Ch06.html#cb223-49" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb223-50"><a href="Ch06.html#cb223-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb223-51"><a href="Ch06.html#cb223-51" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb223-52"><a href="Ch06.html#cb223-52" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb223-53"><a href="Ch06.html#cb223-53" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb223-54"><a href="Ch06.html#cb223-54" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_182.png" width="100%" /></p>
</div>
<div id="ch06.183" class="section level2 hasAnchor" number="6.183">
<h2><span class="header-section-number">6.183</span> FarmlandCrops_CropsAll_r3000<a href="Ch06.html#ch06.183" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsAll_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_183</code></p>
<p><strong>English name:</strong> Fractional cover of Crops (all types) within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju (dažādu lauksaimniecības kultūru) platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.180">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="Ch06.html#cb224-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb224-2"><a href="Ch06.html#cb224-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb224-3"><a href="Ch06.html#cb224-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb224-4"><a href="Ch06.html#cb224-4" tabindex="-1"></a></span>
<span id="cb224-5"><a href="Ch06.html#cb224-5" tabindex="-1"></a></span>
<span id="cb224-6"><a href="Ch06.html#cb224-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb224-7"><a href="Ch06.html#cb224-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb224-8"><a href="Ch06.html#cb224-8" tabindex="-1"></a></span>
<span id="cb224-9"><a href="Ch06.html#cb224-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb224-10"><a href="Ch06.html#cb224-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb224-11"><a href="Ch06.html#cb224-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb224-12"><a href="Ch06.html#cb224-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb224-13"><a href="Ch06.html#cb224-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb224-14"><a href="Ch06.html#cb224-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb224-15"><a href="Ch06.html#cb224-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_cell.tif&quot;</span>),</span>
<span id="cb224-16"><a href="Ch06.html#cb224-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsAll&quot;</span>),</span>
<span id="cb224-17"><a href="Ch06.html#cb224-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb224-18"><a href="Ch06.html#cb224-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb224-19"><a href="Ch06.html#cb224-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb224-20"><a href="Ch06.html#cb224-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb224-21"><a href="Ch06.html#cb224-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb224-22"><a href="Ch06.html#cb224-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb224-23"><a href="Ch06.html#cb224-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb224-24"><a href="Ch06.html#cb224-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb224-25"><a href="Ch06.html#cb224-25" tabindex="-1"></a></span>
<span id="cb224-26"><a href="Ch06.html#cb224-26" tabindex="-1"></a></span>
<span id="cb224-27"><a href="Ch06.html#cb224-27" tabindex="-1"></a></span>
<span id="cb224-28"><a href="Ch06.html#cb224-28" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsAll_r3000.tif  egv_183 ----</span></span>
<span id="cb224-29"><a href="Ch06.html#cb224-29" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_r3000.tif&quot;</span>)</span>
<span id="cb224-30"><a href="Ch06.html#cb224-30" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_183&quot;</span></span>
<span id="cb224-31"><a href="Ch06.html#cb224-31" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb224-32"><a href="Ch06.html#cb224-32" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb224-33"><a href="Ch06.html#cb224-33" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_r3000.tif&quot;</span>,</span>
<span id="cb224-34"><a href="Ch06.html#cb224-34" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb224-35"><a href="Ch06.html#cb224-35" tabindex="-1"></a></span>
<span id="cb224-36"><a href="Ch06.html#cb224-36" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb224-37"><a href="Ch06.html#cb224-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb224-38"><a href="Ch06.html#cb224-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb224-39"><a href="Ch06.html#cb224-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb224-40"><a href="Ch06.html#cb224-40" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb224-41"><a href="Ch06.html#cb224-41" tabindex="-1"></a></span>
<span id="cb224-42"><a href="Ch06.html#cb224-42" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsAll_r3000.tif&quot;</span></span>
<span id="cb224-43"><a href="Ch06.html#cb224-43" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb224-44"><a href="Ch06.html#cb224-44" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb224-45"><a href="Ch06.html#cb224-45" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb224-46"><a href="Ch06.html#cb224-46" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb224-47"><a href="Ch06.html#cb224-47" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb224-48"><a href="Ch06.html#cb224-48" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb224-49"><a href="Ch06.html#cb224-49" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb224-50"><a href="Ch06.html#cb224-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb224-51"><a href="Ch06.html#cb224-51" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb224-52"><a href="Ch06.html#cb224-52" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb224-53"><a href="Ch06.html#cb224-53" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb224-54"><a href="Ch06.html#cb224-54" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_183.png" width="100%" /></p>
</div>
<div id="ch06.184" class="section level2 hasAnchor" number="6.184">
<h2><span class="header-section-number">6.184</span> FarmlandCrops_CropsAll_r10000<a href="Ch06.html#ch06.184" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsAll_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_184</code></p>
<p><strong>English name:</strong> Fractional cover of Crops (all types) within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju (dažādu lauksaimniecības kultūru) platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.180">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="Ch06.html#cb225-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb225-2"><a href="Ch06.html#cb225-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb225-3"><a href="Ch06.html#cb225-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb225-4"><a href="Ch06.html#cb225-4" tabindex="-1"></a></span>
<span id="cb225-5"><a href="Ch06.html#cb225-5" tabindex="-1"></a></span>
<span id="cb225-6"><a href="Ch06.html#cb225-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb225-7"><a href="Ch06.html#cb225-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb225-8"><a href="Ch06.html#cb225-8" tabindex="-1"></a></span>
<span id="cb225-9"><a href="Ch06.html#cb225-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb225-10"><a href="Ch06.html#cb225-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb225-11"><a href="Ch06.html#cb225-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb225-12"><a href="Ch06.html#cb225-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb225-13"><a href="Ch06.html#cb225-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb225-14"><a href="Ch06.html#cb225-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb225-15"><a href="Ch06.html#cb225-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_cell.tif&quot;</span>),</span>
<span id="cb225-16"><a href="Ch06.html#cb225-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsAll&quot;</span>),</span>
<span id="cb225-17"><a href="Ch06.html#cb225-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb225-18"><a href="Ch06.html#cb225-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb225-19"><a href="Ch06.html#cb225-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb225-20"><a href="Ch06.html#cb225-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb225-21"><a href="Ch06.html#cb225-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb225-22"><a href="Ch06.html#cb225-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb225-23"><a href="Ch06.html#cb225-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb225-24"><a href="Ch06.html#cb225-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb225-25"><a href="Ch06.html#cb225-25" tabindex="-1"></a></span>
<span id="cb225-26"><a href="Ch06.html#cb225-26" tabindex="-1"></a></span>
<span id="cb225-27"><a href="Ch06.html#cb225-27" tabindex="-1"></a></span>
<span id="cb225-28"><a href="Ch06.html#cb225-28" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsAll_r10000.tif egv_184 ----</span></span>
<span id="cb225-29"><a href="Ch06.html#cb225-29" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_r10000.tif&quot;</span>)</span>
<span id="cb225-30"><a href="Ch06.html#cb225-30" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_184&quot;</span></span>
<span id="cb225-31"><a href="Ch06.html#cb225-31" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb225-32"><a href="Ch06.html#cb225-32" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb225-33"><a href="Ch06.html#cb225-33" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsAll_r10000.tif&quot;</span>,</span>
<span id="cb225-34"><a href="Ch06.html#cb225-34" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb225-35"><a href="Ch06.html#cb225-35" tabindex="-1"></a></span>
<span id="cb225-36"><a href="Ch06.html#cb225-36" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb225-37"><a href="Ch06.html#cb225-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb225-38"><a href="Ch06.html#cb225-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb225-39"><a href="Ch06.html#cb225-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb225-40"><a href="Ch06.html#cb225-40" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb225-41"><a href="Ch06.html#cb225-41" tabindex="-1"></a></span>
<span id="cb225-42"><a href="Ch06.html#cb225-42" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsAll_r10000.tif&quot;</span></span>
<span id="cb225-43"><a href="Ch06.html#cb225-43" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb225-44"><a href="Ch06.html#cb225-44" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb225-45"><a href="Ch06.html#cb225-45" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb225-46"><a href="Ch06.html#cb225-46" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb225-47"><a href="Ch06.html#cb225-47" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb225-48"><a href="Ch06.html#cb225-48" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb225-49"><a href="Ch06.html#cb225-49" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb225-50"><a href="Ch06.html#cb225-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb225-51"><a href="Ch06.html#cb225-51" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb225-52"><a href="Ch06.html#cb225-52" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb225-53"><a href="Ch06.html#cb225-53" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb225-54"><a href="Ch06.html#cb225-54" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_184.png" width="100%" /></p>
</div>
<div id="ch06.185" class="section level2 hasAnchor" number="6.185">
<h2><span class="header-section-number">6.185</span> FarmlandCrops_CropsHoed_cell<a href="Ch06.html#ch06.185" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsHoed_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_185</code></p>
<p><strong>English name:</strong> Fractional cover of Hoed Crops within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vagu un rušināmkultūru platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels with hoed crops were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>. These geometries
were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="Ch06.html#cb226-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb226-2"><a href="Ch06.html#cb226-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb226-3"><a href="Ch06.html#cb226-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb226-4"><a href="Ch06.html#cb226-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb226-5"><a href="Ch06.html#cb226-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb226-6"><a href="Ch06.html#cb226-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb226-7"><a href="Ch06.html#cb226-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb226-8"><a href="Ch06.html#cb226-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb226-9"><a href="Ch06.html#cb226-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb226-10"><a href="Ch06.html#cb226-10" tabindex="-1"></a></span>
<span id="cb226-11"><a href="Ch06.html#cb226-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb226-12"><a href="Ch06.html#cb226-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb226-13"><a href="Ch06.html#cb226-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb226-14"><a href="Ch06.html#cb226-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb226-15"><a href="Ch06.html#cb226-15" tabindex="-1"></a></span>
<span id="cb226-16"><a href="Ch06.html#cb226-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb226-17"><a href="Ch06.html#cb226-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb226-18"><a href="Ch06.html#cb226-18" tabindex="-1"></a></span>
<span id="cb226-19"><a href="Ch06.html#cb226-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb226-20"><a href="Ch06.html#cb226-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb226-21"><a href="Ch06.html#cb226-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb226-22"><a href="Ch06.html#cb226-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb226-23"><a href="Ch06.html#cb226-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb226-24"><a href="Ch06.html#cb226-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb226-25"><a href="Ch06.html#cb226-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb226-26"><a href="Ch06.html#cb226-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb226-27"><a href="Ch06.html#cb226-27" tabindex="-1"></a></span>
<span id="cb226-28"><a href="Ch06.html#cb226-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb226-29"><a href="Ch06.html#cb226-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb226-30"><a href="Ch06.html#cb226-30" tabindex="-1"></a></span>
<span id="cb226-31"><a href="Ch06.html#cb226-31" tabindex="-1"></a></span>
<span id="cb226-32"><a href="Ch06.html#cb226-32" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsHoed_cell.tif  egv_185 ----</span></span>
<span id="cb226-33"><a href="Ch06.html#cb226-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb226-34"><a href="Ch06.html#cb226-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(SDM_grupa_sakums,<span class="st">&quot;ruši&quot;</span>))</span>
<span id="cb226-35"><a href="Ch06.html#cb226-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb226-36"><a href="Ch06.html#cb226-36" tabindex="-1"></a></span>
<span id="cb226-37"><a href="Ch06.html#cb226-37" tabindex="-1"></a></span>
<span id="cb226-38"><a href="Ch06.html#cb226-38" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb226-39"><a href="Ch06.html#cb226-39" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb226-40"><a href="Ch06.html#cb226-40" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb226-41"><a href="Ch06.html#cb226-41" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandCrops_CropsHoed_input.tif&quot;</span>,</span>
<span id="cb226-42"><a href="Ch06.html#cb226-42" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb226-43"><a href="Ch06.html#cb226-43" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb226-44"><a href="Ch06.html#cb226-44" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb226-45"><a href="Ch06.html#cb226-45" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb226-46"><a href="Ch06.html#cb226-46" tabindex="-1"></a>p2i_rez</span>
<span id="cb226-47"><a href="Ch06.html#cb226-47" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb226-48"><a href="Ch06.html#cb226-48" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandCrops_CropsHoed_input.tif&quot;</span>),</span>
<span id="cb226-49"><a href="Ch06.html#cb226-49" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb226-50"><a href="Ch06.html#cb226-50" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb226-51"><a href="Ch06.html#cb226-51" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb226-52"><a href="Ch06.html#cb226-52" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb226-53"><a href="Ch06.html#cb226-53" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandCrops_CropsHoed_cell.tif&quot;</span>,</span>
<span id="cb226-54"><a href="Ch06.html#cb226-54" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_185&quot;</span>,</span>
<span id="cb226-55"><a href="Ch06.html#cb226-55" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb226-56"><a href="Ch06.html#cb226-56" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb226-57"><a href="Ch06.html#cb226-57" tabindex="-1"></a>i2e_rez</span>
<span id="cb226-58"><a href="Ch06.html#cb226-58" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb226-59"><a href="Ch06.html#cb226-59" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb226-60"><a href="Ch06.html#cb226-60" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb226-61"><a href="Ch06.html#cb226-61" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandCrops_CropsHoed_input.tif&quot;</span>)</span>
<span id="cb226-62"><a href="Ch06.html#cb226-62" tabindex="-1"></a></span>
<span id="cb226-63"><a href="Ch06.html#cb226-63" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb226-64"><a href="Ch06.html#cb226-64" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb226-65"><a href="Ch06.html#cb226-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb226-66"><a href="Ch06.html#cb226-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb226-67"><a href="Ch06.html#cb226-67" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb226-68"><a href="Ch06.html#cb226-68" tabindex="-1"></a></span>
<span id="cb226-69"><a href="Ch06.html#cb226-69" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsHoed_cell.tif&quot;</span></span>
<span id="cb226-70"><a href="Ch06.html#cb226-70" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb226-71"><a href="Ch06.html#cb226-71" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb226-72"><a href="Ch06.html#cb226-72" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb226-73"><a href="Ch06.html#cb226-73" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb226-74"><a href="Ch06.html#cb226-74" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb226-75"><a href="Ch06.html#cb226-75" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb226-76"><a href="Ch06.html#cb226-76" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb226-77"><a href="Ch06.html#cb226-77" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb226-78"><a href="Ch06.html#cb226-78" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb226-79"><a href="Ch06.html#cb226-79" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb226-80"><a href="Ch06.html#cb226-80" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb226-81"><a href="Ch06.html#cb226-81" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_185.png" width="100%" /></p>
</div>
<div id="ch06.186" class="section level2 hasAnchor" number="6.186">
<h2><span class="header-section-number">6.186</span> FarmlandCrops_CropsHoed_r500<a href="Ch06.html#ch06.186" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsHoed_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_186</code></p>
<p><strong>English name:</strong> Fractional cover of Hoed Crops within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vagu un rušināmkultūru platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.185">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="Ch06.html#cb227-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb227-2"><a href="Ch06.html#cb227-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb227-3"><a href="Ch06.html#cb227-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb227-4"><a href="Ch06.html#cb227-4" tabindex="-1"></a></span>
<span id="cb227-5"><a href="Ch06.html#cb227-5" tabindex="-1"></a></span>
<span id="cb227-6"><a href="Ch06.html#cb227-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb227-7"><a href="Ch06.html#cb227-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb227-8"><a href="Ch06.html#cb227-8" tabindex="-1"></a></span>
<span id="cb227-9"><a href="Ch06.html#cb227-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb227-10"><a href="Ch06.html#cb227-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb227-11"><a href="Ch06.html#cb227-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb227-12"><a href="Ch06.html#cb227-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb227-13"><a href="Ch06.html#cb227-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb227-14"><a href="Ch06.html#cb227-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb227-15"><a href="Ch06.html#cb227-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_cell.tif&quot;</span>),</span>
<span id="cb227-16"><a href="Ch06.html#cb227-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsHoed&quot;</span>),</span>
<span id="cb227-17"><a href="Ch06.html#cb227-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb227-18"><a href="Ch06.html#cb227-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb227-19"><a href="Ch06.html#cb227-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb227-20"><a href="Ch06.html#cb227-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb227-21"><a href="Ch06.html#cb227-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb227-22"><a href="Ch06.html#cb227-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb227-23"><a href="Ch06.html#cb227-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb227-24"><a href="Ch06.html#cb227-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb227-25"><a href="Ch06.html#cb227-25" tabindex="-1"></a></span>
<span id="cb227-26"><a href="Ch06.html#cb227-26" tabindex="-1"></a></span>
<span id="cb227-27"><a href="Ch06.html#cb227-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsHoed_r500.tif  egv_186 ----</span></span>
<span id="cb227-28"><a href="Ch06.html#cb227-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_r500.tif&quot;</span>)</span>
<span id="cb227-29"><a href="Ch06.html#cb227-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_186&quot;</span></span>
<span id="cb227-30"><a href="Ch06.html#cb227-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb227-31"><a href="Ch06.html#cb227-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb227-32"><a href="Ch06.html#cb227-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_r500.tif&quot;</span>,</span>
<span id="cb227-33"><a href="Ch06.html#cb227-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb227-34"><a href="Ch06.html#cb227-34" tabindex="-1"></a></span>
<span id="cb227-35"><a href="Ch06.html#cb227-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb227-36"><a href="Ch06.html#cb227-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb227-37"><a href="Ch06.html#cb227-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb227-38"><a href="Ch06.html#cb227-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb227-39"><a href="Ch06.html#cb227-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb227-40"><a href="Ch06.html#cb227-40" tabindex="-1"></a></span>
<span id="cb227-41"><a href="Ch06.html#cb227-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsHoed_r500.tif&quot;</span></span>
<span id="cb227-42"><a href="Ch06.html#cb227-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb227-43"><a href="Ch06.html#cb227-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb227-44"><a href="Ch06.html#cb227-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb227-45"><a href="Ch06.html#cb227-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb227-46"><a href="Ch06.html#cb227-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb227-47"><a href="Ch06.html#cb227-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb227-48"><a href="Ch06.html#cb227-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb227-49"><a href="Ch06.html#cb227-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb227-50"><a href="Ch06.html#cb227-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb227-51"><a href="Ch06.html#cb227-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb227-52"><a href="Ch06.html#cb227-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb227-53"><a href="Ch06.html#cb227-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_186.png" width="100%" /></p>
</div>
<div id="ch06.187" class="section level2 hasAnchor" number="6.187">
<h2><span class="header-section-number">6.187</span> FarmlandCrops_CropsHoed_r1250<a href="Ch06.html#ch06.187" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsHoed_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_187</code></p>
<p><strong>English name:</strong> Fractional cover of Hoed Crops within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vagu un rušināmkultūru platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.185">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="Ch06.html#cb228-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb228-2"><a href="Ch06.html#cb228-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb228-3"><a href="Ch06.html#cb228-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb228-4"><a href="Ch06.html#cb228-4" tabindex="-1"></a></span>
<span id="cb228-5"><a href="Ch06.html#cb228-5" tabindex="-1"></a></span>
<span id="cb228-6"><a href="Ch06.html#cb228-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb228-7"><a href="Ch06.html#cb228-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb228-8"><a href="Ch06.html#cb228-8" tabindex="-1"></a></span>
<span id="cb228-9"><a href="Ch06.html#cb228-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb228-10"><a href="Ch06.html#cb228-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb228-11"><a href="Ch06.html#cb228-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb228-12"><a href="Ch06.html#cb228-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb228-13"><a href="Ch06.html#cb228-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb228-14"><a href="Ch06.html#cb228-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb228-15"><a href="Ch06.html#cb228-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_cell.tif&quot;</span>),</span>
<span id="cb228-16"><a href="Ch06.html#cb228-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsHoed&quot;</span>),</span>
<span id="cb228-17"><a href="Ch06.html#cb228-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb228-18"><a href="Ch06.html#cb228-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb228-19"><a href="Ch06.html#cb228-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb228-20"><a href="Ch06.html#cb228-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb228-21"><a href="Ch06.html#cb228-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb228-22"><a href="Ch06.html#cb228-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb228-23"><a href="Ch06.html#cb228-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb228-24"><a href="Ch06.html#cb228-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb228-25"><a href="Ch06.html#cb228-25" tabindex="-1"></a></span>
<span id="cb228-26"><a href="Ch06.html#cb228-26" tabindex="-1"></a></span>
<span id="cb228-27"><a href="Ch06.html#cb228-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsHoed_r1250.tif egv_187 ----</span></span>
<span id="cb228-28"><a href="Ch06.html#cb228-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_r1250.tif&quot;</span>)</span>
<span id="cb228-29"><a href="Ch06.html#cb228-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_187&quot;</span></span>
<span id="cb228-30"><a href="Ch06.html#cb228-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb228-31"><a href="Ch06.html#cb228-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb228-32"><a href="Ch06.html#cb228-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_r1250.tif&quot;</span>,</span>
<span id="cb228-33"><a href="Ch06.html#cb228-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb228-34"><a href="Ch06.html#cb228-34" tabindex="-1"></a></span>
<span id="cb228-35"><a href="Ch06.html#cb228-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb228-36"><a href="Ch06.html#cb228-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb228-37"><a href="Ch06.html#cb228-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb228-38"><a href="Ch06.html#cb228-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb228-39"><a href="Ch06.html#cb228-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb228-40"><a href="Ch06.html#cb228-40" tabindex="-1"></a></span>
<span id="cb228-41"><a href="Ch06.html#cb228-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsHoed_r1250.tif&quot;</span></span>
<span id="cb228-42"><a href="Ch06.html#cb228-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb228-43"><a href="Ch06.html#cb228-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb228-44"><a href="Ch06.html#cb228-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb228-45"><a href="Ch06.html#cb228-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb228-46"><a href="Ch06.html#cb228-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb228-47"><a href="Ch06.html#cb228-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb228-48"><a href="Ch06.html#cb228-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb228-49"><a href="Ch06.html#cb228-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb228-50"><a href="Ch06.html#cb228-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb228-51"><a href="Ch06.html#cb228-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb228-52"><a href="Ch06.html#cb228-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb228-53"><a href="Ch06.html#cb228-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_187.png" width="100%" /></p>
</div>
<div id="ch06.188" class="section level2 hasAnchor" number="6.188">
<h2><span class="header-section-number">6.188</span> FarmlandCrops_CropsHoed_r3000<a href="Ch06.html#ch06.188" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsHoed_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_188</code></p>
<p><strong>English name:</strong> Fractional cover of Hoed Crops within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vagu un rušināmkultūru platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.185">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="Ch06.html#cb229-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb229-2"><a href="Ch06.html#cb229-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb229-3"><a href="Ch06.html#cb229-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb229-4"><a href="Ch06.html#cb229-4" tabindex="-1"></a></span>
<span id="cb229-5"><a href="Ch06.html#cb229-5" tabindex="-1"></a></span>
<span id="cb229-6"><a href="Ch06.html#cb229-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb229-7"><a href="Ch06.html#cb229-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb229-8"><a href="Ch06.html#cb229-8" tabindex="-1"></a></span>
<span id="cb229-9"><a href="Ch06.html#cb229-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb229-10"><a href="Ch06.html#cb229-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb229-11"><a href="Ch06.html#cb229-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb229-12"><a href="Ch06.html#cb229-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb229-13"><a href="Ch06.html#cb229-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb229-14"><a href="Ch06.html#cb229-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb229-15"><a href="Ch06.html#cb229-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_cell.tif&quot;</span>),</span>
<span id="cb229-16"><a href="Ch06.html#cb229-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsHoed&quot;</span>),</span>
<span id="cb229-17"><a href="Ch06.html#cb229-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb229-18"><a href="Ch06.html#cb229-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb229-19"><a href="Ch06.html#cb229-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb229-20"><a href="Ch06.html#cb229-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb229-21"><a href="Ch06.html#cb229-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb229-22"><a href="Ch06.html#cb229-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb229-23"><a href="Ch06.html#cb229-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb229-24"><a href="Ch06.html#cb229-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb229-25"><a href="Ch06.html#cb229-25" tabindex="-1"></a></span>
<span id="cb229-26"><a href="Ch06.html#cb229-26" tabindex="-1"></a></span>
<span id="cb229-27"><a href="Ch06.html#cb229-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsHoed_r3000.tif egv_188 ----</span></span>
<span id="cb229-28"><a href="Ch06.html#cb229-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_r3000.tif&quot;</span>)</span>
<span id="cb229-29"><a href="Ch06.html#cb229-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_188&quot;</span></span>
<span id="cb229-30"><a href="Ch06.html#cb229-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb229-31"><a href="Ch06.html#cb229-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb229-32"><a href="Ch06.html#cb229-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_r3000.tif&quot;</span>,</span>
<span id="cb229-33"><a href="Ch06.html#cb229-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb229-34"><a href="Ch06.html#cb229-34" tabindex="-1"></a></span>
<span id="cb229-35"><a href="Ch06.html#cb229-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb229-36"><a href="Ch06.html#cb229-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb229-37"><a href="Ch06.html#cb229-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb229-38"><a href="Ch06.html#cb229-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb229-39"><a href="Ch06.html#cb229-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb229-40"><a href="Ch06.html#cb229-40" tabindex="-1"></a></span>
<span id="cb229-41"><a href="Ch06.html#cb229-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsHoed_r3000.tif&quot;</span></span>
<span id="cb229-42"><a href="Ch06.html#cb229-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb229-43"><a href="Ch06.html#cb229-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb229-44"><a href="Ch06.html#cb229-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb229-45"><a href="Ch06.html#cb229-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb229-46"><a href="Ch06.html#cb229-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb229-47"><a href="Ch06.html#cb229-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb229-48"><a href="Ch06.html#cb229-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb229-49"><a href="Ch06.html#cb229-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb229-50"><a href="Ch06.html#cb229-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb229-51"><a href="Ch06.html#cb229-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb229-52"><a href="Ch06.html#cb229-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb229-53"><a href="Ch06.html#cb229-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_188.png" width="100%" /></p>
</div>
<div id="ch06.189" class="section level2 hasAnchor" number="6.189">
<h2><span class="header-section-number">6.189</span> FarmlandCrops_CropsHoed_r10000<a href="Ch06.html#ch06.189" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsHoed_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_189</code></p>
<p><strong>English name:</strong> Fractional cover of Hoed Crops within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vagu un rušināmkultūru platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.185">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="Ch06.html#cb230-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb230-2"><a href="Ch06.html#cb230-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb230-3"><a href="Ch06.html#cb230-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb230-4"><a href="Ch06.html#cb230-4" tabindex="-1"></a></span>
<span id="cb230-5"><a href="Ch06.html#cb230-5" tabindex="-1"></a></span>
<span id="cb230-6"><a href="Ch06.html#cb230-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb230-7"><a href="Ch06.html#cb230-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb230-8"><a href="Ch06.html#cb230-8" tabindex="-1"></a></span>
<span id="cb230-9"><a href="Ch06.html#cb230-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb230-10"><a href="Ch06.html#cb230-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb230-11"><a href="Ch06.html#cb230-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb230-12"><a href="Ch06.html#cb230-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb230-13"><a href="Ch06.html#cb230-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb230-14"><a href="Ch06.html#cb230-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb230-15"><a href="Ch06.html#cb230-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_cell.tif&quot;</span>),</span>
<span id="cb230-16"><a href="Ch06.html#cb230-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsHoed&quot;</span>),</span>
<span id="cb230-17"><a href="Ch06.html#cb230-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb230-18"><a href="Ch06.html#cb230-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb230-19"><a href="Ch06.html#cb230-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb230-20"><a href="Ch06.html#cb230-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb230-21"><a href="Ch06.html#cb230-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb230-22"><a href="Ch06.html#cb230-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb230-23"><a href="Ch06.html#cb230-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb230-24"><a href="Ch06.html#cb230-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb230-25"><a href="Ch06.html#cb230-25" tabindex="-1"></a></span>
<span id="cb230-26"><a href="Ch06.html#cb230-26" tabindex="-1"></a></span>
<span id="cb230-27"><a href="Ch06.html#cb230-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsHoed_r10000.tif    egv_189 ----</span></span>
<span id="cb230-28"><a href="Ch06.html#cb230-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_r10000.tif&quot;</span>)</span>
<span id="cb230-29"><a href="Ch06.html#cb230-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_189&quot;</span></span>
<span id="cb230-30"><a href="Ch06.html#cb230-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb230-31"><a href="Ch06.html#cb230-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb230-32"><a href="Ch06.html#cb230-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsHoed_r10000.tif&quot;</span>,</span>
<span id="cb230-33"><a href="Ch06.html#cb230-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb230-34"><a href="Ch06.html#cb230-34" tabindex="-1"></a></span>
<span id="cb230-35"><a href="Ch06.html#cb230-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb230-36"><a href="Ch06.html#cb230-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb230-37"><a href="Ch06.html#cb230-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb230-38"><a href="Ch06.html#cb230-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb230-39"><a href="Ch06.html#cb230-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb230-40"><a href="Ch06.html#cb230-40" tabindex="-1"></a></span>
<span id="cb230-41"><a href="Ch06.html#cb230-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsHoed_r10000.tif&quot;</span></span>
<span id="cb230-42"><a href="Ch06.html#cb230-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb230-43"><a href="Ch06.html#cb230-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb230-44"><a href="Ch06.html#cb230-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb230-45"><a href="Ch06.html#cb230-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb230-46"><a href="Ch06.html#cb230-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb230-47"><a href="Ch06.html#cb230-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb230-48"><a href="Ch06.html#cb230-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb230-49"><a href="Ch06.html#cb230-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb230-50"><a href="Ch06.html#cb230-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb230-51"><a href="Ch06.html#cb230-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb230-52"><a href="Ch06.html#cb230-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb230-53"><a href="Ch06.html#cb230-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_189.png" width="100%" /></p>
</div>
<div id="ch06.190" class="section level2 hasAnchor" number="6.190">
<h2><span class="header-section-number">6.190</span> FarmlandCrops_CropsOther_cell<a href="Ch06.html#ch06.190" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsOther_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_190</code></p>
<p><strong>English name:</strong> Fractional cover of Other Crops within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Citu lauksaimniecības kultūraugu aramzemēs platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels with otherwise not differentiated crops were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>. These geometries
were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="Ch06.html#cb231-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb231-2"><a href="Ch06.html#cb231-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb231-3"><a href="Ch06.html#cb231-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb231-4"><a href="Ch06.html#cb231-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb231-5"><a href="Ch06.html#cb231-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb231-6"><a href="Ch06.html#cb231-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb231-7"><a href="Ch06.html#cb231-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb231-8"><a href="Ch06.html#cb231-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb231-9"><a href="Ch06.html#cb231-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb231-10"><a href="Ch06.html#cb231-10" tabindex="-1"></a></span>
<span id="cb231-11"><a href="Ch06.html#cb231-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb231-12"><a href="Ch06.html#cb231-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb231-13"><a href="Ch06.html#cb231-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb231-14"><a href="Ch06.html#cb231-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb231-15"><a href="Ch06.html#cb231-15" tabindex="-1"></a></span>
<span id="cb231-16"><a href="Ch06.html#cb231-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb231-17"><a href="Ch06.html#cb231-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb231-18"><a href="Ch06.html#cb231-18" tabindex="-1"></a></span>
<span id="cb231-19"><a href="Ch06.html#cb231-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb231-20"><a href="Ch06.html#cb231-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb231-21"><a href="Ch06.html#cb231-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb231-22"><a href="Ch06.html#cb231-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb231-23"><a href="Ch06.html#cb231-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb231-24"><a href="Ch06.html#cb231-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb231-25"><a href="Ch06.html#cb231-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb231-26"><a href="Ch06.html#cb231-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb231-27"><a href="Ch06.html#cb231-27" tabindex="-1"></a></span>
<span id="cb231-28"><a href="Ch06.html#cb231-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb231-29"><a href="Ch06.html#cb231-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb231-30"><a href="Ch06.html#cb231-30" tabindex="-1"></a></span>
<span id="cb231-31"><a href="Ch06.html#cb231-31" tabindex="-1"></a></span>
<span id="cb231-32"><a href="Ch06.html#cb231-32" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsOther_cell.tif egv_190 ----</span></span>
<span id="cb231-33"><a href="Ch06.html#cb231-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb231-34"><a href="Ch06.html#cb231-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(SDM_grupa_sakums,<span class="st">&quot;citur neie&quot;</span>))</span>
<span id="cb231-35"><a href="Ch06.html#cb231-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb231-36"><a href="Ch06.html#cb231-36" tabindex="-1"></a></span>
<span id="cb231-37"><a href="Ch06.html#cb231-37" tabindex="-1"></a></span>
<span id="cb231-38"><a href="Ch06.html#cb231-38" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb231-39"><a href="Ch06.html#cb231-39" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb231-40"><a href="Ch06.html#cb231-40" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb231-41"><a href="Ch06.html#cb231-41" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandCrops_CropsOther_input.tif&quot;</span>,</span>
<span id="cb231-42"><a href="Ch06.html#cb231-42" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb231-43"><a href="Ch06.html#cb231-43" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb231-44"><a href="Ch06.html#cb231-44" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb231-45"><a href="Ch06.html#cb231-45" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb231-46"><a href="Ch06.html#cb231-46" tabindex="-1"></a>p2i_rez</span>
<span id="cb231-47"><a href="Ch06.html#cb231-47" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb231-48"><a href="Ch06.html#cb231-48" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandCrops_CropsOther_input.tif&quot;</span>),</span>
<span id="cb231-49"><a href="Ch06.html#cb231-49" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb231-50"><a href="Ch06.html#cb231-50" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb231-51"><a href="Ch06.html#cb231-51" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb231-52"><a href="Ch06.html#cb231-52" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb231-53"><a href="Ch06.html#cb231-53" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandCrops_CropsOther_cell.tif&quot;</span>,</span>
<span id="cb231-54"><a href="Ch06.html#cb231-54" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_190&quot;</span>,</span>
<span id="cb231-55"><a href="Ch06.html#cb231-55" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb231-56"><a href="Ch06.html#cb231-56" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb231-57"><a href="Ch06.html#cb231-57" tabindex="-1"></a>i2e_rez</span>
<span id="cb231-58"><a href="Ch06.html#cb231-58" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb231-59"><a href="Ch06.html#cb231-59" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb231-60"><a href="Ch06.html#cb231-60" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb231-61"><a href="Ch06.html#cb231-61" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandCrops_CropsOther_input.tif&quot;</span>)</span>
<span id="cb231-62"><a href="Ch06.html#cb231-62" tabindex="-1"></a></span>
<span id="cb231-63"><a href="Ch06.html#cb231-63" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb231-64"><a href="Ch06.html#cb231-64" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb231-65"><a href="Ch06.html#cb231-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb231-66"><a href="Ch06.html#cb231-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb231-67"><a href="Ch06.html#cb231-67" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb231-68"><a href="Ch06.html#cb231-68" tabindex="-1"></a></span>
<span id="cb231-69"><a href="Ch06.html#cb231-69" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsOther_cell.tif&quot;</span></span>
<span id="cb231-70"><a href="Ch06.html#cb231-70" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb231-71"><a href="Ch06.html#cb231-71" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb231-72"><a href="Ch06.html#cb231-72" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb231-73"><a href="Ch06.html#cb231-73" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb231-74"><a href="Ch06.html#cb231-74" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb231-75"><a href="Ch06.html#cb231-75" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb231-76"><a href="Ch06.html#cb231-76" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb231-77"><a href="Ch06.html#cb231-77" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb231-78"><a href="Ch06.html#cb231-78" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb231-79"><a href="Ch06.html#cb231-79" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb231-80"><a href="Ch06.html#cb231-80" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb231-81"><a href="Ch06.html#cb231-81" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_190.png" width="100%" /></p>
</div>
<div id="ch06.191" class="section level2 hasAnchor" number="6.191">
<h2><span class="header-section-number">6.191</span> FarmlandCrops_CropsOther_r500<a href="Ch06.html#ch06.191" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsOther_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_191</code></p>
<p><strong>English name:</strong> Fractional cover of Other Crops within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Citu lauksaimniecības kultūraugu aramzemēs platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.190">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="Ch06.html#cb232-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb232-2"><a href="Ch06.html#cb232-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb232-3"><a href="Ch06.html#cb232-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb232-4"><a href="Ch06.html#cb232-4" tabindex="-1"></a></span>
<span id="cb232-5"><a href="Ch06.html#cb232-5" tabindex="-1"></a></span>
<span id="cb232-6"><a href="Ch06.html#cb232-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb232-7"><a href="Ch06.html#cb232-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb232-8"><a href="Ch06.html#cb232-8" tabindex="-1"></a></span>
<span id="cb232-9"><a href="Ch06.html#cb232-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb232-10"><a href="Ch06.html#cb232-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb232-11"><a href="Ch06.html#cb232-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb232-12"><a href="Ch06.html#cb232-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb232-13"><a href="Ch06.html#cb232-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb232-14"><a href="Ch06.html#cb232-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb232-15"><a href="Ch06.html#cb232-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_cell.tif&quot;</span>),</span>
<span id="cb232-16"><a href="Ch06.html#cb232-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsOther&quot;</span>),</span>
<span id="cb232-17"><a href="Ch06.html#cb232-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb232-18"><a href="Ch06.html#cb232-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb232-19"><a href="Ch06.html#cb232-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb232-20"><a href="Ch06.html#cb232-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb232-21"><a href="Ch06.html#cb232-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb232-22"><a href="Ch06.html#cb232-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb232-23"><a href="Ch06.html#cb232-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb232-24"><a href="Ch06.html#cb232-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb232-25"><a href="Ch06.html#cb232-25" tabindex="-1"></a></span>
<span id="cb232-26"><a href="Ch06.html#cb232-26" tabindex="-1"></a></span>
<span id="cb232-27"><a href="Ch06.html#cb232-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsOther_r500.tif egv_191 ----</span></span>
<span id="cb232-28"><a href="Ch06.html#cb232-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_r500.tif&quot;</span>)</span>
<span id="cb232-29"><a href="Ch06.html#cb232-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_191&quot;</span></span>
<span id="cb232-30"><a href="Ch06.html#cb232-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb232-31"><a href="Ch06.html#cb232-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb232-32"><a href="Ch06.html#cb232-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_r500.tif&quot;</span>,</span>
<span id="cb232-33"><a href="Ch06.html#cb232-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb232-34"><a href="Ch06.html#cb232-34" tabindex="-1"></a></span>
<span id="cb232-35"><a href="Ch06.html#cb232-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb232-36"><a href="Ch06.html#cb232-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb232-37"><a href="Ch06.html#cb232-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb232-38"><a href="Ch06.html#cb232-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb232-39"><a href="Ch06.html#cb232-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb232-40"><a href="Ch06.html#cb232-40" tabindex="-1"></a></span>
<span id="cb232-41"><a href="Ch06.html#cb232-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsOther_r500.tif&quot;</span></span>
<span id="cb232-42"><a href="Ch06.html#cb232-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb232-43"><a href="Ch06.html#cb232-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb232-44"><a href="Ch06.html#cb232-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb232-45"><a href="Ch06.html#cb232-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb232-46"><a href="Ch06.html#cb232-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb232-47"><a href="Ch06.html#cb232-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb232-48"><a href="Ch06.html#cb232-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb232-49"><a href="Ch06.html#cb232-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb232-50"><a href="Ch06.html#cb232-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb232-51"><a href="Ch06.html#cb232-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb232-52"><a href="Ch06.html#cb232-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb232-53"><a href="Ch06.html#cb232-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_191.png" width="100%" /></p>
</div>
<div id="ch06.192" class="section level2 hasAnchor" number="6.192">
<h2><span class="header-section-number">6.192</span> FarmlandCrops_CropsOther_r1250<a href="Ch06.html#ch06.192" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsOther_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_192</code></p>
<p><strong>English name:</strong> Fractional cover of Other Crops within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Citu lauksaimniecības kultūraugu aramzemēs platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.190">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="Ch06.html#cb233-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb233-2"><a href="Ch06.html#cb233-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb233-3"><a href="Ch06.html#cb233-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb233-4"><a href="Ch06.html#cb233-4" tabindex="-1"></a></span>
<span id="cb233-5"><a href="Ch06.html#cb233-5" tabindex="-1"></a></span>
<span id="cb233-6"><a href="Ch06.html#cb233-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb233-7"><a href="Ch06.html#cb233-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb233-8"><a href="Ch06.html#cb233-8" tabindex="-1"></a></span>
<span id="cb233-9"><a href="Ch06.html#cb233-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb233-10"><a href="Ch06.html#cb233-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb233-11"><a href="Ch06.html#cb233-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb233-12"><a href="Ch06.html#cb233-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb233-13"><a href="Ch06.html#cb233-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb233-14"><a href="Ch06.html#cb233-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb233-15"><a href="Ch06.html#cb233-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_cell.tif&quot;</span>),</span>
<span id="cb233-16"><a href="Ch06.html#cb233-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsOther&quot;</span>),</span>
<span id="cb233-17"><a href="Ch06.html#cb233-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb233-18"><a href="Ch06.html#cb233-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb233-19"><a href="Ch06.html#cb233-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb233-20"><a href="Ch06.html#cb233-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb233-21"><a href="Ch06.html#cb233-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb233-22"><a href="Ch06.html#cb233-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb233-23"><a href="Ch06.html#cb233-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb233-24"><a href="Ch06.html#cb233-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb233-25"><a href="Ch06.html#cb233-25" tabindex="-1"></a></span>
<span id="cb233-26"><a href="Ch06.html#cb233-26" tabindex="-1"></a></span>
<span id="cb233-27"><a href="Ch06.html#cb233-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsOther_r1250.tif    egv_192 ----</span></span>
<span id="cb233-28"><a href="Ch06.html#cb233-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_r1250.tif&quot;</span>)</span>
<span id="cb233-29"><a href="Ch06.html#cb233-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_192&quot;</span></span>
<span id="cb233-30"><a href="Ch06.html#cb233-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb233-31"><a href="Ch06.html#cb233-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb233-32"><a href="Ch06.html#cb233-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_r1250.tif&quot;</span>,</span>
<span id="cb233-33"><a href="Ch06.html#cb233-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb233-34"><a href="Ch06.html#cb233-34" tabindex="-1"></a></span>
<span id="cb233-35"><a href="Ch06.html#cb233-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb233-36"><a href="Ch06.html#cb233-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb233-37"><a href="Ch06.html#cb233-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb233-38"><a href="Ch06.html#cb233-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb233-39"><a href="Ch06.html#cb233-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb233-40"><a href="Ch06.html#cb233-40" tabindex="-1"></a></span>
<span id="cb233-41"><a href="Ch06.html#cb233-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsOther_r1250.tif&quot;</span></span>
<span id="cb233-42"><a href="Ch06.html#cb233-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb233-43"><a href="Ch06.html#cb233-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb233-44"><a href="Ch06.html#cb233-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb233-45"><a href="Ch06.html#cb233-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb233-46"><a href="Ch06.html#cb233-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb233-47"><a href="Ch06.html#cb233-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb233-48"><a href="Ch06.html#cb233-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb233-49"><a href="Ch06.html#cb233-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb233-50"><a href="Ch06.html#cb233-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb233-51"><a href="Ch06.html#cb233-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb233-52"><a href="Ch06.html#cb233-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb233-53"><a href="Ch06.html#cb233-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_192.png" width="100%" /></p>
</div>
<div id="ch06.193" class="section level2 hasAnchor" number="6.193">
<h2><span class="header-section-number">6.193</span> FarmlandCrops_CropsOther_r3000<a href="Ch06.html#ch06.193" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsOther_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_193</code></p>
<p><strong>English name:</strong> Fractional cover of Other Crops within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Citu lauksaimniecības kultūraugu aramzemēs platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.190">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="Ch06.html#cb234-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb234-2"><a href="Ch06.html#cb234-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb234-3"><a href="Ch06.html#cb234-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb234-4"><a href="Ch06.html#cb234-4" tabindex="-1"></a></span>
<span id="cb234-5"><a href="Ch06.html#cb234-5" tabindex="-1"></a></span>
<span id="cb234-6"><a href="Ch06.html#cb234-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb234-7"><a href="Ch06.html#cb234-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb234-8"><a href="Ch06.html#cb234-8" tabindex="-1"></a></span>
<span id="cb234-9"><a href="Ch06.html#cb234-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb234-10"><a href="Ch06.html#cb234-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb234-11"><a href="Ch06.html#cb234-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb234-12"><a href="Ch06.html#cb234-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb234-13"><a href="Ch06.html#cb234-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb234-14"><a href="Ch06.html#cb234-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb234-15"><a href="Ch06.html#cb234-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_cell.tif&quot;</span>),</span>
<span id="cb234-16"><a href="Ch06.html#cb234-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsOther&quot;</span>),</span>
<span id="cb234-17"><a href="Ch06.html#cb234-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb234-18"><a href="Ch06.html#cb234-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb234-19"><a href="Ch06.html#cb234-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb234-20"><a href="Ch06.html#cb234-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb234-21"><a href="Ch06.html#cb234-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb234-22"><a href="Ch06.html#cb234-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb234-23"><a href="Ch06.html#cb234-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb234-24"><a href="Ch06.html#cb234-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb234-25"><a href="Ch06.html#cb234-25" tabindex="-1"></a></span>
<span id="cb234-26"><a href="Ch06.html#cb234-26" tabindex="-1"></a></span>
<span id="cb234-27"><a href="Ch06.html#cb234-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsOther_r3000.tif    egv_193 ----</span></span>
<span id="cb234-28"><a href="Ch06.html#cb234-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_r3000.tif&quot;</span>)</span>
<span id="cb234-29"><a href="Ch06.html#cb234-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_193&quot;</span></span>
<span id="cb234-30"><a href="Ch06.html#cb234-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb234-31"><a href="Ch06.html#cb234-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb234-32"><a href="Ch06.html#cb234-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_r3000.tif&quot;</span>,</span>
<span id="cb234-33"><a href="Ch06.html#cb234-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb234-34"><a href="Ch06.html#cb234-34" tabindex="-1"></a></span>
<span id="cb234-35"><a href="Ch06.html#cb234-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb234-36"><a href="Ch06.html#cb234-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb234-37"><a href="Ch06.html#cb234-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb234-38"><a href="Ch06.html#cb234-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb234-39"><a href="Ch06.html#cb234-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb234-40"><a href="Ch06.html#cb234-40" tabindex="-1"></a></span>
<span id="cb234-41"><a href="Ch06.html#cb234-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsOther_r3000.tif&quot;</span></span>
<span id="cb234-42"><a href="Ch06.html#cb234-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb234-43"><a href="Ch06.html#cb234-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb234-44"><a href="Ch06.html#cb234-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb234-45"><a href="Ch06.html#cb234-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb234-46"><a href="Ch06.html#cb234-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb234-47"><a href="Ch06.html#cb234-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb234-48"><a href="Ch06.html#cb234-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb234-49"><a href="Ch06.html#cb234-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb234-50"><a href="Ch06.html#cb234-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb234-51"><a href="Ch06.html#cb234-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb234-52"><a href="Ch06.html#cb234-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb234-53"><a href="Ch06.html#cb234-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_193.png" width="100%" /></p>
</div>
<div id="ch06.194" class="section level2 hasAnchor" number="6.194">
<h2><span class="header-section-number">6.194</span> FarmlandCrops_CropsOther_r10000<a href="Ch06.html#ch06.194" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsOther_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_194</code></p>
<p><strong>English name:</strong> Fractional cover of Other Crops within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Citu lauksaimniecības kultūraugu aramzemēs platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.190">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="Ch06.html#cb235-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb235-2"><a href="Ch06.html#cb235-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb235-3"><a href="Ch06.html#cb235-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb235-4"><a href="Ch06.html#cb235-4" tabindex="-1"></a></span>
<span id="cb235-5"><a href="Ch06.html#cb235-5" tabindex="-1"></a></span>
<span id="cb235-6"><a href="Ch06.html#cb235-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb235-7"><a href="Ch06.html#cb235-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb235-8"><a href="Ch06.html#cb235-8" tabindex="-1"></a></span>
<span id="cb235-9"><a href="Ch06.html#cb235-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb235-10"><a href="Ch06.html#cb235-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb235-11"><a href="Ch06.html#cb235-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb235-12"><a href="Ch06.html#cb235-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb235-13"><a href="Ch06.html#cb235-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb235-14"><a href="Ch06.html#cb235-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb235-15"><a href="Ch06.html#cb235-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_cell.tif&quot;</span>),</span>
<span id="cb235-16"><a href="Ch06.html#cb235-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsOther&quot;</span>),</span>
<span id="cb235-17"><a href="Ch06.html#cb235-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb235-18"><a href="Ch06.html#cb235-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb235-19"><a href="Ch06.html#cb235-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb235-20"><a href="Ch06.html#cb235-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb235-21"><a href="Ch06.html#cb235-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb235-22"><a href="Ch06.html#cb235-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb235-23"><a href="Ch06.html#cb235-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb235-24"><a href="Ch06.html#cb235-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb235-25"><a href="Ch06.html#cb235-25" tabindex="-1"></a></span>
<span id="cb235-26"><a href="Ch06.html#cb235-26" tabindex="-1"></a></span>
<span id="cb235-27"><a href="Ch06.html#cb235-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsOther_r10000.tif   egv_194 ----</span></span>
<span id="cb235-28"><a href="Ch06.html#cb235-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_r10000.tif&quot;</span>)</span>
<span id="cb235-29"><a href="Ch06.html#cb235-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_194&quot;</span></span>
<span id="cb235-30"><a href="Ch06.html#cb235-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb235-31"><a href="Ch06.html#cb235-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb235-32"><a href="Ch06.html#cb235-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsOther_r10000.tif&quot;</span>,</span>
<span id="cb235-33"><a href="Ch06.html#cb235-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb235-34"><a href="Ch06.html#cb235-34" tabindex="-1"></a></span>
<span id="cb235-35"><a href="Ch06.html#cb235-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb235-36"><a href="Ch06.html#cb235-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb235-37"><a href="Ch06.html#cb235-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb235-38"><a href="Ch06.html#cb235-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb235-39"><a href="Ch06.html#cb235-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb235-40"><a href="Ch06.html#cb235-40" tabindex="-1"></a></span>
<span id="cb235-41"><a href="Ch06.html#cb235-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsOther_r10000.tif&quot;</span></span>
<span id="cb235-42"><a href="Ch06.html#cb235-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb235-43"><a href="Ch06.html#cb235-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb235-44"><a href="Ch06.html#cb235-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb235-45"><a href="Ch06.html#cb235-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb235-46"><a href="Ch06.html#cb235-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb235-47"><a href="Ch06.html#cb235-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb235-48"><a href="Ch06.html#cb235-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb235-49"><a href="Ch06.html#cb235-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb235-50"><a href="Ch06.html#cb235-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb235-51"><a href="Ch06.html#cb235-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb235-52"><a href="Ch06.html#cb235-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb235-53"><a href="Ch06.html#cb235-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_194.png" width="100%" /></p>
</div>
<div id="ch06.195" class="section level2 hasAnchor" number="6.195">
<h2><span class="header-section-number">6.195</span> FarmlandCrops_CropsSpring_cell<a href="Ch06.html#ch06.195" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsSpring_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_195</code></p>
<p><strong>English name:</strong> Fractional cover of Spring Sown Crops within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vasarāju aramzemēs platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels with declared as spring sawn crops were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>. These geometries
were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="Ch06.html#cb236-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb236-2"><a href="Ch06.html#cb236-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb236-3"><a href="Ch06.html#cb236-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb236-4"><a href="Ch06.html#cb236-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb236-5"><a href="Ch06.html#cb236-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb236-6"><a href="Ch06.html#cb236-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb236-7"><a href="Ch06.html#cb236-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb236-8"><a href="Ch06.html#cb236-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb236-9"><a href="Ch06.html#cb236-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb236-10"><a href="Ch06.html#cb236-10" tabindex="-1"></a></span>
<span id="cb236-11"><a href="Ch06.html#cb236-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb236-12"><a href="Ch06.html#cb236-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb236-13"><a href="Ch06.html#cb236-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb236-14"><a href="Ch06.html#cb236-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb236-15"><a href="Ch06.html#cb236-15" tabindex="-1"></a></span>
<span id="cb236-16"><a href="Ch06.html#cb236-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb236-17"><a href="Ch06.html#cb236-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb236-18"><a href="Ch06.html#cb236-18" tabindex="-1"></a></span>
<span id="cb236-19"><a href="Ch06.html#cb236-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb236-20"><a href="Ch06.html#cb236-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb236-21"><a href="Ch06.html#cb236-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb236-22"><a href="Ch06.html#cb236-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb236-23"><a href="Ch06.html#cb236-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb236-24"><a href="Ch06.html#cb236-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb236-25"><a href="Ch06.html#cb236-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb236-26"><a href="Ch06.html#cb236-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb236-27"><a href="Ch06.html#cb236-27" tabindex="-1"></a></span>
<span id="cb236-28"><a href="Ch06.html#cb236-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb236-29"><a href="Ch06.html#cb236-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb236-30"><a href="Ch06.html#cb236-30" tabindex="-1"></a></span>
<span id="cb236-31"><a href="Ch06.html#cb236-31" tabindex="-1"></a></span>
<span id="cb236-32"><a href="Ch06.html#cb236-32" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsSpring_cell.tif    egv_195 ----</span></span>
<span id="cb236-33"><a href="Ch06.html#cb236-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb236-34"><a href="Ch06.html#cb236-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(SDM_grupa_sakums,<span class="st">&quot;labība-vasarāji&quot;</span>))</span>
<span id="cb236-35"><a href="Ch06.html#cb236-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb236-36"><a href="Ch06.html#cb236-36" tabindex="-1"></a></span>
<span id="cb236-37"><a href="Ch06.html#cb236-37" tabindex="-1"></a></span>
<span id="cb236-38"><a href="Ch06.html#cb236-38" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb236-39"><a href="Ch06.html#cb236-39" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb236-40"><a href="Ch06.html#cb236-40" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb236-41"><a href="Ch06.html#cb236-41" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandCrops_CropsSpring_input.tif&quot;</span>,</span>
<span id="cb236-42"><a href="Ch06.html#cb236-42" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb236-43"><a href="Ch06.html#cb236-43" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb236-44"><a href="Ch06.html#cb236-44" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb236-45"><a href="Ch06.html#cb236-45" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb236-46"><a href="Ch06.html#cb236-46" tabindex="-1"></a>p2i_rez</span>
<span id="cb236-47"><a href="Ch06.html#cb236-47" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb236-48"><a href="Ch06.html#cb236-48" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandCrops_CropsSpring_input.tif&quot;</span>),</span>
<span id="cb236-49"><a href="Ch06.html#cb236-49" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb236-50"><a href="Ch06.html#cb236-50" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb236-51"><a href="Ch06.html#cb236-51" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb236-52"><a href="Ch06.html#cb236-52" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb236-53"><a href="Ch06.html#cb236-53" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandCrops_CropsSpring_cell.tif&quot;</span>,</span>
<span id="cb236-54"><a href="Ch06.html#cb236-54" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_195&quot;</span>,</span>
<span id="cb236-55"><a href="Ch06.html#cb236-55" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb236-56"><a href="Ch06.html#cb236-56" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb236-57"><a href="Ch06.html#cb236-57" tabindex="-1"></a>i2e_rez</span>
<span id="cb236-58"><a href="Ch06.html#cb236-58" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb236-59"><a href="Ch06.html#cb236-59" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb236-60"><a href="Ch06.html#cb236-60" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb236-61"><a href="Ch06.html#cb236-61" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandCrops_CropsSpring_input.tif&quot;</span>)</span>
<span id="cb236-62"><a href="Ch06.html#cb236-62" tabindex="-1"></a></span>
<span id="cb236-63"><a href="Ch06.html#cb236-63" tabindex="-1"></a></span>
<span id="cb236-64"><a href="Ch06.html#cb236-64" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb236-65"><a href="Ch06.html#cb236-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb236-66"><a href="Ch06.html#cb236-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb236-67"><a href="Ch06.html#cb236-67" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb236-68"><a href="Ch06.html#cb236-68" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb236-69"><a href="Ch06.html#cb236-69" tabindex="-1"></a></span>
<span id="cb236-70"><a href="Ch06.html#cb236-70" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsSpring_cell.tif&quot;</span></span>
<span id="cb236-71"><a href="Ch06.html#cb236-71" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb236-72"><a href="Ch06.html#cb236-72" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb236-73"><a href="Ch06.html#cb236-73" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb236-74"><a href="Ch06.html#cb236-74" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb236-75"><a href="Ch06.html#cb236-75" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb236-76"><a href="Ch06.html#cb236-76" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb236-77"><a href="Ch06.html#cb236-77" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb236-78"><a href="Ch06.html#cb236-78" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb236-79"><a href="Ch06.html#cb236-79" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb236-80"><a href="Ch06.html#cb236-80" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb236-81"><a href="Ch06.html#cb236-81" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb236-82"><a href="Ch06.html#cb236-82" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_195.png" width="100%" /></p>
</div>
<div id="ch06.196" class="section level2 hasAnchor" number="6.196">
<h2><span class="header-section-number">6.196</span> FarmlandCrops_CropsSpring_r500<a href="Ch06.html#ch06.196" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsSpring_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_196</code></p>
<p><strong>English name:</strong> Fractional cover of Spring Sown Crops within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vasarāju aramzemēs platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.195">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="Ch06.html#cb237-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb237-2"><a href="Ch06.html#cb237-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb237-3"><a href="Ch06.html#cb237-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb237-4"><a href="Ch06.html#cb237-4" tabindex="-1"></a></span>
<span id="cb237-5"><a href="Ch06.html#cb237-5" tabindex="-1"></a></span>
<span id="cb237-6"><a href="Ch06.html#cb237-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb237-7"><a href="Ch06.html#cb237-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb237-8"><a href="Ch06.html#cb237-8" tabindex="-1"></a></span>
<span id="cb237-9"><a href="Ch06.html#cb237-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb237-10"><a href="Ch06.html#cb237-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb237-11"><a href="Ch06.html#cb237-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb237-12"><a href="Ch06.html#cb237-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb237-13"><a href="Ch06.html#cb237-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb237-14"><a href="Ch06.html#cb237-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb237-15"><a href="Ch06.html#cb237-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_cell.tif&quot;</span>),</span>
<span id="cb237-16"><a href="Ch06.html#cb237-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsSpring&quot;</span>),</span>
<span id="cb237-17"><a href="Ch06.html#cb237-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb237-18"><a href="Ch06.html#cb237-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb237-19"><a href="Ch06.html#cb237-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb237-20"><a href="Ch06.html#cb237-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb237-21"><a href="Ch06.html#cb237-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb237-22"><a href="Ch06.html#cb237-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb237-23"><a href="Ch06.html#cb237-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb237-24"><a href="Ch06.html#cb237-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb237-25"><a href="Ch06.html#cb237-25" tabindex="-1"></a></span>
<span id="cb237-26"><a href="Ch06.html#cb237-26" tabindex="-1"></a></span>
<span id="cb237-27"><a href="Ch06.html#cb237-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsSpring_r500.tif    egv_196 ----</span></span>
<span id="cb237-28"><a href="Ch06.html#cb237-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_r500.tif&quot;</span>)</span>
<span id="cb237-29"><a href="Ch06.html#cb237-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_196&quot;</span></span>
<span id="cb237-30"><a href="Ch06.html#cb237-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb237-31"><a href="Ch06.html#cb237-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb237-32"><a href="Ch06.html#cb237-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_r500.tif&quot;</span>,</span>
<span id="cb237-33"><a href="Ch06.html#cb237-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb237-34"><a href="Ch06.html#cb237-34" tabindex="-1"></a></span>
<span id="cb237-35"><a href="Ch06.html#cb237-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb237-36"><a href="Ch06.html#cb237-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb237-37"><a href="Ch06.html#cb237-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb237-38"><a href="Ch06.html#cb237-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb237-39"><a href="Ch06.html#cb237-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb237-40"><a href="Ch06.html#cb237-40" tabindex="-1"></a></span>
<span id="cb237-41"><a href="Ch06.html#cb237-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsSpring_r500.tif&quot;</span></span>
<span id="cb237-42"><a href="Ch06.html#cb237-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb237-43"><a href="Ch06.html#cb237-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb237-44"><a href="Ch06.html#cb237-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb237-45"><a href="Ch06.html#cb237-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb237-46"><a href="Ch06.html#cb237-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb237-47"><a href="Ch06.html#cb237-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb237-48"><a href="Ch06.html#cb237-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb237-49"><a href="Ch06.html#cb237-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb237-50"><a href="Ch06.html#cb237-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb237-51"><a href="Ch06.html#cb237-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb237-52"><a href="Ch06.html#cb237-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb237-53"><a href="Ch06.html#cb237-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_196.png" width="100%" /></p>
</div>
<div id="ch06.197" class="section level2 hasAnchor" number="6.197">
<h2><span class="header-section-number">6.197</span> FarmlandCrops_CropsSpring_r1250<a href="Ch06.html#ch06.197" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsSpring_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_197</code></p>
<p><strong>English name:</strong> Fractional cover of Spring Sown Crops within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vasarāju aramzemēs platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.195">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="Ch06.html#cb238-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb238-2"><a href="Ch06.html#cb238-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb238-3"><a href="Ch06.html#cb238-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb238-4"><a href="Ch06.html#cb238-4" tabindex="-1"></a></span>
<span id="cb238-5"><a href="Ch06.html#cb238-5" tabindex="-1"></a></span>
<span id="cb238-6"><a href="Ch06.html#cb238-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb238-7"><a href="Ch06.html#cb238-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb238-8"><a href="Ch06.html#cb238-8" tabindex="-1"></a></span>
<span id="cb238-9"><a href="Ch06.html#cb238-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb238-10"><a href="Ch06.html#cb238-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb238-11"><a href="Ch06.html#cb238-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb238-12"><a href="Ch06.html#cb238-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb238-13"><a href="Ch06.html#cb238-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb238-14"><a href="Ch06.html#cb238-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb238-15"><a href="Ch06.html#cb238-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_cell.tif&quot;</span>),</span>
<span id="cb238-16"><a href="Ch06.html#cb238-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsSpring&quot;</span>),</span>
<span id="cb238-17"><a href="Ch06.html#cb238-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb238-18"><a href="Ch06.html#cb238-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb238-19"><a href="Ch06.html#cb238-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb238-20"><a href="Ch06.html#cb238-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb238-21"><a href="Ch06.html#cb238-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb238-22"><a href="Ch06.html#cb238-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb238-23"><a href="Ch06.html#cb238-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb238-24"><a href="Ch06.html#cb238-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb238-25"><a href="Ch06.html#cb238-25" tabindex="-1"></a></span>
<span id="cb238-26"><a href="Ch06.html#cb238-26" tabindex="-1"></a></span>
<span id="cb238-27"><a href="Ch06.html#cb238-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsSpring_r1250.tif   egv_197 ----</span></span>
<span id="cb238-28"><a href="Ch06.html#cb238-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_r1250.tif&quot;</span>)</span>
<span id="cb238-29"><a href="Ch06.html#cb238-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_197&quot;</span></span>
<span id="cb238-30"><a href="Ch06.html#cb238-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb238-31"><a href="Ch06.html#cb238-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb238-32"><a href="Ch06.html#cb238-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_r1250.tif&quot;</span>,</span>
<span id="cb238-33"><a href="Ch06.html#cb238-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb238-34"><a href="Ch06.html#cb238-34" tabindex="-1"></a></span>
<span id="cb238-35"><a href="Ch06.html#cb238-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb238-36"><a href="Ch06.html#cb238-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb238-37"><a href="Ch06.html#cb238-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb238-38"><a href="Ch06.html#cb238-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb238-39"><a href="Ch06.html#cb238-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb238-40"><a href="Ch06.html#cb238-40" tabindex="-1"></a></span>
<span id="cb238-41"><a href="Ch06.html#cb238-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsSpring_r1250.tif&quot;</span></span>
<span id="cb238-42"><a href="Ch06.html#cb238-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb238-43"><a href="Ch06.html#cb238-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb238-44"><a href="Ch06.html#cb238-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb238-45"><a href="Ch06.html#cb238-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb238-46"><a href="Ch06.html#cb238-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb238-47"><a href="Ch06.html#cb238-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb238-48"><a href="Ch06.html#cb238-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb238-49"><a href="Ch06.html#cb238-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb238-50"><a href="Ch06.html#cb238-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb238-51"><a href="Ch06.html#cb238-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb238-52"><a href="Ch06.html#cb238-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb238-53"><a href="Ch06.html#cb238-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_197.png" width="100%" /></p>
</div>
<div id="ch06.198" class="section level2 hasAnchor" number="6.198">
<h2><span class="header-section-number">6.198</span> FarmlandCrops_CropsSpring_r3000<a href="Ch06.html#ch06.198" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsSpring_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_198</code></p>
<p><strong>English name:</strong> Fractional cover of Spring Sown Crops within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vasarāju aramzemēs platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.195">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="Ch06.html#cb239-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb239-2"><a href="Ch06.html#cb239-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb239-3"><a href="Ch06.html#cb239-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb239-4"><a href="Ch06.html#cb239-4" tabindex="-1"></a></span>
<span id="cb239-5"><a href="Ch06.html#cb239-5" tabindex="-1"></a></span>
<span id="cb239-6"><a href="Ch06.html#cb239-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb239-7"><a href="Ch06.html#cb239-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb239-8"><a href="Ch06.html#cb239-8" tabindex="-1"></a></span>
<span id="cb239-9"><a href="Ch06.html#cb239-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb239-10"><a href="Ch06.html#cb239-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb239-11"><a href="Ch06.html#cb239-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb239-12"><a href="Ch06.html#cb239-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb239-13"><a href="Ch06.html#cb239-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb239-14"><a href="Ch06.html#cb239-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb239-15"><a href="Ch06.html#cb239-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_cell.tif&quot;</span>),</span>
<span id="cb239-16"><a href="Ch06.html#cb239-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsSpring&quot;</span>),</span>
<span id="cb239-17"><a href="Ch06.html#cb239-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb239-18"><a href="Ch06.html#cb239-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb239-19"><a href="Ch06.html#cb239-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb239-20"><a href="Ch06.html#cb239-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb239-21"><a href="Ch06.html#cb239-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb239-22"><a href="Ch06.html#cb239-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb239-23"><a href="Ch06.html#cb239-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb239-24"><a href="Ch06.html#cb239-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb239-25"><a href="Ch06.html#cb239-25" tabindex="-1"></a></span>
<span id="cb239-26"><a href="Ch06.html#cb239-26" tabindex="-1"></a></span>
<span id="cb239-27"><a href="Ch06.html#cb239-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsSpring_r3000.tif   egv_198 ----</span></span>
<span id="cb239-28"><a href="Ch06.html#cb239-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_r3000.tif&quot;</span>)</span>
<span id="cb239-29"><a href="Ch06.html#cb239-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_198&quot;</span></span>
<span id="cb239-30"><a href="Ch06.html#cb239-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb239-31"><a href="Ch06.html#cb239-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb239-32"><a href="Ch06.html#cb239-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_r3000.tif&quot;</span>,</span>
<span id="cb239-33"><a href="Ch06.html#cb239-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb239-34"><a href="Ch06.html#cb239-34" tabindex="-1"></a></span>
<span id="cb239-35"><a href="Ch06.html#cb239-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb239-36"><a href="Ch06.html#cb239-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb239-37"><a href="Ch06.html#cb239-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb239-38"><a href="Ch06.html#cb239-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb239-39"><a href="Ch06.html#cb239-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb239-40"><a href="Ch06.html#cb239-40" tabindex="-1"></a></span>
<span id="cb239-41"><a href="Ch06.html#cb239-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsSpring_r3000.tif&quot;</span></span>
<span id="cb239-42"><a href="Ch06.html#cb239-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb239-43"><a href="Ch06.html#cb239-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb239-44"><a href="Ch06.html#cb239-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb239-45"><a href="Ch06.html#cb239-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb239-46"><a href="Ch06.html#cb239-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb239-47"><a href="Ch06.html#cb239-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb239-48"><a href="Ch06.html#cb239-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb239-49"><a href="Ch06.html#cb239-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb239-50"><a href="Ch06.html#cb239-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb239-51"><a href="Ch06.html#cb239-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb239-52"><a href="Ch06.html#cb239-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb239-53"><a href="Ch06.html#cb239-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_198.png" width="100%" /></p>
</div>
<div id="ch06.199" class="section level2 hasAnchor" number="6.199">
<h2><span class="header-section-number">6.199</span> FarmlandCrops_CropsSpring_r10000<a href="Ch06.html#ch06.199" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsSpring_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_199</code></p>
<p><strong>English name:</strong> Fractional cover of Spring Sown Crops within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vasarāju aramzemēs platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.195">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="Ch06.html#cb240-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb240-2"><a href="Ch06.html#cb240-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb240-3"><a href="Ch06.html#cb240-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb240-4"><a href="Ch06.html#cb240-4" tabindex="-1"></a></span>
<span id="cb240-5"><a href="Ch06.html#cb240-5" tabindex="-1"></a></span>
<span id="cb240-6"><a href="Ch06.html#cb240-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb240-7"><a href="Ch06.html#cb240-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb240-8"><a href="Ch06.html#cb240-8" tabindex="-1"></a></span>
<span id="cb240-9"><a href="Ch06.html#cb240-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb240-10"><a href="Ch06.html#cb240-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb240-11"><a href="Ch06.html#cb240-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb240-12"><a href="Ch06.html#cb240-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb240-13"><a href="Ch06.html#cb240-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb240-14"><a href="Ch06.html#cb240-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb240-15"><a href="Ch06.html#cb240-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_cell.tif&quot;</span>),</span>
<span id="cb240-16"><a href="Ch06.html#cb240-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsSpring&quot;</span>),</span>
<span id="cb240-17"><a href="Ch06.html#cb240-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb240-18"><a href="Ch06.html#cb240-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb240-19"><a href="Ch06.html#cb240-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb240-20"><a href="Ch06.html#cb240-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb240-21"><a href="Ch06.html#cb240-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb240-22"><a href="Ch06.html#cb240-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb240-23"><a href="Ch06.html#cb240-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb240-24"><a href="Ch06.html#cb240-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb240-25"><a href="Ch06.html#cb240-25" tabindex="-1"></a></span>
<span id="cb240-26"><a href="Ch06.html#cb240-26" tabindex="-1"></a></span>
<span id="cb240-27"><a href="Ch06.html#cb240-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsSpring_r10000.tif  egv_199 ----</span></span>
<span id="cb240-28"><a href="Ch06.html#cb240-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_r10000.tif&quot;</span>)</span>
<span id="cb240-29"><a href="Ch06.html#cb240-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_199&quot;</span></span>
<span id="cb240-30"><a href="Ch06.html#cb240-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb240-31"><a href="Ch06.html#cb240-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb240-32"><a href="Ch06.html#cb240-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsSpring_r10000.tif&quot;</span>,</span>
<span id="cb240-33"><a href="Ch06.html#cb240-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb240-34"><a href="Ch06.html#cb240-34" tabindex="-1"></a></span>
<span id="cb240-35"><a href="Ch06.html#cb240-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb240-36"><a href="Ch06.html#cb240-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb240-37"><a href="Ch06.html#cb240-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb240-38"><a href="Ch06.html#cb240-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb240-39"><a href="Ch06.html#cb240-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb240-40"><a href="Ch06.html#cb240-40" tabindex="-1"></a></span>
<span id="cb240-41"><a href="Ch06.html#cb240-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsSpring_r10000.tif&quot;</span></span>
<span id="cb240-42"><a href="Ch06.html#cb240-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb240-43"><a href="Ch06.html#cb240-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb240-44"><a href="Ch06.html#cb240-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb240-45"><a href="Ch06.html#cb240-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb240-46"><a href="Ch06.html#cb240-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb240-47"><a href="Ch06.html#cb240-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb240-48"><a href="Ch06.html#cb240-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb240-49"><a href="Ch06.html#cb240-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb240-50"><a href="Ch06.html#cb240-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb240-51"><a href="Ch06.html#cb240-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb240-52"><a href="Ch06.html#cb240-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb240-53"><a href="Ch06.html#cb240-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_199.png" width="100%" /></p>
</div>
<div id="ch06.200" class="section level2 hasAnchor" number="6.200">
<h2><span class="header-section-number">6.200</span> FarmlandCrops_CropsWinter_cell<a href="Ch06.html#ch06.200" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsWinter_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_200</code></p>
<p><strong>English name:</strong> Fractional cover of Winter Crops within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ziemāju aramzemēs platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels with declared as winter crops were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>. These geometries
were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="Ch06.html#cb241-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb241-2"><a href="Ch06.html#cb241-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb241-3"><a href="Ch06.html#cb241-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb241-4"><a href="Ch06.html#cb241-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb241-5"><a href="Ch06.html#cb241-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb241-6"><a href="Ch06.html#cb241-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb241-7"><a href="Ch06.html#cb241-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb241-8"><a href="Ch06.html#cb241-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb241-9"><a href="Ch06.html#cb241-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb241-10"><a href="Ch06.html#cb241-10" tabindex="-1"></a></span>
<span id="cb241-11"><a href="Ch06.html#cb241-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb241-12"><a href="Ch06.html#cb241-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb241-13"><a href="Ch06.html#cb241-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb241-14"><a href="Ch06.html#cb241-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb241-15"><a href="Ch06.html#cb241-15" tabindex="-1"></a></span>
<span id="cb241-16"><a href="Ch06.html#cb241-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb241-17"><a href="Ch06.html#cb241-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb241-18"><a href="Ch06.html#cb241-18" tabindex="-1"></a></span>
<span id="cb241-19"><a href="Ch06.html#cb241-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb241-20"><a href="Ch06.html#cb241-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb241-21"><a href="Ch06.html#cb241-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb241-22"><a href="Ch06.html#cb241-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb241-23"><a href="Ch06.html#cb241-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb241-24"><a href="Ch06.html#cb241-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb241-25"><a href="Ch06.html#cb241-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb241-26"><a href="Ch06.html#cb241-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb241-27"><a href="Ch06.html#cb241-27" tabindex="-1"></a></span>
<span id="cb241-28"><a href="Ch06.html#cb241-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb241-29"><a href="Ch06.html#cb241-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb241-30"><a href="Ch06.html#cb241-30" tabindex="-1"></a></span>
<span id="cb241-31"><a href="Ch06.html#cb241-31" tabindex="-1"></a></span>
<span id="cb241-32"><a href="Ch06.html#cb241-32" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsWinter_cell.tif    egv_200 ----</span></span>
<span id="cb241-33"><a href="Ch06.html#cb241-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb241-34"><a href="Ch06.html#cb241-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(SDM_grupa_sakums,<span class="st">&quot;labība-ziemāji&quot;</span>))</span>
<span id="cb241-35"><a href="Ch06.html#cb241-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb241-36"><a href="Ch06.html#cb241-36" tabindex="-1"></a></span>
<span id="cb241-37"><a href="Ch06.html#cb241-37" tabindex="-1"></a></span>
<span id="cb241-38"><a href="Ch06.html#cb241-38" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb241-39"><a href="Ch06.html#cb241-39" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb241-40"><a href="Ch06.html#cb241-40" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb241-41"><a href="Ch06.html#cb241-41" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandCrops_CropsWinter_input.tif&quot;</span>,</span>
<span id="cb241-42"><a href="Ch06.html#cb241-42" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb241-43"><a href="Ch06.html#cb241-43" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb241-44"><a href="Ch06.html#cb241-44" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb241-45"><a href="Ch06.html#cb241-45" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb241-46"><a href="Ch06.html#cb241-46" tabindex="-1"></a>p2i_rez</span>
<span id="cb241-47"><a href="Ch06.html#cb241-47" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb241-48"><a href="Ch06.html#cb241-48" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandCrops_CropsWinter_input.tif&quot;</span>),</span>
<span id="cb241-49"><a href="Ch06.html#cb241-49" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb241-50"><a href="Ch06.html#cb241-50" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb241-51"><a href="Ch06.html#cb241-51" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb241-52"><a href="Ch06.html#cb241-52" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb241-53"><a href="Ch06.html#cb241-53" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandCrops_CropsWinter_cell.tif&quot;</span>,</span>
<span id="cb241-54"><a href="Ch06.html#cb241-54" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_200&quot;</span>,</span>
<span id="cb241-55"><a href="Ch06.html#cb241-55" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb241-56"><a href="Ch06.html#cb241-56" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb241-57"><a href="Ch06.html#cb241-57" tabindex="-1"></a>i2e_rez</span>
<span id="cb241-58"><a href="Ch06.html#cb241-58" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb241-59"><a href="Ch06.html#cb241-59" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb241-60"><a href="Ch06.html#cb241-60" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb241-61"><a href="Ch06.html#cb241-61" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandCrops_CropsWinter_input.tif&quot;</span>)</span>
<span id="cb241-62"><a href="Ch06.html#cb241-62" tabindex="-1"></a></span>
<span id="cb241-63"><a href="Ch06.html#cb241-63" tabindex="-1"></a></span>
<span id="cb241-64"><a href="Ch06.html#cb241-64" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb241-65"><a href="Ch06.html#cb241-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb241-66"><a href="Ch06.html#cb241-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb241-67"><a href="Ch06.html#cb241-67" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb241-68"><a href="Ch06.html#cb241-68" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb241-69"><a href="Ch06.html#cb241-69" tabindex="-1"></a></span>
<span id="cb241-70"><a href="Ch06.html#cb241-70" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsWinter_cell.tif&quot;</span></span>
<span id="cb241-71"><a href="Ch06.html#cb241-71" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb241-72"><a href="Ch06.html#cb241-72" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb241-73"><a href="Ch06.html#cb241-73" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb241-74"><a href="Ch06.html#cb241-74" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb241-75"><a href="Ch06.html#cb241-75" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb241-76"><a href="Ch06.html#cb241-76" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb241-77"><a href="Ch06.html#cb241-77" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb241-78"><a href="Ch06.html#cb241-78" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb241-79"><a href="Ch06.html#cb241-79" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb241-80"><a href="Ch06.html#cb241-80" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb241-81"><a href="Ch06.html#cb241-81" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb241-82"><a href="Ch06.html#cb241-82" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_200.png" width="100%" /></p>
</div>
<div id="ch06.201" class="section level2 hasAnchor" number="6.201">
<h2><span class="header-section-number">6.201</span> FarmlandCrops_CropsWinter_r500<a href="Ch06.html#ch06.201" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsWinter_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_201</code></p>
<p><strong>English name:</strong> Fractional cover of Winter Crops within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Ziemāju aramzemēs platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.200">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="Ch06.html#cb242-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb242-2"><a href="Ch06.html#cb242-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb242-3"><a href="Ch06.html#cb242-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb242-4"><a href="Ch06.html#cb242-4" tabindex="-1"></a></span>
<span id="cb242-5"><a href="Ch06.html#cb242-5" tabindex="-1"></a></span>
<span id="cb242-6"><a href="Ch06.html#cb242-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb242-7"><a href="Ch06.html#cb242-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb242-8"><a href="Ch06.html#cb242-8" tabindex="-1"></a></span>
<span id="cb242-9"><a href="Ch06.html#cb242-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb242-10"><a href="Ch06.html#cb242-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb242-11"><a href="Ch06.html#cb242-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb242-12"><a href="Ch06.html#cb242-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb242-13"><a href="Ch06.html#cb242-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb242-14"><a href="Ch06.html#cb242-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb242-15"><a href="Ch06.html#cb242-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_cell.tif&quot;</span>),</span>
<span id="cb242-16"><a href="Ch06.html#cb242-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsWinter&quot;</span>),</span>
<span id="cb242-17"><a href="Ch06.html#cb242-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb242-18"><a href="Ch06.html#cb242-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb242-19"><a href="Ch06.html#cb242-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb242-20"><a href="Ch06.html#cb242-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb242-21"><a href="Ch06.html#cb242-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb242-22"><a href="Ch06.html#cb242-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb242-23"><a href="Ch06.html#cb242-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb242-24"><a href="Ch06.html#cb242-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb242-25"><a href="Ch06.html#cb242-25" tabindex="-1"></a></span>
<span id="cb242-26"><a href="Ch06.html#cb242-26" tabindex="-1"></a></span>
<span id="cb242-27"><a href="Ch06.html#cb242-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsWinter_r500.tif    egv_201 ----</span></span>
<span id="cb242-28"><a href="Ch06.html#cb242-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_r500.tif&quot;</span>)</span>
<span id="cb242-29"><a href="Ch06.html#cb242-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_201&quot;</span></span>
<span id="cb242-30"><a href="Ch06.html#cb242-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb242-31"><a href="Ch06.html#cb242-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb242-32"><a href="Ch06.html#cb242-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_r500.tif&quot;</span>,</span>
<span id="cb242-33"><a href="Ch06.html#cb242-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb242-34"><a href="Ch06.html#cb242-34" tabindex="-1"></a></span>
<span id="cb242-35"><a href="Ch06.html#cb242-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb242-36"><a href="Ch06.html#cb242-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb242-37"><a href="Ch06.html#cb242-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb242-38"><a href="Ch06.html#cb242-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb242-39"><a href="Ch06.html#cb242-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb242-40"><a href="Ch06.html#cb242-40" tabindex="-1"></a></span>
<span id="cb242-41"><a href="Ch06.html#cb242-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsWinter_r500.tif&quot;</span></span>
<span id="cb242-42"><a href="Ch06.html#cb242-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb242-43"><a href="Ch06.html#cb242-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb242-44"><a href="Ch06.html#cb242-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb242-45"><a href="Ch06.html#cb242-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb242-46"><a href="Ch06.html#cb242-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb242-47"><a href="Ch06.html#cb242-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb242-48"><a href="Ch06.html#cb242-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb242-49"><a href="Ch06.html#cb242-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb242-50"><a href="Ch06.html#cb242-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb242-51"><a href="Ch06.html#cb242-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb242-52"><a href="Ch06.html#cb242-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb242-53"><a href="Ch06.html#cb242-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_201.png" width="100%" /></p>
</div>
<div id="ch06.202" class="section level2 hasAnchor" number="6.202">
<h2><span class="header-section-number">6.202</span> FarmlandCrops_CropsWinter_r1250<a href="Ch06.html#ch06.202" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsWinter_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_202</code></p>
<p><strong>English name:</strong> Fractional cover of Winter Crops within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Ziemāju aramzemēs platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.200">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="Ch06.html#cb243-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb243-2"><a href="Ch06.html#cb243-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb243-3"><a href="Ch06.html#cb243-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb243-4"><a href="Ch06.html#cb243-4" tabindex="-1"></a></span>
<span id="cb243-5"><a href="Ch06.html#cb243-5" tabindex="-1"></a></span>
<span id="cb243-6"><a href="Ch06.html#cb243-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb243-7"><a href="Ch06.html#cb243-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb243-8"><a href="Ch06.html#cb243-8" tabindex="-1"></a></span>
<span id="cb243-9"><a href="Ch06.html#cb243-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb243-10"><a href="Ch06.html#cb243-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb243-11"><a href="Ch06.html#cb243-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb243-12"><a href="Ch06.html#cb243-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb243-13"><a href="Ch06.html#cb243-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb243-14"><a href="Ch06.html#cb243-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb243-15"><a href="Ch06.html#cb243-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_cell.tif&quot;</span>),</span>
<span id="cb243-16"><a href="Ch06.html#cb243-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsWinter&quot;</span>),</span>
<span id="cb243-17"><a href="Ch06.html#cb243-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb243-18"><a href="Ch06.html#cb243-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb243-19"><a href="Ch06.html#cb243-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb243-20"><a href="Ch06.html#cb243-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb243-21"><a href="Ch06.html#cb243-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb243-22"><a href="Ch06.html#cb243-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb243-23"><a href="Ch06.html#cb243-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb243-24"><a href="Ch06.html#cb243-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb243-25"><a href="Ch06.html#cb243-25" tabindex="-1"></a></span>
<span id="cb243-26"><a href="Ch06.html#cb243-26" tabindex="-1"></a></span>
<span id="cb243-27"><a href="Ch06.html#cb243-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsWinter_r1250.tif   egv_202 ----</span></span>
<span id="cb243-28"><a href="Ch06.html#cb243-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_r1250.tif&quot;</span>)</span>
<span id="cb243-29"><a href="Ch06.html#cb243-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_202&quot;</span></span>
<span id="cb243-30"><a href="Ch06.html#cb243-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb243-31"><a href="Ch06.html#cb243-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb243-32"><a href="Ch06.html#cb243-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_r1250.tif&quot;</span>,</span>
<span id="cb243-33"><a href="Ch06.html#cb243-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb243-34"><a href="Ch06.html#cb243-34" tabindex="-1"></a></span>
<span id="cb243-35"><a href="Ch06.html#cb243-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb243-36"><a href="Ch06.html#cb243-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb243-37"><a href="Ch06.html#cb243-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb243-38"><a href="Ch06.html#cb243-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb243-39"><a href="Ch06.html#cb243-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb243-40"><a href="Ch06.html#cb243-40" tabindex="-1"></a></span>
<span id="cb243-41"><a href="Ch06.html#cb243-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsWinter_r1250.tif&quot;</span></span>
<span id="cb243-42"><a href="Ch06.html#cb243-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb243-43"><a href="Ch06.html#cb243-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb243-44"><a href="Ch06.html#cb243-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb243-45"><a href="Ch06.html#cb243-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb243-46"><a href="Ch06.html#cb243-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb243-47"><a href="Ch06.html#cb243-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb243-48"><a href="Ch06.html#cb243-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb243-49"><a href="Ch06.html#cb243-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb243-50"><a href="Ch06.html#cb243-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb243-51"><a href="Ch06.html#cb243-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb243-52"><a href="Ch06.html#cb243-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb243-53"><a href="Ch06.html#cb243-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_202.png" width="100%" /></p>
</div>
<div id="ch06.203" class="section level2 hasAnchor" number="6.203">
<h2><span class="header-section-number">6.203</span> FarmlandCrops_CropsWinter_r3000<a href="Ch06.html#ch06.203" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsWinter_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_203</code></p>
<p><strong>English name:</strong> Fractional cover of Winter Crops within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Ziemāju aramzemēs platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.200">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="Ch06.html#cb244-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb244-2"><a href="Ch06.html#cb244-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb244-3"><a href="Ch06.html#cb244-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb244-4"><a href="Ch06.html#cb244-4" tabindex="-1"></a></span>
<span id="cb244-5"><a href="Ch06.html#cb244-5" tabindex="-1"></a></span>
<span id="cb244-6"><a href="Ch06.html#cb244-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb244-7"><a href="Ch06.html#cb244-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb244-8"><a href="Ch06.html#cb244-8" tabindex="-1"></a></span>
<span id="cb244-9"><a href="Ch06.html#cb244-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb244-10"><a href="Ch06.html#cb244-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb244-11"><a href="Ch06.html#cb244-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb244-12"><a href="Ch06.html#cb244-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb244-13"><a href="Ch06.html#cb244-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb244-14"><a href="Ch06.html#cb244-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb244-15"><a href="Ch06.html#cb244-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_cell.tif&quot;</span>),</span>
<span id="cb244-16"><a href="Ch06.html#cb244-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsWinter&quot;</span>),</span>
<span id="cb244-17"><a href="Ch06.html#cb244-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb244-18"><a href="Ch06.html#cb244-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb244-19"><a href="Ch06.html#cb244-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb244-20"><a href="Ch06.html#cb244-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb244-21"><a href="Ch06.html#cb244-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb244-22"><a href="Ch06.html#cb244-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb244-23"><a href="Ch06.html#cb244-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb244-24"><a href="Ch06.html#cb244-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb244-25"><a href="Ch06.html#cb244-25" tabindex="-1"></a></span>
<span id="cb244-26"><a href="Ch06.html#cb244-26" tabindex="-1"></a></span>
<span id="cb244-27"><a href="Ch06.html#cb244-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsWinter_r3000.tif   egv_203 ----</span></span>
<span id="cb244-28"><a href="Ch06.html#cb244-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_r3000.tif&quot;</span>)</span>
<span id="cb244-29"><a href="Ch06.html#cb244-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_203&quot;</span></span>
<span id="cb244-30"><a href="Ch06.html#cb244-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb244-31"><a href="Ch06.html#cb244-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb244-32"><a href="Ch06.html#cb244-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_r3000.tif&quot;</span>,</span>
<span id="cb244-33"><a href="Ch06.html#cb244-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb244-34"><a href="Ch06.html#cb244-34" tabindex="-1"></a></span>
<span id="cb244-35"><a href="Ch06.html#cb244-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb244-36"><a href="Ch06.html#cb244-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb244-37"><a href="Ch06.html#cb244-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb244-38"><a href="Ch06.html#cb244-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb244-39"><a href="Ch06.html#cb244-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb244-40"><a href="Ch06.html#cb244-40" tabindex="-1"></a></span>
<span id="cb244-41"><a href="Ch06.html#cb244-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsWinter_r3000.tif&quot;</span></span>
<span id="cb244-42"><a href="Ch06.html#cb244-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb244-43"><a href="Ch06.html#cb244-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb244-44"><a href="Ch06.html#cb244-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb244-45"><a href="Ch06.html#cb244-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb244-46"><a href="Ch06.html#cb244-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb244-47"><a href="Ch06.html#cb244-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb244-48"><a href="Ch06.html#cb244-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb244-49"><a href="Ch06.html#cb244-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb244-50"><a href="Ch06.html#cb244-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb244-51"><a href="Ch06.html#cb244-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb244-52"><a href="Ch06.html#cb244-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb244-53"><a href="Ch06.html#cb244-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_203.png" width="100%" /></p>
</div>
<div id="ch06.204" class="section level2 hasAnchor" number="6.204">
<h2><span class="header-section-number">6.204</span> FarmlandCrops_CropsWinter_r10000<a href="Ch06.html#ch06.204" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_CropsWinter_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_204</code></p>
<p><strong>English name:</strong> Fractional cover of Winter Crops within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Ziemāju aramzemēs platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.200">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="Ch06.html#cb245-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb245-2"><a href="Ch06.html#cb245-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb245-3"><a href="Ch06.html#cb245-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb245-4"><a href="Ch06.html#cb245-4" tabindex="-1"></a></span>
<span id="cb245-5"><a href="Ch06.html#cb245-5" tabindex="-1"></a></span>
<span id="cb245-6"><a href="Ch06.html#cb245-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb245-7"><a href="Ch06.html#cb245-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb245-8"><a href="Ch06.html#cb245-8" tabindex="-1"></a></span>
<span id="cb245-9"><a href="Ch06.html#cb245-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb245-10"><a href="Ch06.html#cb245-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb245-11"><a href="Ch06.html#cb245-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb245-12"><a href="Ch06.html#cb245-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb245-13"><a href="Ch06.html#cb245-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb245-14"><a href="Ch06.html#cb245-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb245-15"><a href="Ch06.html#cb245-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_cell.tif&quot;</span>),</span>
<span id="cb245-16"><a href="Ch06.html#cb245-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_CropsWinter&quot;</span>),</span>
<span id="cb245-17"><a href="Ch06.html#cb245-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb245-18"><a href="Ch06.html#cb245-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb245-19"><a href="Ch06.html#cb245-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb245-20"><a href="Ch06.html#cb245-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb245-21"><a href="Ch06.html#cb245-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb245-22"><a href="Ch06.html#cb245-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb245-23"><a href="Ch06.html#cb245-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb245-24"><a href="Ch06.html#cb245-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb245-25"><a href="Ch06.html#cb245-25" tabindex="-1"></a></span>
<span id="cb245-26"><a href="Ch06.html#cb245-26" tabindex="-1"></a></span>
<span id="cb245-27"><a href="Ch06.html#cb245-27" tabindex="-1"></a><span class="co"># FarmlandCrops_CropsWinter_r10000.tif  egv_204 ----</span></span>
<span id="cb245-28"><a href="Ch06.html#cb245-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_r10000.tif&quot;</span>)</span>
<span id="cb245-29"><a href="Ch06.html#cb245-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_204&quot;</span></span>
<span id="cb245-30"><a href="Ch06.html#cb245-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb245-31"><a href="Ch06.html#cb245-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb245-32"><a href="Ch06.html#cb245-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_CropsWinter_r10000.tif&quot;</span>,</span>
<span id="cb245-33"><a href="Ch06.html#cb245-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb245-34"><a href="Ch06.html#cb245-34" tabindex="-1"></a></span>
<span id="cb245-35"><a href="Ch06.html#cb245-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb245-36"><a href="Ch06.html#cb245-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb245-37"><a href="Ch06.html#cb245-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb245-38"><a href="Ch06.html#cb245-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb245-39"><a href="Ch06.html#cb245-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb245-40"><a href="Ch06.html#cb245-40" tabindex="-1"></a></span>
<span id="cb245-41"><a href="Ch06.html#cb245-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_CropsWinter_r10000.tif&quot;</span></span>
<span id="cb245-42"><a href="Ch06.html#cb245-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb245-43"><a href="Ch06.html#cb245-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb245-44"><a href="Ch06.html#cb245-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb245-45"><a href="Ch06.html#cb245-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb245-46"><a href="Ch06.html#cb245-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb245-47"><a href="Ch06.html#cb245-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb245-48"><a href="Ch06.html#cb245-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb245-49"><a href="Ch06.html#cb245-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb245-50"><a href="Ch06.html#cb245-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb245-51"><a href="Ch06.html#cb245-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb245-52"><a href="Ch06.html#cb245-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb245-53"><a href="Ch06.html#cb245-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_204.png" width="100%" /></p>
</div>
<div id="ch06.205" class="section level2 hasAnchor" number="6.205">
<h2><span class="header-section-number">6.205</span> FarmlandCrops_RapeseedsSpring_cell<a href="Ch06.html#ch06.205" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_RapeseedsSpring_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_205</code></p>
<p><strong>English name:</strong> Fractional cover of Spring Sown Rapeseed, Turnip, Corn within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vasaras rapša, ripša, kukurūzas platība analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels with declared as spring sawn rapeseed, turnip or corn were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>. These geometries
were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="Ch06.html#cb246-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb246-2"><a href="Ch06.html#cb246-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb246-3"><a href="Ch06.html#cb246-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb246-4"><a href="Ch06.html#cb246-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb246-5"><a href="Ch06.html#cb246-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb246-6"><a href="Ch06.html#cb246-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb246-7"><a href="Ch06.html#cb246-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb246-8"><a href="Ch06.html#cb246-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb246-9"><a href="Ch06.html#cb246-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb246-10"><a href="Ch06.html#cb246-10" tabindex="-1"></a></span>
<span id="cb246-11"><a href="Ch06.html#cb246-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb246-12"><a href="Ch06.html#cb246-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb246-13"><a href="Ch06.html#cb246-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb246-14"><a href="Ch06.html#cb246-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb246-15"><a href="Ch06.html#cb246-15" tabindex="-1"></a></span>
<span id="cb246-16"><a href="Ch06.html#cb246-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb246-17"><a href="Ch06.html#cb246-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb246-18"><a href="Ch06.html#cb246-18" tabindex="-1"></a></span>
<span id="cb246-19"><a href="Ch06.html#cb246-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb246-20"><a href="Ch06.html#cb246-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb246-21"><a href="Ch06.html#cb246-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb246-22"><a href="Ch06.html#cb246-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb246-23"><a href="Ch06.html#cb246-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb246-24"><a href="Ch06.html#cb246-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb246-25"><a href="Ch06.html#cb246-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb246-26"><a href="Ch06.html#cb246-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb246-27"><a href="Ch06.html#cb246-27" tabindex="-1"></a></span>
<span id="cb246-28"><a href="Ch06.html#cb246-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb246-29"><a href="Ch06.html#cb246-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb246-30"><a href="Ch06.html#cb246-30" tabindex="-1"></a></span>
<span id="cb246-31"><a href="Ch06.html#cb246-31" tabindex="-1"></a></span>
<span id="cb246-32"><a href="Ch06.html#cb246-32" tabindex="-1"></a><span class="co"># FarmlandCrops_RapeseedsSpring_cell.tif    egv_205 ----</span></span>
<span id="cb246-33"><a href="Ch06.html#cb246-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb246-34"><a href="Ch06.html#cb246-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(SDM_grupa_sakums,<span class="st">&quot;vasaras rapsis&quot;</span>))</span>
<span id="cb246-35"><a href="Ch06.html#cb246-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb246-36"><a href="Ch06.html#cb246-36" tabindex="-1"></a></span>
<span id="cb246-37"><a href="Ch06.html#cb246-37" tabindex="-1"></a></span>
<span id="cb246-38"><a href="Ch06.html#cb246-38" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb246-39"><a href="Ch06.html#cb246-39" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb246-40"><a href="Ch06.html#cb246-40" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb246-41"><a href="Ch06.html#cb246-41" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandCrops_RapeseedsSpring_input.tif&quot;</span>,</span>
<span id="cb246-42"><a href="Ch06.html#cb246-42" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb246-43"><a href="Ch06.html#cb246-43" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb246-44"><a href="Ch06.html#cb246-44" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb246-45"><a href="Ch06.html#cb246-45" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb246-46"><a href="Ch06.html#cb246-46" tabindex="-1"></a>p2i_rez</span>
<span id="cb246-47"><a href="Ch06.html#cb246-47" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb246-48"><a href="Ch06.html#cb246-48" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandCrops_RapeseedsSpring_input.tif&quot;</span>),</span>
<span id="cb246-49"><a href="Ch06.html#cb246-49" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb246-50"><a href="Ch06.html#cb246-50" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb246-51"><a href="Ch06.html#cb246-51" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb246-52"><a href="Ch06.html#cb246-52" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb246-53"><a href="Ch06.html#cb246-53" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandCrops_RapeseedsSpring_cell.tif&quot;</span>,</span>
<span id="cb246-54"><a href="Ch06.html#cb246-54" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_205&quot;</span>,</span>
<span id="cb246-55"><a href="Ch06.html#cb246-55" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb246-56"><a href="Ch06.html#cb246-56" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb246-57"><a href="Ch06.html#cb246-57" tabindex="-1"></a>i2e_rez</span>
<span id="cb246-58"><a href="Ch06.html#cb246-58" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb246-59"><a href="Ch06.html#cb246-59" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb246-60"><a href="Ch06.html#cb246-60" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb246-61"><a href="Ch06.html#cb246-61" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandCrops_RapeseedsSpring_input.tif&quot;</span>)</span>
<span id="cb246-62"><a href="Ch06.html#cb246-62" tabindex="-1"></a></span>
<span id="cb246-63"><a href="Ch06.html#cb246-63" tabindex="-1"></a></span>
<span id="cb246-64"><a href="Ch06.html#cb246-64" tabindex="-1"></a></span>
<span id="cb246-65"><a href="Ch06.html#cb246-65" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb246-66"><a href="Ch06.html#cb246-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb246-67"><a href="Ch06.html#cb246-67" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb246-68"><a href="Ch06.html#cb246-68" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb246-69"><a href="Ch06.html#cb246-69" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb246-70"><a href="Ch06.html#cb246-70" tabindex="-1"></a></span>
<span id="cb246-71"><a href="Ch06.html#cb246-71" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_RapeseedsSpring_cell.tif&quot;</span></span>
<span id="cb246-72"><a href="Ch06.html#cb246-72" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb246-73"><a href="Ch06.html#cb246-73" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb246-74"><a href="Ch06.html#cb246-74" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb246-75"><a href="Ch06.html#cb246-75" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb246-76"><a href="Ch06.html#cb246-76" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb246-77"><a href="Ch06.html#cb246-77" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb246-78"><a href="Ch06.html#cb246-78" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb246-79"><a href="Ch06.html#cb246-79" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb246-80"><a href="Ch06.html#cb246-80" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb246-81"><a href="Ch06.html#cb246-81" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb246-82"><a href="Ch06.html#cb246-82" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb246-83"><a href="Ch06.html#cb246-83" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_205.png" width="100%" /></p>
</div>
<div id="ch06.206" class="section level2 hasAnchor" number="6.206">
<h2><span class="header-section-number">6.206</span> FarmlandCrops_RapeseedsSpring_r500<a href="Ch06.html#ch06.206" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_RapeseedsSpring_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_206</code></p>
<p><strong>English name:</strong> Fractional cover of Spring Sown Rapeseed, Turnip, Corn within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vasaras rapša, ripša, kukurūzas platība 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.205">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="Ch06.html#cb247-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb247-2"><a href="Ch06.html#cb247-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb247-3"><a href="Ch06.html#cb247-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb247-4"><a href="Ch06.html#cb247-4" tabindex="-1"></a></span>
<span id="cb247-5"><a href="Ch06.html#cb247-5" tabindex="-1"></a></span>
<span id="cb247-6"><a href="Ch06.html#cb247-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb247-7"><a href="Ch06.html#cb247-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb247-8"><a href="Ch06.html#cb247-8" tabindex="-1"></a></span>
<span id="cb247-9"><a href="Ch06.html#cb247-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb247-10"><a href="Ch06.html#cb247-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb247-11"><a href="Ch06.html#cb247-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb247-12"><a href="Ch06.html#cb247-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb247-13"><a href="Ch06.html#cb247-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb247-14"><a href="Ch06.html#cb247-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb247-15"><a href="Ch06.html#cb247-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_cell.tif&quot;</span>),</span>
<span id="cb247-16"><a href="Ch06.html#cb247-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_RapeseedsSpring&quot;</span>),</span>
<span id="cb247-17"><a href="Ch06.html#cb247-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb247-18"><a href="Ch06.html#cb247-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb247-19"><a href="Ch06.html#cb247-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb247-20"><a href="Ch06.html#cb247-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb247-21"><a href="Ch06.html#cb247-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb247-22"><a href="Ch06.html#cb247-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb247-23"><a href="Ch06.html#cb247-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb247-24"><a href="Ch06.html#cb247-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb247-25"><a href="Ch06.html#cb247-25" tabindex="-1"></a></span>
<span id="cb247-26"><a href="Ch06.html#cb247-26" tabindex="-1"></a></span>
<span id="cb247-27"><a href="Ch06.html#cb247-27" tabindex="-1"></a><span class="co"># FarmlandCrops_RapeseedsSpring_r500.tif    egv_206</span></span>
<span id="cb247-28"><a href="Ch06.html#cb247-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_r500.tif&quot;</span>)</span>
<span id="cb247-29"><a href="Ch06.html#cb247-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_206&quot;</span></span>
<span id="cb247-30"><a href="Ch06.html#cb247-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb247-31"><a href="Ch06.html#cb247-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb247-32"><a href="Ch06.html#cb247-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_r500.tif&quot;</span>,</span>
<span id="cb247-33"><a href="Ch06.html#cb247-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb247-34"><a href="Ch06.html#cb247-34" tabindex="-1"></a></span>
<span id="cb247-35"><a href="Ch06.html#cb247-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb247-36"><a href="Ch06.html#cb247-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb247-37"><a href="Ch06.html#cb247-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb247-38"><a href="Ch06.html#cb247-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb247-39"><a href="Ch06.html#cb247-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb247-40"><a href="Ch06.html#cb247-40" tabindex="-1"></a></span>
<span id="cb247-41"><a href="Ch06.html#cb247-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_RapeseedsSpring_r500.tif&quot;</span></span>
<span id="cb247-42"><a href="Ch06.html#cb247-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb247-43"><a href="Ch06.html#cb247-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb247-44"><a href="Ch06.html#cb247-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb247-45"><a href="Ch06.html#cb247-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb247-46"><a href="Ch06.html#cb247-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb247-47"><a href="Ch06.html#cb247-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb247-48"><a href="Ch06.html#cb247-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb247-49"><a href="Ch06.html#cb247-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb247-50"><a href="Ch06.html#cb247-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb247-51"><a href="Ch06.html#cb247-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb247-52"><a href="Ch06.html#cb247-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb247-53"><a href="Ch06.html#cb247-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_206.png" width="100%" /></p>
</div>
<div id="ch06.207" class="section level2 hasAnchor" number="6.207">
<h2><span class="header-section-number">6.207</span> FarmlandCrops_RapeseedsSpring_r1250<a href="Ch06.html#ch06.207" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_RapeseedsSpring_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_207</code></p>
<p><strong>English name:</strong> Fractional cover of Spring Sown Rapeseed, Turnip, Corn within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vasaras rapša, ripša, kukurūzas platība 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.205">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="Ch06.html#cb248-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb248-2"><a href="Ch06.html#cb248-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb248-3"><a href="Ch06.html#cb248-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb248-4"><a href="Ch06.html#cb248-4" tabindex="-1"></a></span>
<span id="cb248-5"><a href="Ch06.html#cb248-5" tabindex="-1"></a></span>
<span id="cb248-6"><a href="Ch06.html#cb248-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb248-7"><a href="Ch06.html#cb248-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb248-8"><a href="Ch06.html#cb248-8" tabindex="-1"></a></span>
<span id="cb248-9"><a href="Ch06.html#cb248-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb248-10"><a href="Ch06.html#cb248-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb248-11"><a href="Ch06.html#cb248-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb248-12"><a href="Ch06.html#cb248-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb248-13"><a href="Ch06.html#cb248-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb248-14"><a href="Ch06.html#cb248-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb248-15"><a href="Ch06.html#cb248-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_cell.tif&quot;</span>),</span>
<span id="cb248-16"><a href="Ch06.html#cb248-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_RapeseedsSpring&quot;</span>),</span>
<span id="cb248-17"><a href="Ch06.html#cb248-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb248-18"><a href="Ch06.html#cb248-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb248-19"><a href="Ch06.html#cb248-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb248-20"><a href="Ch06.html#cb248-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb248-21"><a href="Ch06.html#cb248-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb248-22"><a href="Ch06.html#cb248-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb248-23"><a href="Ch06.html#cb248-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb248-24"><a href="Ch06.html#cb248-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb248-25"><a href="Ch06.html#cb248-25" tabindex="-1"></a></span>
<span id="cb248-26"><a href="Ch06.html#cb248-26" tabindex="-1"></a></span>
<span id="cb248-27"><a href="Ch06.html#cb248-27" tabindex="-1"></a><span class="co"># FarmlandCrops_RapeseedsSpring_r1250.tif   egv_207</span></span>
<span id="cb248-28"><a href="Ch06.html#cb248-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_r1250.tif&quot;</span>)</span>
<span id="cb248-29"><a href="Ch06.html#cb248-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_207&quot;</span></span>
<span id="cb248-30"><a href="Ch06.html#cb248-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb248-31"><a href="Ch06.html#cb248-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb248-32"><a href="Ch06.html#cb248-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_r1250.tif&quot;</span>,</span>
<span id="cb248-33"><a href="Ch06.html#cb248-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb248-34"><a href="Ch06.html#cb248-34" tabindex="-1"></a></span>
<span id="cb248-35"><a href="Ch06.html#cb248-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb248-36"><a href="Ch06.html#cb248-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb248-37"><a href="Ch06.html#cb248-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb248-38"><a href="Ch06.html#cb248-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb248-39"><a href="Ch06.html#cb248-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb248-40"><a href="Ch06.html#cb248-40" tabindex="-1"></a></span>
<span id="cb248-41"><a href="Ch06.html#cb248-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_RapeseedsSpring_r1250.tif&quot;</span></span>
<span id="cb248-42"><a href="Ch06.html#cb248-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb248-43"><a href="Ch06.html#cb248-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb248-44"><a href="Ch06.html#cb248-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb248-45"><a href="Ch06.html#cb248-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb248-46"><a href="Ch06.html#cb248-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb248-47"><a href="Ch06.html#cb248-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb248-48"><a href="Ch06.html#cb248-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb248-49"><a href="Ch06.html#cb248-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb248-50"><a href="Ch06.html#cb248-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb248-51"><a href="Ch06.html#cb248-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb248-52"><a href="Ch06.html#cb248-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb248-53"><a href="Ch06.html#cb248-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_207.png" width="100%" /></p>
</div>
<div id="ch06.208" class="section level2 hasAnchor" number="6.208">
<h2><span class="header-section-number">6.208</span> FarmlandCrops_RapeseedsSpring_r3000<a href="Ch06.html#ch06.208" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_RapeseedsSpring_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_208</code></p>
<p><strong>English name:</strong> Fractional cover of Spring Sown Rapeseed, Turnip, Corn within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vasaras rapša, ripša, kukurūzas platība 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.205">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="Ch06.html#cb249-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb249-2"><a href="Ch06.html#cb249-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb249-3"><a href="Ch06.html#cb249-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb249-4"><a href="Ch06.html#cb249-4" tabindex="-1"></a></span>
<span id="cb249-5"><a href="Ch06.html#cb249-5" tabindex="-1"></a></span>
<span id="cb249-6"><a href="Ch06.html#cb249-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb249-7"><a href="Ch06.html#cb249-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb249-8"><a href="Ch06.html#cb249-8" tabindex="-1"></a></span>
<span id="cb249-9"><a href="Ch06.html#cb249-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb249-10"><a href="Ch06.html#cb249-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb249-11"><a href="Ch06.html#cb249-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb249-12"><a href="Ch06.html#cb249-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb249-13"><a href="Ch06.html#cb249-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb249-14"><a href="Ch06.html#cb249-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb249-15"><a href="Ch06.html#cb249-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_cell.tif&quot;</span>),</span>
<span id="cb249-16"><a href="Ch06.html#cb249-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_RapeseedsSpring&quot;</span>),</span>
<span id="cb249-17"><a href="Ch06.html#cb249-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb249-18"><a href="Ch06.html#cb249-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb249-19"><a href="Ch06.html#cb249-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb249-20"><a href="Ch06.html#cb249-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb249-21"><a href="Ch06.html#cb249-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb249-22"><a href="Ch06.html#cb249-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb249-23"><a href="Ch06.html#cb249-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb249-24"><a href="Ch06.html#cb249-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb249-25"><a href="Ch06.html#cb249-25" tabindex="-1"></a></span>
<span id="cb249-26"><a href="Ch06.html#cb249-26" tabindex="-1"></a></span>
<span id="cb249-27"><a href="Ch06.html#cb249-27" tabindex="-1"></a><span class="co"># FarmlandCrops_RapeseedsSpring_r3000.tif   egv_208</span></span>
<span id="cb249-28"><a href="Ch06.html#cb249-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_r3000.tif&quot;</span>)</span>
<span id="cb249-29"><a href="Ch06.html#cb249-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_208&quot;</span></span>
<span id="cb249-30"><a href="Ch06.html#cb249-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb249-31"><a href="Ch06.html#cb249-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb249-32"><a href="Ch06.html#cb249-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_r3000.tif&quot;</span>,</span>
<span id="cb249-33"><a href="Ch06.html#cb249-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb249-34"><a href="Ch06.html#cb249-34" tabindex="-1"></a></span>
<span id="cb249-35"><a href="Ch06.html#cb249-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb249-36"><a href="Ch06.html#cb249-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb249-37"><a href="Ch06.html#cb249-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb249-38"><a href="Ch06.html#cb249-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb249-39"><a href="Ch06.html#cb249-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb249-40"><a href="Ch06.html#cb249-40" tabindex="-1"></a></span>
<span id="cb249-41"><a href="Ch06.html#cb249-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_RapeseedsSpring_r3000.tif&quot;</span></span>
<span id="cb249-42"><a href="Ch06.html#cb249-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb249-43"><a href="Ch06.html#cb249-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb249-44"><a href="Ch06.html#cb249-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb249-45"><a href="Ch06.html#cb249-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb249-46"><a href="Ch06.html#cb249-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb249-47"><a href="Ch06.html#cb249-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb249-48"><a href="Ch06.html#cb249-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb249-49"><a href="Ch06.html#cb249-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb249-50"><a href="Ch06.html#cb249-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb249-51"><a href="Ch06.html#cb249-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb249-52"><a href="Ch06.html#cb249-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb249-53"><a href="Ch06.html#cb249-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_208.png" width="100%" /></p>
</div>
<div id="ch06.209" class="section level2 hasAnchor" number="6.209">
<h2><span class="header-section-number">6.209</span> FarmlandCrops_RapeseedsSpring_r10000<a href="Ch06.html#ch06.209" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_RapeseedsSpring_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_209</code></p>
<p><strong>English name:</strong> Fractional cover of Spring Sown Rapeseed, Turnip, Corn within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vasaras rapša, ripša, kukurūzas platība 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.205">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="Ch06.html#cb250-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb250-2"><a href="Ch06.html#cb250-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb250-3"><a href="Ch06.html#cb250-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb250-4"><a href="Ch06.html#cb250-4" tabindex="-1"></a></span>
<span id="cb250-5"><a href="Ch06.html#cb250-5" tabindex="-1"></a></span>
<span id="cb250-6"><a href="Ch06.html#cb250-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb250-7"><a href="Ch06.html#cb250-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb250-8"><a href="Ch06.html#cb250-8" tabindex="-1"></a></span>
<span id="cb250-9"><a href="Ch06.html#cb250-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb250-10"><a href="Ch06.html#cb250-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb250-11"><a href="Ch06.html#cb250-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb250-12"><a href="Ch06.html#cb250-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb250-13"><a href="Ch06.html#cb250-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb250-14"><a href="Ch06.html#cb250-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb250-15"><a href="Ch06.html#cb250-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_cell.tif&quot;</span>),</span>
<span id="cb250-16"><a href="Ch06.html#cb250-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_RapeseedsSpring&quot;</span>),</span>
<span id="cb250-17"><a href="Ch06.html#cb250-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb250-18"><a href="Ch06.html#cb250-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb250-19"><a href="Ch06.html#cb250-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb250-20"><a href="Ch06.html#cb250-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb250-21"><a href="Ch06.html#cb250-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb250-22"><a href="Ch06.html#cb250-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb250-23"><a href="Ch06.html#cb250-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb250-24"><a href="Ch06.html#cb250-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb250-25"><a href="Ch06.html#cb250-25" tabindex="-1"></a></span>
<span id="cb250-26"><a href="Ch06.html#cb250-26" tabindex="-1"></a></span>
<span id="cb250-27"><a href="Ch06.html#cb250-27" tabindex="-1"></a><span class="co"># FarmlandCrops_RapeseedsSpring_r10000.tif  egv_209</span></span>
<span id="cb250-28"><a href="Ch06.html#cb250-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_r10000.tif&quot;</span>)</span>
<span id="cb250-29"><a href="Ch06.html#cb250-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_209&quot;</span></span>
<span id="cb250-30"><a href="Ch06.html#cb250-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb250-31"><a href="Ch06.html#cb250-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb250-32"><a href="Ch06.html#cb250-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsSpring_r10000.tif&quot;</span>,</span>
<span id="cb250-33"><a href="Ch06.html#cb250-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb250-34"><a href="Ch06.html#cb250-34" tabindex="-1"></a></span>
<span id="cb250-35"><a href="Ch06.html#cb250-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb250-36"><a href="Ch06.html#cb250-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb250-37"><a href="Ch06.html#cb250-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb250-38"><a href="Ch06.html#cb250-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb250-39"><a href="Ch06.html#cb250-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb250-40"><a href="Ch06.html#cb250-40" tabindex="-1"></a></span>
<span id="cb250-41"><a href="Ch06.html#cb250-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_RapeseedsSpring_r10000.tif&quot;</span></span>
<span id="cb250-42"><a href="Ch06.html#cb250-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb250-43"><a href="Ch06.html#cb250-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb250-44"><a href="Ch06.html#cb250-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb250-45"><a href="Ch06.html#cb250-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb250-46"><a href="Ch06.html#cb250-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb250-47"><a href="Ch06.html#cb250-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb250-48"><a href="Ch06.html#cb250-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb250-49"><a href="Ch06.html#cb250-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb250-50"><a href="Ch06.html#cb250-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb250-51"><a href="Ch06.html#cb250-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb250-52"><a href="Ch06.html#cb250-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb250-53"><a href="Ch06.html#cb250-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_209.png" width="100%" /></p>
</div>
<div id="ch06.210" class="section level2 hasAnchor" number="6.210">
<h2><span class="header-section-number">6.210</span> FarmlandCrops_RapeseedsWinter_cell<a href="Ch06.html#ch06.210" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_RapeseedsWinter_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_210</code></p>
<p><strong>English name:</strong> Fractional cover of Winter Rapeseed, Turnip within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ziemas rapša, ripša platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels with declared as winter rapeseed or turnip were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>. These geometries
were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="Ch06.html#cb251-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb251-2"><a href="Ch06.html#cb251-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb251-3"><a href="Ch06.html#cb251-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb251-4"><a href="Ch06.html#cb251-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb251-5"><a href="Ch06.html#cb251-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb251-6"><a href="Ch06.html#cb251-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb251-7"><a href="Ch06.html#cb251-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb251-8"><a href="Ch06.html#cb251-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb251-9"><a href="Ch06.html#cb251-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb251-10"><a href="Ch06.html#cb251-10" tabindex="-1"></a></span>
<span id="cb251-11"><a href="Ch06.html#cb251-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb251-12"><a href="Ch06.html#cb251-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb251-13"><a href="Ch06.html#cb251-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb251-14"><a href="Ch06.html#cb251-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb251-15"><a href="Ch06.html#cb251-15" tabindex="-1"></a></span>
<span id="cb251-16"><a href="Ch06.html#cb251-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb251-17"><a href="Ch06.html#cb251-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb251-18"><a href="Ch06.html#cb251-18" tabindex="-1"></a></span>
<span id="cb251-19"><a href="Ch06.html#cb251-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb251-20"><a href="Ch06.html#cb251-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb251-21"><a href="Ch06.html#cb251-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb251-22"><a href="Ch06.html#cb251-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb251-23"><a href="Ch06.html#cb251-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb251-24"><a href="Ch06.html#cb251-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb251-25"><a href="Ch06.html#cb251-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb251-26"><a href="Ch06.html#cb251-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb251-27"><a href="Ch06.html#cb251-27" tabindex="-1"></a></span>
<span id="cb251-28"><a href="Ch06.html#cb251-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb251-29"><a href="Ch06.html#cb251-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb251-30"><a href="Ch06.html#cb251-30" tabindex="-1"></a></span>
<span id="cb251-31"><a href="Ch06.html#cb251-31" tabindex="-1"></a></span>
<span id="cb251-32"><a href="Ch06.html#cb251-32" tabindex="-1"></a><span class="co"># FarmlandCrops_RapeseedsWinter_cell.tif    egv_210 ----</span></span>
<span id="cb251-33"><a href="Ch06.html#cb251-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb251-34"><a href="Ch06.html#cb251-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(SDM_grupa_sakums,<span class="st">&quot;ziemas rapsis&quot;</span>))</span>
<span id="cb251-35"><a href="Ch06.html#cb251-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb251-36"><a href="Ch06.html#cb251-36" tabindex="-1"></a></span>
<span id="cb251-37"><a href="Ch06.html#cb251-37" tabindex="-1"></a></span>
<span id="cb251-38"><a href="Ch06.html#cb251-38" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb251-39"><a href="Ch06.html#cb251-39" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb251-40"><a href="Ch06.html#cb251-40" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb251-41"><a href="Ch06.html#cb251-41" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandCrops_RapeseedsWinter_input.tif&quot;</span>,</span>
<span id="cb251-42"><a href="Ch06.html#cb251-42" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb251-43"><a href="Ch06.html#cb251-43" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb251-44"><a href="Ch06.html#cb251-44" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb251-45"><a href="Ch06.html#cb251-45" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb251-46"><a href="Ch06.html#cb251-46" tabindex="-1"></a>p2i_rez</span>
<span id="cb251-47"><a href="Ch06.html#cb251-47" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb251-48"><a href="Ch06.html#cb251-48" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandCrops_RapeseedsWinter_input.tif&quot;</span>),</span>
<span id="cb251-49"><a href="Ch06.html#cb251-49" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb251-50"><a href="Ch06.html#cb251-50" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb251-51"><a href="Ch06.html#cb251-51" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb251-52"><a href="Ch06.html#cb251-52" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb251-53"><a href="Ch06.html#cb251-53" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandCrops_RapeseedsWinter_cell.tif&quot;</span>,</span>
<span id="cb251-54"><a href="Ch06.html#cb251-54" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_210&quot;</span>,</span>
<span id="cb251-55"><a href="Ch06.html#cb251-55" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb251-56"><a href="Ch06.html#cb251-56" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb251-57"><a href="Ch06.html#cb251-57" tabindex="-1"></a>i2e_rez</span>
<span id="cb251-58"><a href="Ch06.html#cb251-58" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb251-59"><a href="Ch06.html#cb251-59" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb251-60"><a href="Ch06.html#cb251-60" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb251-61"><a href="Ch06.html#cb251-61" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandCrops_RapeseedsWinter_input.tif&quot;</span>)</span>
<span id="cb251-62"><a href="Ch06.html#cb251-62" tabindex="-1"></a></span>
<span id="cb251-63"><a href="Ch06.html#cb251-63" tabindex="-1"></a></span>
<span id="cb251-64"><a href="Ch06.html#cb251-64" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb251-65"><a href="Ch06.html#cb251-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb251-66"><a href="Ch06.html#cb251-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb251-67"><a href="Ch06.html#cb251-67" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb251-68"><a href="Ch06.html#cb251-68" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb251-69"><a href="Ch06.html#cb251-69" tabindex="-1"></a></span>
<span id="cb251-70"><a href="Ch06.html#cb251-70" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_RapeseedsWinter_cell.tif&quot;</span></span>
<span id="cb251-71"><a href="Ch06.html#cb251-71" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb251-72"><a href="Ch06.html#cb251-72" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb251-73"><a href="Ch06.html#cb251-73" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb251-74"><a href="Ch06.html#cb251-74" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb251-75"><a href="Ch06.html#cb251-75" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb251-76"><a href="Ch06.html#cb251-76" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb251-77"><a href="Ch06.html#cb251-77" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb251-78"><a href="Ch06.html#cb251-78" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb251-79"><a href="Ch06.html#cb251-79" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb251-80"><a href="Ch06.html#cb251-80" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb251-81"><a href="Ch06.html#cb251-81" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb251-82"><a href="Ch06.html#cb251-82" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_210.png" width="100%" /></p>
</div>
<div id="ch06.211" class="section level2 hasAnchor" number="6.211">
<h2><span class="header-section-number">6.211</span> FarmlandCrops_RapeseedsWinter_r500<a href="Ch06.html#ch06.211" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_RapeseedsWinter_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_211</code></p>
<p><strong>English name:</strong> Fractional cover of Winter Rapeseed, Turnip within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Ziemas rapša, ripša platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.210">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="Ch06.html#cb252-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb252-2"><a href="Ch06.html#cb252-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb252-3"><a href="Ch06.html#cb252-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb252-4"><a href="Ch06.html#cb252-4" tabindex="-1"></a></span>
<span id="cb252-5"><a href="Ch06.html#cb252-5" tabindex="-1"></a></span>
<span id="cb252-6"><a href="Ch06.html#cb252-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb252-7"><a href="Ch06.html#cb252-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb252-8"><a href="Ch06.html#cb252-8" tabindex="-1"></a></span>
<span id="cb252-9"><a href="Ch06.html#cb252-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb252-10"><a href="Ch06.html#cb252-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb252-11"><a href="Ch06.html#cb252-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb252-12"><a href="Ch06.html#cb252-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb252-13"><a href="Ch06.html#cb252-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb252-14"><a href="Ch06.html#cb252-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb252-15"><a href="Ch06.html#cb252-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_cell.tif&quot;</span>),</span>
<span id="cb252-16"><a href="Ch06.html#cb252-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_RapeseedsWinter&quot;</span>),</span>
<span id="cb252-17"><a href="Ch06.html#cb252-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb252-18"><a href="Ch06.html#cb252-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb252-19"><a href="Ch06.html#cb252-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb252-20"><a href="Ch06.html#cb252-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb252-21"><a href="Ch06.html#cb252-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb252-22"><a href="Ch06.html#cb252-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb252-23"><a href="Ch06.html#cb252-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb252-24"><a href="Ch06.html#cb252-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb252-25"><a href="Ch06.html#cb252-25" tabindex="-1"></a></span>
<span id="cb252-26"><a href="Ch06.html#cb252-26" tabindex="-1"></a></span>
<span id="cb252-27"><a href="Ch06.html#cb252-27" tabindex="-1"></a><span class="co"># FarmlandCrops_RapeseedsWinter_r500.tif    egv_211</span></span>
<span id="cb252-28"><a href="Ch06.html#cb252-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_r500.tif&quot;</span>)</span>
<span id="cb252-29"><a href="Ch06.html#cb252-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_211&quot;</span></span>
<span id="cb252-30"><a href="Ch06.html#cb252-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb252-31"><a href="Ch06.html#cb252-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb252-32"><a href="Ch06.html#cb252-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_r500.tif&quot;</span>,</span>
<span id="cb252-33"><a href="Ch06.html#cb252-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb252-34"><a href="Ch06.html#cb252-34" tabindex="-1"></a></span>
<span id="cb252-35"><a href="Ch06.html#cb252-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb252-36"><a href="Ch06.html#cb252-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb252-37"><a href="Ch06.html#cb252-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb252-38"><a href="Ch06.html#cb252-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb252-39"><a href="Ch06.html#cb252-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb252-40"><a href="Ch06.html#cb252-40" tabindex="-1"></a></span>
<span id="cb252-41"><a href="Ch06.html#cb252-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_RapeseedsWinter_r500.tif&quot;</span></span>
<span id="cb252-42"><a href="Ch06.html#cb252-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb252-43"><a href="Ch06.html#cb252-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb252-44"><a href="Ch06.html#cb252-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb252-45"><a href="Ch06.html#cb252-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb252-46"><a href="Ch06.html#cb252-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb252-47"><a href="Ch06.html#cb252-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb252-48"><a href="Ch06.html#cb252-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb252-49"><a href="Ch06.html#cb252-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb252-50"><a href="Ch06.html#cb252-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb252-51"><a href="Ch06.html#cb252-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb252-52"><a href="Ch06.html#cb252-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb252-53"><a href="Ch06.html#cb252-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_211.png" width="100%" /></p>
</div>
<div id="ch06.212" class="section level2 hasAnchor" number="6.212">
<h2><span class="header-section-number">6.212</span> FarmlandCrops_RapeseedsWinter_r1250<a href="Ch06.html#ch06.212" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_RapeseedsWinter_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_212</code></p>
<p><strong>English name:</strong> Fractional cover of Winter Rapeseed, Turnip within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Ziemas rapša, ripša platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.210">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="Ch06.html#cb253-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb253-2"><a href="Ch06.html#cb253-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb253-3"><a href="Ch06.html#cb253-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb253-4"><a href="Ch06.html#cb253-4" tabindex="-1"></a></span>
<span id="cb253-5"><a href="Ch06.html#cb253-5" tabindex="-1"></a></span>
<span id="cb253-6"><a href="Ch06.html#cb253-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb253-7"><a href="Ch06.html#cb253-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb253-8"><a href="Ch06.html#cb253-8" tabindex="-1"></a></span>
<span id="cb253-9"><a href="Ch06.html#cb253-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb253-10"><a href="Ch06.html#cb253-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb253-11"><a href="Ch06.html#cb253-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb253-12"><a href="Ch06.html#cb253-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb253-13"><a href="Ch06.html#cb253-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb253-14"><a href="Ch06.html#cb253-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb253-15"><a href="Ch06.html#cb253-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_cell.tif&quot;</span>),</span>
<span id="cb253-16"><a href="Ch06.html#cb253-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_RapeseedsWinter&quot;</span>),</span>
<span id="cb253-17"><a href="Ch06.html#cb253-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb253-18"><a href="Ch06.html#cb253-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb253-19"><a href="Ch06.html#cb253-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb253-20"><a href="Ch06.html#cb253-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb253-21"><a href="Ch06.html#cb253-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb253-22"><a href="Ch06.html#cb253-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb253-23"><a href="Ch06.html#cb253-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb253-24"><a href="Ch06.html#cb253-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb253-25"><a href="Ch06.html#cb253-25" tabindex="-1"></a></span>
<span id="cb253-26"><a href="Ch06.html#cb253-26" tabindex="-1"></a></span>
<span id="cb253-27"><a href="Ch06.html#cb253-27" tabindex="-1"></a><span class="co"># FarmlandCrops_RapeseedsWinter_r1250.tif   egv_212</span></span>
<span id="cb253-28"><a href="Ch06.html#cb253-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_r1250.tif&quot;</span>)</span>
<span id="cb253-29"><a href="Ch06.html#cb253-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_212&quot;</span></span>
<span id="cb253-30"><a href="Ch06.html#cb253-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb253-31"><a href="Ch06.html#cb253-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb253-32"><a href="Ch06.html#cb253-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_r1250.tif&quot;</span>,</span>
<span id="cb253-33"><a href="Ch06.html#cb253-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb253-34"><a href="Ch06.html#cb253-34" tabindex="-1"></a></span>
<span id="cb253-35"><a href="Ch06.html#cb253-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb253-36"><a href="Ch06.html#cb253-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb253-37"><a href="Ch06.html#cb253-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb253-38"><a href="Ch06.html#cb253-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb253-39"><a href="Ch06.html#cb253-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb253-40"><a href="Ch06.html#cb253-40" tabindex="-1"></a></span>
<span id="cb253-41"><a href="Ch06.html#cb253-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_RapeseedsWinter_r1250.tif&quot;</span></span>
<span id="cb253-42"><a href="Ch06.html#cb253-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb253-43"><a href="Ch06.html#cb253-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb253-44"><a href="Ch06.html#cb253-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb253-45"><a href="Ch06.html#cb253-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb253-46"><a href="Ch06.html#cb253-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb253-47"><a href="Ch06.html#cb253-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb253-48"><a href="Ch06.html#cb253-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb253-49"><a href="Ch06.html#cb253-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb253-50"><a href="Ch06.html#cb253-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb253-51"><a href="Ch06.html#cb253-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb253-52"><a href="Ch06.html#cb253-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb253-53"><a href="Ch06.html#cb253-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_212.png" width="100%" /></p>
</div>
<div id="ch06.213" class="section level2 hasAnchor" number="6.213">
<h2><span class="header-section-number">6.213</span> FarmlandCrops_RapeseedsWinter_r3000<a href="Ch06.html#ch06.213" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_RapeseedsWinter_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_213</code></p>
<p><strong>English name:</strong> Fractional cover of Winter Rapeseed, Turnip within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Ziemas rapša, ripša platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.210">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="Ch06.html#cb254-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb254-2"><a href="Ch06.html#cb254-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb254-3"><a href="Ch06.html#cb254-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb254-4"><a href="Ch06.html#cb254-4" tabindex="-1"></a></span>
<span id="cb254-5"><a href="Ch06.html#cb254-5" tabindex="-1"></a></span>
<span id="cb254-6"><a href="Ch06.html#cb254-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb254-7"><a href="Ch06.html#cb254-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb254-8"><a href="Ch06.html#cb254-8" tabindex="-1"></a></span>
<span id="cb254-9"><a href="Ch06.html#cb254-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb254-10"><a href="Ch06.html#cb254-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb254-11"><a href="Ch06.html#cb254-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb254-12"><a href="Ch06.html#cb254-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb254-13"><a href="Ch06.html#cb254-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb254-14"><a href="Ch06.html#cb254-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb254-15"><a href="Ch06.html#cb254-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_cell.tif&quot;</span>),</span>
<span id="cb254-16"><a href="Ch06.html#cb254-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_RapeseedsWinter&quot;</span>),</span>
<span id="cb254-17"><a href="Ch06.html#cb254-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb254-18"><a href="Ch06.html#cb254-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb254-19"><a href="Ch06.html#cb254-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb254-20"><a href="Ch06.html#cb254-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb254-21"><a href="Ch06.html#cb254-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb254-22"><a href="Ch06.html#cb254-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb254-23"><a href="Ch06.html#cb254-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb254-24"><a href="Ch06.html#cb254-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb254-25"><a href="Ch06.html#cb254-25" tabindex="-1"></a></span>
<span id="cb254-26"><a href="Ch06.html#cb254-26" tabindex="-1"></a></span>
<span id="cb254-27"><a href="Ch06.html#cb254-27" tabindex="-1"></a><span class="co"># FarmlandCrops_RapeseedsWinter_r3000.tif   egv_213</span></span>
<span id="cb254-28"><a href="Ch06.html#cb254-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_r3000.tif&quot;</span>)</span>
<span id="cb254-29"><a href="Ch06.html#cb254-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_213&quot;</span></span>
<span id="cb254-30"><a href="Ch06.html#cb254-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb254-31"><a href="Ch06.html#cb254-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb254-32"><a href="Ch06.html#cb254-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_r3000.tif&quot;</span>,</span>
<span id="cb254-33"><a href="Ch06.html#cb254-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb254-34"><a href="Ch06.html#cb254-34" tabindex="-1"></a></span>
<span id="cb254-35"><a href="Ch06.html#cb254-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb254-36"><a href="Ch06.html#cb254-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb254-37"><a href="Ch06.html#cb254-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb254-38"><a href="Ch06.html#cb254-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb254-39"><a href="Ch06.html#cb254-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb254-40"><a href="Ch06.html#cb254-40" tabindex="-1"></a></span>
<span id="cb254-41"><a href="Ch06.html#cb254-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_RapeseedsWinter_r3000.tif&quot;</span></span>
<span id="cb254-42"><a href="Ch06.html#cb254-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb254-43"><a href="Ch06.html#cb254-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb254-44"><a href="Ch06.html#cb254-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb254-45"><a href="Ch06.html#cb254-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb254-46"><a href="Ch06.html#cb254-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb254-47"><a href="Ch06.html#cb254-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb254-48"><a href="Ch06.html#cb254-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb254-49"><a href="Ch06.html#cb254-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb254-50"><a href="Ch06.html#cb254-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb254-51"><a href="Ch06.html#cb254-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb254-52"><a href="Ch06.html#cb254-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb254-53"><a href="Ch06.html#cb254-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_213.png" width="100%" /></p>
</div>
<div id="ch06.214" class="section level2 hasAnchor" number="6.214">
<h2><span class="header-section-number">6.214</span> FarmlandCrops_RapeseedsWinter_r10000<a href="Ch06.html#ch06.214" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandCrops_RapeseedsWinter_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_214</code></p>
<p><strong>English name:</strong> Fractional cover of Winter Rapeseed, Turnip within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Ziemas rapša, ripša platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.210">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="Ch06.html#cb255-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb255-2"><a href="Ch06.html#cb255-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb255-3"><a href="Ch06.html#cb255-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb255-4"><a href="Ch06.html#cb255-4" tabindex="-1"></a></span>
<span id="cb255-5"><a href="Ch06.html#cb255-5" tabindex="-1"></a></span>
<span id="cb255-6"><a href="Ch06.html#cb255-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb255-7"><a href="Ch06.html#cb255-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb255-8"><a href="Ch06.html#cb255-8" tabindex="-1"></a></span>
<span id="cb255-9"><a href="Ch06.html#cb255-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb255-10"><a href="Ch06.html#cb255-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb255-11"><a href="Ch06.html#cb255-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb255-12"><a href="Ch06.html#cb255-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb255-13"><a href="Ch06.html#cb255-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb255-14"><a href="Ch06.html#cb255-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb255-15"><a href="Ch06.html#cb255-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_cell.tif&quot;</span>),</span>
<span id="cb255-16"><a href="Ch06.html#cb255-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandCrops_RapeseedsWinter&quot;</span>),</span>
<span id="cb255-17"><a href="Ch06.html#cb255-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb255-18"><a href="Ch06.html#cb255-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb255-19"><a href="Ch06.html#cb255-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb255-20"><a href="Ch06.html#cb255-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb255-21"><a href="Ch06.html#cb255-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb255-22"><a href="Ch06.html#cb255-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb255-23"><a href="Ch06.html#cb255-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb255-24"><a href="Ch06.html#cb255-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb255-25"><a href="Ch06.html#cb255-25" tabindex="-1"></a></span>
<span id="cb255-26"><a href="Ch06.html#cb255-26" tabindex="-1"></a></span>
<span id="cb255-27"><a href="Ch06.html#cb255-27" tabindex="-1"></a><span class="co"># FarmlandCrops_RapeseedsWinter_r10000.tif  egv_214</span></span>
<span id="cb255-28"><a href="Ch06.html#cb255-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_r10000.tif&quot;</span>)</span>
<span id="cb255-29"><a href="Ch06.html#cb255-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_214&quot;</span></span>
<span id="cb255-30"><a href="Ch06.html#cb255-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb255-31"><a href="Ch06.html#cb255-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb255-32"><a href="Ch06.html#cb255-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandCrops_RapeseedsWinter_r10000.tif&quot;</span>,</span>
<span id="cb255-33"><a href="Ch06.html#cb255-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb255-34"><a href="Ch06.html#cb255-34" tabindex="-1"></a></span>
<span id="cb255-35"><a href="Ch06.html#cb255-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb255-36"><a href="Ch06.html#cb255-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb255-37"><a href="Ch06.html#cb255-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb255-38"><a href="Ch06.html#cb255-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb255-39"><a href="Ch06.html#cb255-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb255-40"><a href="Ch06.html#cb255-40" tabindex="-1"></a></span>
<span id="cb255-41"><a href="Ch06.html#cb255-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandCrops_RapeseedsWinter_r10000.tif&quot;</span></span>
<span id="cb255-42"><a href="Ch06.html#cb255-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb255-43"><a href="Ch06.html#cb255-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb255-44"><a href="Ch06.html#cb255-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb255-45"><a href="Ch06.html#cb255-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb255-46"><a href="Ch06.html#cb255-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb255-47"><a href="Ch06.html#cb255-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb255-48"><a href="Ch06.html#cb255-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb255-49"><a href="Ch06.html#cb255-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb255-50"><a href="Ch06.html#cb255-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb255-51"><a href="Ch06.html#cb255-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb255-52"><a href="Ch06.html#cb255-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb255-53"><a href="Ch06.html#cb255-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_214.png" width="100%" /></p>
</div>
<div id="ch06.215" class="section level2 hasAnchor" number="6.215">
<h2><span class="header-section-number">6.215</span> FarmlandGrassland_GrasslandsAbandoned_cell<a href="Ch06.html#ch06.215" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsAbandoned_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_215</code></p>
<p><strong>English name:</strong> Fractional cover of Abandoned Grassland within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Neapsaimniekotu zālāju platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, grasslands from <a href="Ch05.html#Ch05.03">Landscape classification</a> were selected (value 330 reclassified to
value 1, others as NA). Then agricultural parcels declared as grasslands were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>. Then cells with
grasslands in <a href="Ch05.html#Ch05.03">Landscape classification</a> but not in <a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a> were selected and matched to input layer.
Once matched, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During aggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="Ch06.html#cb256-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb256-2"><a href="Ch06.html#cb256-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb256-3"><a href="Ch06.html#cb256-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb256-4"><a href="Ch06.html#cb256-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb256-5"><a href="Ch06.html#cb256-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb256-6"><a href="Ch06.html#cb256-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb256-7"><a href="Ch06.html#cb256-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb256-8"><a href="Ch06.html#cb256-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb256-9"><a href="Ch06.html#cb256-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb256-10"><a href="Ch06.html#cb256-10" tabindex="-1"></a></span>
<span id="cb256-11"><a href="Ch06.html#cb256-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb256-12"><a href="Ch06.html#cb256-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb256-13"><a href="Ch06.html#cb256-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb256-14"><a href="Ch06.html#cb256-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb256-15"><a href="Ch06.html#cb256-15" tabindex="-1"></a></span>
<span id="cb256-16"><a href="Ch06.html#cb256-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb256-17"><a href="Ch06.html#cb256-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb256-18"><a href="Ch06.html#cb256-18" tabindex="-1"></a></span>
<span id="cb256-19"><a href="Ch06.html#cb256-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb256-20"><a href="Ch06.html#cb256-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb256-21"><a href="Ch06.html#cb256-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb256-22"><a href="Ch06.html#cb256-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb256-23"><a href="Ch06.html#cb256-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb256-24"><a href="Ch06.html#cb256-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb256-25"><a href="Ch06.html#cb256-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb256-26"><a href="Ch06.html#cb256-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb256-27"><a href="Ch06.html#cb256-27" tabindex="-1"></a></span>
<span id="cb256-28"><a href="Ch06.html#cb256-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb256-29"><a href="Ch06.html#cb256-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb256-30"><a href="Ch06.html#cb256-30" tabindex="-1"></a></span>
<span id="cb256-31"><a href="Ch06.html#cb256-31" tabindex="-1"></a></span>
<span id="cb256-32"><a href="Ch06.html#cb256-32" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsAbandoned_cell.tif    egv_215 ----</span></span>
<span id="cb256-33"><a href="Ch06.html#cb256-33" tabindex="-1"></a>landscape_grasslands<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">330</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb256-34"><a href="Ch06.html#cb256-34" tabindex="-1"></a></span>
<span id="cb256-35"><a href="Ch06.html#cb256-35" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb256-36"><a href="Ch06.html#cb256-36" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(SDM_grupa_sakums,<span class="st">&quot;zālāji&quot;</span>))</span>
<span id="cb256-37"><a href="Ch06.html#cb256-37" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb256-38"><a href="Ch06.html#cb256-38" tabindex="-1"></a></span>
<span id="cb256-39"><a href="Ch06.html#cb256-39" tabindex="-1"></a>lad_zalajiem<span class="ot">=</span><span class="fu">fasterize</span>(dati,rastrs10,<span class="at">field=</span><span class="st">&quot;yes&quot;</span>,<span class="at">fun=</span><span class="st">&quot;first&quot;</span>)</span>
<span id="cb256-40"><a href="Ch06.html#cb256-40" tabindex="-1"></a>lad_zalaji<span class="ot">=</span><span class="fu">rast</span>(lad_zalajiem)</span>
<span id="cb256-41"><a href="Ch06.html#cb256-41" tabindex="-1"></a></span>
<span id="cb256-42"><a href="Ch06.html#cb256-42" tabindex="-1"></a>abandoned<span class="ot">=</span><span class="fu">ifel</span>(landscape_grasslands<span class="sc">==</span><span class="dv">1</span><span class="sc">&amp;</span><span class="fu">is.na</span>(lad_zalaji),<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb256-43"><a href="Ch06.html#cb256-43" tabindex="-1"></a><span class="fu">plot</span>(abandoned)</span>
<span id="cb256-44"><a href="Ch06.html#cb256-44" tabindex="-1"></a></span>
<span id="cb256-45"><a href="Ch06.html#cb256-45" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span>abandoned,</span>
<span id="cb256-46"><a href="Ch06.html#cb256-46" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb256-47"><a href="Ch06.html#cb256-47" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb256-48"><a href="Ch06.html#cb256-48" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb256-49"><a href="Ch06.html#cb256-49" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb256-50"><a href="Ch06.html#cb256-50" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandGrassland_GrasslandsAbandoned_cell.tif&quot;</span>,</span>
<span id="cb256-51"><a href="Ch06.html#cb256-51" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_215&quot;</span>,</span>
<span id="cb256-52"><a href="Ch06.html#cb256-52" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb256-53"><a href="Ch06.html#cb256-53" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb256-54"><a href="Ch06.html#cb256-54" tabindex="-1"></a>i2e_rez</span>
<span id="cb256-55"><a href="Ch06.html#cb256-55" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb256-56"><a href="Ch06.html#cb256-56" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb256-57"><a href="Ch06.html#cb256-57" tabindex="-1"></a><span class="fu">rm</span>(lad_zalajiem)</span>
<span id="cb256-58"><a href="Ch06.html#cb256-58" tabindex="-1"></a><span class="fu">rm</span>(lad_zalaji)</span>
<span id="cb256-59"><a href="Ch06.html#cb256-59" tabindex="-1"></a></span>
<span id="cb256-60"><a href="Ch06.html#cb256-60" tabindex="-1"></a></span>
<span id="cb256-61"><a href="Ch06.html#cb256-61" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb256-62"><a href="Ch06.html#cb256-62" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb256-63"><a href="Ch06.html#cb256-63" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb256-64"><a href="Ch06.html#cb256-64" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb256-65"><a href="Ch06.html#cb256-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb256-66"><a href="Ch06.html#cb256-66" tabindex="-1"></a></span>
<span id="cb256-67"><a href="Ch06.html#cb256-67" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsAbandoned_cell.tif&quot;</span></span>
<span id="cb256-68"><a href="Ch06.html#cb256-68" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb256-69"><a href="Ch06.html#cb256-69" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb256-70"><a href="Ch06.html#cb256-70" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb256-71"><a href="Ch06.html#cb256-71" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb256-72"><a href="Ch06.html#cb256-72" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb256-73"><a href="Ch06.html#cb256-73" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb256-74"><a href="Ch06.html#cb256-74" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb256-75"><a href="Ch06.html#cb256-75" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb256-76"><a href="Ch06.html#cb256-76" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb256-77"><a href="Ch06.html#cb256-77" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb256-78"><a href="Ch06.html#cb256-78" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb256-79"><a href="Ch06.html#cb256-79" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_215.png" width="100%" /></p>
</div>
<div id="ch06.216" class="section level2 hasAnchor" number="6.216">
<h2><span class="header-section-number">6.216</span> FarmlandGrassland_GrasslandsAbandoned_r500<a href="Ch06.html#ch06.216" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsAbandoned_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_216</code></p>
<p><strong>English name:</strong> Fractional cover of Abandoned Grassland within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Neapsaimniekotu zālāju platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.215">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="Ch06.html#cb257-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb257-2"><a href="Ch06.html#cb257-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb257-3"><a href="Ch06.html#cb257-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb257-4"><a href="Ch06.html#cb257-4" tabindex="-1"></a></span>
<span id="cb257-5"><a href="Ch06.html#cb257-5" tabindex="-1"></a></span>
<span id="cb257-6"><a href="Ch06.html#cb257-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb257-7"><a href="Ch06.html#cb257-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb257-8"><a href="Ch06.html#cb257-8" tabindex="-1"></a></span>
<span id="cb257-9"><a href="Ch06.html#cb257-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb257-10"><a href="Ch06.html#cb257-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb257-11"><a href="Ch06.html#cb257-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb257-12"><a href="Ch06.html#cb257-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb257-13"><a href="Ch06.html#cb257-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb257-14"><a href="Ch06.html#cb257-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb257-15"><a href="Ch06.html#cb257-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_cell.tif&quot;</span>),</span>
<span id="cb257-16"><a href="Ch06.html#cb257-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsAbandoned&quot;</span>),</span>
<span id="cb257-17"><a href="Ch06.html#cb257-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb257-18"><a href="Ch06.html#cb257-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb257-19"><a href="Ch06.html#cb257-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb257-20"><a href="Ch06.html#cb257-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb257-21"><a href="Ch06.html#cb257-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb257-22"><a href="Ch06.html#cb257-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb257-23"><a href="Ch06.html#cb257-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb257-24"><a href="Ch06.html#cb257-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb257-25"><a href="Ch06.html#cb257-25" tabindex="-1"></a></span>
<span id="cb257-26"><a href="Ch06.html#cb257-26" tabindex="-1"></a></span>
<span id="cb257-27"><a href="Ch06.html#cb257-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsAbandoned_r500.tif    egv_216</span></span>
<span id="cb257-28"><a href="Ch06.html#cb257-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_r500.tif&quot;</span>)</span>
<span id="cb257-29"><a href="Ch06.html#cb257-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_216&quot;</span></span>
<span id="cb257-30"><a href="Ch06.html#cb257-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb257-31"><a href="Ch06.html#cb257-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb257-32"><a href="Ch06.html#cb257-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_r500.tif&quot;</span>,</span>
<span id="cb257-33"><a href="Ch06.html#cb257-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb257-34"><a href="Ch06.html#cb257-34" tabindex="-1"></a></span>
<span id="cb257-35"><a href="Ch06.html#cb257-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb257-36"><a href="Ch06.html#cb257-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb257-37"><a href="Ch06.html#cb257-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb257-38"><a href="Ch06.html#cb257-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb257-39"><a href="Ch06.html#cb257-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb257-40"><a href="Ch06.html#cb257-40" tabindex="-1"></a></span>
<span id="cb257-41"><a href="Ch06.html#cb257-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsAbandoned_r500.tif&quot;</span></span>
<span id="cb257-42"><a href="Ch06.html#cb257-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb257-43"><a href="Ch06.html#cb257-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb257-44"><a href="Ch06.html#cb257-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb257-45"><a href="Ch06.html#cb257-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb257-46"><a href="Ch06.html#cb257-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb257-47"><a href="Ch06.html#cb257-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb257-48"><a href="Ch06.html#cb257-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb257-49"><a href="Ch06.html#cb257-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb257-50"><a href="Ch06.html#cb257-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb257-51"><a href="Ch06.html#cb257-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb257-52"><a href="Ch06.html#cb257-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb257-53"><a href="Ch06.html#cb257-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_216.png" width="100%" /></p>
</div>
<div id="ch06.217" class="section level2 hasAnchor" number="6.217">
<h2><span class="header-section-number">6.217</span> FarmlandGrassland_GrasslandsAbandoned_r1250<a href="Ch06.html#ch06.217" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsAbandoned_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_217</code></p>
<p><strong>English name:</strong> Fractional cover of Abandoned Grassland within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Neapsaimniekotu zālāju platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.215">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="Ch06.html#cb258-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb258-2"><a href="Ch06.html#cb258-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb258-3"><a href="Ch06.html#cb258-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb258-4"><a href="Ch06.html#cb258-4" tabindex="-1"></a></span>
<span id="cb258-5"><a href="Ch06.html#cb258-5" tabindex="-1"></a></span>
<span id="cb258-6"><a href="Ch06.html#cb258-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb258-7"><a href="Ch06.html#cb258-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb258-8"><a href="Ch06.html#cb258-8" tabindex="-1"></a></span>
<span id="cb258-9"><a href="Ch06.html#cb258-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb258-10"><a href="Ch06.html#cb258-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb258-11"><a href="Ch06.html#cb258-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb258-12"><a href="Ch06.html#cb258-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb258-13"><a href="Ch06.html#cb258-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb258-14"><a href="Ch06.html#cb258-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb258-15"><a href="Ch06.html#cb258-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_cell.tif&quot;</span>),</span>
<span id="cb258-16"><a href="Ch06.html#cb258-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsAbandoned&quot;</span>),</span>
<span id="cb258-17"><a href="Ch06.html#cb258-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb258-18"><a href="Ch06.html#cb258-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb258-19"><a href="Ch06.html#cb258-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb258-20"><a href="Ch06.html#cb258-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb258-21"><a href="Ch06.html#cb258-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb258-22"><a href="Ch06.html#cb258-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb258-23"><a href="Ch06.html#cb258-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb258-24"><a href="Ch06.html#cb258-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb258-25"><a href="Ch06.html#cb258-25" tabindex="-1"></a></span>
<span id="cb258-26"><a href="Ch06.html#cb258-26" tabindex="-1"></a></span>
<span id="cb258-27"><a href="Ch06.html#cb258-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsAbandoned_r1250.tif   egv_217</span></span>
<span id="cb258-28"><a href="Ch06.html#cb258-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_r1250.tif&quot;</span>)</span>
<span id="cb258-29"><a href="Ch06.html#cb258-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_217&quot;</span></span>
<span id="cb258-30"><a href="Ch06.html#cb258-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb258-31"><a href="Ch06.html#cb258-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb258-32"><a href="Ch06.html#cb258-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_r1250.tif&quot;</span>,</span>
<span id="cb258-33"><a href="Ch06.html#cb258-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb258-34"><a href="Ch06.html#cb258-34" tabindex="-1"></a></span>
<span id="cb258-35"><a href="Ch06.html#cb258-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb258-36"><a href="Ch06.html#cb258-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb258-37"><a href="Ch06.html#cb258-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb258-38"><a href="Ch06.html#cb258-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb258-39"><a href="Ch06.html#cb258-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb258-40"><a href="Ch06.html#cb258-40" tabindex="-1"></a></span>
<span id="cb258-41"><a href="Ch06.html#cb258-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsAbandoned_r1250.tif&quot;</span></span>
<span id="cb258-42"><a href="Ch06.html#cb258-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb258-43"><a href="Ch06.html#cb258-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb258-44"><a href="Ch06.html#cb258-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb258-45"><a href="Ch06.html#cb258-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb258-46"><a href="Ch06.html#cb258-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb258-47"><a href="Ch06.html#cb258-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb258-48"><a href="Ch06.html#cb258-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb258-49"><a href="Ch06.html#cb258-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb258-50"><a href="Ch06.html#cb258-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb258-51"><a href="Ch06.html#cb258-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb258-52"><a href="Ch06.html#cb258-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb258-53"><a href="Ch06.html#cb258-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_217.png" width="100%" /></p>
</div>
<div id="ch06.218" class="section level2 hasAnchor" number="6.218">
<h2><span class="header-section-number">6.218</span> FarmlandGrassland_GrasslandsAbandoned_r3000<a href="Ch06.html#ch06.218" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsAbandoned_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_218</code></p>
<p><strong>English name:</strong> Fractional cover of Abandoned Grassland within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Neapsaimniekotu zālāju platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.215">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="Ch06.html#cb259-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb259-2"><a href="Ch06.html#cb259-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb259-3"><a href="Ch06.html#cb259-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb259-4"><a href="Ch06.html#cb259-4" tabindex="-1"></a></span>
<span id="cb259-5"><a href="Ch06.html#cb259-5" tabindex="-1"></a></span>
<span id="cb259-6"><a href="Ch06.html#cb259-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb259-7"><a href="Ch06.html#cb259-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb259-8"><a href="Ch06.html#cb259-8" tabindex="-1"></a></span>
<span id="cb259-9"><a href="Ch06.html#cb259-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb259-10"><a href="Ch06.html#cb259-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb259-11"><a href="Ch06.html#cb259-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb259-12"><a href="Ch06.html#cb259-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb259-13"><a href="Ch06.html#cb259-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb259-14"><a href="Ch06.html#cb259-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb259-15"><a href="Ch06.html#cb259-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_cell.tif&quot;</span>),</span>
<span id="cb259-16"><a href="Ch06.html#cb259-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsAbandoned&quot;</span>),</span>
<span id="cb259-17"><a href="Ch06.html#cb259-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb259-18"><a href="Ch06.html#cb259-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb259-19"><a href="Ch06.html#cb259-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb259-20"><a href="Ch06.html#cb259-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb259-21"><a href="Ch06.html#cb259-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb259-22"><a href="Ch06.html#cb259-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb259-23"><a href="Ch06.html#cb259-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb259-24"><a href="Ch06.html#cb259-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb259-25"><a href="Ch06.html#cb259-25" tabindex="-1"></a></span>
<span id="cb259-26"><a href="Ch06.html#cb259-26" tabindex="-1"></a></span>
<span id="cb259-27"><a href="Ch06.html#cb259-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsAbandoned_r3000.tif   egv_218</span></span>
<span id="cb259-28"><a href="Ch06.html#cb259-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_r3000.tif&quot;</span>)</span>
<span id="cb259-29"><a href="Ch06.html#cb259-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_218&quot;</span></span>
<span id="cb259-30"><a href="Ch06.html#cb259-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb259-31"><a href="Ch06.html#cb259-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb259-32"><a href="Ch06.html#cb259-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_r3000.tif&quot;</span>,</span>
<span id="cb259-33"><a href="Ch06.html#cb259-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb259-34"><a href="Ch06.html#cb259-34" tabindex="-1"></a></span>
<span id="cb259-35"><a href="Ch06.html#cb259-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb259-36"><a href="Ch06.html#cb259-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb259-37"><a href="Ch06.html#cb259-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb259-38"><a href="Ch06.html#cb259-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb259-39"><a href="Ch06.html#cb259-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb259-40"><a href="Ch06.html#cb259-40" tabindex="-1"></a></span>
<span id="cb259-41"><a href="Ch06.html#cb259-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsAbandoned_r3000.tif&quot;</span></span>
<span id="cb259-42"><a href="Ch06.html#cb259-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb259-43"><a href="Ch06.html#cb259-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb259-44"><a href="Ch06.html#cb259-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb259-45"><a href="Ch06.html#cb259-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb259-46"><a href="Ch06.html#cb259-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb259-47"><a href="Ch06.html#cb259-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb259-48"><a href="Ch06.html#cb259-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb259-49"><a href="Ch06.html#cb259-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb259-50"><a href="Ch06.html#cb259-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb259-51"><a href="Ch06.html#cb259-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb259-52"><a href="Ch06.html#cb259-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb259-53"><a href="Ch06.html#cb259-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_218.png" width="100%" /></p>
</div>
<div id="ch06.219" class="section level2 hasAnchor" number="6.219">
<h2><span class="header-section-number">6.219</span> FarmlandGrassland_GrasslandsAbandoned_r10000<a href="Ch06.html#ch06.219" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsAbandoned_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_219</code></p>
<p><strong>English name:</strong> Fractional cover of Abandoned Grassland within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Neapsaimniekotu zālāju platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.215">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="Ch06.html#cb260-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb260-2"><a href="Ch06.html#cb260-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb260-3"><a href="Ch06.html#cb260-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb260-4"><a href="Ch06.html#cb260-4" tabindex="-1"></a></span>
<span id="cb260-5"><a href="Ch06.html#cb260-5" tabindex="-1"></a></span>
<span id="cb260-6"><a href="Ch06.html#cb260-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb260-7"><a href="Ch06.html#cb260-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb260-8"><a href="Ch06.html#cb260-8" tabindex="-1"></a></span>
<span id="cb260-9"><a href="Ch06.html#cb260-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb260-10"><a href="Ch06.html#cb260-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb260-11"><a href="Ch06.html#cb260-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb260-12"><a href="Ch06.html#cb260-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb260-13"><a href="Ch06.html#cb260-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb260-14"><a href="Ch06.html#cb260-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb260-15"><a href="Ch06.html#cb260-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_cell.tif&quot;</span>),</span>
<span id="cb260-16"><a href="Ch06.html#cb260-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsAbandoned&quot;</span>),</span>
<span id="cb260-17"><a href="Ch06.html#cb260-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb260-18"><a href="Ch06.html#cb260-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb260-19"><a href="Ch06.html#cb260-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb260-20"><a href="Ch06.html#cb260-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb260-21"><a href="Ch06.html#cb260-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb260-22"><a href="Ch06.html#cb260-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb260-23"><a href="Ch06.html#cb260-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb260-24"><a href="Ch06.html#cb260-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb260-25"><a href="Ch06.html#cb260-25" tabindex="-1"></a></span>
<span id="cb260-26"><a href="Ch06.html#cb260-26" tabindex="-1"></a></span>
<span id="cb260-27"><a href="Ch06.html#cb260-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsAbandoned_r10000.tif  egv_219</span></span>
<span id="cb260-28"><a href="Ch06.html#cb260-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_r10000.tif&quot;</span>)</span>
<span id="cb260-29"><a href="Ch06.html#cb260-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_219&quot;</span></span>
<span id="cb260-30"><a href="Ch06.html#cb260-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb260-31"><a href="Ch06.html#cb260-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb260-32"><a href="Ch06.html#cb260-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAbandoned_r10000.tif&quot;</span>,</span>
<span id="cb260-33"><a href="Ch06.html#cb260-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb260-34"><a href="Ch06.html#cb260-34" tabindex="-1"></a></span>
<span id="cb260-35"><a href="Ch06.html#cb260-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb260-36"><a href="Ch06.html#cb260-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb260-37"><a href="Ch06.html#cb260-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb260-38"><a href="Ch06.html#cb260-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb260-39"><a href="Ch06.html#cb260-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb260-40"><a href="Ch06.html#cb260-40" tabindex="-1"></a></span>
<span id="cb260-41"><a href="Ch06.html#cb260-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsAbandoned_r10000.tif&quot;</span></span>
<span id="cb260-42"><a href="Ch06.html#cb260-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb260-43"><a href="Ch06.html#cb260-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb260-44"><a href="Ch06.html#cb260-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb260-45"><a href="Ch06.html#cb260-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb260-46"><a href="Ch06.html#cb260-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb260-47"><a href="Ch06.html#cb260-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb260-48"><a href="Ch06.html#cb260-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb260-49"><a href="Ch06.html#cb260-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb260-50"><a href="Ch06.html#cb260-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb260-51"><a href="Ch06.html#cb260-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb260-52"><a href="Ch06.html#cb260-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb260-53"><a href="Ch06.html#cb260-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_219.png" width="100%" /></p>
</div>
<div id="ch06.220" class="section level2 hasAnchor" number="6.220">
<h2><span class="header-section-number">6.220</span> FarmlandGrassland_GrasslandsAll_cell<a href="Ch06.html#ch06.220" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsAll_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_220</code></p>
<p><strong>English name:</strong> Fractional cover of any Grassland within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Zālāju (visu veidu) platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, grasslands from <a href="Ch05.html#Ch05.03">Landscape classification</a> were selected (value 330 reclassified to
value 1, others as NA).
Once selected, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="Ch06.html#cb261-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb261-2"><a href="Ch06.html#cb261-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb261-3"><a href="Ch06.html#cb261-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb261-4"><a href="Ch06.html#cb261-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb261-5"><a href="Ch06.html#cb261-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb261-6"><a href="Ch06.html#cb261-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb261-7"><a href="Ch06.html#cb261-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb261-8"><a href="Ch06.html#cb261-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb261-9"><a href="Ch06.html#cb261-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb261-10"><a href="Ch06.html#cb261-10" tabindex="-1"></a></span>
<span id="cb261-11"><a href="Ch06.html#cb261-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb261-12"><a href="Ch06.html#cb261-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb261-13"><a href="Ch06.html#cb261-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb261-14"><a href="Ch06.html#cb261-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb261-15"><a href="Ch06.html#cb261-15" tabindex="-1"></a></span>
<span id="cb261-16"><a href="Ch06.html#cb261-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb261-17"><a href="Ch06.html#cb261-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb261-18"><a href="Ch06.html#cb261-18" tabindex="-1"></a></span>
<span id="cb261-19"><a href="Ch06.html#cb261-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb261-20"><a href="Ch06.html#cb261-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb261-21"><a href="Ch06.html#cb261-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb261-22"><a href="Ch06.html#cb261-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb261-23"><a href="Ch06.html#cb261-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb261-24"><a href="Ch06.html#cb261-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb261-25"><a href="Ch06.html#cb261-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb261-26"><a href="Ch06.html#cb261-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb261-27"><a href="Ch06.html#cb261-27" tabindex="-1"></a></span>
<span id="cb261-28"><a href="Ch06.html#cb261-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb261-29"><a href="Ch06.html#cb261-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb261-30"><a href="Ch06.html#cb261-30" tabindex="-1"></a></span>
<span id="cb261-31"><a href="Ch06.html#cb261-31" tabindex="-1"></a></span>
<span id="cb261-32"><a href="Ch06.html#cb261-32" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsAll_cell.tif  egv_220 ----</span></span>
<span id="cb261-33"><a href="Ch06.html#cb261-33" tabindex="-1"></a>landscape_grasslands<span class="ot">=</span><span class="fu">ifel</span>(simple_landscape<span class="sc">==</span><span class="dv">330</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb261-34"><a href="Ch06.html#cb261-34" tabindex="-1"></a></span>
<span id="cb261-35"><a href="Ch06.html#cb261-35" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span>landscape_grasslands,</span>
<span id="cb261-36"><a href="Ch06.html#cb261-36" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb261-37"><a href="Ch06.html#cb261-37" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb261-38"><a href="Ch06.html#cb261-38" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb261-39"><a href="Ch06.html#cb261-39" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb261-40"><a href="Ch06.html#cb261-40" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandGrassland_GrasslandsAll_cell.tif&quot;</span>,</span>
<span id="cb261-41"><a href="Ch06.html#cb261-41" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_220&quot;</span>,</span>
<span id="cb261-42"><a href="Ch06.html#cb261-42" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb261-43"><a href="Ch06.html#cb261-43" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-44"><a href="Ch06.html#cb261-44" tabindex="-1"></a>i2e_rez</span>
<span id="cb261-45"><a href="Ch06.html#cb261-45" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb261-46"><a href="Ch06.html#cb261-46" tabindex="-1"></a><span class="fu">rm</span>(landscape_grasslands)</span>
<span id="cb261-47"><a href="Ch06.html#cb261-47" tabindex="-1"></a></span>
<span id="cb261-48"><a href="Ch06.html#cb261-48" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb261-49"><a href="Ch06.html#cb261-49" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb261-50"><a href="Ch06.html#cb261-50" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb261-51"><a href="Ch06.html#cb261-51" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb261-52"><a href="Ch06.html#cb261-52" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb261-53"><a href="Ch06.html#cb261-53" tabindex="-1"></a></span>
<span id="cb261-54"><a href="Ch06.html#cb261-54" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsAll_cell.tif&quot;</span></span>
<span id="cb261-55"><a href="Ch06.html#cb261-55" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb261-56"><a href="Ch06.html#cb261-56" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb261-57"><a href="Ch06.html#cb261-57" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb261-58"><a href="Ch06.html#cb261-58" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb261-59"><a href="Ch06.html#cb261-59" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb261-60"><a href="Ch06.html#cb261-60" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb261-61"><a href="Ch06.html#cb261-61" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb261-62"><a href="Ch06.html#cb261-62" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb261-63"><a href="Ch06.html#cb261-63" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb261-64"><a href="Ch06.html#cb261-64" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb261-65"><a href="Ch06.html#cb261-65" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb261-66"><a href="Ch06.html#cb261-66" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_220.png" width="100%" /></p>
</div>
<div id="ch06.221" class="section level2 hasAnchor" number="6.221">
<h2><span class="header-section-number">6.221</span> FarmlandGrassland_GrasslandsAll_r500<a href="Ch06.html#ch06.221" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsAll_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_221</code></p>
<p><strong>English name:</strong> Fractional cover of any Grassland within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju (visu veidu) platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.220">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="Ch06.html#cb262-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb262-2"><a href="Ch06.html#cb262-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb262-3"><a href="Ch06.html#cb262-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb262-4"><a href="Ch06.html#cb262-4" tabindex="-1"></a></span>
<span id="cb262-5"><a href="Ch06.html#cb262-5" tabindex="-1"></a></span>
<span id="cb262-6"><a href="Ch06.html#cb262-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb262-7"><a href="Ch06.html#cb262-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb262-8"><a href="Ch06.html#cb262-8" tabindex="-1"></a></span>
<span id="cb262-9"><a href="Ch06.html#cb262-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb262-10"><a href="Ch06.html#cb262-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb262-11"><a href="Ch06.html#cb262-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb262-12"><a href="Ch06.html#cb262-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb262-13"><a href="Ch06.html#cb262-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb262-14"><a href="Ch06.html#cb262-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb262-15"><a href="Ch06.html#cb262-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_cell.tif&quot;</span>),</span>
<span id="cb262-16"><a href="Ch06.html#cb262-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsAll&quot;</span>),</span>
<span id="cb262-17"><a href="Ch06.html#cb262-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb262-18"><a href="Ch06.html#cb262-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb262-19"><a href="Ch06.html#cb262-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb262-20"><a href="Ch06.html#cb262-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb262-21"><a href="Ch06.html#cb262-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb262-22"><a href="Ch06.html#cb262-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb262-23"><a href="Ch06.html#cb262-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb262-24"><a href="Ch06.html#cb262-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb262-25"><a href="Ch06.html#cb262-25" tabindex="-1"></a></span>
<span id="cb262-26"><a href="Ch06.html#cb262-26" tabindex="-1"></a></span>
<span id="cb262-27"><a href="Ch06.html#cb262-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsAll_r500.tif  egv_221</span></span>
<span id="cb262-28"><a href="Ch06.html#cb262-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_r500.tif&quot;</span>)</span>
<span id="cb262-29"><a href="Ch06.html#cb262-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_221&quot;</span></span>
<span id="cb262-30"><a href="Ch06.html#cb262-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb262-31"><a href="Ch06.html#cb262-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb262-32"><a href="Ch06.html#cb262-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_r500.tif&quot;</span>,</span>
<span id="cb262-33"><a href="Ch06.html#cb262-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb262-34"><a href="Ch06.html#cb262-34" tabindex="-1"></a></span>
<span id="cb262-35"><a href="Ch06.html#cb262-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb262-36"><a href="Ch06.html#cb262-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb262-37"><a href="Ch06.html#cb262-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb262-38"><a href="Ch06.html#cb262-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb262-39"><a href="Ch06.html#cb262-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb262-40"><a href="Ch06.html#cb262-40" tabindex="-1"></a></span>
<span id="cb262-41"><a href="Ch06.html#cb262-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsAll_r500.tif&quot;</span></span>
<span id="cb262-42"><a href="Ch06.html#cb262-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb262-43"><a href="Ch06.html#cb262-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb262-44"><a href="Ch06.html#cb262-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb262-45"><a href="Ch06.html#cb262-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb262-46"><a href="Ch06.html#cb262-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb262-47"><a href="Ch06.html#cb262-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb262-48"><a href="Ch06.html#cb262-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb262-49"><a href="Ch06.html#cb262-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb262-50"><a href="Ch06.html#cb262-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb262-51"><a href="Ch06.html#cb262-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb262-52"><a href="Ch06.html#cb262-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb262-53"><a href="Ch06.html#cb262-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_221.png" width="100%" /></p>
</div>
<div id="ch06.222" class="section level2 hasAnchor" number="6.222">
<h2><span class="header-section-number">6.222</span> FarmlandGrassland_GrasslandsAll_r1250<a href="Ch06.html#ch06.222" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsAll_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_222</code></p>
<p><strong>English name:</strong> Fractional cover of any Grassland within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju (visu veidu) platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.220">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="Ch06.html#cb263-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb263-2"><a href="Ch06.html#cb263-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb263-3"><a href="Ch06.html#cb263-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb263-4"><a href="Ch06.html#cb263-4" tabindex="-1"></a></span>
<span id="cb263-5"><a href="Ch06.html#cb263-5" tabindex="-1"></a></span>
<span id="cb263-6"><a href="Ch06.html#cb263-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb263-7"><a href="Ch06.html#cb263-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb263-8"><a href="Ch06.html#cb263-8" tabindex="-1"></a></span>
<span id="cb263-9"><a href="Ch06.html#cb263-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb263-10"><a href="Ch06.html#cb263-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb263-11"><a href="Ch06.html#cb263-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb263-12"><a href="Ch06.html#cb263-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb263-13"><a href="Ch06.html#cb263-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb263-14"><a href="Ch06.html#cb263-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb263-15"><a href="Ch06.html#cb263-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_cell.tif&quot;</span>),</span>
<span id="cb263-16"><a href="Ch06.html#cb263-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsAll&quot;</span>),</span>
<span id="cb263-17"><a href="Ch06.html#cb263-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb263-18"><a href="Ch06.html#cb263-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb263-19"><a href="Ch06.html#cb263-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb263-20"><a href="Ch06.html#cb263-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb263-21"><a href="Ch06.html#cb263-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb263-22"><a href="Ch06.html#cb263-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb263-23"><a href="Ch06.html#cb263-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb263-24"><a href="Ch06.html#cb263-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb263-25"><a href="Ch06.html#cb263-25" tabindex="-1"></a></span>
<span id="cb263-26"><a href="Ch06.html#cb263-26" tabindex="-1"></a></span>
<span id="cb263-27"><a href="Ch06.html#cb263-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsAll_r1250.tif egv_222</span></span>
<span id="cb263-28"><a href="Ch06.html#cb263-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_r1250.tif&quot;</span>)</span>
<span id="cb263-29"><a href="Ch06.html#cb263-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_222&quot;</span></span>
<span id="cb263-30"><a href="Ch06.html#cb263-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb263-31"><a href="Ch06.html#cb263-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb263-32"><a href="Ch06.html#cb263-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_r1250.tif&quot;</span>,</span>
<span id="cb263-33"><a href="Ch06.html#cb263-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb263-34"><a href="Ch06.html#cb263-34" tabindex="-1"></a></span>
<span id="cb263-35"><a href="Ch06.html#cb263-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb263-36"><a href="Ch06.html#cb263-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb263-37"><a href="Ch06.html#cb263-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb263-38"><a href="Ch06.html#cb263-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb263-39"><a href="Ch06.html#cb263-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb263-40"><a href="Ch06.html#cb263-40" tabindex="-1"></a></span>
<span id="cb263-41"><a href="Ch06.html#cb263-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsAll_r1250.tif&quot;</span></span>
<span id="cb263-42"><a href="Ch06.html#cb263-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb263-43"><a href="Ch06.html#cb263-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb263-44"><a href="Ch06.html#cb263-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb263-45"><a href="Ch06.html#cb263-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb263-46"><a href="Ch06.html#cb263-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb263-47"><a href="Ch06.html#cb263-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb263-48"><a href="Ch06.html#cb263-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb263-49"><a href="Ch06.html#cb263-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb263-50"><a href="Ch06.html#cb263-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb263-51"><a href="Ch06.html#cb263-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb263-52"><a href="Ch06.html#cb263-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb263-53"><a href="Ch06.html#cb263-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_222.png" width="100%" /></p>
</div>
<div id="ch06.223" class="section level2 hasAnchor" number="6.223">
<h2><span class="header-section-number">6.223</span> FarmlandGrassland_GrasslandsAll_r3000<a href="Ch06.html#ch06.223" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsAll_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_223</code></p>
<p><strong>English name:</strong> Fractional cover of any Grassland within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju (visu veidu) platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.220">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="Ch06.html#cb264-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb264-2"><a href="Ch06.html#cb264-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb264-3"><a href="Ch06.html#cb264-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb264-4"><a href="Ch06.html#cb264-4" tabindex="-1"></a></span>
<span id="cb264-5"><a href="Ch06.html#cb264-5" tabindex="-1"></a></span>
<span id="cb264-6"><a href="Ch06.html#cb264-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb264-7"><a href="Ch06.html#cb264-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb264-8"><a href="Ch06.html#cb264-8" tabindex="-1"></a></span>
<span id="cb264-9"><a href="Ch06.html#cb264-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb264-10"><a href="Ch06.html#cb264-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb264-11"><a href="Ch06.html#cb264-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb264-12"><a href="Ch06.html#cb264-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb264-13"><a href="Ch06.html#cb264-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb264-14"><a href="Ch06.html#cb264-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb264-15"><a href="Ch06.html#cb264-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_cell.tif&quot;</span>),</span>
<span id="cb264-16"><a href="Ch06.html#cb264-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsAll&quot;</span>),</span>
<span id="cb264-17"><a href="Ch06.html#cb264-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb264-18"><a href="Ch06.html#cb264-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb264-19"><a href="Ch06.html#cb264-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb264-20"><a href="Ch06.html#cb264-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb264-21"><a href="Ch06.html#cb264-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb264-22"><a href="Ch06.html#cb264-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb264-23"><a href="Ch06.html#cb264-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb264-24"><a href="Ch06.html#cb264-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb264-25"><a href="Ch06.html#cb264-25" tabindex="-1"></a></span>
<span id="cb264-26"><a href="Ch06.html#cb264-26" tabindex="-1"></a></span>
<span id="cb264-27"><a href="Ch06.html#cb264-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsAll_r3000.tif egv_223</span></span>
<span id="cb264-28"><a href="Ch06.html#cb264-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_r3000.tif&quot;</span>)</span>
<span id="cb264-29"><a href="Ch06.html#cb264-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_223&quot;</span></span>
<span id="cb264-30"><a href="Ch06.html#cb264-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb264-31"><a href="Ch06.html#cb264-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb264-32"><a href="Ch06.html#cb264-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_r3000.tif&quot;</span>,</span>
<span id="cb264-33"><a href="Ch06.html#cb264-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb264-34"><a href="Ch06.html#cb264-34" tabindex="-1"></a></span>
<span id="cb264-35"><a href="Ch06.html#cb264-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb264-36"><a href="Ch06.html#cb264-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb264-37"><a href="Ch06.html#cb264-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb264-38"><a href="Ch06.html#cb264-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb264-39"><a href="Ch06.html#cb264-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb264-40"><a href="Ch06.html#cb264-40" tabindex="-1"></a></span>
<span id="cb264-41"><a href="Ch06.html#cb264-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsAll_r3000.tif&quot;</span></span>
<span id="cb264-42"><a href="Ch06.html#cb264-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb264-43"><a href="Ch06.html#cb264-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb264-44"><a href="Ch06.html#cb264-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb264-45"><a href="Ch06.html#cb264-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb264-46"><a href="Ch06.html#cb264-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb264-47"><a href="Ch06.html#cb264-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb264-48"><a href="Ch06.html#cb264-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb264-49"><a href="Ch06.html#cb264-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb264-50"><a href="Ch06.html#cb264-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb264-51"><a href="Ch06.html#cb264-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb264-52"><a href="Ch06.html#cb264-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb264-53"><a href="Ch06.html#cb264-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_223.png" width="100%" /></p>
</div>
<div id="ch06.224" class="section level2 hasAnchor" number="6.224">
<h2><span class="header-section-number">6.224</span> FarmlandGrassland_GrasslandsAll_r10000<a href="Ch06.html#ch06.224" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsAll_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_224</code></p>
<p><strong>English name:</strong> Fractional cover of any Grassland within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju (visu veidu) platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.220">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="Ch06.html#cb265-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb265-2"><a href="Ch06.html#cb265-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb265-3"><a href="Ch06.html#cb265-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb265-4"><a href="Ch06.html#cb265-4" tabindex="-1"></a></span>
<span id="cb265-5"><a href="Ch06.html#cb265-5" tabindex="-1"></a></span>
<span id="cb265-6"><a href="Ch06.html#cb265-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb265-7"><a href="Ch06.html#cb265-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb265-8"><a href="Ch06.html#cb265-8" tabindex="-1"></a></span>
<span id="cb265-9"><a href="Ch06.html#cb265-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb265-10"><a href="Ch06.html#cb265-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb265-11"><a href="Ch06.html#cb265-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb265-12"><a href="Ch06.html#cb265-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb265-13"><a href="Ch06.html#cb265-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb265-14"><a href="Ch06.html#cb265-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb265-15"><a href="Ch06.html#cb265-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_cell.tif&quot;</span>),</span>
<span id="cb265-16"><a href="Ch06.html#cb265-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsAll&quot;</span>),</span>
<span id="cb265-17"><a href="Ch06.html#cb265-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb265-18"><a href="Ch06.html#cb265-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb265-19"><a href="Ch06.html#cb265-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb265-20"><a href="Ch06.html#cb265-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb265-21"><a href="Ch06.html#cb265-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb265-22"><a href="Ch06.html#cb265-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb265-23"><a href="Ch06.html#cb265-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb265-24"><a href="Ch06.html#cb265-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb265-25"><a href="Ch06.html#cb265-25" tabindex="-1"></a></span>
<span id="cb265-26"><a href="Ch06.html#cb265-26" tabindex="-1"></a></span>
<span id="cb265-27"><a href="Ch06.html#cb265-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsAll_r10000.tif    egv_224</span></span>
<span id="cb265-28"><a href="Ch06.html#cb265-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_r10000.tif&quot;</span>)</span>
<span id="cb265-29"><a href="Ch06.html#cb265-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_224&quot;</span></span>
<span id="cb265-30"><a href="Ch06.html#cb265-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb265-31"><a href="Ch06.html#cb265-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb265-32"><a href="Ch06.html#cb265-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsAll_r10000.tif&quot;</span>,</span>
<span id="cb265-33"><a href="Ch06.html#cb265-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb265-34"><a href="Ch06.html#cb265-34" tabindex="-1"></a></span>
<span id="cb265-35"><a href="Ch06.html#cb265-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb265-36"><a href="Ch06.html#cb265-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb265-37"><a href="Ch06.html#cb265-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb265-38"><a href="Ch06.html#cb265-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb265-39"><a href="Ch06.html#cb265-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb265-40"><a href="Ch06.html#cb265-40" tabindex="-1"></a></span>
<span id="cb265-41"><a href="Ch06.html#cb265-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsAll_r10000.tif&quot;</span></span>
<span id="cb265-42"><a href="Ch06.html#cb265-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb265-43"><a href="Ch06.html#cb265-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb265-44"><a href="Ch06.html#cb265-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb265-45"><a href="Ch06.html#cb265-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb265-46"><a href="Ch06.html#cb265-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb265-47"><a href="Ch06.html#cb265-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb265-48"><a href="Ch06.html#cb265-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb265-49"><a href="Ch06.html#cb265-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb265-50"><a href="Ch06.html#cb265-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb265-51"><a href="Ch06.html#cb265-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb265-52"><a href="Ch06.html#cb265-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb265-53"><a href="Ch06.html#cb265-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_224.png" width="100%" /></p>
</div>
<div id="ch06.225" class="section level2 hasAnchor" number="6.225">
<h2><span class="header-section-number">6.225</span> FarmlandGrassland_GrasslandsPermanent_cell<a href="Ch06.html#ch06.225" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsPermanent_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_225</code></p>
<p><strong>English name:</strong> Fractional cover of Permanent Grassland within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ilggadīgu zālāju platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels declared as permanent grasslands were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>. These geometries
were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="Ch06.html#cb266-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb266-2"><a href="Ch06.html#cb266-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb266-3"><a href="Ch06.html#cb266-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb266-4"><a href="Ch06.html#cb266-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb266-5"><a href="Ch06.html#cb266-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb266-6"><a href="Ch06.html#cb266-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb266-7"><a href="Ch06.html#cb266-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb266-8"><a href="Ch06.html#cb266-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb266-9"><a href="Ch06.html#cb266-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb266-10"><a href="Ch06.html#cb266-10" tabindex="-1"></a></span>
<span id="cb266-11"><a href="Ch06.html#cb266-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb266-12"><a href="Ch06.html#cb266-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb266-13"><a href="Ch06.html#cb266-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb266-14"><a href="Ch06.html#cb266-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb266-15"><a href="Ch06.html#cb266-15" tabindex="-1"></a></span>
<span id="cb266-16"><a href="Ch06.html#cb266-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb266-17"><a href="Ch06.html#cb266-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb266-18"><a href="Ch06.html#cb266-18" tabindex="-1"></a></span>
<span id="cb266-19"><a href="Ch06.html#cb266-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb266-20"><a href="Ch06.html#cb266-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb266-21"><a href="Ch06.html#cb266-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb266-22"><a href="Ch06.html#cb266-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb266-23"><a href="Ch06.html#cb266-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb266-24"><a href="Ch06.html#cb266-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb266-25"><a href="Ch06.html#cb266-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb266-26"><a href="Ch06.html#cb266-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb266-27"><a href="Ch06.html#cb266-27" tabindex="-1"></a></span>
<span id="cb266-28"><a href="Ch06.html#cb266-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb266-29"><a href="Ch06.html#cb266-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb266-30"><a href="Ch06.html#cb266-30" tabindex="-1"></a></span>
<span id="cb266-31"><a href="Ch06.html#cb266-31" tabindex="-1"></a></span>
<span id="cb266-32"><a href="Ch06.html#cb266-32" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsPermanent_cell.tif    egv_225 ----</span></span>
<span id="cb266-33"><a href="Ch06.html#cb266-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb266-34"><a href="Ch06.html#cb266-34" tabindex="-1"></a>  <span class="fu">filter</span>(SDM_grupa_sakums<span class="sc">==</span><span class="st">&quot;zālāji (ilggadīgie)&quot;</span>)</span>
<span id="cb266-35"><a href="Ch06.html#cb266-35" tabindex="-1"></a>  </span>
<span id="cb266-36"><a href="Ch06.html#cb266-36" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb266-37"><a href="Ch06.html#cb266-37" tabindex="-1"></a></span>
<span id="cb266-38"><a href="Ch06.html#cb266-38" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb266-39"><a href="Ch06.html#cb266-39" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb266-40"><a href="Ch06.html#cb266-40" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb266-41"><a href="Ch06.html#cb266-41" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandGrassland_GrasslandsPermanent_input.tif&quot;</span>,</span>
<span id="cb266-42"><a href="Ch06.html#cb266-42" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb266-43"><a href="Ch06.html#cb266-43" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb266-44"><a href="Ch06.html#cb266-44" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb266-45"><a href="Ch06.html#cb266-45" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb266-46"><a href="Ch06.html#cb266-46" tabindex="-1"></a>p2i_rez</span>
<span id="cb266-47"><a href="Ch06.html#cb266-47" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb266-48"><a href="Ch06.html#cb266-48" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandGrassland_GrasslandsPermanent_input.tif&quot;</span>),</span>
<span id="cb266-49"><a href="Ch06.html#cb266-49" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb266-50"><a href="Ch06.html#cb266-50" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb266-51"><a href="Ch06.html#cb266-51" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb266-52"><a href="Ch06.html#cb266-52" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb266-53"><a href="Ch06.html#cb266-53" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandGrassland_GrasslandsPermanent_cell.tif&quot;</span>,</span>
<span id="cb266-54"><a href="Ch06.html#cb266-54" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_225&quot;</span>,</span>
<span id="cb266-55"><a href="Ch06.html#cb266-55" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb266-56"><a href="Ch06.html#cb266-56" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb266-57"><a href="Ch06.html#cb266-57" tabindex="-1"></a>i2e_rez</span>
<span id="cb266-58"><a href="Ch06.html#cb266-58" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb266-59"><a href="Ch06.html#cb266-59" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb266-60"><a href="Ch06.html#cb266-60" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb266-61"><a href="Ch06.html#cb266-61" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandGrassland_GrasslandsPermanent_input.tif&quot;</span>)</span>
<span id="cb266-62"><a href="Ch06.html#cb266-62" tabindex="-1"></a></span>
<span id="cb266-63"><a href="Ch06.html#cb266-63" tabindex="-1"></a></span>
<span id="cb266-64"><a href="Ch06.html#cb266-64" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb266-65"><a href="Ch06.html#cb266-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb266-66"><a href="Ch06.html#cb266-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb266-67"><a href="Ch06.html#cb266-67" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb266-68"><a href="Ch06.html#cb266-68" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb266-69"><a href="Ch06.html#cb266-69" tabindex="-1"></a></span>
<span id="cb266-70"><a href="Ch06.html#cb266-70" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsPermanent_cell.tif&quot;</span></span>
<span id="cb266-71"><a href="Ch06.html#cb266-71" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb266-72"><a href="Ch06.html#cb266-72" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb266-73"><a href="Ch06.html#cb266-73" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb266-74"><a href="Ch06.html#cb266-74" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb266-75"><a href="Ch06.html#cb266-75" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb266-76"><a href="Ch06.html#cb266-76" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb266-77"><a href="Ch06.html#cb266-77" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb266-78"><a href="Ch06.html#cb266-78" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb266-79"><a href="Ch06.html#cb266-79" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb266-80"><a href="Ch06.html#cb266-80" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb266-81"><a href="Ch06.html#cb266-81" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb266-82"><a href="Ch06.html#cb266-82" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_225.png" width="100%" /></p>
</div>
<div id="ch06.226" class="section level2 hasAnchor" number="6.226">
<h2><span class="header-section-number">6.226</span> FarmlandGrassland_GrasslandsPermanent_r500<a href="Ch06.html#ch06.226" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsPermanent_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_226</code></p>
<p><strong>English name:</strong> Fractional cover of Permanent Grassland within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Ilggadīgu zālāju platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.225">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="Ch06.html#cb267-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb267-2"><a href="Ch06.html#cb267-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb267-3"><a href="Ch06.html#cb267-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb267-4"><a href="Ch06.html#cb267-4" tabindex="-1"></a></span>
<span id="cb267-5"><a href="Ch06.html#cb267-5" tabindex="-1"></a></span>
<span id="cb267-6"><a href="Ch06.html#cb267-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb267-7"><a href="Ch06.html#cb267-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb267-8"><a href="Ch06.html#cb267-8" tabindex="-1"></a></span>
<span id="cb267-9"><a href="Ch06.html#cb267-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb267-10"><a href="Ch06.html#cb267-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb267-11"><a href="Ch06.html#cb267-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb267-12"><a href="Ch06.html#cb267-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb267-13"><a href="Ch06.html#cb267-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb267-14"><a href="Ch06.html#cb267-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb267-15"><a href="Ch06.html#cb267-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_cell.tif&quot;</span>),</span>
<span id="cb267-16"><a href="Ch06.html#cb267-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsPermanent&quot;</span>),</span>
<span id="cb267-17"><a href="Ch06.html#cb267-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb267-18"><a href="Ch06.html#cb267-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb267-19"><a href="Ch06.html#cb267-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb267-20"><a href="Ch06.html#cb267-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb267-21"><a href="Ch06.html#cb267-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb267-22"><a href="Ch06.html#cb267-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb267-23"><a href="Ch06.html#cb267-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb267-24"><a href="Ch06.html#cb267-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb267-25"><a href="Ch06.html#cb267-25" tabindex="-1"></a></span>
<span id="cb267-26"><a href="Ch06.html#cb267-26" tabindex="-1"></a></span>
<span id="cb267-27"><a href="Ch06.html#cb267-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsPermanent_r500.tif    egv_226</span></span>
<span id="cb267-28"><a href="Ch06.html#cb267-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_r500.tif&quot;</span>)</span>
<span id="cb267-29"><a href="Ch06.html#cb267-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_226&quot;</span></span>
<span id="cb267-30"><a href="Ch06.html#cb267-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb267-31"><a href="Ch06.html#cb267-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb267-32"><a href="Ch06.html#cb267-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_r500.tif&quot;</span>,</span>
<span id="cb267-33"><a href="Ch06.html#cb267-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb267-34"><a href="Ch06.html#cb267-34" tabindex="-1"></a></span>
<span id="cb267-35"><a href="Ch06.html#cb267-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb267-36"><a href="Ch06.html#cb267-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb267-37"><a href="Ch06.html#cb267-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb267-38"><a href="Ch06.html#cb267-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb267-39"><a href="Ch06.html#cb267-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb267-40"><a href="Ch06.html#cb267-40" tabindex="-1"></a></span>
<span id="cb267-41"><a href="Ch06.html#cb267-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsPermanent_r500.tif&quot;</span></span>
<span id="cb267-42"><a href="Ch06.html#cb267-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb267-43"><a href="Ch06.html#cb267-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb267-44"><a href="Ch06.html#cb267-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb267-45"><a href="Ch06.html#cb267-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb267-46"><a href="Ch06.html#cb267-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb267-47"><a href="Ch06.html#cb267-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb267-48"><a href="Ch06.html#cb267-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb267-49"><a href="Ch06.html#cb267-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb267-50"><a href="Ch06.html#cb267-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb267-51"><a href="Ch06.html#cb267-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb267-52"><a href="Ch06.html#cb267-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb267-53"><a href="Ch06.html#cb267-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_226.png" width="100%" /></p>
</div>
<div id="ch06.227" class="section level2 hasAnchor" number="6.227">
<h2><span class="header-section-number">6.227</span> FarmlandGrassland_GrasslandsPermanent_r1250<a href="Ch06.html#ch06.227" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsPermanent_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_227</code></p>
<p><strong>English name:</strong> Fractional cover of Permanent Grassland within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Ilggadīgu zālāju platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.225">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="Ch06.html#cb268-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb268-2"><a href="Ch06.html#cb268-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb268-3"><a href="Ch06.html#cb268-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb268-4"><a href="Ch06.html#cb268-4" tabindex="-1"></a></span>
<span id="cb268-5"><a href="Ch06.html#cb268-5" tabindex="-1"></a></span>
<span id="cb268-6"><a href="Ch06.html#cb268-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb268-7"><a href="Ch06.html#cb268-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb268-8"><a href="Ch06.html#cb268-8" tabindex="-1"></a></span>
<span id="cb268-9"><a href="Ch06.html#cb268-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb268-10"><a href="Ch06.html#cb268-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb268-11"><a href="Ch06.html#cb268-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb268-12"><a href="Ch06.html#cb268-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb268-13"><a href="Ch06.html#cb268-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb268-14"><a href="Ch06.html#cb268-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb268-15"><a href="Ch06.html#cb268-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_cell.tif&quot;</span>),</span>
<span id="cb268-16"><a href="Ch06.html#cb268-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsPermanent&quot;</span>),</span>
<span id="cb268-17"><a href="Ch06.html#cb268-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb268-18"><a href="Ch06.html#cb268-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb268-19"><a href="Ch06.html#cb268-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb268-20"><a href="Ch06.html#cb268-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb268-21"><a href="Ch06.html#cb268-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb268-22"><a href="Ch06.html#cb268-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb268-23"><a href="Ch06.html#cb268-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb268-24"><a href="Ch06.html#cb268-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb268-25"><a href="Ch06.html#cb268-25" tabindex="-1"></a></span>
<span id="cb268-26"><a href="Ch06.html#cb268-26" tabindex="-1"></a></span>
<span id="cb268-27"><a href="Ch06.html#cb268-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsPermanent_r1250.tif   egv_227</span></span>
<span id="cb268-28"><a href="Ch06.html#cb268-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_r1250.tif&quot;</span>)</span>
<span id="cb268-29"><a href="Ch06.html#cb268-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_227&quot;</span></span>
<span id="cb268-30"><a href="Ch06.html#cb268-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb268-31"><a href="Ch06.html#cb268-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb268-32"><a href="Ch06.html#cb268-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_r1250.tif&quot;</span>,</span>
<span id="cb268-33"><a href="Ch06.html#cb268-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb268-34"><a href="Ch06.html#cb268-34" tabindex="-1"></a></span>
<span id="cb268-35"><a href="Ch06.html#cb268-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb268-36"><a href="Ch06.html#cb268-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb268-37"><a href="Ch06.html#cb268-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb268-38"><a href="Ch06.html#cb268-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb268-39"><a href="Ch06.html#cb268-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb268-40"><a href="Ch06.html#cb268-40" tabindex="-1"></a></span>
<span id="cb268-41"><a href="Ch06.html#cb268-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsPermanent_r1250.tif&quot;</span></span>
<span id="cb268-42"><a href="Ch06.html#cb268-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb268-43"><a href="Ch06.html#cb268-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb268-44"><a href="Ch06.html#cb268-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb268-45"><a href="Ch06.html#cb268-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb268-46"><a href="Ch06.html#cb268-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb268-47"><a href="Ch06.html#cb268-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb268-48"><a href="Ch06.html#cb268-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb268-49"><a href="Ch06.html#cb268-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb268-50"><a href="Ch06.html#cb268-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb268-51"><a href="Ch06.html#cb268-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb268-52"><a href="Ch06.html#cb268-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb268-53"><a href="Ch06.html#cb268-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_227.png" width="100%" /></p>
</div>
<div id="ch06.228" class="section level2 hasAnchor" number="6.228">
<h2><span class="header-section-number">6.228</span> FarmlandGrassland_GrasslandsPermanent_r3000<a href="Ch06.html#ch06.228" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsPermanent_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_228</code></p>
<p><strong>English name:</strong> Fractional cover of Permanent Grassland within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Ilggadīgu zālāju platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.225">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="Ch06.html#cb269-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb269-2"><a href="Ch06.html#cb269-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb269-3"><a href="Ch06.html#cb269-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb269-4"><a href="Ch06.html#cb269-4" tabindex="-1"></a></span>
<span id="cb269-5"><a href="Ch06.html#cb269-5" tabindex="-1"></a></span>
<span id="cb269-6"><a href="Ch06.html#cb269-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb269-7"><a href="Ch06.html#cb269-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb269-8"><a href="Ch06.html#cb269-8" tabindex="-1"></a></span>
<span id="cb269-9"><a href="Ch06.html#cb269-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb269-10"><a href="Ch06.html#cb269-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb269-11"><a href="Ch06.html#cb269-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb269-12"><a href="Ch06.html#cb269-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb269-13"><a href="Ch06.html#cb269-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb269-14"><a href="Ch06.html#cb269-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb269-15"><a href="Ch06.html#cb269-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_cell.tif&quot;</span>),</span>
<span id="cb269-16"><a href="Ch06.html#cb269-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsPermanent&quot;</span>),</span>
<span id="cb269-17"><a href="Ch06.html#cb269-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb269-18"><a href="Ch06.html#cb269-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb269-19"><a href="Ch06.html#cb269-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb269-20"><a href="Ch06.html#cb269-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb269-21"><a href="Ch06.html#cb269-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb269-22"><a href="Ch06.html#cb269-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb269-23"><a href="Ch06.html#cb269-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb269-24"><a href="Ch06.html#cb269-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb269-25"><a href="Ch06.html#cb269-25" tabindex="-1"></a></span>
<span id="cb269-26"><a href="Ch06.html#cb269-26" tabindex="-1"></a></span>
<span id="cb269-27"><a href="Ch06.html#cb269-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsPermanent_r3000.tif   egv_228</span></span>
<span id="cb269-28"><a href="Ch06.html#cb269-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_r3000.tif&quot;</span>)</span>
<span id="cb269-29"><a href="Ch06.html#cb269-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_228&quot;</span></span>
<span id="cb269-30"><a href="Ch06.html#cb269-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb269-31"><a href="Ch06.html#cb269-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb269-32"><a href="Ch06.html#cb269-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_r3000.tif&quot;</span>,</span>
<span id="cb269-33"><a href="Ch06.html#cb269-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb269-34"><a href="Ch06.html#cb269-34" tabindex="-1"></a></span>
<span id="cb269-35"><a href="Ch06.html#cb269-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb269-36"><a href="Ch06.html#cb269-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb269-37"><a href="Ch06.html#cb269-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb269-38"><a href="Ch06.html#cb269-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb269-39"><a href="Ch06.html#cb269-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb269-40"><a href="Ch06.html#cb269-40" tabindex="-1"></a></span>
<span id="cb269-41"><a href="Ch06.html#cb269-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsPermanent_r3000.tif&quot;</span></span>
<span id="cb269-42"><a href="Ch06.html#cb269-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb269-43"><a href="Ch06.html#cb269-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb269-44"><a href="Ch06.html#cb269-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb269-45"><a href="Ch06.html#cb269-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb269-46"><a href="Ch06.html#cb269-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb269-47"><a href="Ch06.html#cb269-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb269-48"><a href="Ch06.html#cb269-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb269-49"><a href="Ch06.html#cb269-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb269-50"><a href="Ch06.html#cb269-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb269-51"><a href="Ch06.html#cb269-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb269-52"><a href="Ch06.html#cb269-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb269-53"><a href="Ch06.html#cb269-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_228.png" width="100%" /></p>
</div>
<div id="ch06.229" class="section level2 hasAnchor" number="6.229">
<h2><span class="header-section-number">6.229</span> FarmlandGrassland_GrasslandsPermanent_r10000<a href="Ch06.html#ch06.229" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsPermanent_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_229</code></p>
<p><strong>English name:</strong> Fractional cover of Permanent Grassland within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Ilggadīgu zālāju platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.225">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="Ch06.html#cb270-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb270-2"><a href="Ch06.html#cb270-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb270-3"><a href="Ch06.html#cb270-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb270-4"><a href="Ch06.html#cb270-4" tabindex="-1"></a></span>
<span id="cb270-5"><a href="Ch06.html#cb270-5" tabindex="-1"></a></span>
<span id="cb270-6"><a href="Ch06.html#cb270-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb270-7"><a href="Ch06.html#cb270-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb270-8"><a href="Ch06.html#cb270-8" tabindex="-1"></a></span>
<span id="cb270-9"><a href="Ch06.html#cb270-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb270-10"><a href="Ch06.html#cb270-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb270-11"><a href="Ch06.html#cb270-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb270-12"><a href="Ch06.html#cb270-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb270-13"><a href="Ch06.html#cb270-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb270-14"><a href="Ch06.html#cb270-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb270-15"><a href="Ch06.html#cb270-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_cell.tif&quot;</span>),</span>
<span id="cb270-16"><a href="Ch06.html#cb270-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsPermanent&quot;</span>),</span>
<span id="cb270-17"><a href="Ch06.html#cb270-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb270-18"><a href="Ch06.html#cb270-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb270-19"><a href="Ch06.html#cb270-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb270-20"><a href="Ch06.html#cb270-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb270-21"><a href="Ch06.html#cb270-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb270-22"><a href="Ch06.html#cb270-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb270-23"><a href="Ch06.html#cb270-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb270-24"><a href="Ch06.html#cb270-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb270-25"><a href="Ch06.html#cb270-25" tabindex="-1"></a></span>
<span id="cb270-26"><a href="Ch06.html#cb270-26" tabindex="-1"></a></span>
<span id="cb270-27"><a href="Ch06.html#cb270-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsPermanent_r10000.tif  egv_229</span></span>
<span id="cb270-28"><a href="Ch06.html#cb270-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_r10000.tif&quot;</span>)</span>
<span id="cb270-29"><a href="Ch06.html#cb270-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_229&quot;</span></span>
<span id="cb270-30"><a href="Ch06.html#cb270-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb270-31"><a href="Ch06.html#cb270-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb270-32"><a href="Ch06.html#cb270-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsPermanent_r10000.tif&quot;</span>,</span>
<span id="cb270-33"><a href="Ch06.html#cb270-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb270-34"><a href="Ch06.html#cb270-34" tabindex="-1"></a></span>
<span id="cb270-35"><a href="Ch06.html#cb270-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb270-36"><a href="Ch06.html#cb270-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb270-37"><a href="Ch06.html#cb270-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb270-38"><a href="Ch06.html#cb270-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb270-39"><a href="Ch06.html#cb270-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb270-40"><a href="Ch06.html#cb270-40" tabindex="-1"></a></span>
<span id="cb270-41"><a href="Ch06.html#cb270-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsPermanent_r10000.tif&quot;</span></span>
<span id="cb270-42"><a href="Ch06.html#cb270-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb270-43"><a href="Ch06.html#cb270-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb270-44"><a href="Ch06.html#cb270-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb270-45"><a href="Ch06.html#cb270-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb270-46"><a href="Ch06.html#cb270-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb270-47"><a href="Ch06.html#cb270-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb270-48"><a href="Ch06.html#cb270-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb270-49"><a href="Ch06.html#cb270-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb270-50"><a href="Ch06.html#cb270-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb270-51"><a href="Ch06.html#cb270-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb270-52"><a href="Ch06.html#cb270-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb270-53"><a href="Ch06.html#cb270-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_229.png" width="100%" /></p>
</div>
<div id="ch06.230" class="section level2 hasAnchor" number="6.230">
<h2><span class="header-section-number">6.230</span> FarmlandGrassland_GrasslandsTemporary_cell<a href="Ch06.html#ch06.230" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsTemporary_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_230</code></p>
<p><strong>English name:</strong> Fractional cover of Temporary Grassland within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Zālāju-aramzemē platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels declared as grasslands in arable lands were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>. These geometries
were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="Ch06.html#cb271-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb271-2"><a href="Ch06.html#cb271-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb271-3"><a href="Ch06.html#cb271-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb271-4"><a href="Ch06.html#cb271-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb271-5"><a href="Ch06.html#cb271-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb271-6"><a href="Ch06.html#cb271-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb271-7"><a href="Ch06.html#cb271-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb271-8"><a href="Ch06.html#cb271-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb271-9"><a href="Ch06.html#cb271-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb271-10"><a href="Ch06.html#cb271-10" tabindex="-1"></a></span>
<span id="cb271-11"><a href="Ch06.html#cb271-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb271-12"><a href="Ch06.html#cb271-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb271-13"><a href="Ch06.html#cb271-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb271-14"><a href="Ch06.html#cb271-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb271-15"><a href="Ch06.html#cb271-15" tabindex="-1"></a></span>
<span id="cb271-16"><a href="Ch06.html#cb271-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb271-17"><a href="Ch06.html#cb271-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb271-18"><a href="Ch06.html#cb271-18" tabindex="-1"></a></span>
<span id="cb271-19"><a href="Ch06.html#cb271-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb271-20"><a href="Ch06.html#cb271-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb271-21"><a href="Ch06.html#cb271-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb271-22"><a href="Ch06.html#cb271-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb271-23"><a href="Ch06.html#cb271-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb271-24"><a href="Ch06.html#cb271-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb271-25"><a href="Ch06.html#cb271-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb271-26"><a href="Ch06.html#cb271-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb271-27"><a href="Ch06.html#cb271-27" tabindex="-1"></a></span>
<span id="cb271-28"><a href="Ch06.html#cb271-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb271-29"><a href="Ch06.html#cb271-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb271-30"><a href="Ch06.html#cb271-30" tabindex="-1"></a></span>
<span id="cb271-31"><a href="Ch06.html#cb271-31" tabindex="-1"></a></span>
<span id="cb271-32"><a href="Ch06.html#cb271-32" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsTemporary_cell.tif    egv_230 ----</span></span>
<span id="cb271-33"><a href="Ch06.html#cb271-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb271-34"><a href="Ch06.html#cb271-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(SDM_grupa_sakums,<span class="st">&quot;kultivēt&quot;</span>))</span>
<span id="cb271-35"><a href="Ch06.html#cb271-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb271-36"><a href="Ch06.html#cb271-36" tabindex="-1"></a></span>
<span id="cb271-37"><a href="Ch06.html#cb271-37" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb271-38"><a href="Ch06.html#cb271-38" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb271-39"><a href="Ch06.html#cb271-39" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb271-40"><a href="Ch06.html#cb271-40" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandGrassland_GrasslandsTemporary_input.tif&quot;</span>,</span>
<span id="cb271-41"><a href="Ch06.html#cb271-41" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb271-42"><a href="Ch06.html#cb271-42" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb271-43"><a href="Ch06.html#cb271-43" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb271-44"><a href="Ch06.html#cb271-44" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb271-45"><a href="Ch06.html#cb271-45" tabindex="-1"></a>p2i_rez</span>
<span id="cb271-46"><a href="Ch06.html#cb271-46" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb271-47"><a href="Ch06.html#cb271-47" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandGrassland_GrasslandsTemporary_input.tif&quot;</span>),</span>
<span id="cb271-48"><a href="Ch06.html#cb271-48" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb271-49"><a href="Ch06.html#cb271-49" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb271-50"><a href="Ch06.html#cb271-50" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb271-51"><a href="Ch06.html#cb271-51" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb271-52"><a href="Ch06.html#cb271-52" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandGrassland_GrasslandsTemporary_cell.tif&quot;</span>,</span>
<span id="cb271-53"><a href="Ch06.html#cb271-53" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_230&quot;</span>,</span>
<span id="cb271-54"><a href="Ch06.html#cb271-54" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb271-55"><a href="Ch06.html#cb271-55" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb271-56"><a href="Ch06.html#cb271-56" tabindex="-1"></a>i2e_rez</span>
<span id="cb271-57"><a href="Ch06.html#cb271-57" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb271-58"><a href="Ch06.html#cb271-58" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb271-59"><a href="Ch06.html#cb271-59" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb271-60"><a href="Ch06.html#cb271-60" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandGrassland_GrasslandsTemporary_input.tif&quot;</span>)</span>
<span id="cb271-61"><a href="Ch06.html#cb271-61" tabindex="-1"></a></span>
<span id="cb271-62"><a href="Ch06.html#cb271-62" tabindex="-1"></a></span>
<span id="cb271-63"><a href="Ch06.html#cb271-63" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb271-64"><a href="Ch06.html#cb271-64" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb271-65"><a href="Ch06.html#cb271-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb271-66"><a href="Ch06.html#cb271-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb271-67"><a href="Ch06.html#cb271-67" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb271-68"><a href="Ch06.html#cb271-68" tabindex="-1"></a></span>
<span id="cb271-69"><a href="Ch06.html#cb271-69" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsTemporary_cell.tif&quot;</span></span>
<span id="cb271-70"><a href="Ch06.html#cb271-70" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb271-71"><a href="Ch06.html#cb271-71" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb271-72"><a href="Ch06.html#cb271-72" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb271-73"><a href="Ch06.html#cb271-73" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb271-74"><a href="Ch06.html#cb271-74" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb271-75"><a href="Ch06.html#cb271-75" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb271-76"><a href="Ch06.html#cb271-76" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb271-77"><a href="Ch06.html#cb271-77" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb271-78"><a href="Ch06.html#cb271-78" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb271-79"><a href="Ch06.html#cb271-79" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb271-80"><a href="Ch06.html#cb271-80" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb271-81"><a href="Ch06.html#cb271-81" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_230.png" width="100%" /></p>
</div>
<div id="ch06.231" class="section level2 hasAnchor" number="6.231">
<h2><span class="header-section-number">6.231</span> FarmlandGrassland_GrasslandsTemporary_r500<a href="Ch06.html#ch06.231" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsTemporary_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_231</code></p>
<p><strong>English name:</strong> Fractional cover of Temporary Grassland within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju-aramzemē platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.230">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="Ch06.html#cb272-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb272-2"><a href="Ch06.html#cb272-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb272-3"><a href="Ch06.html#cb272-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb272-4"><a href="Ch06.html#cb272-4" tabindex="-1"></a></span>
<span id="cb272-5"><a href="Ch06.html#cb272-5" tabindex="-1"></a></span>
<span id="cb272-6"><a href="Ch06.html#cb272-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb272-7"><a href="Ch06.html#cb272-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb272-8"><a href="Ch06.html#cb272-8" tabindex="-1"></a></span>
<span id="cb272-9"><a href="Ch06.html#cb272-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb272-10"><a href="Ch06.html#cb272-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb272-11"><a href="Ch06.html#cb272-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb272-12"><a href="Ch06.html#cb272-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb272-13"><a href="Ch06.html#cb272-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb272-14"><a href="Ch06.html#cb272-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb272-15"><a href="Ch06.html#cb272-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_cell.tif&quot;</span>),</span>
<span id="cb272-16"><a href="Ch06.html#cb272-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsTemporary&quot;</span>),</span>
<span id="cb272-17"><a href="Ch06.html#cb272-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb272-18"><a href="Ch06.html#cb272-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb272-19"><a href="Ch06.html#cb272-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb272-20"><a href="Ch06.html#cb272-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb272-21"><a href="Ch06.html#cb272-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb272-22"><a href="Ch06.html#cb272-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb272-23"><a href="Ch06.html#cb272-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb272-24"><a href="Ch06.html#cb272-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb272-25"><a href="Ch06.html#cb272-25" tabindex="-1"></a></span>
<span id="cb272-26"><a href="Ch06.html#cb272-26" tabindex="-1"></a></span>
<span id="cb272-27"><a href="Ch06.html#cb272-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsTemporary_r500.tif    egv_231</span></span>
<span id="cb272-28"><a href="Ch06.html#cb272-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_r500.tif&quot;</span>)</span>
<span id="cb272-29"><a href="Ch06.html#cb272-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_231&quot;</span></span>
<span id="cb272-30"><a href="Ch06.html#cb272-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb272-31"><a href="Ch06.html#cb272-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb272-32"><a href="Ch06.html#cb272-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_r500.tif&quot;</span>,</span>
<span id="cb272-33"><a href="Ch06.html#cb272-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb272-34"><a href="Ch06.html#cb272-34" tabindex="-1"></a></span>
<span id="cb272-35"><a href="Ch06.html#cb272-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb272-36"><a href="Ch06.html#cb272-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb272-37"><a href="Ch06.html#cb272-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb272-38"><a href="Ch06.html#cb272-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb272-39"><a href="Ch06.html#cb272-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb272-40"><a href="Ch06.html#cb272-40" tabindex="-1"></a></span>
<span id="cb272-41"><a href="Ch06.html#cb272-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsTemporary_r500.tif&quot;</span></span>
<span id="cb272-42"><a href="Ch06.html#cb272-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb272-43"><a href="Ch06.html#cb272-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb272-44"><a href="Ch06.html#cb272-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb272-45"><a href="Ch06.html#cb272-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb272-46"><a href="Ch06.html#cb272-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb272-47"><a href="Ch06.html#cb272-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb272-48"><a href="Ch06.html#cb272-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb272-49"><a href="Ch06.html#cb272-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb272-50"><a href="Ch06.html#cb272-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb272-51"><a href="Ch06.html#cb272-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb272-52"><a href="Ch06.html#cb272-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb272-53"><a href="Ch06.html#cb272-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_231.png" width="100%" /></p>
</div>
<div id="ch06.232" class="section level2 hasAnchor" number="6.232">
<h2><span class="header-section-number">6.232</span> FarmlandGrassland_GrasslandsTemporary_r1250<a href="Ch06.html#ch06.232" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsTemporary_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_232</code></p>
<p><strong>English name:</strong> Fractional cover of Temporary Grassland within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju-aramzemē platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.230">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="Ch06.html#cb273-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb273-2"><a href="Ch06.html#cb273-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb273-3"><a href="Ch06.html#cb273-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb273-4"><a href="Ch06.html#cb273-4" tabindex="-1"></a></span>
<span id="cb273-5"><a href="Ch06.html#cb273-5" tabindex="-1"></a></span>
<span id="cb273-6"><a href="Ch06.html#cb273-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb273-7"><a href="Ch06.html#cb273-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb273-8"><a href="Ch06.html#cb273-8" tabindex="-1"></a></span>
<span id="cb273-9"><a href="Ch06.html#cb273-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb273-10"><a href="Ch06.html#cb273-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb273-11"><a href="Ch06.html#cb273-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb273-12"><a href="Ch06.html#cb273-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb273-13"><a href="Ch06.html#cb273-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb273-14"><a href="Ch06.html#cb273-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb273-15"><a href="Ch06.html#cb273-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_cell.tif&quot;</span>),</span>
<span id="cb273-16"><a href="Ch06.html#cb273-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsTemporary&quot;</span>),</span>
<span id="cb273-17"><a href="Ch06.html#cb273-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb273-18"><a href="Ch06.html#cb273-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb273-19"><a href="Ch06.html#cb273-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb273-20"><a href="Ch06.html#cb273-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb273-21"><a href="Ch06.html#cb273-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb273-22"><a href="Ch06.html#cb273-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb273-23"><a href="Ch06.html#cb273-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb273-24"><a href="Ch06.html#cb273-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb273-25"><a href="Ch06.html#cb273-25" tabindex="-1"></a></span>
<span id="cb273-26"><a href="Ch06.html#cb273-26" tabindex="-1"></a></span>
<span id="cb273-27"><a href="Ch06.html#cb273-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsTemporary_r1250.tif   egv_232</span></span>
<span id="cb273-28"><a href="Ch06.html#cb273-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_r1250.tif&quot;</span>)</span>
<span id="cb273-29"><a href="Ch06.html#cb273-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_232&quot;</span></span>
<span id="cb273-30"><a href="Ch06.html#cb273-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb273-31"><a href="Ch06.html#cb273-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb273-32"><a href="Ch06.html#cb273-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_r1250.tif&quot;</span>,</span>
<span id="cb273-33"><a href="Ch06.html#cb273-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb273-34"><a href="Ch06.html#cb273-34" tabindex="-1"></a></span>
<span id="cb273-35"><a href="Ch06.html#cb273-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb273-36"><a href="Ch06.html#cb273-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb273-37"><a href="Ch06.html#cb273-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb273-38"><a href="Ch06.html#cb273-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb273-39"><a href="Ch06.html#cb273-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb273-40"><a href="Ch06.html#cb273-40" tabindex="-1"></a></span>
<span id="cb273-41"><a href="Ch06.html#cb273-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsTemporary_r1250.tif&quot;</span></span>
<span id="cb273-42"><a href="Ch06.html#cb273-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb273-43"><a href="Ch06.html#cb273-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb273-44"><a href="Ch06.html#cb273-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb273-45"><a href="Ch06.html#cb273-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb273-46"><a href="Ch06.html#cb273-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb273-47"><a href="Ch06.html#cb273-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb273-48"><a href="Ch06.html#cb273-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb273-49"><a href="Ch06.html#cb273-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb273-50"><a href="Ch06.html#cb273-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb273-51"><a href="Ch06.html#cb273-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb273-52"><a href="Ch06.html#cb273-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb273-53"><a href="Ch06.html#cb273-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_232.png" width="100%" /></p>
</div>
<div id="ch06.233" class="section level2 hasAnchor" number="6.233">
<h2><span class="header-section-number">6.233</span> FarmlandGrassland_GrasslandsTemporary_r3000<a href="Ch06.html#ch06.233" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsTemporary_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_233</code></p>
<p><strong>English name:</strong> Fractional cover of Temporary Grassland within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju-aramzemē platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.230">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="Ch06.html#cb274-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb274-2"><a href="Ch06.html#cb274-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb274-3"><a href="Ch06.html#cb274-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb274-4"><a href="Ch06.html#cb274-4" tabindex="-1"></a></span>
<span id="cb274-5"><a href="Ch06.html#cb274-5" tabindex="-1"></a></span>
<span id="cb274-6"><a href="Ch06.html#cb274-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb274-7"><a href="Ch06.html#cb274-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb274-8"><a href="Ch06.html#cb274-8" tabindex="-1"></a></span>
<span id="cb274-9"><a href="Ch06.html#cb274-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb274-10"><a href="Ch06.html#cb274-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb274-11"><a href="Ch06.html#cb274-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb274-12"><a href="Ch06.html#cb274-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb274-13"><a href="Ch06.html#cb274-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb274-14"><a href="Ch06.html#cb274-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb274-15"><a href="Ch06.html#cb274-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_cell.tif&quot;</span>),</span>
<span id="cb274-16"><a href="Ch06.html#cb274-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsTemporary&quot;</span>),</span>
<span id="cb274-17"><a href="Ch06.html#cb274-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb274-18"><a href="Ch06.html#cb274-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb274-19"><a href="Ch06.html#cb274-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb274-20"><a href="Ch06.html#cb274-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb274-21"><a href="Ch06.html#cb274-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb274-22"><a href="Ch06.html#cb274-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb274-23"><a href="Ch06.html#cb274-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb274-24"><a href="Ch06.html#cb274-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb274-25"><a href="Ch06.html#cb274-25" tabindex="-1"></a></span>
<span id="cb274-26"><a href="Ch06.html#cb274-26" tabindex="-1"></a></span>
<span id="cb274-27"><a href="Ch06.html#cb274-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsTemporary_r3000.tif   egv_233</span></span>
<span id="cb274-28"><a href="Ch06.html#cb274-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_r3000.tif&quot;</span>)</span>
<span id="cb274-29"><a href="Ch06.html#cb274-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_233&quot;</span></span>
<span id="cb274-30"><a href="Ch06.html#cb274-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb274-31"><a href="Ch06.html#cb274-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb274-32"><a href="Ch06.html#cb274-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_r3000.tif&quot;</span>,</span>
<span id="cb274-33"><a href="Ch06.html#cb274-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb274-34"><a href="Ch06.html#cb274-34" tabindex="-1"></a></span>
<span id="cb274-35"><a href="Ch06.html#cb274-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb274-36"><a href="Ch06.html#cb274-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb274-37"><a href="Ch06.html#cb274-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb274-38"><a href="Ch06.html#cb274-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb274-39"><a href="Ch06.html#cb274-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb274-40"><a href="Ch06.html#cb274-40" tabindex="-1"></a></span>
<span id="cb274-41"><a href="Ch06.html#cb274-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsTemporary_r3000.tif&quot;</span></span>
<span id="cb274-42"><a href="Ch06.html#cb274-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb274-43"><a href="Ch06.html#cb274-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb274-44"><a href="Ch06.html#cb274-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb274-45"><a href="Ch06.html#cb274-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb274-46"><a href="Ch06.html#cb274-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb274-47"><a href="Ch06.html#cb274-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb274-48"><a href="Ch06.html#cb274-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb274-49"><a href="Ch06.html#cb274-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb274-50"><a href="Ch06.html#cb274-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb274-51"><a href="Ch06.html#cb274-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb274-52"><a href="Ch06.html#cb274-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb274-53"><a href="Ch06.html#cb274-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_233.png" width="100%" /></p>
</div>
<div id="ch06.234" class="section level2 hasAnchor" number="6.234">
<h2><span class="header-section-number">6.234</span> FarmlandGrassland_GrasslandsTemporary_r10000<a href="Ch06.html#ch06.234" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandGrassland_GrasslandsTemporary_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_234</code></p>
<p><strong>English name:</strong> Fractional cover of Temporary Grassland within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Zālāju-aramzemē platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.230">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="Ch06.html#cb275-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb275-2"><a href="Ch06.html#cb275-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb275-3"><a href="Ch06.html#cb275-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb275-4"><a href="Ch06.html#cb275-4" tabindex="-1"></a></span>
<span id="cb275-5"><a href="Ch06.html#cb275-5" tabindex="-1"></a></span>
<span id="cb275-6"><a href="Ch06.html#cb275-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb275-7"><a href="Ch06.html#cb275-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb275-8"><a href="Ch06.html#cb275-8" tabindex="-1"></a></span>
<span id="cb275-9"><a href="Ch06.html#cb275-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb275-10"><a href="Ch06.html#cb275-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb275-11"><a href="Ch06.html#cb275-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb275-12"><a href="Ch06.html#cb275-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb275-13"><a href="Ch06.html#cb275-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb275-14"><a href="Ch06.html#cb275-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb275-15"><a href="Ch06.html#cb275-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_cell.tif&quot;</span>),</span>
<span id="cb275-16"><a href="Ch06.html#cb275-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandGrassland_GrasslandsTemporary&quot;</span>),</span>
<span id="cb275-17"><a href="Ch06.html#cb275-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb275-18"><a href="Ch06.html#cb275-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb275-19"><a href="Ch06.html#cb275-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb275-20"><a href="Ch06.html#cb275-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb275-21"><a href="Ch06.html#cb275-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb275-22"><a href="Ch06.html#cb275-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb275-23"><a href="Ch06.html#cb275-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb275-24"><a href="Ch06.html#cb275-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb275-25"><a href="Ch06.html#cb275-25" tabindex="-1"></a></span>
<span id="cb275-26"><a href="Ch06.html#cb275-26" tabindex="-1"></a></span>
<span id="cb275-27"><a href="Ch06.html#cb275-27" tabindex="-1"></a><span class="co"># FarmlandGrassland_GrasslandsTemporary_r10000.tif  egv_234</span></span>
<span id="cb275-28"><a href="Ch06.html#cb275-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_r10000.tif&quot;</span>)</span>
<span id="cb275-29"><a href="Ch06.html#cb275-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_234&quot;</span></span>
<span id="cb275-30"><a href="Ch06.html#cb275-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb275-31"><a href="Ch06.html#cb275-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb275-32"><a href="Ch06.html#cb275-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandGrassland_GrasslandsTemporary_r10000.tif&quot;</span>,</span>
<span id="cb275-33"><a href="Ch06.html#cb275-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb275-34"><a href="Ch06.html#cb275-34" tabindex="-1"></a></span>
<span id="cb275-35"><a href="Ch06.html#cb275-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb275-36"><a href="Ch06.html#cb275-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb275-37"><a href="Ch06.html#cb275-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb275-38"><a href="Ch06.html#cb275-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb275-39"><a href="Ch06.html#cb275-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb275-40"><a href="Ch06.html#cb275-40" tabindex="-1"></a></span>
<span id="cb275-41"><a href="Ch06.html#cb275-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandGrassland_GrasslandsTemporary_r10000.tif&quot;</span></span>
<span id="cb275-42"><a href="Ch06.html#cb275-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb275-43"><a href="Ch06.html#cb275-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb275-44"><a href="Ch06.html#cb275-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb275-45"><a href="Ch06.html#cb275-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb275-46"><a href="Ch06.html#cb275-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb275-47"><a href="Ch06.html#cb275-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb275-48"><a href="Ch06.html#cb275-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb275-49"><a href="Ch06.html#cb275-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb275-50"><a href="Ch06.html#cb275-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb275-51"><a href="Ch06.html#cb275-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb275-52"><a href="Ch06.html#cb275-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb275-53"><a href="Ch06.html#cb275-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_234.png" width="100%" /></p>
</div>
<div id="ch06.235" class="section level2 hasAnchor" number="6.235">
<h2><span class="header-section-number">6.235</span> FarmlandParcels_FieldsActive_cell<a href="Ch06.html#ch06.235" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandParcels_FieldsActive_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_235</code></p>
<p><strong>English name:</strong> Fractional cover of Agricultural Land Parcels within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Lauku bloku platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>
were rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="Ch06.html#cb276-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb276-2"><a href="Ch06.html#cb276-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb276-3"><a href="Ch06.html#cb276-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb276-4"><a href="Ch06.html#cb276-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb276-5"><a href="Ch06.html#cb276-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb276-6"><a href="Ch06.html#cb276-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb276-7"><a href="Ch06.html#cb276-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb276-8"><a href="Ch06.html#cb276-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb276-9"><a href="Ch06.html#cb276-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb276-10"><a href="Ch06.html#cb276-10" tabindex="-1"></a></span>
<span id="cb276-11"><a href="Ch06.html#cb276-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb276-12"><a href="Ch06.html#cb276-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb276-13"><a href="Ch06.html#cb276-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb276-14"><a href="Ch06.html#cb276-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb276-15"><a href="Ch06.html#cb276-15" tabindex="-1"></a></span>
<span id="cb276-16"><a href="Ch06.html#cb276-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb276-17"><a href="Ch06.html#cb276-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb276-18"><a href="Ch06.html#cb276-18" tabindex="-1"></a></span>
<span id="cb276-19"><a href="Ch06.html#cb276-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb276-20"><a href="Ch06.html#cb276-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb276-21"><a href="Ch06.html#cb276-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb276-22"><a href="Ch06.html#cb276-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb276-23"><a href="Ch06.html#cb276-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb276-24"><a href="Ch06.html#cb276-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb276-25"><a href="Ch06.html#cb276-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb276-26"><a href="Ch06.html#cb276-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb276-27"><a href="Ch06.html#cb276-27" tabindex="-1"></a></span>
<span id="cb276-28"><a href="Ch06.html#cb276-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb276-29"><a href="Ch06.html#cb276-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb276-30"><a href="Ch06.html#cb276-30" tabindex="-1"></a></span>
<span id="cb276-31"><a href="Ch06.html#cb276-31" tabindex="-1"></a></span>
<span id="cb276-32"><a href="Ch06.html#cb276-32" tabindex="-1"></a><span class="co"># FarmlandParcels_FieldsActive_cell.tif egv_235 ----</span></span>
<span id="cb276-33"><a href="Ch06.html#cb276-33" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> lad,</span>
<span id="cb276-34"><a href="Ch06.html#cb276-34" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb276-35"><a href="Ch06.html#cb276-35" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb276-36"><a href="Ch06.html#cb276-36" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandParcels_FieldsActive_input.tif&quot;</span>,</span>
<span id="cb276-37"><a href="Ch06.html#cb276-37" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb276-38"><a href="Ch06.html#cb276-38" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb276-39"><a href="Ch06.html#cb276-39" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb276-40"><a href="Ch06.html#cb276-40" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb276-41"><a href="Ch06.html#cb276-41" tabindex="-1"></a>p2i_rez</span>
<span id="cb276-42"><a href="Ch06.html#cb276-42" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb276-43"><a href="Ch06.html#cb276-43" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandParcels_FieldsActive_input.tif&quot;</span>),</span>
<span id="cb276-44"><a href="Ch06.html#cb276-44" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb276-45"><a href="Ch06.html#cb276-45" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb276-46"><a href="Ch06.html#cb276-46" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb276-47"><a href="Ch06.html#cb276-47" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb276-48"><a href="Ch06.html#cb276-48" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandParcels_FieldsActive_cell.tif&quot;</span>,</span>
<span id="cb276-49"><a href="Ch06.html#cb276-49" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_235&quot;</span>,</span>
<span id="cb276-50"><a href="Ch06.html#cb276-50" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb276-51"><a href="Ch06.html#cb276-51" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb276-52"><a href="Ch06.html#cb276-52" tabindex="-1"></a>i2e_rez</span>
<span id="cb276-53"><a href="Ch06.html#cb276-53" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb276-54"><a href="Ch06.html#cb276-54" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb276-55"><a href="Ch06.html#cb276-55" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb276-56"><a href="Ch06.html#cb276-56" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandParcels_FieldsActive_input.tif&quot;</span>)</span>
<span id="cb276-57"><a href="Ch06.html#cb276-57" tabindex="-1"></a></span>
<span id="cb276-58"><a href="Ch06.html#cb276-58" tabindex="-1"></a></span>
<span id="cb276-59"><a href="Ch06.html#cb276-59" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb276-60"><a href="Ch06.html#cb276-60" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb276-61"><a href="Ch06.html#cb276-61" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb276-62"><a href="Ch06.html#cb276-62" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb276-63"><a href="Ch06.html#cb276-63" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb276-64"><a href="Ch06.html#cb276-64" tabindex="-1"></a></span>
<span id="cb276-65"><a href="Ch06.html#cb276-65" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandParcels_FieldsActive_cell.tif&quot;</span></span>
<span id="cb276-66"><a href="Ch06.html#cb276-66" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb276-67"><a href="Ch06.html#cb276-67" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb276-68"><a href="Ch06.html#cb276-68" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb276-69"><a href="Ch06.html#cb276-69" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb276-70"><a href="Ch06.html#cb276-70" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb276-71"><a href="Ch06.html#cb276-71" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb276-72"><a href="Ch06.html#cb276-72" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb276-73"><a href="Ch06.html#cb276-73" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb276-74"><a href="Ch06.html#cb276-74" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb276-75"><a href="Ch06.html#cb276-75" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb276-76"><a href="Ch06.html#cb276-76" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb276-77"><a href="Ch06.html#cb276-77" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_235.png" width="100%" /></p>
</div>
<div id="ch06.236" class="section level2 hasAnchor" number="6.236">
<h2><span class="header-section-number">6.236</span> FarmlandParcels_FieldsActive_r500<a href="Ch06.html#ch06.236" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandParcels_FieldsActive_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_236</code></p>
<p><strong>English name:</strong> Fractional cover of Agricultural Land Parcels within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Lauku bloku platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.235">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="Ch06.html#cb277-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb277-2"><a href="Ch06.html#cb277-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb277-3"><a href="Ch06.html#cb277-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb277-4"><a href="Ch06.html#cb277-4" tabindex="-1"></a></span>
<span id="cb277-5"><a href="Ch06.html#cb277-5" tabindex="-1"></a></span>
<span id="cb277-6"><a href="Ch06.html#cb277-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb277-7"><a href="Ch06.html#cb277-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb277-8"><a href="Ch06.html#cb277-8" tabindex="-1"></a></span>
<span id="cb277-9"><a href="Ch06.html#cb277-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb277-10"><a href="Ch06.html#cb277-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb277-11"><a href="Ch06.html#cb277-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb277-12"><a href="Ch06.html#cb277-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb277-13"><a href="Ch06.html#cb277-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb277-14"><a href="Ch06.html#cb277-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb277-15"><a href="Ch06.html#cb277-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_cell.tif&quot;</span>),</span>
<span id="cb277-16"><a href="Ch06.html#cb277-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandParcels_FieldsActive&quot;</span>),</span>
<span id="cb277-17"><a href="Ch06.html#cb277-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb277-18"><a href="Ch06.html#cb277-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb277-19"><a href="Ch06.html#cb277-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb277-20"><a href="Ch06.html#cb277-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb277-21"><a href="Ch06.html#cb277-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb277-22"><a href="Ch06.html#cb277-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb277-23"><a href="Ch06.html#cb277-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb277-24"><a href="Ch06.html#cb277-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb277-25"><a href="Ch06.html#cb277-25" tabindex="-1"></a></span>
<span id="cb277-26"><a href="Ch06.html#cb277-26" tabindex="-1"></a></span>
<span id="cb277-27"><a href="Ch06.html#cb277-27" tabindex="-1"></a><span class="co"># FarmlandParcels_FieldsActive_r500.tif egv_236</span></span>
<span id="cb277-28"><a href="Ch06.html#cb277-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_r500.tif&quot;</span>)</span>
<span id="cb277-29"><a href="Ch06.html#cb277-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_236&quot;</span></span>
<span id="cb277-30"><a href="Ch06.html#cb277-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb277-31"><a href="Ch06.html#cb277-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb277-32"><a href="Ch06.html#cb277-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_r500.tif&quot;</span>,</span>
<span id="cb277-33"><a href="Ch06.html#cb277-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb277-34"><a href="Ch06.html#cb277-34" tabindex="-1"></a></span>
<span id="cb277-35"><a href="Ch06.html#cb277-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb277-36"><a href="Ch06.html#cb277-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb277-37"><a href="Ch06.html#cb277-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb277-38"><a href="Ch06.html#cb277-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb277-39"><a href="Ch06.html#cb277-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb277-40"><a href="Ch06.html#cb277-40" tabindex="-1"></a></span>
<span id="cb277-41"><a href="Ch06.html#cb277-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandParcels_FieldsActive_r500.tif&quot;</span></span>
<span id="cb277-42"><a href="Ch06.html#cb277-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb277-43"><a href="Ch06.html#cb277-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb277-44"><a href="Ch06.html#cb277-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb277-45"><a href="Ch06.html#cb277-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb277-46"><a href="Ch06.html#cb277-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb277-47"><a href="Ch06.html#cb277-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb277-48"><a href="Ch06.html#cb277-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb277-49"><a href="Ch06.html#cb277-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb277-50"><a href="Ch06.html#cb277-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb277-51"><a href="Ch06.html#cb277-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb277-52"><a href="Ch06.html#cb277-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb277-53"><a href="Ch06.html#cb277-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_236.png" width="100%" /></p>
</div>
<div id="ch06.237" class="section level2 hasAnchor" number="6.237">
<h2><span class="header-section-number">6.237</span> FarmlandParcels_FieldsActive_r1250<a href="Ch06.html#ch06.237" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandParcels_FieldsActive_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_237</code></p>
<p><strong>English name:</strong> Fractional cover of Agricultural Land Parcels within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Lauku bloku platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.235">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="Ch06.html#cb278-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb278-2"><a href="Ch06.html#cb278-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb278-3"><a href="Ch06.html#cb278-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb278-4"><a href="Ch06.html#cb278-4" tabindex="-1"></a></span>
<span id="cb278-5"><a href="Ch06.html#cb278-5" tabindex="-1"></a></span>
<span id="cb278-6"><a href="Ch06.html#cb278-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb278-7"><a href="Ch06.html#cb278-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb278-8"><a href="Ch06.html#cb278-8" tabindex="-1"></a></span>
<span id="cb278-9"><a href="Ch06.html#cb278-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb278-10"><a href="Ch06.html#cb278-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb278-11"><a href="Ch06.html#cb278-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb278-12"><a href="Ch06.html#cb278-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb278-13"><a href="Ch06.html#cb278-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb278-14"><a href="Ch06.html#cb278-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb278-15"><a href="Ch06.html#cb278-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_cell.tif&quot;</span>),</span>
<span id="cb278-16"><a href="Ch06.html#cb278-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandParcels_FieldsActive&quot;</span>),</span>
<span id="cb278-17"><a href="Ch06.html#cb278-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb278-18"><a href="Ch06.html#cb278-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb278-19"><a href="Ch06.html#cb278-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb278-20"><a href="Ch06.html#cb278-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb278-21"><a href="Ch06.html#cb278-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb278-22"><a href="Ch06.html#cb278-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb278-23"><a href="Ch06.html#cb278-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb278-24"><a href="Ch06.html#cb278-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb278-25"><a href="Ch06.html#cb278-25" tabindex="-1"></a></span>
<span id="cb278-26"><a href="Ch06.html#cb278-26" tabindex="-1"></a></span>
<span id="cb278-27"><a href="Ch06.html#cb278-27" tabindex="-1"></a><span class="co"># FarmlandParcels_FieldsActive_r1250.tif    egv_237</span></span>
<span id="cb278-28"><a href="Ch06.html#cb278-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_r1250.tif&quot;</span>)</span>
<span id="cb278-29"><a href="Ch06.html#cb278-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_237&quot;</span></span>
<span id="cb278-30"><a href="Ch06.html#cb278-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb278-31"><a href="Ch06.html#cb278-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb278-32"><a href="Ch06.html#cb278-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_r1250.tif&quot;</span>,</span>
<span id="cb278-33"><a href="Ch06.html#cb278-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb278-34"><a href="Ch06.html#cb278-34" tabindex="-1"></a></span>
<span id="cb278-35"><a href="Ch06.html#cb278-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb278-36"><a href="Ch06.html#cb278-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb278-37"><a href="Ch06.html#cb278-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb278-38"><a href="Ch06.html#cb278-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb278-39"><a href="Ch06.html#cb278-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb278-40"><a href="Ch06.html#cb278-40" tabindex="-1"></a></span>
<span id="cb278-41"><a href="Ch06.html#cb278-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandParcels_FieldsActive_r1250.tif&quot;</span></span>
<span id="cb278-42"><a href="Ch06.html#cb278-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb278-43"><a href="Ch06.html#cb278-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb278-44"><a href="Ch06.html#cb278-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb278-45"><a href="Ch06.html#cb278-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb278-46"><a href="Ch06.html#cb278-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb278-47"><a href="Ch06.html#cb278-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb278-48"><a href="Ch06.html#cb278-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb278-49"><a href="Ch06.html#cb278-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb278-50"><a href="Ch06.html#cb278-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb278-51"><a href="Ch06.html#cb278-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb278-52"><a href="Ch06.html#cb278-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb278-53"><a href="Ch06.html#cb278-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_237.png" width="100%" /></p>
</div>
<div id="ch06.238" class="section level2 hasAnchor" number="6.238">
<h2><span class="header-section-number">6.238</span> FarmlandParcels_FieldsActive_r3000<a href="Ch06.html#ch06.238" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandParcels_FieldsActive_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_238</code></p>
<p><strong>English name:</strong> Fractional cover of Agricultural Land Parcels within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Lauku bloku platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.235">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="Ch06.html#cb279-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb279-2"><a href="Ch06.html#cb279-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb279-3"><a href="Ch06.html#cb279-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb279-4"><a href="Ch06.html#cb279-4" tabindex="-1"></a></span>
<span id="cb279-5"><a href="Ch06.html#cb279-5" tabindex="-1"></a></span>
<span id="cb279-6"><a href="Ch06.html#cb279-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb279-7"><a href="Ch06.html#cb279-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb279-8"><a href="Ch06.html#cb279-8" tabindex="-1"></a></span>
<span id="cb279-9"><a href="Ch06.html#cb279-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb279-10"><a href="Ch06.html#cb279-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb279-11"><a href="Ch06.html#cb279-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb279-12"><a href="Ch06.html#cb279-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb279-13"><a href="Ch06.html#cb279-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb279-14"><a href="Ch06.html#cb279-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb279-15"><a href="Ch06.html#cb279-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_cell.tif&quot;</span>),</span>
<span id="cb279-16"><a href="Ch06.html#cb279-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandParcels_FieldsActive&quot;</span>),</span>
<span id="cb279-17"><a href="Ch06.html#cb279-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb279-18"><a href="Ch06.html#cb279-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb279-19"><a href="Ch06.html#cb279-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb279-20"><a href="Ch06.html#cb279-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb279-21"><a href="Ch06.html#cb279-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb279-22"><a href="Ch06.html#cb279-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb279-23"><a href="Ch06.html#cb279-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb279-24"><a href="Ch06.html#cb279-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb279-25"><a href="Ch06.html#cb279-25" tabindex="-1"></a></span>
<span id="cb279-26"><a href="Ch06.html#cb279-26" tabindex="-1"></a></span>
<span id="cb279-27"><a href="Ch06.html#cb279-27" tabindex="-1"></a><span class="co"># FarmlandParcels_FieldsActive_r3000.tif    egv_238</span></span>
<span id="cb279-28"><a href="Ch06.html#cb279-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_r3000.tif&quot;</span>)</span>
<span id="cb279-29"><a href="Ch06.html#cb279-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_238&quot;</span></span>
<span id="cb279-30"><a href="Ch06.html#cb279-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb279-31"><a href="Ch06.html#cb279-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb279-32"><a href="Ch06.html#cb279-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_r3000.tif&quot;</span>,</span>
<span id="cb279-33"><a href="Ch06.html#cb279-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb279-34"><a href="Ch06.html#cb279-34" tabindex="-1"></a></span>
<span id="cb279-35"><a href="Ch06.html#cb279-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb279-36"><a href="Ch06.html#cb279-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb279-37"><a href="Ch06.html#cb279-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb279-38"><a href="Ch06.html#cb279-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb279-39"><a href="Ch06.html#cb279-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb279-40"><a href="Ch06.html#cb279-40" tabindex="-1"></a></span>
<span id="cb279-41"><a href="Ch06.html#cb279-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandParcels_FieldsActive_r3000.tif&quot;</span></span>
<span id="cb279-42"><a href="Ch06.html#cb279-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb279-43"><a href="Ch06.html#cb279-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb279-44"><a href="Ch06.html#cb279-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb279-45"><a href="Ch06.html#cb279-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb279-46"><a href="Ch06.html#cb279-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb279-47"><a href="Ch06.html#cb279-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb279-48"><a href="Ch06.html#cb279-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb279-49"><a href="Ch06.html#cb279-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb279-50"><a href="Ch06.html#cb279-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb279-51"><a href="Ch06.html#cb279-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb279-52"><a href="Ch06.html#cb279-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb279-53"><a href="Ch06.html#cb279-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_238.png" width="100%" /></p>
</div>
<div id="ch06.239" class="section level2 hasAnchor" number="6.239">
<h2><span class="header-section-number">6.239</span> FarmlandParcels_FieldsActive_r10000<a href="Ch06.html#ch06.239" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandParcels_FieldsActive_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_239</code></p>
<p><strong>English name:</strong> Fractional cover of Agricultural Land Parcels within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Lauku bloku platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.235">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="Ch06.html#cb280-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb280-2"><a href="Ch06.html#cb280-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb280-3"><a href="Ch06.html#cb280-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb280-4"><a href="Ch06.html#cb280-4" tabindex="-1"></a></span>
<span id="cb280-5"><a href="Ch06.html#cb280-5" tabindex="-1"></a></span>
<span id="cb280-6"><a href="Ch06.html#cb280-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb280-7"><a href="Ch06.html#cb280-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb280-8"><a href="Ch06.html#cb280-8" tabindex="-1"></a></span>
<span id="cb280-9"><a href="Ch06.html#cb280-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb280-10"><a href="Ch06.html#cb280-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb280-11"><a href="Ch06.html#cb280-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb280-12"><a href="Ch06.html#cb280-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb280-13"><a href="Ch06.html#cb280-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb280-14"><a href="Ch06.html#cb280-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb280-15"><a href="Ch06.html#cb280-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_cell.tif&quot;</span>),</span>
<span id="cb280-16"><a href="Ch06.html#cb280-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandParcels_FieldsActive&quot;</span>),</span>
<span id="cb280-17"><a href="Ch06.html#cb280-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb280-18"><a href="Ch06.html#cb280-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb280-19"><a href="Ch06.html#cb280-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb280-20"><a href="Ch06.html#cb280-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb280-21"><a href="Ch06.html#cb280-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb280-22"><a href="Ch06.html#cb280-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb280-23"><a href="Ch06.html#cb280-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb280-24"><a href="Ch06.html#cb280-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb280-25"><a href="Ch06.html#cb280-25" tabindex="-1"></a></span>
<span id="cb280-26"><a href="Ch06.html#cb280-26" tabindex="-1"></a></span>
<span id="cb280-27"><a href="Ch06.html#cb280-27" tabindex="-1"></a><span class="co"># FarmlandParcels_FieldsActive_r10000.tif   egv_239</span></span>
<span id="cb280-28"><a href="Ch06.html#cb280-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_r10000.tif&quot;</span>)</span>
<span id="cb280-29"><a href="Ch06.html#cb280-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_239&quot;</span></span>
<span id="cb280-30"><a href="Ch06.html#cb280-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb280-31"><a href="Ch06.html#cb280-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb280-32"><a href="Ch06.html#cb280-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandParcels_FieldsActive_r10000.tif&quot;</span>,</span>
<span id="cb280-33"><a href="Ch06.html#cb280-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb280-34"><a href="Ch06.html#cb280-34" tabindex="-1"></a></span>
<span id="cb280-35"><a href="Ch06.html#cb280-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb280-36"><a href="Ch06.html#cb280-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb280-37"><a href="Ch06.html#cb280-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb280-38"><a href="Ch06.html#cb280-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb280-39"><a href="Ch06.html#cb280-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb280-40"><a href="Ch06.html#cb280-40" tabindex="-1"></a></span>
<span id="cb280-41"><a href="Ch06.html#cb280-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandParcels_FieldsActive_r10000.tif&quot;</span></span>
<span id="cb280-42"><a href="Ch06.html#cb280-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb280-43"><a href="Ch06.html#cb280-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb280-44"><a href="Ch06.html#cb280-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb280-45"><a href="Ch06.html#cb280-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb280-46"><a href="Ch06.html#cb280-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb280-47"><a href="Ch06.html#cb280-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb280-48"><a href="Ch06.html#cb280-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb280-49"><a href="Ch06.html#cb280-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb280-50"><a href="Ch06.html#cb280-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb280-51"><a href="Ch06.html#cb280-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb280-52"><a href="Ch06.html#cb280-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb280-53"><a href="Ch06.html#cb280-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_239.png" width="100%" /></p>
</div>
<div id="ch06.240" class="section level2 hasAnchor" number="6.240">
<h2><span class="header-section-number">6.240</span> FarmlandPloughed_CropsFallow_cell<a href="Ch06.html#ch06.240" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_CropsFallow_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_240</code></p>
<p><strong>English name:</strong> Fractional cover of Crop-, Fallow- Land within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Aramzemju, papuvju platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels declared as crops or fallow land were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>.
Geometries were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="Ch06.html#cb281-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb281-2"><a href="Ch06.html#cb281-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb281-3"><a href="Ch06.html#cb281-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb281-4"><a href="Ch06.html#cb281-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb281-5"><a href="Ch06.html#cb281-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb281-6"><a href="Ch06.html#cb281-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb281-7"><a href="Ch06.html#cb281-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb281-8"><a href="Ch06.html#cb281-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb281-9"><a href="Ch06.html#cb281-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb281-10"><a href="Ch06.html#cb281-10" tabindex="-1"></a></span>
<span id="cb281-11"><a href="Ch06.html#cb281-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb281-12"><a href="Ch06.html#cb281-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb281-13"><a href="Ch06.html#cb281-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb281-14"><a href="Ch06.html#cb281-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb281-15"><a href="Ch06.html#cb281-15" tabindex="-1"></a></span>
<span id="cb281-16"><a href="Ch06.html#cb281-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb281-17"><a href="Ch06.html#cb281-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb281-18"><a href="Ch06.html#cb281-18" tabindex="-1"></a></span>
<span id="cb281-19"><a href="Ch06.html#cb281-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb281-20"><a href="Ch06.html#cb281-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb281-21"><a href="Ch06.html#cb281-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb281-22"><a href="Ch06.html#cb281-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb281-23"><a href="Ch06.html#cb281-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb281-24"><a href="Ch06.html#cb281-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb281-25"><a href="Ch06.html#cb281-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb281-26"><a href="Ch06.html#cb281-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb281-27"><a href="Ch06.html#cb281-27" tabindex="-1"></a></span>
<span id="cb281-28"><a href="Ch06.html#cb281-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb281-29"><a href="Ch06.html#cb281-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb281-30"><a href="Ch06.html#cb281-30" tabindex="-1"></a></span>
<span id="cb281-31"><a href="Ch06.html#cb281-31" tabindex="-1"></a></span>
<span id="cb281-32"><a href="Ch06.html#cb281-32" tabindex="-1"></a><span class="co"># FarmlandPloughed_CropsFallow_cell.tif egv_240 ----</span></span>
<span id="cb281-33"><a href="Ch06.html#cb281-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb281-34"><a href="Ch06.html#cb281-34" tabindex="-1"></a>  <span class="fu">filter</span>(SDM_grupa_sakums <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;aramzemes (citur neiekļautās)&quot;</span>,</span>
<span id="cb281-35"><a href="Ch06.html#cb281-35" tabindex="-1"></a>                                 <span class="st">&quot;aramzemes (labība-vasarāji)&quot;</span>,</span>
<span id="cb281-36"><a href="Ch06.html#cb281-36" tabindex="-1"></a>                                 <span class="st">&quot;aramzemes (labība-ziemāji)&quot;</span>,</span>
<span id="cb281-37"><a href="Ch06.html#cb281-37" tabindex="-1"></a>                                 <span class="st">&quot;aramzemes (vagu un rušināmkultūru)&quot;</span>,</span>
<span id="cb281-38"><a href="Ch06.html#cb281-38" tabindex="-1"></a>                                 <span class="st">&quot;aramzemes (vasaras rapsis un rispsis, kukurūzas, zirņi un pupas, soja, kaņepes)&quot;</span>,</span>
<span id="cb281-39"><a href="Ch06.html#cb281-39" tabindex="-1"></a>                                 <span class="st">&quot;aramzemes (ziemas rapsis un ripsis)&quot;</span>,</span>
<span id="cb281-40"><a href="Ch06.html#cb281-40" tabindex="-1"></a>                                 <span class="st">&quot;papuves&quot;</span>))</span>
<span id="cb281-41"><a href="Ch06.html#cb281-41" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb281-42"><a href="Ch06.html#cb281-42" tabindex="-1"></a></span>
<span id="cb281-43"><a href="Ch06.html#cb281-43" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb281-44"><a href="Ch06.html#cb281-44" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb281-45"><a href="Ch06.html#cb281-45" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb281-46"><a href="Ch06.html#cb281-46" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandPloughed_CropsFallow_input.tif&quot;</span>,</span>
<span id="cb281-47"><a href="Ch06.html#cb281-47" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb281-48"><a href="Ch06.html#cb281-48" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb281-49"><a href="Ch06.html#cb281-49" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb281-50"><a href="Ch06.html#cb281-50" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb281-51"><a href="Ch06.html#cb281-51" tabindex="-1"></a>p2i_rez</span>
<span id="cb281-52"><a href="Ch06.html#cb281-52" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb281-53"><a href="Ch06.html#cb281-53" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandPloughed_CropsFallow_input.tif&quot;</span>),</span>
<span id="cb281-54"><a href="Ch06.html#cb281-54" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb281-55"><a href="Ch06.html#cb281-55" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb281-56"><a href="Ch06.html#cb281-56" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb281-57"><a href="Ch06.html#cb281-57" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb281-58"><a href="Ch06.html#cb281-58" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandPloughed_CropsFallow_cell.tif&quot;</span>,</span>
<span id="cb281-59"><a href="Ch06.html#cb281-59" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_240&quot;</span>,</span>
<span id="cb281-60"><a href="Ch06.html#cb281-60" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb281-61"><a href="Ch06.html#cb281-61" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb281-62"><a href="Ch06.html#cb281-62" tabindex="-1"></a>i2e_rez</span>
<span id="cb281-63"><a href="Ch06.html#cb281-63" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb281-64"><a href="Ch06.html#cb281-64" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb281-65"><a href="Ch06.html#cb281-65" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb281-66"><a href="Ch06.html#cb281-66" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandPloughed_CropsFallow_input.tif&quot;</span>)</span>
<span id="cb281-67"><a href="Ch06.html#cb281-67" tabindex="-1"></a></span>
<span id="cb281-68"><a href="Ch06.html#cb281-68" tabindex="-1"></a></span>
<span id="cb281-69"><a href="Ch06.html#cb281-69" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb281-70"><a href="Ch06.html#cb281-70" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb281-71"><a href="Ch06.html#cb281-71" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb281-72"><a href="Ch06.html#cb281-72" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb281-73"><a href="Ch06.html#cb281-73" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb281-74"><a href="Ch06.html#cb281-74" tabindex="-1"></a></span>
<span id="cb281-75"><a href="Ch06.html#cb281-75" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_CropsFallow_cell.tif&quot;</span></span>
<span id="cb281-76"><a href="Ch06.html#cb281-76" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb281-77"><a href="Ch06.html#cb281-77" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb281-78"><a href="Ch06.html#cb281-78" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb281-79"><a href="Ch06.html#cb281-79" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb281-80"><a href="Ch06.html#cb281-80" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb281-81"><a href="Ch06.html#cb281-81" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb281-82"><a href="Ch06.html#cb281-82" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb281-83"><a href="Ch06.html#cb281-83" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb281-84"><a href="Ch06.html#cb281-84" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb281-85"><a href="Ch06.html#cb281-85" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb281-86"><a href="Ch06.html#cb281-86" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb281-87"><a href="Ch06.html#cb281-87" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_240.png" width="100%" /></p>
</div>
<div id="ch06.241" class="section level2 hasAnchor" number="6.241">
<h2><span class="header-section-number">6.241</span> FarmlandPloughed_CropsFallow_r500<a href="Ch06.html#ch06.241" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_CropsFallow_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_241</code></p>
<p><strong>English name:</strong> Fractional cover of Crop-, Fallow- Land within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju, papuvju platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.240">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="Ch06.html#cb282-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb282-2"><a href="Ch06.html#cb282-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb282-3"><a href="Ch06.html#cb282-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb282-4"><a href="Ch06.html#cb282-4" tabindex="-1"></a></span>
<span id="cb282-5"><a href="Ch06.html#cb282-5" tabindex="-1"></a></span>
<span id="cb282-6"><a href="Ch06.html#cb282-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb282-7"><a href="Ch06.html#cb282-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb282-8"><a href="Ch06.html#cb282-8" tabindex="-1"></a></span>
<span id="cb282-9"><a href="Ch06.html#cb282-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb282-10"><a href="Ch06.html#cb282-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb282-11"><a href="Ch06.html#cb282-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb282-12"><a href="Ch06.html#cb282-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb282-13"><a href="Ch06.html#cb282-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb282-14"><a href="Ch06.html#cb282-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb282-15"><a href="Ch06.html#cb282-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_cell.tif&quot;</span>),</span>
<span id="cb282-16"><a href="Ch06.html#cb282-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_CropsFallow&quot;</span>),</span>
<span id="cb282-17"><a href="Ch06.html#cb282-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb282-18"><a href="Ch06.html#cb282-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb282-19"><a href="Ch06.html#cb282-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb282-20"><a href="Ch06.html#cb282-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb282-21"><a href="Ch06.html#cb282-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb282-22"><a href="Ch06.html#cb282-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb282-23"><a href="Ch06.html#cb282-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb282-24"><a href="Ch06.html#cb282-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb282-25"><a href="Ch06.html#cb282-25" tabindex="-1"></a></span>
<span id="cb282-26"><a href="Ch06.html#cb282-26" tabindex="-1"></a></span>
<span id="cb282-27"><a href="Ch06.html#cb282-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_CropsFallow_r500.tif egv_241</span></span>
<span id="cb282-28"><a href="Ch06.html#cb282-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_r500.tif&quot;</span>)</span>
<span id="cb282-29"><a href="Ch06.html#cb282-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_241&quot;</span></span>
<span id="cb282-30"><a href="Ch06.html#cb282-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb282-31"><a href="Ch06.html#cb282-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb282-32"><a href="Ch06.html#cb282-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_r500.tif&quot;</span>,</span>
<span id="cb282-33"><a href="Ch06.html#cb282-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb282-34"><a href="Ch06.html#cb282-34" tabindex="-1"></a></span>
<span id="cb282-35"><a href="Ch06.html#cb282-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb282-36"><a href="Ch06.html#cb282-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb282-37"><a href="Ch06.html#cb282-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb282-38"><a href="Ch06.html#cb282-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb282-39"><a href="Ch06.html#cb282-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb282-40"><a href="Ch06.html#cb282-40" tabindex="-1"></a></span>
<span id="cb282-41"><a href="Ch06.html#cb282-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_CropsFallow_r500.tif&quot;</span></span>
<span id="cb282-42"><a href="Ch06.html#cb282-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb282-43"><a href="Ch06.html#cb282-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb282-44"><a href="Ch06.html#cb282-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb282-45"><a href="Ch06.html#cb282-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb282-46"><a href="Ch06.html#cb282-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb282-47"><a href="Ch06.html#cb282-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb282-48"><a href="Ch06.html#cb282-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb282-49"><a href="Ch06.html#cb282-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb282-50"><a href="Ch06.html#cb282-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb282-51"><a href="Ch06.html#cb282-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb282-52"><a href="Ch06.html#cb282-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb282-53"><a href="Ch06.html#cb282-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_241.png" width="100%" /></p>
</div>
<div id="ch06.242" class="section level2 hasAnchor" number="6.242">
<h2><span class="header-section-number">6.242</span> FarmlandPloughed_CropsFallow_r1250<a href="Ch06.html#ch06.242" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_CropsFallow_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_242</code></p>
<p><strong>English name:</strong> Fractional cover of Crop-, Fallow- Land within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju, papuvju platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.240">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="Ch06.html#cb283-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb283-2"><a href="Ch06.html#cb283-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb283-3"><a href="Ch06.html#cb283-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb283-4"><a href="Ch06.html#cb283-4" tabindex="-1"></a></span>
<span id="cb283-5"><a href="Ch06.html#cb283-5" tabindex="-1"></a></span>
<span id="cb283-6"><a href="Ch06.html#cb283-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb283-7"><a href="Ch06.html#cb283-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb283-8"><a href="Ch06.html#cb283-8" tabindex="-1"></a></span>
<span id="cb283-9"><a href="Ch06.html#cb283-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb283-10"><a href="Ch06.html#cb283-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb283-11"><a href="Ch06.html#cb283-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb283-12"><a href="Ch06.html#cb283-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb283-13"><a href="Ch06.html#cb283-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb283-14"><a href="Ch06.html#cb283-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb283-15"><a href="Ch06.html#cb283-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_cell.tif&quot;</span>),</span>
<span id="cb283-16"><a href="Ch06.html#cb283-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_CropsFallow&quot;</span>),</span>
<span id="cb283-17"><a href="Ch06.html#cb283-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb283-18"><a href="Ch06.html#cb283-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb283-19"><a href="Ch06.html#cb283-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb283-20"><a href="Ch06.html#cb283-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb283-21"><a href="Ch06.html#cb283-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb283-22"><a href="Ch06.html#cb283-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb283-23"><a href="Ch06.html#cb283-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb283-24"><a href="Ch06.html#cb283-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb283-25"><a href="Ch06.html#cb283-25" tabindex="-1"></a></span>
<span id="cb283-26"><a href="Ch06.html#cb283-26" tabindex="-1"></a></span>
<span id="cb283-27"><a href="Ch06.html#cb283-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_CropsFallow_r1250.tif    egv_242</span></span>
<span id="cb283-28"><a href="Ch06.html#cb283-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_r1250.tif&quot;</span>)</span>
<span id="cb283-29"><a href="Ch06.html#cb283-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_242&quot;</span></span>
<span id="cb283-30"><a href="Ch06.html#cb283-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb283-31"><a href="Ch06.html#cb283-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb283-32"><a href="Ch06.html#cb283-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_r1250.tif&quot;</span>,</span>
<span id="cb283-33"><a href="Ch06.html#cb283-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb283-34"><a href="Ch06.html#cb283-34" tabindex="-1"></a></span>
<span id="cb283-35"><a href="Ch06.html#cb283-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb283-36"><a href="Ch06.html#cb283-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb283-37"><a href="Ch06.html#cb283-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb283-38"><a href="Ch06.html#cb283-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb283-39"><a href="Ch06.html#cb283-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb283-40"><a href="Ch06.html#cb283-40" tabindex="-1"></a></span>
<span id="cb283-41"><a href="Ch06.html#cb283-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_CropsFallow_r1250.tif&quot;</span></span>
<span id="cb283-42"><a href="Ch06.html#cb283-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb283-43"><a href="Ch06.html#cb283-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb283-44"><a href="Ch06.html#cb283-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb283-45"><a href="Ch06.html#cb283-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb283-46"><a href="Ch06.html#cb283-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb283-47"><a href="Ch06.html#cb283-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb283-48"><a href="Ch06.html#cb283-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb283-49"><a href="Ch06.html#cb283-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb283-50"><a href="Ch06.html#cb283-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb283-51"><a href="Ch06.html#cb283-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb283-52"><a href="Ch06.html#cb283-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb283-53"><a href="Ch06.html#cb283-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_242.png" width="100%" /></p>
</div>
<div id="ch06.243" class="section level2 hasAnchor" number="6.243">
<h2><span class="header-section-number">6.243</span> FarmlandPloughed_CropsFallow_r3000<a href="Ch06.html#ch06.243" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_CropsFallow_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_243</code></p>
<p><strong>English name:</strong> Fractional cover of Crop-, Fallow- Land within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju, papuvju platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.240">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="Ch06.html#cb284-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb284-2"><a href="Ch06.html#cb284-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb284-3"><a href="Ch06.html#cb284-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb284-4"><a href="Ch06.html#cb284-4" tabindex="-1"></a></span>
<span id="cb284-5"><a href="Ch06.html#cb284-5" tabindex="-1"></a></span>
<span id="cb284-6"><a href="Ch06.html#cb284-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb284-7"><a href="Ch06.html#cb284-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb284-8"><a href="Ch06.html#cb284-8" tabindex="-1"></a></span>
<span id="cb284-9"><a href="Ch06.html#cb284-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb284-10"><a href="Ch06.html#cb284-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb284-11"><a href="Ch06.html#cb284-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb284-12"><a href="Ch06.html#cb284-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb284-13"><a href="Ch06.html#cb284-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb284-14"><a href="Ch06.html#cb284-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb284-15"><a href="Ch06.html#cb284-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_cell.tif&quot;</span>),</span>
<span id="cb284-16"><a href="Ch06.html#cb284-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_CropsFallow&quot;</span>),</span>
<span id="cb284-17"><a href="Ch06.html#cb284-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb284-18"><a href="Ch06.html#cb284-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb284-19"><a href="Ch06.html#cb284-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb284-20"><a href="Ch06.html#cb284-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb284-21"><a href="Ch06.html#cb284-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb284-22"><a href="Ch06.html#cb284-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb284-23"><a href="Ch06.html#cb284-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb284-24"><a href="Ch06.html#cb284-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb284-25"><a href="Ch06.html#cb284-25" tabindex="-1"></a></span>
<span id="cb284-26"><a href="Ch06.html#cb284-26" tabindex="-1"></a></span>
<span id="cb284-27"><a href="Ch06.html#cb284-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_CropsFallow_r3000.tif    egv_243</span></span>
<span id="cb284-28"><a href="Ch06.html#cb284-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_r3000.tif&quot;</span>)</span>
<span id="cb284-29"><a href="Ch06.html#cb284-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_243&quot;</span></span>
<span id="cb284-30"><a href="Ch06.html#cb284-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb284-31"><a href="Ch06.html#cb284-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb284-32"><a href="Ch06.html#cb284-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_r3000.tif&quot;</span>,</span>
<span id="cb284-33"><a href="Ch06.html#cb284-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb284-34"><a href="Ch06.html#cb284-34" tabindex="-1"></a></span>
<span id="cb284-35"><a href="Ch06.html#cb284-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb284-36"><a href="Ch06.html#cb284-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb284-37"><a href="Ch06.html#cb284-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb284-38"><a href="Ch06.html#cb284-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb284-39"><a href="Ch06.html#cb284-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb284-40"><a href="Ch06.html#cb284-40" tabindex="-1"></a></span>
<span id="cb284-41"><a href="Ch06.html#cb284-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_CropsFallow_r3000.tif&quot;</span></span>
<span id="cb284-42"><a href="Ch06.html#cb284-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb284-43"><a href="Ch06.html#cb284-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb284-44"><a href="Ch06.html#cb284-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb284-45"><a href="Ch06.html#cb284-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb284-46"><a href="Ch06.html#cb284-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb284-47"><a href="Ch06.html#cb284-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb284-48"><a href="Ch06.html#cb284-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb284-49"><a href="Ch06.html#cb284-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb284-50"><a href="Ch06.html#cb284-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb284-51"><a href="Ch06.html#cb284-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb284-52"><a href="Ch06.html#cb284-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb284-53"><a href="Ch06.html#cb284-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_243.png" width="100%" /></p>
</div>
<div id="ch06.244" class="section level2 hasAnchor" number="6.244">
<h2><span class="header-section-number">6.244</span> FarmlandPloughed_CropsFallow_r10000<a href="Ch06.html#ch06.244" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_CropsFallow_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_244</code></p>
<p><strong>English name:</strong> Fractional cover of Crop-, Fallow- Land within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju, papuvju platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.240">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="Ch06.html#cb285-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb285-2"><a href="Ch06.html#cb285-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb285-3"><a href="Ch06.html#cb285-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb285-4"><a href="Ch06.html#cb285-4" tabindex="-1"></a></span>
<span id="cb285-5"><a href="Ch06.html#cb285-5" tabindex="-1"></a></span>
<span id="cb285-6"><a href="Ch06.html#cb285-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb285-7"><a href="Ch06.html#cb285-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb285-8"><a href="Ch06.html#cb285-8" tabindex="-1"></a></span>
<span id="cb285-9"><a href="Ch06.html#cb285-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb285-10"><a href="Ch06.html#cb285-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb285-11"><a href="Ch06.html#cb285-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb285-12"><a href="Ch06.html#cb285-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb285-13"><a href="Ch06.html#cb285-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb285-14"><a href="Ch06.html#cb285-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb285-15"><a href="Ch06.html#cb285-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_cell.tif&quot;</span>),</span>
<span id="cb285-16"><a href="Ch06.html#cb285-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_CropsFallow&quot;</span>),</span>
<span id="cb285-17"><a href="Ch06.html#cb285-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb285-18"><a href="Ch06.html#cb285-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb285-19"><a href="Ch06.html#cb285-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb285-20"><a href="Ch06.html#cb285-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb285-21"><a href="Ch06.html#cb285-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb285-22"><a href="Ch06.html#cb285-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb285-23"><a href="Ch06.html#cb285-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb285-24"><a href="Ch06.html#cb285-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb285-25"><a href="Ch06.html#cb285-25" tabindex="-1"></a></span>
<span id="cb285-26"><a href="Ch06.html#cb285-26" tabindex="-1"></a></span>
<span id="cb285-27"><a href="Ch06.html#cb285-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_CropsFallow_r10000.tif   egv_244</span></span>
<span id="cb285-28"><a href="Ch06.html#cb285-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_r10000.tif&quot;</span>)</span>
<span id="cb285-29"><a href="Ch06.html#cb285-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_244&quot;</span></span>
<span id="cb285-30"><a href="Ch06.html#cb285-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb285-31"><a href="Ch06.html#cb285-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb285-32"><a href="Ch06.html#cb285-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallow_r10000.tif&quot;</span>,</span>
<span id="cb285-33"><a href="Ch06.html#cb285-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb285-34"><a href="Ch06.html#cb285-34" tabindex="-1"></a></span>
<span id="cb285-35"><a href="Ch06.html#cb285-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb285-36"><a href="Ch06.html#cb285-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb285-37"><a href="Ch06.html#cb285-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb285-38"><a href="Ch06.html#cb285-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb285-39"><a href="Ch06.html#cb285-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb285-40"><a href="Ch06.html#cb285-40" tabindex="-1"></a></span>
<span id="cb285-41"><a href="Ch06.html#cb285-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_CropsFallow_r10000.tif&quot;</span></span>
<span id="cb285-42"><a href="Ch06.html#cb285-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb285-43"><a href="Ch06.html#cb285-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb285-44"><a href="Ch06.html#cb285-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb285-45"><a href="Ch06.html#cb285-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb285-46"><a href="Ch06.html#cb285-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb285-47"><a href="Ch06.html#cb285-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb285-48"><a href="Ch06.html#cb285-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb285-49"><a href="Ch06.html#cb285-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb285-50"><a href="Ch06.html#cb285-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb285-51"><a href="Ch06.html#cb285-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb285-52"><a href="Ch06.html#cb285-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb285-53"><a href="Ch06.html#cb285-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_244.png" width="100%" /></p>
</div>
<div id="ch06.245" class="section level2 hasAnchor" number="6.245">
<h2><span class="header-section-number">6.245</span> FarmlandPloughed_CropsFallowTempGrass_cell<a href="Ch06.html#ch06.245" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_CropsFallowTempGrass_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_245</code></p>
<p><strong>English name:</strong> Fractional cover of Crop-, Fallow-, Temporary Grass- Lands within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Aramzemju, papuvju, zālāju-aramzemē platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels declared as crops, fallow land or grasslands in arable land were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>.
Geometries were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="Ch06.html#cb286-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb286-2"><a href="Ch06.html#cb286-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb286-3"><a href="Ch06.html#cb286-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb286-4"><a href="Ch06.html#cb286-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb286-5"><a href="Ch06.html#cb286-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb286-6"><a href="Ch06.html#cb286-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb286-7"><a href="Ch06.html#cb286-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb286-8"><a href="Ch06.html#cb286-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb286-9"><a href="Ch06.html#cb286-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb286-10"><a href="Ch06.html#cb286-10" tabindex="-1"></a></span>
<span id="cb286-11"><a href="Ch06.html#cb286-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb286-12"><a href="Ch06.html#cb286-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb286-13"><a href="Ch06.html#cb286-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb286-14"><a href="Ch06.html#cb286-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb286-15"><a href="Ch06.html#cb286-15" tabindex="-1"></a></span>
<span id="cb286-16"><a href="Ch06.html#cb286-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb286-17"><a href="Ch06.html#cb286-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb286-18"><a href="Ch06.html#cb286-18" tabindex="-1"></a></span>
<span id="cb286-19"><a href="Ch06.html#cb286-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb286-20"><a href="Ch06.html#cb286-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb286-21"><a href="Ch06.html#cb286-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb286-22"><a href="Ch06.html#cb286-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb286-23"><a href="Ch06.html#cb286-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb286-24"><a href="Ch06.html#cb286-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb286-25"><a href="Ch06.html#cb286-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb286-26"><a href="Ch06.html#cb286-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb286-27"><a href="Ch06.html#cb286-27" tabindex="-1"></a></span>
<span id="cb286-28"><a href="Ch06.html#cb286-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb286-29"><a href="Ch06.html#cb286-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb286-30"><a href="Ch06.html#cb286-30" tabindex="-1"></a></span>
<span id="cb286-31"><a href="Ch06.html#cb286-31" tabindex="-1"></a></span>
<span id="cb286-32"><a href="Ch06.html#cb286-32" tabindex="-1"></a><span class="co"># FarmlandPloughed_CropsFallowTempGrass_cell.tif    egv_245 ----</span></span>
<span id="cb286-33"><a href="Ch06.html#cb286-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb286-34"><a href="Ch06.html#cb286-34" tabindex="-1"></a>  <span class="fu">filter</span>(SDM_grupa_sakums <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;aramzemes (citur neiekļautās)&quot;</span>,</span>
<span id="cb286-35"><a href="Ch06.html#cb286-35" tabindex="-1"></a>                                 <span class="st">&quot;aramzemes (labība-vasarāji)&quot;</span>,</span>
<span id="cb286-36"><a href="Ch06.html#cb286-36" tabindex="-1"></a>                                 <span class="st">&quot;aramzemes (labība-ziemāji)&quot;</span>,</span>
<span id="cb286-37"><a href="Ch06.html#cb286-37" tabindex="-1"></a>                                 <span class="st">&quot;aramzemes (vagu un rušināmkultūru)&quot;</span>,</span>
<span id="cb286-38"><a href="Ch06.html#cb286-38" tabindex="-1"></a>                                 <span class="st">&quot;aramzemes (vasaras rapsis un rispsis, kukurūzas, zirņi un pupas, soja, kaņepes)&quot;</span>,</span>
<span id="cb286-39"><a href="Ch06.html#cb286-39" tabindex="-1"></a>                                 <span class="st">&quot;aramzemes (ziemas rapsis un ripsis)&quot;</span>,</span>
<span id="cb286-40"><a href="Ch06.html#cb286-40" tabindex="-1"></a>                                 <span class="st">&quot;papuves&quot;</span>,</span>
<span id="cb286-41"><a href="Ch06.html#cb286-41" tabindex="-1"></a>                                 <span class="st">&quot;zālāji (kultivētie)&quot;</span>))</span>
<span id="cb286-42"><a href="Ch06.html#cb286-42" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb286-43"><a href="Ch06.html#cb286-43" tabindex="-1"></a></span>
<span id="cb286-44"><a href="Ch06.html#cb286-44" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb286-45"><a href="Ch06.html#cb286-45" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb286-46"><a href="Ch06.html#cb286-46" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb286-47"><a href="Ch06.html#cb286-47" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass_input.tif&quot;</span>,</span>
<span id="cb286-48"><a href="Ch06.html#cb286-48" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb286-49"><a href="Ch06.html#cb286-49" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb286-50"><a href="Ch06.html#cb286-50" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb286-51"><a href="Ch06.html#cb286-51" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb286-52"><a href="Ch06.html#cb286-52" tabindex="-1"></a>p2i_rez</span>
<span id="cb286-53"><a href="Ch06.html#cb286-53" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb286-54"><a href="Ch06.html#cb286-54" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass_input.tif&quot;</span>),</span>
<span id="cb286-55"><a href="Ch06.html#cb286-55" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb286-56"><a href="Ch06.html#cb286-56" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb286-57"><a href="Ch06.html#cb286-57" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb286-58"><a href="Ch06.html#cb286-58" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb286-59"><a href="Ch06.html#cb286-59" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass_cell.tif&quot;</span>,</span>
<span id="cb286-60"><a href="Ch06.html#cb286-60" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_245&quot;</span>,</span>
<span id="cb286-61"><a href="Ch06.html#cb286-61" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb286-62"><a href="Ch06.html#cb286-62" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb286-63"><a href="Ch06.html#cb286-63" tabindex="-1"></a>i2e_rez</span>
<span id="cb286-64"><a href="Ch06.html#cb286-64" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb286-65"><a href="Ch06.html#cb286-65" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb286-66"><a href="Ch06.html#cb286-66" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb286-67"><a href="Ch06.html#cb286-67" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandPloughed_CropsFallowTempGrass_input.tif&quot;</span>)</span>
<span id="cb286-68"><a href="Ch06.html#cb286-68" tabindex="-1"></a></span>
<span id="cb286-69"><a href="Ch06.html#cb286-69" tabindex="-1"></a></span>
<span id="cb286-70"><a href="Ch06.html#cb286-70" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb286-71"><a href="Ch06.html#cb286-71" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb286-72"><a href="Ch06.html#cb286-72" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb286-73"><a href="Ch06.html#cb286-73" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb286-74"><a href="Ch06.html#cb286-74" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb286-75"><a href="Ch06.html#cb286-75" tabindex="-1"></a></span>
<span id="cb286-76"><a href="Ch06.html#cb286-76" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass_cell.tif&quot;</span></span>
<span id="cb286-77"><a href="Ch06.html#cb286-77" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb286-78"><a href="Ch06.html#cb286-78" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb286-79"><a href="Ch06.html#cb286-79" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb286-80"><a href="Ch06.html#cb286-80" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb286-81"><a href="Ch06.html#cb286-81" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb286-82"><a href="Ch06.html#cb286-82" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb286-83"><a href="Ch06.html#cb286-83" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb286-84"><a href="Ch06.html#cb286-84" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb286-85"><a href="Ch06.html#cb286-85" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb286-86"><a href="Ch06.html#cb286-86" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb286-87"><a href="Ch06.html#cb286-87" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb286-88"><a href="Ch06.html#cb286-88" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_245.png" width="100%" /></p>
</div>
<div id="ch06.246" class="section level2 hasAnchor" number="6.246">
<h2><span class="header-section-number">6.246</span> FarmlandPloughed_CropsFallowTempGrass_r500<a href="Ch06.html#ch06.246" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_CropsFallowTempGrass_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_246</code></p>
<p><strong>English name:</strong> Fractional cover of Crop-, Fallow-, Temporary Grass- Lands within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju, papuvju, zālāju-aramzemē platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.245">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="Ch06.html#cb287-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb287-2"><a href="Ch06.html#cb287-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb287-3"><a href="Ch06.html#cb287-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb287-4"><a href="Ch06.html#cb287-4" tabindex="-1"></a></span>
<span id="cb287-5"><a href="Ch06.html#cb287-5" tabindex="-1"></a></span>
<span id="cb287-6"><a href="Ch06.html#cb287-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb287-7"><a href="Ch06.html#cb287-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb287-8"><a href="Ch06.html#cb287-8" tabindex="-1"></a></span>
<span id="cb287-9"><a href="Ch06.html#cb287-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb287-10"><a href="Ch06.html#cb287-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb287-11"><a href="Ch06.html#cb287-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb287-12"><a href="Ch06.html#cb287-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb287-13"><a href="Ch06.html#cb287-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb287-14"><a href="Ch06.html#cb287-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb287-15"><a href="Ch06.html#cb287-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_cell.tif&quot;</span>),</span>
<span id="cb287-16"><a href="Ch06.html#cb287-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass&quot;</span>),</span>
<span id="cb287-17"><a href="Ch06.html#cb287-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb287-18"><a href="Ch06.html#cb287-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb287-19"><a href="Ch06.html#cb287-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb287-20"><a href="Ch06.html#cb287-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb287-21"><a href="Ch06.html#cb287-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb287-22"><a href="Ch06.html#cb287-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb287-23"><a href="Ch06.html#cb287-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb287-24"><a href="Ch06.html#cb287-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb287-25"><a href="Ch06.html#cb287-25" tabindex="-1"></a></span>
<span id="cb287-26"><a href="Ch06.html#cb287-26" tabindex="-1"></a></span>
<span id="cb287-27"><a href="Ch06.html#cb287-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_CropsFallowTempGrass_r500.tif    egv_246</span></span>
<span id="cb287-28"><a href="Ch06.html#cb287-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_r500.tif&quot;</span>)</span>
<span id="cb287-29"><a href="Ch06.html#cb287-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_246&quot;</span></span>
<span id="cb287-30"><a href="Ch06.html#cb287-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb287-31"><a href="Ch06.html#cb287-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb287-32"><a href="Ch06.html#cb287-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_r500.tif&quot;</span>,</span>
<span id="cb287-33"><a href="Ch06.html#cb287-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb287-34"><a href="Ch06.html#cb287-34" tabindex="-1"></a></span>
<span id="cb287-35"><a href="Ch06.html#cb287-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb287-36"><a href="Ch06.html#cb287-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb287-37"><a href="Ch06.html#cb287-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb287-38"><a href="Ch06.html#cb287-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb287-39"><a href="Ch06.html#cb287-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb287-40"><a href="Ch06.html#cb287-40" tabindex="-1"></a></span>
<span id="cb287-41"><a href="Ch06.html#cb287-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass_r500.tif&quot;</span></span>
<span id="cb287-42"><a href="Ch06.html#cb287-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb287-43"><a href="Ch06.html#cb287-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb287-44"><a href="Ch06.html#cb287-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb287-45"><a href="Ch06.html#cb287-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb287-46"><a href="Ch06.html#cb287-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb287-47"><a href="Ch06.html#cb287-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb287-48"><a href="Ch06.html#cb287-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb287-49"><a href="Ch06.html#cb287-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb287-50"><a href="Ch06.html#cb287-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb287-51"><a href="Ch06.html#cb287-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb287-52"><a href="Ch06.html#cb287-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb287-53"><a href="Ch06.html#cb287-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_246.png" width="100%" /></p>
</div>
<div id="ch06.247" class="section level2 hasAnchor" number="6.247">
<h2><span class="header-section-number">6.247</span> FarmlandPloughed_CropsFallowTempGrass_r1250<a href="Ch06.html#ch06.247" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_CropsFallowTempGrass_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_247</code></p>
<p><strong>English name:</strong> Fractional cover of Crop-, Fallow-, Temporary Grass- Lands within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju, papuvju, zālāju-aramzemē platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.245">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="Ch06.html#cb288-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb288-2"><a href="Ch06.html#cb288-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb288-3"><a href="Ch06.html#cb288-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb288-4"><a href="Ch06.html#cb288-4" tabindex="-1"></a></span>
<span id="cb288-5"><a href="Ch06.html#cb288-5" tabindex="-1"></a></span>
<span id="cb288-6"><a href="Ch06.html#cb288-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb288-7"><a href="Ch06.html#cb288-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb288-8"><a href="Ch06.html#cb288-8" tabindex="-1"></a></span>
<span id="cb288-9"><a href="Ch06.html#cb288-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb288-10"><a href="Ch06.html#cb288-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb288-11"><a href="Ch06.html#cb288-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb288-12"><a href="Ch06.html#cb288-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb288-13"><a href="Ch06.html#cb288-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb288-14"><a href="Ch06.html#cb288-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb288-15"><a href="Ch06.html#cb288-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_cell.tif&quot;</span>),</span>
<span id="cb288-16"><a href="Ch06.html#cb288-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass&quot;</span>),</span>
<span id="cb288-17"><a href="Ch06.html#cb288-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb288-18"><a href="Ch06.html#cb288-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb288-19"><a href="Ch06.html#cb288-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb288-20"><a href="Ch06.html#cb288-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb288-21"><a href="Ch06.html#cb288-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb288-22"><a href="Ch06.html#cb288-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb288-23"><a href="Ch06.html#cb288-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb288-24"><a href="Ch06.html#cb288-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb288-25"><a href="Ch06.html#cb288-25" tabindex="-1"></a></span>
<span id="cb288-26"><a href="Ch06.html#cb288-26" tabindex="-1"></a></span>
<span id="cb288-27"><a href="Ch06.html#cb288-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_CropsFallowTempGrass_r1250.tif   egv_247</span></span>
<span id="cb288-28"><a href="Ch06.html#cb288-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_r1250.tif&quot;</span>)</span>
<span id="cb288-29"><a href="Ch06.html#cb288-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_247&quot;</span></span>
<span id="cb288-30"><a href="Ch06.html#cb288-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb288-31"><a href="Ch06.html#cb288-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb288-32"><a href="Ch06.html#cb288-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_r1250.tif&quot;</span>,</span>
<span id="cb288-33"><a href="Ch06.html#cb288-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb288-34"><a href="Ch06.html#cb288-34" tabindex="-1"></a></span>
<span id="cb288-35"><a href="Ch06.html#cb288-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb288-36"><a href="Ch06.html#cb288-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb288-37"><a href="Ch06.html#cb288-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb288-38"><a href="Ch06.html#cb288-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb288-39"><a href="Ch06.html#cb288-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb288-40"><a href="Ch06.html#cb288-40" tabindex="-1"></a></span>
<span id="cb288-41"><a href="Ch06.html#cb288-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass_r1250.tif&quot;</span></span>
<span id="cb288-42"><a href="Ch06.html#cb288-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb288-43"><a href="Ch06.html#cb288-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb288-44"><a href="Ch06.html#cb288-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb288-45"><a href="Ch06.html#cb288-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb288-46"><a href="Ch06.html#cb288-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb288-47"><a href="Ch06.html#cb288-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb288-48"><a href="Ch06.html#cb288-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb288-49"><a href="Ch06.html#cb288-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb288-50"><a href="Ch06.html#cb288-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb288-51"><a href="Ch06.html#cb288-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb288-52"><a href="Ch06.html#cb288-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb288-53"><a href="Ch06.html#cb288-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_247.png" width="100%" /></p>
</div>
<div id="ch06.248" class="section level2 hasAnchor" number="6.248">
<h2><span class="header-section-number">6.248</span> FarmlandPloughed_CropsFallowTempGrass_r3000<a href="Ch06.html#ch06.248" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_CropsFallowTempGrass_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_248</code></p>
<p><strong>English name:</strong> Fractional cover of Crop-, Fallow-, Temporary Grass- Lands within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju, papuvju, zālāju-aramzemē platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.245">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="Ch06.html#cb289-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb289-2"><a href="Ch06.html#cb289-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb289-3"><a href="Ch06.html#cb289-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb289-4"><a href="Ch06.html#cb289-4" tabindex="-1"></a></span>
<span id="cb289-5"><a href="Ch06.html#cb289-5" tabindex="-1"></a></span>
<span id="cb289-6"><a href="Ch06.html#cb289-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb289-7"><a href="Ch06.html#cb289-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb289-8"><a href="Ch06.html#cb289-8" tabindex="-1"></a></span>
<span id="cb289-9"><a href="Ch06.html#cb289-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb289-10"><a href="Ch06.html#cb289-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb289-11"><a href="Ch06.html#cb289-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb289-12"><a href="Ch06.html#cb289-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb289-13"><a href="Ch06.html#cb289-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb289-14"><a href="Ch06.html#cb289-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb289-15"><a href="Ch06.html#cb289-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_cell.tif&quot;</span>),</span>
<span id="cb289-16"><a href="Ch06.html#cb289-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass&quot;</span>),</span>
<span id="cb289-17"><a href="Ch06.html#cb289-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb289-18"><a href="Ch06.html#cb289-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb289-19"><a href="Ch06.html#cb289-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb289-20"><a href="Ch06.html#cb289-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb289-21"><a href="Ch06.html#cb289-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb289-22"><a href="Ch06.html#cb289-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb289-23"><a href="Ch06.html#cb289-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb289-24"><a href="Ch06.html#cb289-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb289-25"><a href="Ch06.html#cb289-25" tabindex="-1"></a></span>
<span id="cb289-26"><a href="Ch06.html#cb289-26" tabindex="-1"></a></span>
<span id="cb289-27"><a href="Ch06.html#cb289-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_CropsFallowTempGrass_r3000.tif   egv_248</span></span>
<span id="cb289-28"><a href="Ch06.html#cb289-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_r3000.tif&quot;</span>)</span>
<span id="cb289-29"><a href="Ch06.html#cb289-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_248&quot;</span></span>
<span id="cb289-30"><a href="Ch06.html#cb289-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb289-31"><a href="Ch06.html#cb289-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb289-32"><a href="Ch06.html#cb289-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_r3000.tif&quot;</span>,</span>
<span id="cb289-33"><a href="Ch06.html#cb289-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb289-34"><a href="Ch06.html#cb289-34" tabindex="-1"></a></span>
<span id="cb289-35"><a href="Ch06.html#cb289-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb289-36"><a href="Ch06.html#cb289-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb289-37"><a href="Ch06.html#cb289-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb289-38"><a href="Ch06.html#cb289-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb289-39"><a href="Ch06.html#cb289-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb289-40"><a href="Ch06.html#cb289-40" tabindex="-1"></a></span>
<span id="cb289-41"><a href="Ch06.html#cb289-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass_r3000.tif&quot;</span></span>
<span id="cb289-42"><a href="Ch06.html#cb289-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb289-43"><a href="Ch06.html#cb289-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb289-44"><a href="Ch06.html#cb289-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb289-45"><a href="Ch06.html#cb289-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb289-46"><a href="Ch06.html#cb289-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb289-47"><a href="Ch06.html#cb289-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb289-48"><a href="Ch06.html#cb289-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb289-49"><a href="Ch06.html#cb289-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb289-50"><a href="Ch06.html#cb289-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb289-51"><a href="Ch06.html#cb289-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb289-52"><a href="Ch06.html#cb289-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb289-53"><a href="Ch06.html#cb289-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_248.png" width="100%" /></p>
</div>
<div id="ch06.249" class="section level2 hasAnchor" number="6.249">
<h2><span class="header-section-number">6.249</span> FarmlandPloughed_CropsFallowTempGrass_r10000<a href="Ch06.html#ch06.249" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_CropsFallowTempGrass_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_249</code></p>
<p><strong>English name:</strong> Fractional cover of Crop-, Fallow-, Temporary Grass- Lands within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Aramzemju, papuvju, zālāju-aramzemē platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.245">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="Ch06.html#cb290-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb290-2"><a href="Ch06.html#cb290-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb290-3"><a href="Ch06.html#cb290-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb290-4"><a href="Ch06.html#cb290-4" tabindex="-1"></a></span>
<span id="cb290-5"><a href="Ch06.html#cb290-5" tabindex="-1"></a></span>
<span id="cb290-6"><a href="Ch06.html#cb290-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb290-7"><a href="Ch06.html#cb290-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb290-8"><a href="Ch06.html#cb290-8" tabindex="-1"></a></span>
<span id="cb290-9"><a href="Ch06.html#cb290-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb290-10"><a href="Ch06.html#cb290-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb290-11"><a href="Ch06.html#cb290-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb290-12"><a href="Ch06.html#cb290-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb290-13"><a href="Ch06.html#cb290-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb290-14"><a href="Ch06.html#cb290-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb290-15"><a href="Ch06.html#cb290-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_cell.tif&quot;</span>),</span>
<span id="cb290-16"><a href="Ch06.html#cb290-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass&quot;</span>),</span>
<span id="cb290-17"><a href="Ch06.html#cb290-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb290-18"><a href="Ch06.html#cb290-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb290-19"><a href="Ch06.html#cb290-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb290-20"><a href="Ch06.html#cb290-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb290-21"><a href="Ch06.html#cb290-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb290-22"><a href="Ch06.html#cb290-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb290-23"><a href="Ch06.html#cb290-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb290-24"><a href="Ch06.html#cb290-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb290-25"><a href="Ch06.html#cb290-25" tabindex="-1"></a></span>
<span id="cb290-26"><a href="Ch06.html#cb290-26" tabindex="-1"></a></span>
<span id="cb290-27"><a href="Ch06.html#cb290-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_CropsFallowTempGrass_r10000.tif  egv_249</span></span>
<span id="cb290-28"><a href="Ch06.html#cb290-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_r10000.tif&quot;</span>)</span>
<span id="cb290-29"><a href="Ch06.html#cb290-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_249&quot;</span></span>
<span id="cb290-30"><a href="Ch06.html#cb290-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb290-31"><a href="Ch06.html#cb290-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb290-32"><a href="Ch06.html#cb290-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_CropsFallowTempGrass_r10000.tif&quot;</span>,</span>
<span id="cb290-33"><a href="Ch06.html#cb290-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb290-34"><a href="Ch06.html#cb290-34" tabindex="-1"></a></span>
<span id="cb290-35"><a href="Ch06.html#cb290-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb290-36"><a href="Ch06.html#cb290-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb290-37"><a href="Ch06.html#cb290-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb290-38"><a href="Ch06.html#cb290-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb290-39"><a href="Ch06.html#cb290-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb290-40"><a href="Ch06.html#cb290-40" tabindex="-1"></a></span>
<span id="cb290-41"><a href="Ch06.html#cb290-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_CropsFallowTempGrass_r10000.tif&quot;</span></span>
<span id="cb290-42"><a href="Ch06.html#cb290-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb290-43"><a href="Ch06.html#cb290-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb290-44"><a href="Ch06.html#cb290-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb290-45"><a href="Ch06.html#cb290-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb290-46"><a href="Ch06.html#cb290-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb290-47"><a href="Ch06.html#cb290-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb290-48"><a href="Ch06.html#cb290-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb290-49"><a href="Ch06.html#cb290-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb290-50"><a href="Ch06.html#cb290-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb290-51"><a href="Ch06.html#cb290-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb290-52"><a href="Ch06.html#cb290-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb290-53"><a href="Ch06.html#cb290-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_249.png" width="100%" /></p>
</div>
<div id="ch06.250" class="section level2 hasAnchor" number="6.250">
<h2><span class="header-section-number">6.250</span> FarmlandPloughed_Fallow_cell<a href="Ch06.html#ch06.250" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_Fallow_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_250</code></p>
<p><strong>English name:</strong> Fractional cover of Fallow Land within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Papuvju platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels declared as fallow land were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>.
Geometries were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="Ch06.html#cb291-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb291-2"><a href="Ch06.html#cb291-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb291-3"><a href="Ch06.html#cb291-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb291-4"><a href="Ch06.html#cb291-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb291-5"><a href="Ch06.html#cb291-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb291-6"><a href="Ch06.html#cb291-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb291-7"><a href="Ch06.html#cb291-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb291-8"><a href="Ch06.html#cb291-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb291-9"><a href="Ch06.html#cb291-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb291-10"><a href="Ch06.html#cb291-10" tabindex="-1"></a></span>
<span id="cb291-11"><a href="Ch06.html#cb291-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb291-12"><a href="Ch06.html#cb291-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb291-13"><a href="Ch06.html#cb291-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb291-14"><a href="Ch06.html#cb291-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb291-15"><a href="Ch06.html#cb291-15" tabindex="-1"></a></span>
<span id="cb291-16"><a href="Ch06.html#cb291-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb291-17"><a href="Ch06.html#cb291-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb291-18"><a href="Ch06.html#cb291-18" tabindex="-1"></a></span>
<span id="cb291-19"><a href="Ch06.html#cb291-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb291-20"><a href="Ch06.html#cb291-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb291-21"><a href="Ch06.html#cb291-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb291-22"><a href="Ch06.html#cb291-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb291-23"><a href="Ch06.html#cb291-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb291-24"><a href="Ch06.html#cb291-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb291-25"><a href="Ch06.html#cb291-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb291-26"><a href="Ch06.html#cb291-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb291-27"><a href="Ch06.html#cb291-27" tabindex="-1"></a></span>
<span id="cb291-28"><a href="Ch06.html#cb291-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb291-29"><a href="Ch06.html#cb291-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb291-30"><a href="Ch06.html#cb291-30" tabindex="-1"></a></span>
<span id="cb291-31"><a href="Ch06.html#cb291-31" tabindex="-1"></a></span>
<span id="cb291-32"><a href="Ch06.html#cb291-32" tabindex="-1"></a><span class="co"># FarmlandPloughed_Fallow_cell.tif  egv_250 ----</span></span>
<span id="cb291-33"><a href="Ch06.html#cb291-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb291-34"><a href="Ch06.html#cb291-34" tabindex="-1"></a>  <span class="fu">filter</span>(SDM_grupa_sakums <span class="sc">==</span> <span class="st">&quot;papuves&quot;</span>)</span>
<span id="cb291-35"><a href="Ch06.html#cb291-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb291-36"><a href="Ch06.html#cb291-36" tabindex="-1"></a></span>
<span id="cb291-37"><a href="Ch06.html#cb291-37" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb291-38"><a href="Ch06.html#cb291-38" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb291-39"><a href="Ch06.html#cb291-39" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb291-40"><a href="Ch06.html#cb291-40" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandPloughed_Fallow_input.tif&quot;</span>,</span>
<span id="cb291-41"><a href="Ch06.html#cb291-41" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb291-42"><a href="Ch06.html#cb291-42" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb291-43"><a href="Ch06.html#cb291-43" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb291-44"><a href="Ch06.html#cb291-44" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb291-45"><a href="Ch06.html#cb291-45" tabindex="-1"></a>p2i_rez</span>
<span id="cb291-46"><a href="Ch06.html#cb291-46" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb291-47"><a href="Ch06.html#cb291-47" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandPloughed_Fallow_input.tif&quot;</span>),</span>
<span id="cb291-48"><a href="Ch06.html#cb291-48" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb291-49"><a href="Ch06.html#cb291-49" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb291-50"><a href="Ch06.html#cb291-50" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb291-51"><a href="Ch06.html#cb291-51" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb291-52"><a href="Ch06.html#cb291-52" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandPloughed_Fallow_cell.tif&quot;</span>,</span>
<span id="cb291-53"><a href="Ch06.html#cb291-53" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_250&quot;</span>,</span>
<span id="cb291-54"><a href="Ch06.html#cb291-54" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb291-55"><a href="Ch06.html#cb291-55" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb291-56"><a href="Ch06.html#cb291-56" tabindex="-1"></a>i2e_rez</span>
<span id="cb291-57"><a href="Ch06.html#cb291-57" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb291-58"><a href="Ch06.html#cb291-58" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb291-59"><a href="Ch06.html#cb291-59" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb291-60"><a href="Ch06.html#cb291-60" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandPloughed_Fallow_input.tif&quot;</span>)</span>
<span id="cb291-61"><a href="Ch06.html#cb291-61" tabindex="-1"></a></span>
<span id="cb291-62"><a href="Ch06.html#cb291-62" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb291-63"><a href="Ch06.html#cb291-63" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb291-64"><a href="Ch06.html#cb291-64" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb291-65"><a href="Ch06.html#cb291-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb291-66"><a href="Ch06.html#cb291-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb291-67"><a href="Ch06.html#cb291-67" tabindex="-1"></a></span>
<span id="cb291-68"><a href="Ch06.html#cb291-68" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_Fallow_cell.tif&quot;</span></span>
<span id="cb291-69"><a href="Ch06.html#cb291-69" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb291-70"><a href="Ch06.html#cb291-70" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb291-71"><a href="Ch06.html#cb291-71" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb291-72"><a href="Ch06.html#cb291-72" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb291-73"><a href="Ch06.html#cb291-73" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb291-74"><a href="Ch06.html#cb291-74" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb291-75"><a href="Ch06.html#cb291-75" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb291-76"><a href="Ch06.html#cb291-76" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb291-77"><a href="Ch06.html#cb291-77" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb291-78"><a href="Ch06.html#cb291-78" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb291-79"><a href="Ch06.html#cb291-79" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb291-80"><a href="Ch06.html#cb291-80" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_250.png" width="100%" /></p>
</div>
<div id="ch06.251" class="section level2 hasAnchor" number="6.251">
<h2><span class="header-section-number">6.251</span> FarmlandPloughed_Fallow_r500<a href="Ch06.html#ch06.251" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_Fallow_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_251</code></p>
<p><strong>English name:</strong> Fractional cover of Fallow Land within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Papuvju platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.250">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="Ch06.html#cb292-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb292-2"><a href="Ch06.html#cb292-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb292-3"><a href="Ch06.html#cb292-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb292-4"><a href="Ch06.html#cb292-4" tabindex="-1"></a></span>
<span id="cb292-5"><a href="Ch06.html#cb292-5" tabindex="-1"></a></span>
<span id="cb292-6"><a href="Ch06.html#cb292-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb292-7"><a href="Ch06.html#cb292-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb292-8"><a href="Ch06.html#cb292-8" tabindex="-1"></a></span>
<span id="cb292-9"><a href="Ch06.html#cb292-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb292-10"><a href="Ch06.html#cb292-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb292-11"><a href="Ch06.html#cb292-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb292-12"><a href="Ch06.html#cb292-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb292-13"><a href="Ch06.html#cb292-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb292-14"><a href="Ch06.html#cb292-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb292-15"><a href="Ch06.html#cb292-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_cell.tif&quot;</span>),</span>
<span id="cb292-16"><a href="Ch06.html#cb292-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_Fallow&quot;</span>),</span>
<span id="cb292-17"><a href="Ch06.html#cb292-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb292-18"><a href="Ch06.html#cb292-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb292-19"><a href="Ch06.html#cb292-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb292-20"><a href="Ch06.html#cb292-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb292-21"><a href="Ch06.html#cb292-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb292-22"><a href="Ch06.html#cb292-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb292-23"><a href="Ch06.html#cb292-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb292-24"><a href="Ch06.html#cb292-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb292-25"><a href="Ch06.html#cb292-25" tabindex="-1"></a></span>
<span id="cb292-26"><a href="Ch06.html#cb292-26" tabindex="-1"></a></span>
<span id="cb292-27"><a href="Ch06.html#cb292-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_Fallow_r500.tif  egv_251</span></span>
<span id="cb292-28"><a href="Ch06.html#cb292-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_r500.tif&quot;</span>)</span>
<span id="cb292-29"><a href="Ch06.html#cb292-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_251&quot;</span></span>
<span id="cb292-30"><a href="Ch06.html#cb292-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb292-31"><a href="Ch06.html#cb292-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb292-32"><a href="Ch06.html#cb292-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_r500.tif&quot;</span>,</span>
<span id="cb292-33"><a href="Ch06.html#cb292-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb292-34"><a href="Ch06.html#cb292-34" tabindex="-1"></a></span>
<span id="cb292-35"><a href="Ch06.html#cb292-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb292-36"><a href="Ch06.html#cb292-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb292-37"><a href="Ch06.html#cb292-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb292-38"><a href="Ch06.html#cb292-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb292-39"><a href="Ch06.html#cb292-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb292-40"><a href="Ch06.html#cb292-40" tabindex="-1"></a></span>
<span id="cb292-41"><a href="Ch06.html#cb292-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_Fallow_r500.tif&quot;</span></span>
<span id="cb292-42"><a href="Ch06.html#cb292-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb292-43"><a href="Ch06.html#cb292-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb292-44"><a href="Ch06.html#cb292-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb292-45"><a href="Ch06.html#cb292-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb292-46"><a href="Ch06.html#cb292-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb292-47"><a href="Ch06.html#cb292-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb292-48"><a href="Ch06.html#cb292-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb292-49"><a href="Ch06.html#cb292-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb292-50"><a href="Ch06.html#cb292-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb292-51"><a href="Ch06.html#cb292-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb292-52"><a href="Ch06.html#cb292-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb292-53"><a href="Ch06.html#cb292-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_251.png" width="100%" /></p>
</div>
<div id="ch06.252" class="section level2 hasAnchor" number="6.252">
<h2><span class="header-section-number">6.252</span> FarmlandPloughed_Fallow_r1250<a href="Ch06.html#ch06.252" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_Fallow_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_252</code></p>
<p><strong>English name:</strong> Fractional cover of Fallow Land within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Papuvju platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.250">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="Ch06.html#cb293-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb293-2"><a href="Ch06.html#cb293-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb293-3"><a href="Ch06.html#cb293-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb293-4"><a href="Ch06.html#cb293-4" tabindex="-1"></a></span>
<span id="cb293-5"><a href="Ch06.html#cb293-5" tabindex="-1"></a></span>
<span id="cb293-6"><a href="Ch06.html#cb293-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb293-7"><a href="Ch06.html#cb293-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb293-8"><a href="Ch06.html#cb293-8" tabindex="-1"></a></span>
<span id="cb293-9"><a href="Ch06.html#cb293-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb293-10"><a href="Ch06.html#cb293-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb293-11"><a href="Ch06.html#cb293-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb293-12"><a href="Ch06.html#cb293-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb293-13"><a href="Ch06.html#cb293-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb293-14"><a href="Ch06.html#cb293-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb293-15"><a href="Ch06.html#cb293-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_cell.tif&quot;</span>),</span>
<span id="cb293-16"><a href="Ch06.html#cb293-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_Fallow&quot;</span>),</span>
<span id="cb293-17"><a href="Ch06.html#cb293-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb293-18"><a href="Ch06.html#cb293-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb293-19"><a href="Ch06.html#cb293-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb293-20"><a href="Ch06.html#cb293-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb293-21"><a href="Ch06.html#cb293-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb293-22"><a href="Ch06.html#cb293-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb293-23"><a href="Ch06.html#cb293-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb293-24"><a href="Ch06.html#cb293-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb293-25"><a href="Ch06.html#cb293-25" tabindex="-1"></a></span>
<span id="cb293-26"><a href="Ch06.html#cb293-26" tabindex="-1"></a></span>
<span id="cb293-27"><a href="Ch06.html#cb293-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_Fallow_r1250.tif egv_252</span></span>
<span id="cb293-28"><a href="Ch06.html#cb293-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_r1250.tif&quot;</span>)</span>
<span id="cb293-29"><a href="Ch06.html#cb293-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_252&quot;</span></span>
<span id="cb293-30"><a href="Ch06.html#cb293-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb293-31"><a href="Ch06.html#cb293-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb293-32"><a href="Ch06.html#cb293-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_r1250.tif&quot;</span>,</span>
<span id="cb293-33"><a href="Ch06.html#cb293-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb293-34"><a href="Ch06.html#cb293-34" tabindex="-1"></a></span>
<span id="cb293-35"><a href="Ch06.html#cb293-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb293-36"><a href="Ch06.html#cb293-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb293-37"><a href="Ch06.html#cb293-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb293-38"><a href="Ch06.html#cb293-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb293-39"><a href="Ch06.html#cb293-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb293-40"><a href="Ch06.html#cb293-40" tabindex="-1"></a></span>
<span id="cb293-41"><a href="Ch06.html#cb293-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_Fallow_r1250.tif&quot;</span></span>
<span id="cb293-42"><a href="Ch06.html#cb293-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb293-43"><a href="Ch06.html#cb293-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb293-44"><a href="Ch06.html#cb293-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb293-45"><a href="Ch06.html#cb293-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb293-46"><a href="Ch06.html#cb293-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb293-47"><a href="Ch06.html#cb293-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb293-48"><a href="Ch06.html#cb293-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb293-49"><a href="Ch06.html#cb293-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb293-50"><a href="Ch06.html#cb293-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb293-51"><a href="Ch06.html#cb293-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb293-52"><a href="Ch06.html#cb293-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb293-53"><a href="Ch06.html#cb293-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_252.png" width="100%" /></p>
</div>
<div id="ch06.253" class="section level2 hasAnchor" number="6.253">
<h2><span class="header-section-number">6.253</span> FarmlandPloughed_Fallow_r3000<a href="Ch06.html#ch06.253" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_Fallow_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_253</code></p>
<p><strong>English name:</strong> Fractional cover of Fallow Land within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Papuvju platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.250">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="Ch06.html#cb294-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb294-2"><a href="Ch06.html#cb294-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb294-3"><a href="Ch06.html#cb294-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb294-4"><a href="Ch06.html#cb294-4" tabindex="-1"></a></span>
<span id="cb294-5"><a href="Ch06.html#cb294-5" tabindex="-1"></a></span>
<span id="cb294-6"><a href="Ch06.html#cb294-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb294-7"><a href="Ch06.html#cb294-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb294-8"><a href="Ch06.html#cb294-8" tabindex="-1"></a></span>
<span id="cb294-9"><a href="Ch06.html#cb294-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb294-10"><a href="Ch06.html#cb294-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb294-11"><a href="Ch06.html#cb294-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb294-12"><a href="Ch06.html#cb294-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb294-13"><a href="Ch06.html#cb294-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb294-14"><a href="Ch06.html#cb294-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb294-15"><a href="Ch06.html#cb294-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_cell.tif&quot;</span>),</span>
<span id="cb294-16"><a href="Ch06.html#cb294-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_Fallow&quot;</span>),</span>
<span id="cb294-17"><a href="Ch06.html#cb294-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb294-18"><a href="Ch06.html#cb294-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb294-19"><a href="Ch06.html#cb294-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb294-20"><a href="Ch06.html#cb294-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb294-21"><a href="Ch06.html#cb294-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb294-22"><a href="Ch06.html#cb294-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb294-23"><a href="Ch06.html#cb294-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb294-24"><a href="Ch06.html#cb294-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb294-25"><a href="Ch06.html#cb294-25" tabindex="-1"></a></span>
<span id="cb294-26"><a href="Ch06.html#cb294-26" tabindex="-1"></a></span>
<span id="cb294-27"><a href="Ch06.html#cb294-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_Fallow_r3000.tif egv_253</span></span>
<span id="cb294-28"><a href="Ch06.html#cb294-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_r3000.tif&quot;</span>)</span>
<span id="cb294-29"><a href="Ch06.html#cb294-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_253&quot;</span></span>
<span id="cb294-30"><a href="Ch06.html#cb294-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb294-31"><a href="Ch06.html#cb294-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb294-32"><a href="Ch06.html#cb294-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_r3000.tif&quot;</span>,</span>
<span id="cb294-33"><a href="Ch06.html#cb294-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb294-34"><a href="Ch06.html#cb294-34" tabindex="-1"></a></span>
<span id="cb294-35"><a href="Ch06.html#cb294-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb294-36"><a href="Ch06.html#cb294-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb294-37"><a href="Ch06.html#cb294-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb294-38"><a href="Ch06.html#cb294-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb294-39"><a href="Ch06.html#cb294-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb294-40"><a href="Ch06.html#cb294-40" tabindex="-1"></a></span>
<span id="cb294-41"><a href="Ch06.html#cb294-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_Fallow_r3000.tif&quot;</span></span>
<span id="cb294-42"><a href="Ch06.html#cb294-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb294-43"><a href="Ch06.html#cb294-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb294-44"><a href="Ch06.html#cb294-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb294-45"><a href="Ch06.html#cb294-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb294-46"><a href="Ch06.html#cb294-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb294-47"><a href="Ch06.html#cb294-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb294-48"><a href="Ch06.html#cb294-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb294-49"><a href="Ch06.html#cb294-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb294-50"><a href="Ch06.html#cb294-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb294-51"><a href="Ch06.html#cb294-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb294-52"><a href="Ch06.html#cb294-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb294-53"><a href="Ch06.html#cb294-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_253.png" width="100%" /></p>
</div>
<div id="ch06.254" class="section level2 hasAnchor" number="6.254">
<h2><span class="header-section-number">6.254</span> FarmlandPloughed_Fallow_r10000<a href="Ch06.html#ch06.254" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandPloughed_Fallow_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_254</code></p>
<p><strong>English name:</strong> Fractional cover of Fallow Land within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Papuvju platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.250">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="Ch06.html#cb295-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb295-2"><a href="Ch06.html#cb295-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb295-3"><a href="Ch06.html#cb295-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb295-4"><a href="Ch06.html#cb295-4" tabindex="-1"></a></span>
<span id="cb295-5"><a href="Ch06.html#cb295-5" tabindex="-1"></a></span>
<span id="cb295-6"><a href="Ch06.html#cb295-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb295-7"><a href="Ch06.html#cb295-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb295-8"><a href="Ch06.html#cb295-8" tabindex="-1"></a></span>
<span id="cb295-9"><a href="Ch06.html#cb295-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb295-10"><a href="Ch06.html#cb295-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb295-11"><a href="Ch06.html#cb295-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb295-12"><a href="Ch06.html#cb295-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb295-13"><a href="Ch06.html#cb295-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb295-14"><a href="Ch06.html#cb295-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb295-15"><a href="Ch06.html#cb295-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_cell.tif&quot;</span>),</span>
<span id="cb295-16"><a href="Ch06.html#cb295-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandPloughed_Fallow&quot;</span>),</span>
<span id="cb295-17"><a href="Ch06.html#cb295-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb295-18"><a href="Ch06.html#cb295-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb295-19"><a href="Ch06.html#cb295-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb295-20"><a href="Ch06.html#cb295-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb295-21"><a href="Ch06.html#cb295-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb295-22"><a href="Ch06.html#cb295-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb295-23"><a href="Ch06.html#cb295-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb295-24"><a href="Ch06.html#cb295-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb295-25"><a href="Ch06.html#cb295-25" tabindex="-1"></a></span>
<span id="cb295-26"><a href="Ch06.html#cb295-26" tabindex="-1"></a></span>
<span id="cb295-27"><a href="Ch06.html#cb295-27" tabindex="-1"></a><span class="co"># FarmlandPloughed_Fallow_r10000.tif    egv_254</span></span>
<span id="cb295-28"><a href="Ch06.html#cb295-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_r10000.tif&quot;</span>)</span>
<span id="cb295-29"><a href="Ch06.html#cb295-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_254&quot;</span></span>
<span id="cb295-30"><a href="Ch06.html#cb295-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb295-31"><a href="Ch06.html#cb295-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb295-32"><a href="Ch06.html#cb295-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandPloughed_Fallow_r10000.tif&quot;</span>,</span>
<span id="cb295-33"><a href="Ch06.html#cb295-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb295-34"><a href="Ch06.html#cb295-34" tabindex="-1"></a></span>
<span id="cb295-35"><a href="Ch06.html#cb295-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb295-36"><a href="Ch06.html#cb295-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb295-37"><a href="Ch06.html#cb295-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb295-38"><a href="Ch06.html#cb295-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb295-39"><a href="Ch06.html#cb295-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb295-40"><a href="Ch06.html#cb295-40" tabindex="-1"></a></span>
<span id="cb295-41"><a href="Ch06.html#cb295-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandPloughed_Fallow_r10000.tif&quot;</span></span>
<span id="cb295-42"><a href="Ch06.html#cb295-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb295-43"><a href="Ch06.html#cb295-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb295-44"><a href="Ch06.html#cb295-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb295-45"><a href="Ch06.html#cb295-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb295-46"><a href="Ch06.html#cb295-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb295-47"><a href="Ch06.html#cb295-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb295-48"><a href="Ch06.html#cb295-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb295-49"><a href="Ch06.html#cb295-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb295-50"><a href="Ch06.html#cb295-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb295-51"><a href="Ch06.html#cb295-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb295-52"><a href="Ch06.html#cb295-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb295-53"><a href="Ch06.html#cb295-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_254.png" width="100%" /></p>
</div>
<div id="ch06.255" class="section level2 hasAnchor" number="6.255">
<h2><span class="header-section-number">6.255</span> FarmlandSubsidies_BiologicalSubsidies_cell<a href="Ch06.html#ch06.255" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandSubsidies_BiologicalSubsidies_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_255</code></p>
<p><strong>English name:</strong> Fractional cover of Farmland receiving Subsidies for Biological Agriculture within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Bioloģiskās lauksaimniecības atbalstam pieteikto lauksaimniecības platību īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels declared as receiving subsidies for biological agriculture were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>.
Geometries were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="Ch06.html#cb296-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb296-2"><a href="Ch06.html#cb296-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb296-3"><a href="Ch06.html#cb296-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb296-4"><a href="Ch06.html#cb296-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb296-5"><a href="Ch06.html#cb296-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb296-6"><a href="Ch06.html#cb296-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb296-7"><a href="Ch06.html#cb296-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb296-8"><a href="Ch06.html#cb296-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb296-9"><a href="Ch06.html#cb296-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb296-10"><a href="Ch06.html#cb296-10" tabindex="-1"></a></span>
<span id="cb296-11"><a href="Ch06.html#cb296-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb296-12"><a href="Ch06.html#cb296-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb296-13"><a href="Ch06.html#cb296-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb296-14"><a href="Ch06.html#cb296-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb296-15"><a href="Ch06.html#cb296-15" tabindex="-1"></a></span>
<span id="cb296-16"><a href="Ch06.html#cb296-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb296-17"><a href="Ch06.html#cb296-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb296-18"><a href="Ch06.html#cb296-18" tabindex="-1"></a></span>
<span id="cb296-19"><a href="Ch06.html#cb296-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb296-20"><a href="Ch06.html#cb296-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb296-21"><a href="Ch06.html#cb296-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb296-22"><a href="Ch06.html#cb296-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb296-23"><a href="Ch06.html#cb296-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb296-24"><a href="Ch06.html#cb296-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb296-25"><a href="Ch06.html#cb296-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb296-26"><a href="Ch06.html#cb296-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb296-27"><a href="Ch06.html#cb296-27" tabindex="-1"></a></span>
<span id="cb296-28"><a href="Ch06.html#cb296-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb296-29"><a href="Ch06.html#cb296-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb296-30"><a href="Ch06.html#cb296-30" tabindex="-1"></a></span>
<span id="cb296-31"><a href="Ch06.html#cb296-31" tabindex="-1"></a></span>
<span id="cb296-32"><a href="Ch06.html#cb296-32" tabindex="-1"></a><span class="co"># FarmlandSubsidies_BiologicalSubsidies_cell.tif    egv_255 ----</span></span>
<span id="cb296-33"><a href="Ch06.html#cb296-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb296-34"><a href="Ch06.html#cb296-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(AID_FORMS,<span class="st">&quot;BLA&quot;</span>))</span>
<span id="cb296-35"><a href="Ch06.html#cb296-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>AID_FORMS,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb296-36"><a href="Ch06.html#cb296-36" tabindex="-1"></a></span>
<span id="cb296-37"><a href="Ch06.html#cb296-37" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb296-38"><a href="Ch06.html#cb296-38" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb296-39"><a href="Ch06.html#cb296-39" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb296-40"><a href="Ch06.html#cb296-40" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies_input.tif&quot;</span>,</span>
<span id="cb296-41"><a href="Ch06.html#cb296-41" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb296-42"><a href="Ch06.html#cb296-42" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb296-43"><a href="Ch06.html#cb296-43" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb296-44"><a href="Ch06.html#cb296-44" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb296-45"><a href="Ch06.html#cb296-45" tabindex="-1"></a>p2i_rez</span>
<span id="cb296-46"><a href="Ch06.html#cb296-46" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb296-47"><a href="Ch06.html#cb296-47" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies_input.tif&quot;</span>),</span>
<span id="cb296-48"><a href="Ch06.html#cb296-48" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb296-49"><a href="Ch06.html#cb296-49" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb296-50"><a href="Ch06.html#cb296-50" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb296-51"><a href="Ch06.html#cb296-51" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb296-52"><a href="Ch06.html#cb296-52" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies_cell.tif&quot;</span>,</span>
<span id="cb296-53"><a href="Ch06.html#cb296-53" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_255&quot;</span>,</span>
<span id="cb296-54"><a href="Ch06.html#cb296-54" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb296-55"><a href="Ch06.html#cb296-55" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb296-56"><a href="Ch06.html#cb296-56" tabindex="-1"></a>i2e_rez</span>
<span id="cb296-57"><a href="Ch06.html#cb296-57" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb296-58"><a href="Ch06.html#cb296-58" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb296-59"><a href="Ch06.html#cb296-59" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb296-60"><a href="Ch06.html#cb296-60" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandSubsidies_BiologicalSubsidies_input.tif&quot;</span>)</span>
<span id="cb296-61"><a href="Ch06.html#cb296-61" tabindex="-1"></a></span>
<span id="cb296-62"><a href="Ch06.html#cb296-62" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb296-63"><a href="Ch06.html#cb296-63" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb296-64"><a href="Ch06.html#cb296-64" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb296-65"><a href="Ch06.html#cb296-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb296-66"><a href="Ch06.html#cb296-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb296-67"><a href="Ch06.html#cb296-67" tabindex="-1"></a></span>
<span id="cb296-68"><a href="Ch06.html#cb296-68" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies_cell.tif&quot;</span></span>
<span id="cb296-69"><a href="Ch06.html#cb296-69" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb296-70"><a href="Ch06.html#cb296-70" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb296-71"><a href="Ch06.html#cb296-71" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb296-72"><a href="Ch06.html#cb296-72" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb296-73"><a href="Ch06.html#cb296-73" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb296-74"><a href="Ch06.html#cb296-74" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb296-75"><a href="Ch06.html#cb296-75" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb296-76"><a href="Ch06.html#cb296-76" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb296-77"><a href="Ch06.html#cb296-77" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb296-78"><a href="Ch06.html#cb296-78" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb296-79"><a href="Ch06.html#cb296-79" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb296-80"><a href="Ch06.html#cb296-80" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_255.png" width="100%" /></p>
</div>
<div id="ch06.256" class="section level2 hasAnchor" number="6.256">
<h2><span class="header-section-number">6.256</span> FarmlandSubsidies_BiologicalSubsidies_r500<a href="Ch06.html#ch06.256" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandSubsidies_BiologicalSubsidies_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_256</code></p>
<p><strong>English name:</strong> Fractional cover of Farmland receiving Subsidies for Biological Agriculture within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Bioloģiskās lauksaimniecības atbalstam pieteikto lauksaimniecības platību īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.255">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="Ch06.html#cb297-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb297-2"><a href="Ch06.html#cb297-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb297-3"><a href="Ch06.html#cb297-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb297-4"><a href="Ch06.html#cb297-4" tabindex="-1"></a></span>
<span id="cb297-5"><a href="Ch06.html#cb297-5" tabindex="-1"></a></span>
<span id="cb297-6"><a href="Ch06.html#cb297-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb297-7"><a href="Ch06.html#cb297-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb297-8"><a href="Ch06.html#cb297-8" tabindex="-1"></a></span>
<span id="cb297-9"><a href="Ch06.html#cb297-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb297-10"><a href="Ch06.html#cb297-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb297-11"><a href="Ch06.html#cb297-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb297-12"><a href="Ch06.html#cb297-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb297-13"><a href="Ch06.html#cb297-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb297-14"><a href="Ch06.html#cb297-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb297-15"><a href="Ch06.html#cb297-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_cell.tif&quot;</span>),</span>
<span id="cb297-16"><a href="Ch06.html#cb297-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies&quot;</span>),</span>
<span id="cb297-17"><a href="Ch06.html#cb297-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb297-18"><a href="Ch06.html#cb297-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb297-19"><a href="Ch06.html#cb297-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb297-20"><a href="Ch06.html#cb297-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb297-21"><a href="Ch06.html#cb297-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb297-22"><a href="Ch06.html#cb297-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb297-23"><a href="Ch06.html#cb297-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb297-24"><a href="Ch06.html#cb297-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb297-25"><a href="Ch06.html#cb297-25" tabindex="-1"></a></span>
<span id="cb297-26"><a href="Ch06.html#cb297-26" tabindex="-1"></a></span>
<span id="cb297-27"><a href="Ch06.html#cb297-27" tabindex="-1"></a><span class="co"># FarmlandSubsidies_BiologicalSubsidies_r500.tif    egv_256</span></span>
<span id="cb297-28"><a href="Ch06.html#cb297-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_r500.tif&quot;</span>)</span>
<span id="cb297-29"><a href="Ch06.html#cb297-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_256&quot;</span></span>
<span id="cb297-30"><a href="Ch06.html#cb297-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb297-31"><a href="Ch06.html#cb297-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb297-32"><a href="Ch06.html#cb297-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_r500.tif&quot;</span>,</span>
<span id="cb297-33"><a href="Ch06.html#cb297-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb297-34"><a href="Ch06.html#cb297-34" tabindex="-1"></a></span>
<span id="cb297-35"><a href="Ch06.html#cb297-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb297-36"><a href="Ch06.html#cb297-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb297-37"><a href="Ch06.html#cb297-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb297-38"><a href="Ch06.html#cb297-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb297-39"><a href="Ch06.html#cb297-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb297-40"><a href="Ch06.html#cb297-40" tabindex="-1"></a></span>
<span id="cb297-41"><a href="Ch06.html#cb297-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies_r500.tif&quot;</span></span>
<span id="cb297-42"><a href="Ch06.html#cb297-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb297-43"><a href="Ch06.html#cb297-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb297-44"><a href="Ch06.html#cb297-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb297-45"><a href="Ch06.html#cb297-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb297-46"><a href="Ch06.html#cb297-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb297-47"><a href="Ch06.html#cb297-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb297-48"><a href="Ch06.html#cb297-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb297-49"><a href="Ch06.html#cb297-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb297-50"><a href="Ch06.html#cb297-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb297-51"><a href="Ch06.html#cb297-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb297-52"><a href="Ch06.html#cb297-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb297-53"><a href="Ch06.html#cb297-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_256.png" width="100%" /></p>
</div>
<div id="ch06.257" class="section level2 hasAnchor" number="6.257">
<h2><span class="header-section-number">6.257</span> FarmlandSubsidies_BiologicalSubsidies_r1250<a href="Ch06.html#ch06.257" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandSubsidies_BiologicalSubsidies_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_257</code></p>
<p><strong>English name:</strong> Fractional cover of Farmland receiving Subsidies for Biological Agriculture within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Bioloģiskās lauksaimniecības atbalstam pieteikto lauksaimniecības platību īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.255">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="Ch06.html#cb298-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb298-2"><a href="Ch06.html#cb298-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb298-3"><a href="Ch06.html#cb298-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb298-4"><a href="Ch06.html#cb298-4" tabindex="-1"></a></span>
<span id="cb298-5"><a href="Ch06.html#cb298-5" tabindex="-1"></a></span>
<span id="cb298-6"><a href="Ch06.html#cb298-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb298-7"><a href="Ch06.html#cb298-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb298-8"><a href="Ch06.html#cb298-8" tabindex="-1"></a></span>
<span id="cb298-9"><a href="Ch06.html#cb298-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb298-10"><a href="Ch06.html#cb298-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb298-11"><a href="Ch06.html#cb298-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb298-12"><a href="Ch06.html#cb298-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb298-13"><a href="Ch06.html#cb298-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb298-14"><a href="Ch06.html#cb298-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb298-15"><a href="Ch06.html#cb298-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_cell.tif&quot;</span>),</span>
<span id="cb298-16"><a href="Ch06.html#cb298-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies&quot;</span>),</span>
<span id="cb298-17"><a href="Ch06.html#cb298-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb298-18"><a href="Ch06.html#cb298-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb298-19"><a href="Ch06.html#cb298-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb298-20"><a href="Ch06.html#cb298-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb298-21"><a href="Ch06.html#cb298-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb298-22"><a href="Ch06.html#cb298-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb298-23"><a href="Ch06.html#cb298-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb298-24"><a href="Ch06.html#cb298-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb298-25"><a href="Ch06.html#cb298-25" tabindex="-1"></a></span>
<span id="cb298-26"><a href="Ch06.html#cb298-26" tabindex="-1"></a></span>
<span id="cb298-27"><a href="Ch06.html#cb298-27" tabindex="-1"></a><span class="co"># FarmlandSubsidies_BiologicalSubsidies_r1250.tif   egv_257</span></span>
<span id="cb298-28"><a href="Ch06.html#cb298-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_r1250.tif&quot;</span>)</span>
<span id="cb298-29"><a href="Ch06.html#cb298-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_257&quot;</span></span>
<span id="cb298-30"><a href="Ch06.html#cb298-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb298-31"><a href="Ch06.html#cb298-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb298-32"><a href="Ch06.html#cb298-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_r1250.tif&quot;</span>,</span>
<span id="cb298-33"><a href="Ch06.html#cb298-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb298-34"><a href="Ch06.html#cb298-34" tabindex="-1"></a></span>
<span id="cb298-35"><a href="Ch06.html#cb298-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb298-36"><a href="Ch06.html#cb298-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb298-37"><a href="Ch06.html#cb298-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb298-38"><a href="Ch06.html#cb298-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb298-39"><a href="Ch06.html#cb298-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb298-40"><a href="Ch06.html#cb298-40" tabindex="-1"></a></span>
<span id="cb298-41"><a href="Ch06.html#cb298-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies_r1250.tif&quot;</span></span>
<span id="cb298-42"><a href="Ch06.html#cb298-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb298-43"><a href="Ch06.html#cb298-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb298-44"><a href="Ch06.html#cb298-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb298-45"><a href="Ch06.html#cb298-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb298-46"><a href="Ch06.html#cb298-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb298-47"><a href="Ch06.html#cb298-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb298-48"><a href="Ch06.html#cb298-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb298-49"><a href="Ch06.html#cb298-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb298-50"><a href="Ch06.html#cb298-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb298-51"><a href="Ch06.html#cb298-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb298-52"><a href="Ch06.html#cb298-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb298-53"><a href="Ch06.html#cb298-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_257.png" width="100%" /></p>
</div>
<div id="ch06.258" class="section level2 hasAnchor" number="6.258">
<h2><span class="header-section-number">6.258</span> FarmlandSubsidies_BiologicalSubsidies_r3000<a href="Ch06.html#ch06.258" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandSubsidies_BiologicalSubsidies_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_258</code></p>
<p><strong>English name:</strong> Fractional cover of Farmland receiving Subsidies for Biological Agriculture within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Bioloģiskās lauksaimniecības atbalstam pieteikto lauksaimniecības platību īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.255">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="Ch06.html#cb299-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb299-2"><a href="Ch06.html#cb299-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb299-3"><a href="Ch06.html#cb299-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb299-4"><a href="Ch06.html#cb299-4" tabindex="-1"></a></span>
<span id="cb299-5"><a href="Ch06.html#cb299-5" tabindex="-1"></a></span>
<span id="cb299-6"><a href="Ch06.html#cb299-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb299-7"><a href="Ch06.html#cb299-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb299-8"><a href="Ch06.html#cb299-8" tabindex="-1"></a></span>
<span id="cb299-9"><a href="Ch06.html#cb299-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb299-10"><a href="Ch06.html#cb299-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb299-11"><a href="Ch06.html#cb299-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb299-12"><a href="Ch06.html#cb299-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb299-13"><a href="Ch06.html#cb299-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb299-14"><a href="Ch06.html#cb299-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb299-15"><a href="Ch06.html#cb299-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_cell.tif&quot;</span>),</span>
<span id="cb299-16"><a href="Ch06.html#cb299-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies&quot;</span>),</span>
<span id="cb299-17"><a href="Ch06.html#cb299-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb299-18"><a href="Ch06.html#cb299-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb299-19"><a href="Ch06.html#cb299-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb299-20"><a href="Ch06.html#cb299-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb299-21"><a href="Ch06.html#cb299-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb299-22"><a href="Ch06.html#cb299-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb299-23"><a href="Ch06.html#cb299-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb299-24"><a href="Ch06.html#cb299-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb299-25"><a href="Ch06.html#cb299-25" tabindex="-1"></a></span>
<span id="cb299-26"><a href="Ch06.html#cb299-26" tabindex="-1"></a></span>
<span id="cb299-27"><a href="Ch06.html#cb299-27" tabindex="-1"></a><span class="co"># FarmlandSubsidies_BiologicalSubsidies_r3000.tif   egv_258</span></span>
<span id="cb299-28"><a href="Ch06.html#cb299-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_r3000.tif&quot;</span>)</span>
<span id="cb299-29"><a href="Ch06.html#cb299-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_258&quot;</span></span>
<span id="cb299-30"><a href="Ch06.html#cb299-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb299-31"><a href="Ch06.html#cb299-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb299-32"><a href="Ch06.html#cb299-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_r3000.tif&quot;</span>,</span>
<span id="cb299-33"><a href="Ch06.html#cb299-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb299-34"><a href="Ch06.html#cb299-34" tabindex="-1"></a></span>
<span id="cb299-35"><a href="Ch06.html#cb299-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb299-36"><a href="Ch06.html#cb299-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb299-37"><a href="Ch06.html#cb299-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb299-38"><a href="Ch06.html#cb299-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb299-39"><a href="Ch06.html#cb299-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb299-40"><a href="Ch06.html#cb299-40" tabindex="-1"></a></span>
<span id="cb299-41"><a href="Ch06.html#cb299-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies_r3000.tif&quot;</span></span>
<span id="cb299-42"><a href="Ch06.html#cb299-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb299-43"><a href="Ch06.html#cb299-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb299-44"><a href="Ch06.html#cb299-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb299-45"><a href="Ch06.html#cb299-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb299-46"><a href="Ch06.html#cb299-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb299-47"><a href="Ch06.html#cb299-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb299-48"><a href="Ch06.html#cb299-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb299-49"><a href="Ch06.html#cb299-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb299-50"><a href="Ch06.html#cb299-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb299-51"><a href="Ch06.html#cb299-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb299-52"><a href="Ch06.html#cb299-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb299-53"><a href="Ch06.html#cb299-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_258.png" width="100%" /></p>
</div>
<div id="ch06.259" class="section level2 hasAnchor" number="6.259">
<h2><span class="header-section-number">6.259</span> FarmlandSubsidies_BiologicalSubsidies_r10000<a href="Ch06.html#ch06.259" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandSubsidies_BiologicalSubsidies_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_259</code></p>
<p><strong>English name:</strong> Fractional cover of Farmland receiving Subsidies for Biological Agriculture within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Bioloģiskās lauksaimniecības atbalstam pieteikto lauksaimniecības platību īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.255">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="Ch06.html#cb300-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb300-2"><a href="Ch06.html#cb300-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb300-3"><a href="Ch06.html#cb300-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb300-4"><a href="Ch06.html#cb300-4" tabindex="-1"></a></span>
<span id="cb300-5"><a href="Ch06.html#cb300-5" tabindex="-1"></a></span>
<span id="cb300-6"><a href="Ch06.html#cb300-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb300-7"><a href="Ch06.html#cb300-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb300-8"><a href="Ch06.html#cb300-8" tabindex="-1"></a></span>
<span id="cb300-9"><a href="Ch06.html#cb300-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb300-10"><a href="Ch06.html#cb300-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb300-11"><a href="Ch06.html#cb300-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb300-12"><a href="Ch06.html#cb300-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb300-13"><a href="Ch06.html#cb300-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb300-14"><a href="Ch06.html#cb300-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb300-15"><a href="Ch06.html#cb300-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_cell.tif&quot;</span>),</span>
<span id="cb300-16"><a href="Ch06.html#cb300-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies&quot;</span>),</span>
<span id="cb300-17"><a href="Ch06.html#cb300-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb300-18"><a href="Ch06.html#cb300-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb300-19"><a href="Ch06.html#cb300-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb300-20"><a href="Ch06.html#cb300-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb300-21"><a href="Ch06.html#cb300-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb300-22"><a href="Ch06.html#cb300-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb300-23"><a href="Ch06.html#cb300-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb300-24"><a href="Ch06.html#cb300-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb300-25"><a href="Ch06.html#cb300-25" tabindex="-1"></a></span>
<span id="cb300-26"><a href="Ch06.html#cb300-26" tabindex="-1"></a></span>
<span id="cb300-27"><a href="Ch06.html#cb300-27" tabindex="-1"></a><span class="co"># FarmlandSubsidies_BiologicalSubsidies_r10000.tif  egv_259</span></span>
<span id="cb300-28"><a href="Ch06.html#cb300-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_r10000.tif&quot;</span>)</span>
<span id="cb300-29"><a href="Ch06.html#cb300-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_259&quot;</span></span>
<span id="cb300-30"><a href="Ch06.html#cb300-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb300-31"><a href="Ch06.html#cb300-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb300-32"><a href="Ch06.html#cb300-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandSubsidies_BiologicalSubsidies_r10000.tif&quot;</span>,</span>
<span id="cb300-33"><a href="Ch06.html#cb300-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb300-34"><a href="Ch06.html#cb300-34" tabindex="-1"></a></span>
<span id="cb300-35"><a href="Ch06.html#cb300-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb300-36"><a href="Ch06.html#cb300-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb300-37"><a href="Ch06.html#cb300-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb300-38"><a href="Ch06.html#cb300-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb300-39"><a href="Ch06.html#cb300-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb300-40"><a href="Ch06.html#cb300-40" tabindex="-1"></a></span>
<span id="cb300-41"><a href="Ch06.html#cb300-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandSubsidies_BiologicalSubsidies_r10000.tif&quot;</span></span>
<span id="cb300-42"><a href="Ch06.html#cb300-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb300-43"><a href="Ch06.html#cb300-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb300-44"><a href="Ch06.html#cb300-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb300-45"><a href="Ch06.html#cb300-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb300-46"><a href="Ch06.html#cb300-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb300-47"><a href="Ch06.html#cb300-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb300-48"><a href="Ch06.html#cb300-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb300-49"><a href="Ch06.html#cb300-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb300-50"><a href="Ch06.html#cb300-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb300-51"><a href="Ch06.html#cb300-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb300-52"><a href="Ch06.html#cb300-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb300-53"><a href="Ch06.html#cb300-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_259.png" width="100%" /></p>
</div>
<div id="ch06.260" class="section level2 hasAnchor" number="6.260">
<h2><span class="header-section-number">6.260</span> FarmlandTrees_PermanentCrops_cell<a href="Ch06.html#ch06.260" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandTrees_PermanentCrops_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_260</code></p>
<p><strong>English name:</strong> Fractional cover of Permanent Crops within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augļudārzu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels declared as permanent crops were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>.
Geometries were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="Ch06.html#cb301-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb301-2"><a href="Ch06.html#cb301-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb301-3"><a href="Ch06.html#cb301-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb301-4"><a href="Ch06.html#cb301-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb301-5"><a href="Ch06.html#cb301-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb301-6"><a href="Ch06.html#cb301-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb301-7"><a href="Ch06.html#cb301-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb301-8"><a href="Ch06.html#cb301-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb301-9"><a href="Ch06.html#cb301-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb301-10"><a href="Ch06.html#cb301-10" tabindex="-1"></a></span>
<span id="cb301-11"><a href="Ch06.html#cb301-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb301-12"><a href="Ch06.html#cb301-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb301-13"><a href="Ch06.html#cb301-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb301-14"><a href="Ch06.html#cb301-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb301-15"><a href="Ch06.html#cb301-15" tabindex="-1"></a></span>
<span id="cb301-16"><a href="Ch06.html#cb301-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb301-17"><a href="Ch06.html#cb301-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb301-18"><a href="Ch06.html#cb301-18" tabindex="-1"></a></span>
<span id="cb301-19"><a href="Ch06.html#cb301-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb301-20"><a href="Ch06.html#cb301-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb301-21"><a href="Ch06.html#cb301-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb301-22"><a href="Ch06.html#cb301-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb301-23"><a href="Ch06.html#cb301-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb301-24"><a href="Ch06.html#cb301-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb301-25"><a href="Ch06.html#cb301-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb301-26"><a href="Ch06.html#cb301-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb301-27"><a href="Ch06.html#cb301-27" tabindex="-1"></a></span>
<span id="cb301-28"><a href="Ch06.html#cb301-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb301-29"><a href="Ch06.html#cb301-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb301-30"><a href="Ch06.html#cb301-30" tabindex="-1"></a></span>
<span id="cb301-31"><a href="Ch06.html#cb301-31" tabindex="-1"></a></span>
<span id="cb301-32"><a href="Ch06.html#cb301-32" tabindex="-1"></a><span class="co"># FarmlandTrees_PermanentCrops_cell.tif egv_260 ----</span></span>
<span id="cb301-33"><a href="Ch06.html#cb301-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb301-34"><a href="Ch06.html#cb301-34" tabindex="-1"></a>  <span class="fu">filter</span>(SDM_grupa_sakums <span class="sc">==</span> <span class="st">&quot;augļudārzi&quot;</span>)</span>
<span id="cb301-35"><a href="Ch06.html#cb301-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb301-36"><a href="Ch06.html#cb301-36" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb301-37"><a href="Ch06.html#cb301-37" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(yes)</span>
<span id="cb301-38"><a href="Ch06.html#cb301-38" tabindex="-1"></a></span>
<span id="cb301-39"><a href="Ch06.html#cb301-39" tabindex="-1"></a>topo<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/TopographicMap/LandusA_COMB.parquet&quot;</span>)</span>
<span id="cb301-40"><a href="Ch06.html#cb301-40" tabindex="-1"></a>dati_topo<span class="ot">=</span> topo <span class="sc">%&gt;%</span> </span>
<span id="cb301-41"><a href="Ch06.html#cb301-41" tabindex="-1"></a>  <span class="fu">filter</span>(FNAME <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;poligons_Augludarzs&quot;</span>,<span class="st">&quot;poligons_Augļudārzs&quot;</span>,</span>
<span id="cb301-42"><a href="Ch06.html#cb301-42" tabindex="-1"></a>                      <span class="st">&quot;poligons_Ogulājs&quot;</span>,<span class="st">&quot;poligons_Ogulajs&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb301-43"><a href="Ch06.html#cb301-43" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yes=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb301-44"><a href="Ch06.html#cb301-44" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(yes)</span>
<span id="cb301-45"><a href="Ch06.html#cb301-45" tabindex="-1"></a>abidati<span class="ot">=</span><span class="fu">rbind</span>(dati,dati_topo)</span>
<span id="cb301-46"><a href="Ch06.html#cb301-46" tabindex="-1"></a></span>
<span id="cb301-47"><a href="Ch06.html#cb301-47" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> abidati,</span>
<span id="cb301-48"><a href="Ch06.html#cb301-48" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb301-49"><a href="Ch06.html#cb301-49" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb301-50"><a href="Ch06.html#cb301-50" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandTrees_PermanentCrops_input.tif&quot;</span>,</span>
<span id="cb301-51"><a href="Ch06.html#cb301-51" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb301-52"><a href="Ch06.html#cb301-52" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb301-53"><a href="Ch06.html#cb301-53" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb301-54"><a href="Ch06.html#cb301-54" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb301-55"><a href="Ch06.html#cb301-55" tabindex="-1"></a>p2i_rez</span>
<span id="cb301-56"><a href="Ch06.html#cb301-56" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb301-57"><a href="Ch06.html#cb301-57" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandTrees_PermanentCrops_input.tif&quot;</span>),</span>
<span id="cb301-58"><a href="Ch06.html#cb301-58" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb301-59"><a href="Ch06.html#cb301-59" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb301-60"><a href="Ch06.html#cb301-60" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb301-61"><a href="Ch06.html#cb301-61" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb301-62"><a href="Ch06.html#cb301-62" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandTrees_PermanentCrops_cell.tif&quot;</span>,</span>
<span id="cb301-63"><a href="Ch06.html#cb301-63" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_260&quot;</span>,</span>
<span id="cb301-64"><a href="Ch06.html#cb301-64" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb301-65"><a href="Ch06.html#cb301-65" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb301-66"><a href="Ch06.html#cb301-66" tabindex="-1"></a>i2e_rez</span>
<span id="cb301-67"><a href="Ch06.html#cb301-67" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb301-68"><a href="Ch06.html#cb301-68" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb301-69"><a href="Ch06.html#cb301-69" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb301-70"><a href="Ch06.html#cb301-70" tabindex="-1"></a><span class="fu">rm</span>(topo)</span>
<span id="cb301-71"><a href="Ch06.html#cb301-71" tabindex="-1"></a><span class="fu">rm</span>(dati_topo)</span>
<span id="cb301-72"><a href="Ch06.html#cb301-72" tabindex="-1"></a><span class="fu">rm</span>(abidati)</span>
<span id="cb301-73"><a href="Ch06.html#cb301-73" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandTrees_PermanentCrops_input.tif&quot;</span>)</span>
<span id="cb301-74"><a href="Ch06.html#cb301-74" tabindex="-1"></a></span>
<span id="cb301-75"><a href="Ch06.html#cb301-75" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb301-76"><a href="Ch06.html#cb301-76" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb301-77"><a href="Ch06.html#cb301-77" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb301-78"><a href="Ch06.html#cb301-78" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb301-79"><a href="Ch06.html#cb301-79" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb301-80"><a href="Ch06.html#cb301-80" tabindex="-1"></a></span>
<span id="cb301-81"><a href="Ch06.html#cb301-81" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandTrees_PermanentCrops_cell.tif&quot;</span></span>
<span id="cb301-82"><a href="Ch06.html#cb301-82" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb301-83"><a href="Ch06.html#cb301-83" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb301-84"><a href="Ch06.html#cb301-84" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb301-85"><a href="Ch06.html#cb301-85" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb301-86"><a href="Ch06.html#cb301-86" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb301-87"><a href="Ch06.html#cb301-87" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb301-88"><a href="Ch06.html#cb301-88" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb301-89"><a href="Ch06.html#cb301-89" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb301-90"><a href="Ch06.html#cb301-90" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb301-91"><a href="Ch06.html#cb301-91" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb301-92"><a href="Ch06.html#cb301-92" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb301-93"><a href="Ch06.html#cb301-93" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_260.png" width="100%" /></p>
</div>
<div id="ch06.261" class="section level2 hasAnchor" number="6.261">
<h2><span class="header-section-number">6.261</span> FarmlandTrees_PermanentCrops_r500<a href="Ch06.html#ch06.261" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandTrees_PermanentCrops_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_261</code></p>
<p><strong>English name:</strong> Fractional cover of Permanent Crops within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Augļudārzu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.260">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="Ch06.html#cb302-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb302-2"><a href="Ch06.html#cb302-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb302-3"><a href="Ch06.html#cb302-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb302-4"><a href="Ch06.html#cb302-4" tabindex="-1"></a></span>
<span id="cb302-5"><a href="Ch06.html#cb302-5" tabindex="-1"></a></span>
<span id="cb302-6"><a href="Ch06.html#cb302-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb302-7"><a href="Ch06.html#cb302-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb302-8"><a href="Ch06.html#cb302-8" tabindex="-1"></a></span>
<span id="cb302-9"><a href="Ch06.html#cb302-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb302-10"><a href="Ch06.html#cb302-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb302-11"><a href="Ch06.html#cb302-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb302-12"><a href="Ch06.html#cb302-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb302-13"><a href="Ch06.html#cb302-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb302-14"><a href="Ch06.html#cb302-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb302-15"><a href="Ch06.html#cb302-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_cell.tif&quot;</span>),</span>
<span id="cb302-16"><a href="Ch06.html#cb302-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandTrees_PermanentCrops&quot;</span>),</span>
<span id="cb302-17"><a href="Ch06.html#cb302-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb302-18"><a href="Ch06.html#cb302-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb302-19"><a href="Ch06.html#cb302-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb302-20"><a href="Ch06.html#cb302-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb302-21"><a href="Ch06.html#cb302-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb302-22"><a href="Ch06.html#cb302-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb302-23"><a href="Ch06.html#cb302-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb302-24"><a href="Ch06.html#cb302-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb302-25"><a href="Ch06.html#cb302-25" tabindex="-1"></a></span>
<span id="cb302-26"><a href="Ch06.html#cb302-26" tabindex="-1"></a></span>
<span id="cb302-27"><a href="Ch06.html#cb302-27" tabindex="-1"></a><span class="co"># FarmlandTrees_PermanentCrops_r500.tif egv_261</span></span>
<span id="cb302-28"><a href="Ch06.html#cb302-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_r500.tif&quot;</span>)</span>
<span id="cb302-29"><a href="Ch06.html#cb302-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_261&quot;</span></span>
<span id="cb302-30"><a href="Ch06.html#cb302-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb302-31"><a href="Ch06.html#cb302-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb302-32"><a href="Ch06.html#cb302-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_r500.tif&quot;</span>,</span>
<span id="cb302-33"><a href="Ch06.html#cb302-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb302-34"><a href="Ch06.html#cb302-34" tabindex="-1"></a></span>
<span id="cb302-35"><a href="Ch06.html#cb302-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb302-36"><a href="Ch06.html#cb302-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb302-37"><a href="Ch06.html#cb302-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb302-38"><a href="Ch06.html#cb302-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb302-39"><a href="Ch06.html#cb302-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb302-40"><a href="Ch06.html#cb302-40" tabindex="-1"></a></span>
<span id="cb302-41"><a href="Ch06.html#cb302-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandTrees_PermanentCrops_r500.tif&quot;</span></span>
<span id="cb302-42"><a href="Ch06.html#cb302-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb302-43"><a href="Ch06.html#cb302-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb302-44"><a href="Ch06.html#cb302-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb302-45"><a href="Ch06.html#cb302-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb302-46"><a href="Ch06.html#cb302-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb302-47"><a href="Ch06.html#cb302-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb302-48"><a href="Ch06.html#cb302-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb302-49"><a href="Ch06.html#cb302-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb302-50"><a href="Ch06.html#cb302-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb302-51"><a href="Ch06.html#cb302-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb302-52"><a href="Ch06.html#cb302-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb302-53"><a href="Ch06.html#cb302-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_261.png" width="100%" /></p>
</div>
<div id="ch06.262" class="section level2 hasAnchor" number="6.262">
<h2><span class="header-section-number">6.262</span> FarmlandTrees_PermanentCrops_r1250<a href="Ch06.html#ch06.262" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandTrees_PermanentCrops_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_262</code></p>
<p><strong>English name:</strong> Fractional cover of Permanent Crops within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Augļudārzu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.260">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="Ch06.html#cb303-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb303-2"><a href="Ch06.html#cb303-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb303-3"><a href="Ch06.html#cb303-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb303-4"><a href="Ch06.html#cb303-4" tabindex="-1"></a></span>
<span id="cb303-5"><a href="Ch06.html#cb303-5" tabindex="-1"></a></span>
<span id="cb303-6"><a href="Ch06.html#cb303-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb303-7"><a href="Ch06.html#cb303-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb303-8"><a href="Ch06.html#cb303-8" tabindex="-1"></a></span>
<span id="cb303-9"><a href="Ch06.html#cb303-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb303-10"><a href="Ch06.html#cb303-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb303-11"><a href="Ch06.html#cb303-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb303-12"><a href="Ch06.html#cb303-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb303-13"><a href="Ch06.html#cb303-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb303-14"><a href="Ch06.html#cb303-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb303-15"><a href="Ch06.html#cb303-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_cell.tif&quot;</span>),</span>
<span id="cb303-16"><a href="Ch06.html#cb303-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandTrees_PermanentCrops&quot;</span>),</span>
<span id="cb303-17"><a href="Ch06.html#cb303-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb303-18"><a href="Ch06.html#cb303-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb303-19"><a href="Ch06.html#cb303-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb303-20"><a href="Ch06.html#cb303-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb303-21"><a href="Ch06.html#cb303-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb303-22"><a href="Ch06.html#cb303-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb303-23"><a href="Ch06.html#cb303-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb303-24"><a href="Ch06.html#cb303-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb303-25"><a href="Ch06.html#cb303-25" tabindex="-1"></a></span>
<span id="cb303-26"><a href="Ch06.html#cb303-26" tabindex="-1"></a></span>
<span id="cb303-27"><a href="Ch06.html#cb303-27" tabindex="-1"></a><span class="co"># FarmlandTrees_PermanentCrops_r1250.tif    egv_262</span></span>
<span id="cb303-28"><a href="Ch06.html#cb303-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_r1250.tif&quot;</span>)</span>
<span id="cb303-29"><a href="Ch06.html#cb303-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_262&quot;</span></span>
<span id="cb303-30"><a href="Ch06.html#cb303-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb303-31"><a href="Ch06.html#cb303-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb303-32"><a href="Ch06.html#cb303-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_r1250.tif&quot;</span>,</span>
<span id="cb303-33"><a href="Ch06.html#cb303-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb303-34"><a href="Ch06.html#cb303-34" tabindex="-1"></a></span>
<span id="cb303-35"><a href="Ch06.html#cb303-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb303-36"><a href="Ch06.html#cb303-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb303-37"><a href="Ch06.html#cb303-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb303-38"><a href="Ch06.html#cb303-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb303-39"><a href="Ch06.html#cb303-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb303-40"><a href="Ch06.html#cb303-40" tabindex="-1"></a></span>
<span id="cb303-41"><a href="Ch06.html#cb303-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandTrees_PermanentCrops_r1250.tif&quot;</span></span>
<span id="cb303-42"><a href="Ch06.html#cb303-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb303-43"><a href="Ch06.html#cb303-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb303-44"><a href="Ch06.html#cb303-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb303-45"><a href="Ch06.html#cb303-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb303-46"><a href="Ch06.html#cb303-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb303-47"><a href="Ch06.html#cb303-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb303-48"><a href="Ch06.html#cb303-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb303-49"><a href="Ch06.html#cb303-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb303-50"><a href="Ch06.html#cb303-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb303-51"><a href="Ch06.html#cb303-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb303-52"><a href="Ch06.html#cb303-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb303-53"><a href="Ch06.html#cb303-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_262.png" width="100%" /></p>
</div>
<div id="ch06.263" class="section level2 hasAnchor" number="6.263">
<h2><span class="header-section-number">6.263</span> FarmlandTrees_PermanentCrops_r3000<a href="Ch06.html#ch06.263" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandTrees_PermanentCrops_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_263</code></p>
<p><strong>English name:</strong> Fractional cover of Permanent Crops within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Augļudārzu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.260">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="Ch06.html#cb304-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb304-2"><a href="Ch06.html#cb304-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb304-3"><a href="Ch06.html#cb304-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb304-4"><a href="Ch06.html#cb304-4" tabindex="-1"></a></span>
<span id="cb304-5"><a href="Ch06.html#cb304-5" tabindex="-1"></a></span>
<span id="cb304-6"><a href="Ch06.html#cb304-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb304-7"><a href="Ch06.html#cb304-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb304-8"><a href="Ch06.html#cb304-8" tabindex="-1"></a></span>
<span id="cb304-9"><a href="Ch06.html#cb304-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb304-10"><a href="Ch06.html#cb304-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb304-11"><a href="Ch06.html#cb304-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb304-12"><a href="Ch06.html#cb304-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb304-13"><a href="Ch06.html#cb304-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb304-14"><a href="Ch06.html#cb304-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb304-15"><a href="Ch06.html#cb304-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_cell.tif&quot;</span>),</span>
<span id="cb304-16"><a href="Ch06.html#cb304-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandTrees_PermanentCrops&quot;</span>),</span>
<span id="cb304-17"><a href="Ch06.html#cb304-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb304-18"><a href="Ch06.html#cb304-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb304-19"><a href="Ch06.html#cb304-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb304-20"><a href="Ch06.html#cb304-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb304-21"><a href="Ch06.html#cb304-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb304-22"><a href="Ch06.html#cb304-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb304-23"><a href="Ch06.html#cb304-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb304-24"><a href="Ch06.html#cb304-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb304-25"><a href="Ch06.html#cb304-25" tabindex="-1"></a></span>
<span id="cb304-26"><a href="Ch06.html#cb304-26" tabindex="-1"></a></span>
<span id="cb304-27"><a href="Ch06.html#cb304-27" tabindex="-1"></a><span class="co"># FarmlandTrees_PermanentCrops_r3000.tif    egv_263</span></span>
<span id="cb304-28"><a href="Ch06.html#cb304-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_r3000.tif&quot;</span>)</span>
<span id="cb304-29"><a href="Ch06.html#cb304-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_263&quot;</span></span>
<span id="cb304-30"><a href="Ch06.html#cb304-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb304-31"><a href="Ch06.html#cb304-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb304-32"><a href="Ch06.html#cb304-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_r3000.tif&quot;</span>,</span>
<span id="cb304-33"><a href="Ch06.html#cb304-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb304-34"><a href="Ch06.html#cb304-34" tabindex="-1"></a></span>
<span id="cb304-35"><a href="Ch06.html#cb304-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb304-36"><a href="Ch06.html#cb304-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb304-37"><a href="Ch06.html#cb304-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb304-38"><a href="Ch06.html#cb304-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb304-39"><a href="Ch06.html#cb304-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb304-40"><a href="Ch06.html#cb304-40" tabindex="-1"></a></span>
<span id="cb304-41"><a href="Ch06.html#cb304-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandTrees_PermanentCrops_r3000.tif&quot;</span></span>
<span id="cb304-42"><a href="Ch06.html#cb304-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb304-43"><a href="Ch06.html#cb304-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb304-44"><a href="Ch06.html#cb304-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb304-45"><a href="Ch06.html#cb304-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb304-46"><a href="Ch06.html#cb304-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb304-47"><a href="Ch06.html#cb304-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb304-48"><a href="Ch06.html#cb304-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb304-49"><a href="Ch06.html#cb304-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb304-50"><a href="Ch06.html#cb304-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb304-51"><a href="Ch06.html#cb304-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb304-52"><a href="Ch06.html#cb304-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb304-53"><a href="Ch06.html#cb304-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_263.png" width="100%" /></p>
</div>
<div id="ch06.264" class="section level2 hasAnchor" number="6.264">
<h2><span class="header-section-number">6.264</span> FarmlandTrees_PermanentCrops_r10000<a href="Ch06.html#ch06.264" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandTrees_PermanentCrops_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_264</code></p>
<p><strong>English name:</strong> Fractional cover of Permanent Crops within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Augļudārzu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.260">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="Ch06.html#cb305-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb305-2"><a href="Ch06.html#cb305-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb305-3"><a href="Ch06.html#cb305-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb305-4"><a href="Ch06.html#cb305-4" tabindex="-1"></a></span>
<span id="cb305-5"><a href="Ch06.html#cb305-5" tabindex="-1"></a></span>
<span id="cb305-6"><a href="Ch06.html#cb305-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb305-7"><a href="Ch06.html#cb305-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb305-8"><a href="Ch06.html#cb305-8" tabindex="-1"></a></span>
<span id="cb305-9"><a href="Ch06.html#cb305-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb305-10"><a href="Ch06.html#cb305-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb305-11"><a href="Ch06.html#cb305-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb305-12"><a href="Ch06.html#cb305-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb305-13"><a href="Ch06.html#cb305-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb305-14"><a href="Ch06.html#cb305-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb305-15"><a href="Ch06.html#cb305-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_cell.tif&quot;</span>),</span>
<span id="cb305-16"><a href="Ch06.html#cb305-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandTrees_PermanentCrops&quot;</span>),</span>
<span id="cb305-17"><a href="Ch06.html#cb305-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb305-18"><a href="Ch06.html#cb305-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb305-19"><a href="Ch06.html#cb305-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb305-20"><a href="Ch06.html#cb305-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb305-21"><a href="Ch06.html#cb305-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb305-22"><a href="Ch06.html#cb305-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb305-23"><a href="Ch06.html#cb305-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb305-24"><a href="Ch06.html#cb305-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb305-25"><a href="Ch06.html#cb305-25" tabindex="-1"></a></span>
<span id="cb305-26"><a href="Ch06.html#cb305-26" tabindex="-1"></a></span>
<span id="cb305-27"><a href="Ch06.html#cb305-27" tabindex="-1"></a><span class="co"># FarmlandTrees_PermanentCrops_r10000.tif   egv_264</span></span>
<span id="cb305-28"><a href="Ch06.html#cb305-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_r10000.tif&quot;</span>)</span>
<span id="cb305-29"><a href="Ch06.html#cb305-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_264&quot;</span></span>
<span id="cb305-30"><a href="Ch06.html#cb305-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb305-31"><a href="Ch06.html#cb305-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb305-32"><a href="Ch06.html#cb305-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_PermanentCrops_r10000.tif&quot;</span>,</span>
<span id="cb305-33"><a href="Ch06.html#cb305-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb305-34"><a href="Ch06.html#cb305-34" tabindex="-1"></a></span>
<span id="cb305-35"><a href="Ch06.html#cb305-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb305-36"><a href="Ch06.html#cb305-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb305-37"><a href="Ch06.html#cb305-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb305-38"><a href="Ch06.html#cb305-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb305-39"><a href="Ch06.html#cb305-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb305-40"><a href="Ch06.html#cb305-40" tabindex="-1"></a></span>
<span id="cb305-41"><a href="Ch06.html#cb305-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandTrees_PermanentCrops_r10000.tif&quot;</span></span>
<span id="cb305-42"><a href="Ch06.html#cb305-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb305-43"><a href="Ch06.html#cb305-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb305-44"><a href="Ch06.html#cb305-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb305-45"><a href="Ch06.html#cb305-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb305-46"><a href="Ch06.html#cb305-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb305-47"><a href="Ch06.html#cb305-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb305-48"><a href="Ch06.html#cb305-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb305-49"><a href="Ch06.html#cb305-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb305-50"><a href="Ch06.html#cb305-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb305-51"><a href="Ch06.html#cb305-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb305-52"><a href="Ch06.html#cb305-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb305-53"><a href="Ch06.html#cb305-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_264.png" width="100%" /></p>
</div>
<div id="ch06.265" class="section level2 hasAnchor" number="6.265">
<h2><span class="header-section-number">6.265</span> FarmlandTrees_ShortRotationCoppice_cell<a href="Ch06.html#ch06.265" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandTrees_ShortRotationCoppice_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_265</code></p>
<p><strong>English name:</strong> Fractional cover of Short-rotation Coppice and Other Woody Energy Crops within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Īscirtmeta atvasāju un enerģijai audzētu kokaugu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> First, agricultural parcels declared as short rotation coppice were selected from
<a href="Ch04.html#Ch04.02">Rural Support Service’s information on declared fields</a>.
Geometries were then rasterized to input resolution, ensuring value 1 at the polygon locations
and value 0 elsewhere. Rasterization was performed with <code>egvtools::polygon2input()</code>.
Once rasterized, layer was aggregated to EGV resolution with <code>egvtools::input2egv()</code>
by calculating arithmetic mean, thus resulting in cover fraction.
During caggregation, inverse distance weighted (power = 2) gap filling on the
output was initialized to ensure no missing values at the edges. At
the very end, layer was standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="Ch06.html#cb306-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb306-2"><a href="Ch06.html#cb306-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb306-3"><a href="Ch06.html#cb306-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb306-4"><a href="Ch06.html#cb306-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb306-5"><a href="Ch06.html#cb306-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb306-6"><a href="Ch06.html#cb306-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb306-7"><a href="Ch06.html#cb306-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb306-8"><a href="Ch06.html#cb306-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(raster)) {<span class="fu">install.packages</span>(<span class="st">&quot;raster&quot;</span>); <span class="fu">require</span>(raster)}</span>
<span id="cb306-9"><a href="Ch06.html#cb306-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(fasterize)) {<span class="fu">install.packages</span>(<span class="st">&quot;fasterize&quot;</span>); <span class="fu">require</span>(fasterize)}</span>
<span id="cb306-10"><a href="Ch06.html#cb306-10" tabindex="-1"></a></span>
<span id="cb306-11"><a href="Ch06.html#cb306-11" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb306-12"><a href="Ch06.html#cb306-12" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb306-13"><a href="Ch06.html#cb306-13" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb306-14"><a href="Ch06.html#cb306-14" tabindex="-1"></a>rastrs10<span class="ot">=</span><span class="fu">raster</span>(template10)</span>
<span id="cb306-15"><a href="Ch06.html#cb306-15" tabindex="-1"></a></span>
<span id="cb306-16"><a href="Ch06.html#cb306-16" tabindex="-1"></a>nulls10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>)</span>
<span id="cb306-17"><a href="Ch06.html#cb306-17" tabindex="-1"></a>nulls100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/nulls_LV100m_10km.tif&quot;</span>)</span>
<span id="cb306-18"><a href="Ch06.html#cb306-18" tabindex="-1"></a></span>
<span id="cb306-19"><a href="Ch06.html#cb306-19" tabindex="-1"></a><span class="co"># kodi ----</span></span>
<span id="cb306-20"><a href="Ch06.html#cb306-20" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./Geodata/2024/LAD/KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb306-21"><a href="Ch06.html#cb306-21" tabindex="-1"></a>kodi<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kodi<span class="sc">$</span>kods)</span>
<span id="cb306-22"><a href="Ch06.html#cb306-22" tabindex="-1"></a><span class="co"># LAD ----</span></span>
<span id="cb306-23"><a href="Ch06.html#cb306-23" tabindex="-1"></a>lad<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Geodata/2024/LAD/Lauki_2024.parquet&quot;</span>)</span>
<span id="cb306-24"><a href="Ch06.html#cb306-24" tabindex="-1"></a>lad<span class="sc">$</span>yes<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb306-25"><a href="Ch06.html#cb306-25" tabindex="-1"></a>lad<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb306-26"><a href="Ch06.html#cb306-26" tabindex="-1"></a>  <span class="fu">left_join</span>(kodi,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb306-27"><a href="Ch06.html#cb306-27" tabindex="-1"></a></span>
<span id="cb306-28"><a href="Ch06.html#cb306-28" tabindex="-1"></a><span class="co"># simple landscape ----</span></span>
<span id="cb306-29"><a href="Ch06.html#cb306-29" tabindex="-1"></a>simple_landscape<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;RasterGrids_10m/2024/Ainava_vienk_mask.tif&quot;</span>)</span>
<span id="cb306-30"><a href="Ch06.html#cb306-30" tabindex="-1"></a></span>
<span id="cb306-31"><a href="Ch06.html#cb306-31" tabindex="-1"></a></span>
<span id="cb306-32"><a href="Ch06.html#cb306-32" tabindex="-1"></a><span class="co"># FarmlandTrees_ShortRotationCoppice_cell.tif   egv_265 ----</span></span>
<span id="cb306-33"><a href="Ch06.html#cb306-33" tabindex="-1"></a>dati<span class="ot">=</span>lad <span class="sc">%&gt;%</span> </span>
<span id="cb306-34"><a href="Ch06.html#cb306-34" tabindex="-1"></a>  <span class="fu">filter</span>(SDM_grupa_sakums <span class="sc">==</span> <span class="st">&quot;krūmveida ilggadīgie stādījumi&quot;</span>)</span>
<span id="cb306-35"><a href="Ch06.html#cb306-35" tabindex="-1"></a><span class="fu">table</span>(dati<span class="sc">$</span>SDM_grupa_sakums,<span class="at">useNA=</span><span class="st">&quot;always&quot;</span>)</span>
<span id="cb306-36"><a href="Ch06.html#cb306-36" tabindex="-1"></a></span>
<span id="cb306-37"><a href="Ch06.html#cb306-37" tabindex="-1"></a>p2i_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">polygon2input</span>(<span class="at">vector_data =</span> dati,</span>
<span id="cb306-38"><a href="Ch06.html#cb306-38" tabindex="-1"></a>                                <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>,</span>
<span id="cb306-39"><a href="Ch06.html#cb306-39" tabindex="-1"></a>                                <span class="at">out_path =</span> <span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb306-40"><a href="Ch06.html#cb306-40" tabindex="-1"></a>                                <span class="at">file_name =</span> <span class="st">&quot;FarmlandTrees_ShortRotationCoppice_input.tif&quot;</span>,</span>
<span id="cb306-41"><a href="Ch06.html#cb306-41" tabindex="-1"></a>                                <span class="at">value_field =</span> <span class="st">&quot;yes&quot;</span>,</span>
<span id="cb306-42"><a href="Ch06.html#cb306-42" tabindex="-1"></a>                                <span class="at">prepare=</span><span class="cn">FALSE</span>,</span>
<span id="cb306-43"><a href="Ch06.html#cb306-43" tabindex="-1"></a>                                <span class="at">background_raster =</span> <span class="st">&quot;./Templates/TemplateRasters/nulls_LV10m_10km.tif&quot;</span>,</span>
<span id="cb306-44"><a href="Ch06.html#cb306-44" tabindex="-1"></a>                                <span class="at">plot_result =</span> <span class="cn">TRUE</span>)</span>
<span id="cb306-45"><a href="Ch06.html#cb306-45" tabindex="-1"></a>p2i_rez</span>
<span id="cb306-46"><a href="Ch06.html#cb306-46" tabindex="-1"></a>i2e_rez<span class="ot">=</span>egvtools<span class="sc">::</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_10m/2024/&quot;</span>,</span>
<span id="cb306-47"><a href="Ch06.html#cb306-47" tabindex="-1"></a>                                         <span class="st">&quot;FarmlandTrees_ShortRotationCoppice_input.tif&quot;</span>),</span>
<span id="cb306-48"><a href="Ch06.html#cb306-48" tabindex="-1"></a>                            <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb306-49"><a href="Ch06.html#cb306-49" tabindex="-1"></a>                            <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb306-50"><a href="Ch06.html#cb306-50" tabindex="-1"></a>                            <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb306-51"><a href="Ch06.html#cb306-51" tabindex="-1"></a>                            <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb306-52"><a href="Ch06.html#cb306-52" tabindex="-1"></a>                            <span class="at">outfilename =</span> <span class="st">&quot;FarmlandTrees_ShortRotationCoppice_cell.tif&quot;</span>,</span>
<span id="cb306-53"><a href="Ch06.html#cb306-53" tabindex="-1"></a>                            <span class="at">layername =</span> <span class="st">&quot;egv_265&quot;</span>,</span>
<span id="cb306-54"><a href="Ch06.html#cb306-54" tabindex="-1"></a>                            <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb306-55"><a href="Ch06.html#cb306-55" tabindex="-1"></a>                            <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,<span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb306-56"><a href="Ch06.html#cb306-56" tabindex="-1"></a>i2e_rez</span>
<span id="cb306-57"><a href="Ch06.html#cb306-57" tabindex="-1"></a><span class="fu">rm</span>(p2i_rez)</span>
<span id="cb306-58"><a href="Ch06.html#cb306-58" tabindex="-1"></a><span class="fu">rm</span>(i2e_rez)</span>
<span id="cb306-59"><a href="Ch06.html#cb306-59" tabindex="-1"></a><span class="fu">rm</span>(dati)</span>
<span id="cb306-60"><a href="Ch06.html#cb306-60" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_10m/2024/FarmlandTrees_ShortRotationCoppice_input.tif&quot;</span>)</span>
<span id="cb306-61"><a href="Ch06.html#cb306-61" tabindex="-1"></a></span>
<span id="cb306-62"><a href="Ch06.html#cb306-62" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb306-63"><a href="Ch06.html#cb306-63" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb306-64"><a href="Ch06.html#cb306-64" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb306-65"><a href="Ch06.html#cb306-65" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb306-66"><a href="Ch06.html#cb306-66" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb306-67"><a href="Ch06.html#cb306-67" tabindex="-1"></a></span>
<span id="cb306-68"><a href="Ch06.html#cb306-68" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandTrees_ShortRotationCoppice_cell.tif&quot;</span></span>
<span id="cb306-69"><a href="Ch06.html#cb306-69" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb306-70"><a href="Ch06.html#cb306-70" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb306-71"><a href="Ch06.html#cb306-71" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb306-72"><a href="Ch06.html#cb306-72" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb306-73"><a href="Ch06.html#cb306-73" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb306-74"><a href="Ch06.html#cb306-74" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb306-75"><a href="Ch06.html#cb306-75" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb306-76"><a href="Ch06.html#cb306-76" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb306-77"><a href="Ch06.html#cb306-77" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb306-78"><a href="Ch06.html#cb306-78" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb306-79"><a href="Ch06.html#cb306-79" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb306-80"><a href="Ch06.html#cb306-80" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_265.png" width="100%" /></p>
</div>
<div id="ch06.266" class="section level2 hasAnchor" number="6.266">
<h2><span class="header-section-number">6.266</span> FarmlandTrees_ShortRotationCoppice_r500<a href="Ch06.html#ch06.266" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandTrees_ShortRotationCoppice_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_266</code></p>
<p><strong>English name:</strong> Fractional cover of Short-rotation Coppice and Other Woody Energy Crops within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Īscirtmeta atvasāju un enerģijai audzētu kokaugu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 500 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.265">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="Ch06.html#cb307-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb307-2"><a href="Ch06.html#cb307-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb307-3"><a href="Ch06.html#cb307-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb307-4"><a href="Ch06.html#cb307-4" tabindex="-1"></a></span>
<span id="cb307-5"><a href="Ch06.html#cb307-5" tabindex="-1"></a></span>
<span id="cb307-6"><a href="Ch06.html#cb307-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb307-7"><a href="Ch06.html#cb307-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb307-8"><a href="Ch06.html#cb307-8" tabindex="-1"></a></span>
<span id="cb307-9"><a href="Ch06.html#cb307-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb307-10"><a href="Ch06.html#cb307-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb307-11"><a href="Ch06.html#cb307-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb307-12"><a href="Ch06.html#cb307-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb307-13"><a href="Ch06.html#cb307-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb307-14"><a href="Ch06.html#cb307-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb307-15"><a href="Ch06.html#cb307-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_cell.tif&quot;</span>),</span>
<span id="cb307-16"><a href="Ch06.html#cb307-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandTrees_ShortRotationCoppice&quot;</span>),</span>
<span id="cb307-17"><a href="Ch06.html#cb307-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb307-18"><a href="Ch06.html#cb307-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb307-19"><a href="Ch06.html#cb307-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb307-20"><a href="Ch06.html#cb307-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb307-21"><a href="Ch06.html#cb307-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb307-22"><a href="Ch06.html#cb307-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb307-23"><a href="Ch06.html#cb307-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb307-24"><a href="Ch06.html#cb307-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb307-25"><a href="Ch06.html#cb307-25" tabindex="-1"></a></span>
<span id="cb307-26"><a href="Ch06.html#cb307-26" tabindex="-1"></a></span>
<span id="cb307-27"><a href="Ch06.html#cb307-27" tabindex="-1"></a><span class="co"># FarmlandTrees_ShortRotationCoppice_r500.tif   egv_266</span></span>
<span id="cb307-28"><a href="Ch06.html#cb307-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_r500.tif&quot;</span>)</span>
<span id="cb307-29"><a href="Ch06.html#cb307-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_266&quot;</span></span>
<span id="cb307-30"><a href="Ch06.html#cb307-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb307-31"><a href="Ch06.html#cb307-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb307-32"><a href="Ch06.html#cb307-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_r500.tif&quot;</span>,</span>
<span id="cb307-33"><a href="Ch06.html#cb307-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb307-34"><a href="Ch06.html#cb307-34" tabindex="-1"></a></span>
<span id="cb307-35"><a href="Ch06.html#cb307-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb307-36"><a href="Ch06.html#cb307-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb307-37"><a href="Ch06.html#cb307-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb307-38"><a href="Ch06.html#cb307-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb307-39"><a href="Ch06.html#cb307-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb307-40"><a href="Ch06.html#cb307-40" tabindex="-1"></a></span>
<span id="cb307-41"><a href="Ch06.html#cb307-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandTrees_ShortRotationCoppice_r500.tif&quot;</span></span>
<span id="cb307-42"><a href="Ch06.html#cb307-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb307-43"><a href="Ch06.html#cb307-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb307-44"><a href="Ch06.html#cb307-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb307-45"><a href="Ch06.html#cb307-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb307-46"><a href="Ch06.html#cb307-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb307-47"><a href="Ch06.html#cb307-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb307-48"><a href="Ch06.html#cb307-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb307-49"><a href="Ch06.html#cb307-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb307-50"><a href="Ch06.html#cb307-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb307-51"><a href="Ch06.html#cb307-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb307-52"><a href="Ch06.html#cb307-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb307-53"><a href="Ch06.html#cb307-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_266.png" width="100%" /></p>
</div>
<div id="ch06.267" class="section level2 hasAnchor" number="6.267">
<h2><span class="header-section-number">6.267</span> FarmlandTrees_ShortRotationCoppice_r1250<a href="Ch06.html#ch06.267" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandTrees_ShortRotationCoppice_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_267</code></p>
<p><strong>English name:</strong> Fractional cover of Short-rotation Coppice and Other Woody Energy Crops within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Īscirtmeta atvasāju un enerģijai audzētu kokaugu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 1250 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.265">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="Ch06.html#cb308-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb308-2"><a href="Ch06.html#cb308-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb308-3"><a href="Ch06.html#cb308-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb308-4"><a href="Ch06.html#cb308-4" tabindex="-1"></a></span>
<span id="cb308-5"><a href="Ch06.html#cb308-5" tabindex="-1"></a></span>
<span id="cb308-6"><a href="Ch06.html#cb308-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb308-7"><a href="Ch06.html#cb308-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb308-8"><a href="Ch06.html#cb308-8" tabindex="-1"></a></span>
<span id="cb308-9"><a href="Ch06.html#cb308-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb308-10"><a href="Ch06.html#cb308-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb308-11"><a href="Ch06.html#cb308-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb308-12"><a href="Ch06.html#cb308-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb308-13"><a href="Ch06.html#cb308-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb308-14"><a href="Ch06.html#cb308-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb308-15"><a href="Ch06.html#cb308-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_cell.tif&quot;</span>),</span>
<span id="cb308-16"><a href="Ch06.html#cb308-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandTrees_ShortRotationCoppice&quot;</span>),</span>
<span id="cb308-17"><a href="Ch06.html#cb308-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb308-18"><a href="Ch06.html#cb308-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb308-19"><a href="Ch06.html#cb308-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb308-20"><a href="Ch06.html#cb308-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb308-21"><a href="Ch06.html#cb308-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb308-22"><a href="Ch06.html#cb308-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb308-23"><a href="Ch06.html#cb308-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb308-24"><a href="Ch06.html#cb308-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb308-25"><a href="Ch06.html#cb308-25" tabindex="-1"></a></span>
<span id="cb308-26"><a href="Ch06.html#cb308-26" tabindex="-1"></a></span>
<span id="cb308-27"><a href="Ch06.html#cb308-27" tabindex="-1"></a><span class="co"># FarmlandTrees_ShortRotationCoppice_r1250.tif  egv_267</span></span>
<span id="cb308-28"><a href="Ch06.html#cb308-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_r1250.tif&quot;</span>)</span>
<span id="cb308-29"><a href="Ch06.html#cb308-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_267&quot;</span></span>
<span id="cb308-30"><a href="Ch06.html#cb308-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb308-31"><a href="Ch06.html#cb308-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb308-32"><a href="Ch06.html#cb308-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_r1250.tif&quot;</span>,</span>
<span id="cb308-33"><a href="Ch06.html#cb308-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb308-34"><a href="Ch06.html#cb308-34" tabindex="-1"></a></span>
<span id="cb308-35"><a href="Ch06.html#cb308-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb308-36"><a href="Ch06.html#cb308-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb308-37"><a href="Ch06.html#cb308-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb308-38"><a href="Ch06.html#cb308-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb308-39"><a href="Ch06.html#cb308-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb308-40"><a href="Ch06.html#cb308-40" tabindex="-1"></a></span>
<span id="cb308-41"><a href="Ch06.html#cb308-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandTrees_ShortRotationCoppice_r1250.tif&quot;</span></span>
<span id="cb308-42"><a href="Ch06.html#cb308-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb308-43"><a href="Ch06.html#cb308-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb308-44"><a href="Ch06.html#cb308-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb308-45"><a href="Ch06.html#cb308-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb308-46"><a href="Ch06.html#cb308-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb308-47"><a href="Ch06.html#cb308-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb308-48"><a href="Ch06.html#cb308-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb308-49"><a href="Ch06.html#cb308-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb308-50"><a href="Ch06.html#cb308-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb308-51"><a href="Ch06.html#cb308-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb308-52"><a href="Ch06.html#cb308-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb308-53"><a href="Ch06.html#cb308-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_267.png" width="100%" /></p>
</div>
<div id="ch06.268" class="section level2 hasAnchor" number="6.268">
<h2><span class="header-section-number">6.268</span> FarmlandTrees_ShortRotationCoppice_r3000<a href="Ch06.html#ch06.268" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandTrees_ShortRotationCoppice_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_268</code></p>
<p><strong>English name:</strong> Fractional cover of Short-rotation Coppice and Other Woody Energy Crops within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Īscirtmeta atvasāju un enerģijai audzētu kokaugu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 3000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.265">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="Ch06.html#cb309-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb309-2"><a href="Ch06.html#cb309-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb309-3"><a href="Ch06.html#cb309-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb309-4"><a href="Ch06.html#cb309-4" tabindex="-1"></a></span>
<span id="cb309-5"><a href="Ch06.html#cb309-5" tabindex="-1"></a></span>
<span id="cb309-6"><a href="Ch06.html#cb309-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb309-7"><a href="Ch06.html#cb309-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb309-8"><a href="Ch06.html#cb309-8" tabindex="-1"></a></span>
<span id="cb309-9"><a href="Ch06.html#cb309-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb309-10"><a href="Ch06.html#cb309-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb309-11"><a href="Ch06.html#cb309-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb309-12"><a href="Ch06.html#cb309-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb309-13"><a href="Ch06.html#cb309-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb309-14"><a href="Ch06.html#cb309-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb309-15"><a href="Ch06.html#cb309-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_cell.tif&quot;</span>),</span>
<span id="cb309-16"><a href="Ch06.html#cb309-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandTrees_ShortRotationCoppice&quot;</span>),</span>
<span id="cb309-17"><a href="Ch06.html#cb309-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb309-18"><a href="Ch06.html#cb309-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb309-19"><a href="Ch06.html#cb309-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb309-20"><a href="Ch06.html#cb309-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb309-21"><a href="Ch06.html#cb309-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb309-22"><a href="Ch06.html#cb309-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb309-23"><a href="Ch06.html#cb309-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb309-24"><a href="Ch06.html#cb309-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb309-25"><a href="Ch06.html#cb309-25" tabindex="-1"></a></span>
<span id="cb309-26"><a href="Ch06.html#cb309-26" tabindex="-1"></a></span>
<span id="cb309-27"><a href="Ch06.html#cb309-27" tabindex="-1"></a><span class="co"># FarmlandTrees_ShortRotationCoppice_r3000.tif  egv_268</span></span>
<span id="cb309-28"><a href="Ch06.html#cb309-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_r3000.tif&quot;</span>)</span>
<span id="cb309-29"><a href="Ch06.html#cb309-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_268&quot;</span></span>
<span id="cb309-30"><a href="Ch06.html#cb309-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb309-31"><a href="Ch06.html#cb309-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb309-32"><a href="Ch06.html#cb309-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_r3000.tif&quot;</span>,</span>
<span id="cb309-33"><a href="Ch06.html#cb309-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb309-34"><a href="Ch06.html#cb309-34" tabindex="-1"></a></span>
<span id="cb309-35"><a href="Ch06.html#cb309-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb309-36"><a href="Ch06.html#cb309-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb309-37"><a href="Ch06.html#cb309-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb309-38"><a href="Ch06.html#cb309-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb309-39"><a href="Ch06.html#cb309-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb309-40"><a href="Ch06.html#cb309-40" tabindex="-1"></a></span>
<span id="cb309-41"><a href="Ch06.html#cb309-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandTrees_ShortRotationCoppice_r3000.tif&quot;</span></span>
<span id="cb309-42"><a href="Ch06.html#cb309-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb309-43"><a href="Ch06.html#cb309-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb309-44"><a href="Ch06.html#cb309-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb309-45"><a href="Ch06.html#cb309-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb309-46"><a href="Ch06.html#cb309-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb309-47"><a href="Ch06.html#cb309-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb309-48"><a href="Ch06.html#cb309-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb309-49"><a href="Ch06.html#cb309-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb309-50"><a href="Ch06.html#cb309-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb309-51"><a href="Ch06.html#cb309-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb309-52"><a href="Ch06.html#cb309-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb309-53"><a href="Ch06.html#cb309-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_268.png" width="100%" /></p>
</div>
<div id="ch06.269" class="section level2 hasAnchor" number="6.269">
<h2><span class="header-section-number">6.269</span> FarmlandTrees_ShortRotationCoppice_r10000<a href="Ch06.html#ch06.269" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>FarmlandTrees_ShortRotationCoppice_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_269</code></p>
<p><strong>English name:</strong> Fractional cover of Short-rotation Coppice and Other Woody Energy Crops within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Īscirtmeta atvasāju un enerģijai audzētu kokaugu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Cover fraction at 10000 m radius around the analysis grid cell, was
calculated as the area-weighted sum of <a href="Ch06.html#ch06.265">analysis cells</a> inside the
buffer with <code>egvtools::radius_function</code>. During calculation of landscape metric,
inverse distance weighted (power = 2) gap filling on the output is initialized
to ensure no missing values at the edges. Finally, layer is rewritten to ensure
layers name. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="Ch06.html#cb310-1" tabindex="-1"></a><span class="co"># Libs ----</span></span>
<span id="cb310-2"><a href="Ch06.html#cb310-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb310-3"><a href="Ch06.html#cb310-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb310-4"><a href="Ch06.html#cb310-4" tabindex="-1"></a></span>
<span id="cb310-5"><a href="Ch06.html#cb310-5" tabindex="-1"></a></span>
<span id="cb310-6"><a href="Ch06.html#cb310-6" tabindex="-1"></a><span class="co"># Templates -----</span></span>
<span id="cb310-7"><a href="Ch06.html#cb310-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb310-8"><a href="Ch06.html#cb310-8" tabindex="-1"></a></span>
<span id="cb310-9"><a href="Ch06.html#cb310-9" tabindex="-1"></a><span class="co"># radii ----</span></span>
<span id="cb310-10"><a href="Ch06.html#cb310-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb310-11"><a href="Ch06.html#cb310-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb310-12"><a href="Ch06.html#cb310-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb310-13"><a href="Ch06.html#cb310-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb310-14"><a href="Ch06.html#cb310-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb310-15"><a href="Ch06.html#cb310-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_cell.tif&quot;</span>),</span>
<span id="cb310-16"><a href="Ch06.html#cb310-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;FarmlandTrees_ShortRotationCoppice&quot;</span>),</span>
<span id="cb310-17"><a href="Ch06.html#cb310-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb310-18"><a href="Ch06.html#cb310-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">6</span>,</span>
<span id="cb310-19"><a href="Ch06.html#cb310-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb310-20"><a href="Ch06.html#cb310-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb310-21"><a href="Ch06.html#cb310-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb310-22"><a href="Ch06.html#cb310-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb310-23"><a href="Ch06.html#cb310-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb310-24"><a href="Ch06.html#cb310-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">40</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb310-25"><a href="Ch06.html#cb310-25" tabindex="-1"></a></span>
<span id="cb310-26"><a href="Ch06.html#cb310-26" tabindex="-1"></a></span>
<span id="cb310-27"><a href="Ch06.html#cb310-27" tabindex="-1"></a><span class="co"># FarmlandTrees_ShortRotationCoppice_r10000.tif egv_269</span></span>
<span id="cb310-28"><a href="Ch06.html#cb310-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_r10000.tif&quot;</span>)</span>
<span id="cb310-29"><a href="Ch06.html#cb310-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_269&quot;</span></span>
<span id="cb310-30"><a href="Ch06.html#cb310-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb310-31"><a href="Ch06.html#cb310-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb310-32"><a href="Ch06.html#cb310-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/FarmlandTrees_ShortRotationCoppice_r10000.tif&quot;</span>,</span>
<span id="cb310-33"><a href="Ch06.html#cb310-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb310-34"><a href="Ch06.html#cb310-34" tabindex="-1"></a></span>
<span id="cb310-35"><a href="Ch06.html#cb310-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb310-36"><a href="Ch06.html#cb310-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb310-37"><a href="Ch06.html#cb310-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb310-38"><a href="Ch06.html#cb310-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb310-39"><a href="Ch06.html#cb310-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb310-40"><a href="Ch06.html#cb310-40" tabindex="-1"></a></span>
<span id="cb310-41"><a href="Ch06.html#cb310-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;FarmlandTrees_ShortRotationCoppice_r10000.tif&quot;</span></span>
<span id="cb310-42"><a href="Ch06.html#cb310-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb310-43"><a href="Ch06.html#cb310-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb310-44"><a href="Ch06.html#cb310-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb310-45"><a href="Ch06.html#cb310-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb310-46"><a href="Ch06.html#cb310-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb310-47"><a href="Ch06.html#cb310-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb310-48"><a href="Ch06.html#cb310-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb310-49"><a href="Ch06.html#cb310-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb310-50"><a href="Ch06.html#cb310-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb310-51"><a href="Ch06.html#cb310-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb310-52"><a href="Ch06.html#cb310-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb310-53"><a href="Ch06.html#cb310-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_269.png" width="100%" /></p>
</div>
<div id="ch06.270" class="section level2 hasAnchor" number="6.270">
<h2><span class="header-section-number">6.270</span> ForestsAge_ClearcutsLowStands_cell<a href="Ch06.html#ch06.270" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_ClearcutsLowStands_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_270</code></p>
<p><strong>English name:</strong> Fractional cover of Clearcuts and Stands lower than 5 m within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Izcirtumu un mežaudžu līdz 5 m augstumam platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="Ch06.html#cb311-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.271" class="section level2 hasAnchor" number="6.271">
<h2><span class="header-section-number">6.271</span> ForestsAge_ClearcutsLowStands_r500<a href="Ch06.html#ch06.271" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_ClearcutsLowStands_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_271</code></p>
<p><strong>English name:</strong> Fractional cover of Clearcuts and Stands lower than 5 m within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Izcirtumu un mežaudžu līdz 5 m augstumam platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="Ch06.html#cb312-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.272" class="section level2 hasAnchor" number="6.272">
<h2><span class="header-section-number">6.272</span> ForestsAge_ClearcutsLowStands_r1250<a href="Ch06.html#ch06.272" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_ClearcutsLowStands_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_272</code></p>
<p><strong>English name:</strong> Fractional cover of Clearcuts and Stands lower than 5 m within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Izcirtumu un mežaudžu līdz 5 m augstumam platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="Ch06.html#cb313-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.273" class="section level2 hasAnchor" number="6.273">
<h2><span class="header-section-number">6.273</span> ForestsAge_ClearcutsLowStands_r3000<a href="Ch06.html#ch06.273" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_ClearcutsLowStands_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_273</code></p>
<p><strong>English name:</strong> Fractional cover of Clearcuts and Stands lower than 5 m within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Izcirtumu un mežaudžu līdz 5 m augstumam platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="Ch06.html#cb314-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.274" class="section level2 hasAnchor" number="6.274">
<h2><span class="header-section-number">6.274</span> ForestsAge_ClearcutsLowStands_r10000<a href="Ch06.html#ch06.274" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_ClearcutsLowStands_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_274</code></p>
<p><strong>English name:</strong> Fractional cover of Clearcuts and Stands lower than 5 m within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Izcirtumu un mežaudžu līdz 5 m augstumam platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="Ch06.html#cb315-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.275" class="section level2 hasAnchor" number="6.275">
<h2><span class="header-section-number">6.275</span> ForestsAge_Middle_cell<a href="Ch06.html#ch06.275" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_Middle_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_275</code></p>
<p><strong>English name:</strong> Fractional cover of Middle-Aged Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vidēja vecuma un briestaudžu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="Ch06.html#cb316-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.276" class="section level2 hasAnchor" number="6.276">
<h2><span class="header-section-number">6.276</span> ForestsAge_Middle_r500<a href="Ch06.html#ch06.276" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_Middle_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_276</code></p>
<p><strong>English name:</strong> Fractional cover of Middle-Aged Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vidēja vecuma un briestaudžu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="Ch06.html#cb317-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.277" class="section level2 hasAnchor" number="6.277">
<h2><span class="header-section-number">6.277</span> ForestsAge_Middle_r1250<a href="Ch06.html#ch06.277" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_Middle_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_277</code></p>
<p><strong>English name:</strong> Fractional cover of Middle-Aged Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vidēja vecuma un briestaudžu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="Ch06.html#cb318-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.278" class="section level2 hasAnchor" number="6.278">
<h2><span class="header-section-number">6.278</span> ForestsAge_Middle_r3000<a href="Ch06.html#ch06.278" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_Middle_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_278</code></p>
<p><strong>English name:</strong> Fractional cover of Middle-Aged Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vidēja vecuma un briestaudžu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="Ch06.html#cb319-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.279" class="section level2 hasAnchor" number="6.279">
<h2><span class="header-section-number">6.279</span> ForestsAge_Middle_r10000<a href="Ch06.html#ch06.279" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_Middle_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_279</code></p>
<p><strong>English name:</strong> Fractional cover of Middle-Aged Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vidēja vecuma un briestaudžu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="Ch06.html#cb320-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.280" class="section level2 hasAnchor" number="6.280">
<h2><span class="header-section-number">6.280</span> ForestsAge_Old_cell<a href="Ch06.html#ch06.280" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_Old_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_280</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="Ch06.html#cb321-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.281" class="section level2 hasAnchor" number="6.281">
<h2><span class="header-section-number">6.281</span> ForestsAge_Old_r500<a href="Ch06.html#ch06.281" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_Old_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_281</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta)mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="Ch06.html#cb322-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.282" class="section level2 hasAnchor" number="6.282">
<h2><span class="header-section-number">6.282</span> ForestsAge_Old_r1250<a href="Ch06.html#ch06.282" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_Old_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_282</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="Ch06.html#cb323-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.283" class="section level2 hasAnchor" number="6.283">
<h2><span class="header-section-number">6.283</span> ForestsAge_Old_r3000<a href="Ch06.html#ch06.283" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_Old_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_283</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="Ch06.html#cb324-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.284" class="section level2 hasAnchor" number="6.284">
<h2><span class="header-section-number">6.284</span> ForestsAge_Old_r10000<a href="Ch06.html#ch06.284" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_Old_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_284</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="Ch06.html#cb325-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.285" class="section level2 hasAnchor" number="6.285">
<h2><span class="header-section-number">6.285</span> ForestsAge_YoungTallStandsShrubs_cell<a href="Ch06.html#ch06.285" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_YoungTallStandsShrubs_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_285</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young Stands (at least 5 m tall) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Krūmāju un jaunaudžu (no 5 m augstuma) platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="Ch06.html#cb326-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.286" class="section level2 hasAnchor" number="6.286">
<h2><span class="header-section-number">6.286</span> ForestsAge_YoungTallStandsShrubs_r500<a href="Ch06.html#ch06.286" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_YoungTallStandsShrubs_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_286</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young Stands (at least 5 m tall) within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju un jaunaudžu (no 5 m augstuma) platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="Ch06.html#cb327-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.287" class="section level2 hasAnchor" number="6.287">
<h2><span class="header-section-number">6.287</span> ForestsAge_YoungTallStandsShrubs_r1250<a href="Ch06.html#ch06.287" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_YoungTallStandsShrubs_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_287</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young Stands (at least 5 m tall) within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju un jaunaudžu (no 5 m augstuma) platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="Ch06.html#cb328-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.288" class="section level2 hasAnchor" number="6.288">
<h2><span class="header-section-number">6.288</span> ForestsAge_YoungTallStandsShrubs_r3000<a href="Ch06.html#ch06.288" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_YoungTallStandsShrubs_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_288</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young Stands (at least 5 m tall) within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju un jaunaudžu (no 5 m augstuma) platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="Ch06.html#cb329-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.289" class="section level2 hasAnchor" number="6.289">
<h2><span class="header-section-number">6.289</span> ForestsAge_YoungTallStandsShrubs_r10000<a href="Ch06.html#ch06.289" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsAge_YoungTallStandsShrubs_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_289</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young Stands (at least 5 m tall) within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju un jaunaudžu (no 5 m augstuma) platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="Ch06.html#cb330-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.290" class="section level2 hasAnchor" number="6.290">
<h2><span class="header-section-number">6.290</span> ForestsQuant_AgeProp-average_cell<a href="Ch06.html#ch06.290" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_AgeProp-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_290</code></p>
<p><strong>English name:</strong> Average stand age relative to rotation age within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Mežaudzes vecuma attiecība pret cirtmetu, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="Ch06.html#cb331-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.291" class="section level2 hasAnchor" number="6.291">
<h2><span class="header-section-number">6.291</span> ForestsQuant_DominantDiameter-max_cell<a href="Ch06.html#ch06.291" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_DominantDiameter-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_291</code></p>
<p><strong>English name:</strong> Dominant tree trunk diameter, maximum within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Koku stumbra diametrs, valdaudzes maksimālais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="Ch06.html#cb332-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.292" class="section level2 hasAnchor" number="6.292">
<h2><span class="header-section-number">6.292</span> ForestsQuant_LargestDiameter-max_cell<a href="Ch06.html#ch06.292" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_LargestDiameter-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_292</code></p>
<p><strong>English name:</strong> Largest tree trunk diameter within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Lielākais koka stumbra diametrs analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="Ch06.html#cb333-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.293" class="section level2 hasAnchor" number="6.293">
<h2><span class="header-section-number">6.293</span> ForestsQuant_TimeSinceDisturbance-average_cell<a href="Ch06.html#ch06.293" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_TimeSinceDisturbance-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_293</code></p>
<p><strong>English name:</strong> Time since last disturbance affecting tree growing within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Laiks kopš pēdējā ar koku augšanu saistītā traucējuma analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="Ch06.html#cb334-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.294" class="section level2 hasAnchor" number="6.294">
<h2><span class="header-section-number">6.294</span> ForestsQuant_VolumeAspen-sum_cell<a href="Ch06.html#ch06.294" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeAspen-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_294</code></p>
<p><strong>English name:</strong> Timber volume of Aspens, Poplars within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Apšu, papeļu krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="Ch06.html#cb335-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.295" class="section level2 hasAnchor" number="6.295">
<h2><span class="header-section-number">6.295</span> ForestsQuant_VolumeBirch-sum_cell<a href="Ch06.html#ch06.295" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeBirch-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_295</code></p>
<p><strong>English name:</strong> Timber volume of Birches within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Bērzu krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="Ch06.html#cb336-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.296" class="section level2 hasAnchor" number="6.296">
<h2><span class="header-section-number">6.296</span> ForestsQuant_VolumeBlackAlder-sum_cell<a href="Ch06.html#ch06.296" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeBlackAlder-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_296</code></p>
<p><strong>English name:</strong> Timber volume of Black Alder within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Melnalkšņu krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="Ch06.html#cb337-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.297" class="section level2 hasAnchor" number="6.297">
<h2><span class="header-section-number">6.297</span> ForestsQuant_VolumeBorealDeciduousOther-sum_cell<a href="Ch06.html#ch06.297" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeBorealDeciduousOther-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_297</code></p>
<p><strong>English name:</strong> Timber volume of Other Boreal Deciduous trees within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Citu šaurlapju krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="Ch06.html#cb338-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.298" class="section level2 hasAnchor" number="6.298">
<h2><span class="header-section-number">6.298</span> ForestsQuant_VolumeBorealDeciduousTotal-sum_cell<a href="Ch06.html#ch06.298" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeBorealDeciduousTotal-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_298</code></p>
<p><strong>English name:</strong> Timber volume of Boreal Deciduous trees within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Šaurlapju krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="Ch06.html#cb339-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.299" class="section level2 hasAnchor" number="6.299">
<h2><span class="header-section-number">6.299</span> ForestsQuant_VolumeConiferous-sum_cell<a href="Ch06.html#ch06.299" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeConiferous-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_299</code></p>
<p><strong>English name:</strong> Timber volume of Coniferous trees within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Skujkoku krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="Ch06.html#cb340-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.300" class="section level2 hasAnchor" number="6.300">
<h2><span class="header-section-number">6.300</span> ForestsQuant_VolumeOak-sum_cell<a href="Ch06.html#ch06.300" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeOak-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_300</code></p>
<p><strong>English name:</strong> Timber volume of Oaks within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ozolu krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="Ch06.html#cb341-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.301" class="section level2 hasAnchor" number="6.301">
<h2><span class="header-section-number">6.301</span> ForestsQuant_VolumeOakMaple-sum_cell<a href="Ch06.html#ch06.301" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeOakMaple-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_301</code></p>
<p><strong>English name:</strong> Timber volume of Oaks, Maples within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ozolu, kļavu krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="Ch06.html#cb342-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.302" class="section level2 hasAnchor" number="6.302">
<h2><span class="header-section-number">6.302</span> ForestsQuant_VolumePine-sum_cell<a href="Ch06.html#ch06.302" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumePine-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_302</code></p>
<p><strong>English name:</strong> Timber volume of Pines within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Priežu krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="Ch06.html#cb343-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.303" class="section level2 hasAnchor" number="6.303">
<h2><span class="header-section-number">6.303</span> ForestsQuant_VolumeSpruce-sum_cell<a href="Ch06.html#ch06.303" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeSpruce-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_303</code></p>
<p><strong>English name:</strong> Timber volume of Spruces within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Egļu krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="Ch06.html#cb344-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.304" class="section level2 hasAnchor" number="6.304">
<h2><span class="header-section-number">6.304</span> ForestsQuant_VolumeTemperateDeciduousTotal-sum_cell<a href="Ch06.html#ch06.304" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeTemperateDeciduousTotal-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_304</code></p>
<p><strong>English name:</strong> Timber volume of Temperate Deciduous trees within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Platlapju krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="Ch06.html#cb345-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.305" class="section level2 hasAnchor" number="6.305">
<h2><span class="header-section-number">6.305</span> ForestsQuant_VolumeTemperateWithoutOak-sum_cell<a href="Ch06.html#ch06.305" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeTemperateWithoutOak-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_305</code></p>
<p><strong>English name:</strong> Timber volume of Temperate Deciduous trees (without oaks) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Paltlapju (bez ozoliem) krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="Ch06.html#cb346-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.306" class="section level2 hasAnchor" number="6.306">
<h2><span class="header-section-number">6.306</span> ForestsQuant_VolumeTemperateWithoutOakMaple-sum_cell<a href="Ch06.html#ch06.306" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeTemperateWithoutOakMaple-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_306</code></p>
<p><strong>English name:</strong> Timber volume of Temperate Deciduous trees (without oaks, maples) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Platlapju (bez ozoliem, kļavām) krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="Ch06.html#cb347-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.307" class="section level2 hasAnchor" number="6.307">
<h2><span class="header-section-number">6.307</span> ForestsQuant_VolumeTotal-sum_cell<a href="Ch06.html#ch06.307" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsQuant_VolumeTotal-sum_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_307</code></p>
<p><strong>English name:</strong> Timber volume within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Kopējā krāja analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="Ch06.html#cb348-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.308" class="section level2 hasAnchor" number="6.308">
<h2><span class="header-section-number">6.308</span> ForestsSoil_EutrophicDrained_cell<a href="Ch06.html#ch06.308" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicDrained_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_308</code></p>
<p><strong>English name:</strong> Fractional cover of Drained Eutrophic Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Susinātu eitrofu mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="Ch06.html#cb349-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.309" class="section level2 hasAnchor" number="6.309">
<h2><span class="header-section-number">6.309</span> ForestsSoil_EutrophicDrained_r500<a href="Ch06.html#ch06.309" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicDrained_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_309</code></p>
<p><strong>English name:</strong> Fractional cover of Drained Eutrophic Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Susinātu eitrofu mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="Ch06.html#cb350-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.310" class="section level2 hasAnchor" number="6.310">
<h2><span class="header-section-number">6.310</span> ForestsSoil_EutrophicDrained_r1250<a href="Ch06.html#ch06.310" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicDrained_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_310</code></p>
<p><strong>English name:</strong> Fractional cover of Drained Eutrophic Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Susinātu eitrofu mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="Ch06.html#cb351-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.311" class="section level2 hasAnchor" number="6.311">
<h2><span class="header-section-number">6.311</span> ForestsSoil_EutrophicDrained_r3000<a href="Ch06.html#ch06.311" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicDrained_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_311</code></p>
<p><strong>English name:</strong> Fractional cover of Drained Eutrophic Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Susinātu eitrofu mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="Ch06.html#cb352-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.312" class="section level2 hasAnchor" number="6.312">
<h2><span class="header-section-number">6.312</span> ForestsSoil_EutrophicDrained_r10000<a href="Ch06.html#ch06.312" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicDrained_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_312</code></p>
<p><strong>English name:</strong> Fractional cover of Drained Eutrophic Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Susinātu eitrofu mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="Ch06.html#cb353-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.313" class="section level2 hasAnchor" number="6.313">
<h2><span class="header-section-number">6.313</span> ForestsSoil_EutrophicMineral_cell<a href="Ch06.html#ch06.313" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicMineral_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_313</code></p>
<p><strong>English name:</strong> Fractional cover of Eutrophic Forests on undrained Mineral Soils within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Eitrofu mežu nesusinātās minerālaugsnēs platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="Ch06.html#cb354-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.314" class="section level2 hasAnchor" number="6.314">
<h2><span class="header-section-number">6.314</span> ForestsSoil_EutrophicMineral_r500<a href="Ch06.html#ch06.314" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicMineral_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_314</code></p>
<p><strong>English name:</strong> Fractional cover of Eutrophic Forests on undrained Mineral Soils within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Eitrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="Ch06.html#cb355-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.315" class="section level2 hasAnchor" number="6.315">
<h2><span class="header-section-number">6.315</span> ForestsSoil_EutrophicMineral_r1250<a href="Ch06.html#ch06.315" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicMineral_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_315</code></p>
<p><strong>English name:</strong> Fractional cover of Eutrophic Forests on undrained Mineral Soils within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Eitrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="Ch06.html#cb356-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.316" class="section level2 hasAnchor" number="6.316">
<h2><span class="header-section-number">6.316</span> ForestsSoil_EutrophicMineral_r3000<a href="Ch06.html#ch06.316" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicMineral_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_316</code></p>
<p><strong>English name:</strong> Fractional cover of Eutrophic Forests on undrained Mineral Soils within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Eitrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="Ch06.html#cb357-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.317" class="section level2 hasAnchor" number="6.317">
<h2><span class="header-section-number">6.317</span> ForestsSoil_EutrophicMineral_r10000<a href="Ch06.html#ch06.317" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicMineral_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_317</code></p>
<p><strong>English name:</strong> Fractional cover of Eutrophic Forests on undrained Mineral Soils within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Eitrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="Ch06.html#cb358-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.318" class="section level2 hasAnchor" number="6.318">
<h2><span class="header-section-number">6.318</span> ForestsSoil_EutrophicOrganic_cell<a href="Ch06.html#ch06.318" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicOrganic_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_318</code></p>
<p><strong>English name:</strong> Fractional cover of Eutrophic Forests on undrained Organic Soils within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Eitrofu mežu nesusinātās organiskajās augsnēs platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="Ch06.html#cb359-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.319" class="section level2 hasAnchor" number="6.319">
<h2><span class="header-section-number">6.319</span> ForestsSoil_EutrophicOrganic_r500<a href="Ch06.html#ch06.319" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicOrganic_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_319</code></p>
<p><strong>English name:</strong> Fractional cover of Eutrophic Forests on undrained Organic Soils within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Eitrofu mežu nesusinātās organiskajās augsnēs platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="Ch06.html#cb360-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.320" class="section level2 hasAnchor" number="6.320">
<h2><span class="header-section-number">6.320</span> ForestsSoil_EutrophicOrganic_r1250<a href="Ch06.html#ch06.320" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicOrganic_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_320</code></p>
<p><strong>English name:</strong> Fractional cover of Eutrophic Forests on undrained Organic Soils within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Eitrofu mežu nesusinātās organiskajās augsnēs platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="Ch06.html#cb361-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.321" class="section level2 hasAnchor" number="6.321">
<h2><span class="header-section-number">6.321</span> ForestsSoil_EutrophicOrganic_r3000<a href="Ch06.html#ch06.321" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicOrganic_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_321</code></p>
<p><strong>English name:</strong> Fractional cover of Eutrophic Forests on undrained Organic Soils within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Eitrofu mežu nesusinātās organiskajās augsnēs platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="Ch06.html#cb362-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.322" class="section level2 hasAnchor" number="6.322">
<h2><span class="header-section-number">6.322</span> ForestsSoil_EutrophicOrganic_r10000<a href="Ch06.html#ch06.322" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_EutrophicOrganic_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_322</code></p>
<p><strong>English name:</strong> Fractional cover of Eutrophic Forests on undrained Organic Soils within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Eitrofu mežu nesusinātās organiskajās augsnēs platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="Ch06.html#cb363-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.323" class="section level2 hasAnchor" number="6.323">
<h2><span class="header-section-number">6.323</span> ForestsSoil_MesotrophicMineral_cell<a href="Ch06.html#ch06.323" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_MesotrophicMineral_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_323</code></p>
<p><strong>English name:</strong> Fractional cover of Mesotrophic Forests on undrained Mineral Soils within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Mezotrofu mežu minerālaugsnēs platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="Ch06.html#cb364-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.324" class="section level2 hasAnchor" number="6.324">
<h2><span class="header-section-number">6.324</span> ForestsSoil_MesotrophicMineral_r500<a href="Ch06.html#ch06.324" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_MesotrophicMineral_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_324</code></p>
<p><strong>English name:</strong> Fractional cover of Mesotrophic Forests on undrained Mineral Soils within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Mezotrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="Ch06.html#cb365-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.325" class="section level2 hasAnchor" number="6.325">
<h2><span class="header-section-number">6.325</span> ForestsSoil_MesotrophicMineral_r1250<a href="Ch06.html#ch06.325" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_MesotrophicMineral_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_325</code></p>
<p><strong>English name:</strong> Fractional cover of Mesotrophic Forests on undrained Mineral Soils within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Mezotrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="Ch06.html#cb366-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.326" class="section level2 hasAnchor" number="6.326">
<h2><span class="header-section-number">6.326</span> ForestsSoil_MesotrophicMineral_r3000<a href="Ch06.html#ch06.326" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_MesotrophicMineral_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_326</code></p>
<p><strong>English name:</strong> Fractional cover of Mesotrophic Forests on undrained Mineral Soils within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Mezotrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="Ch06.html#cb367-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.327" class="section level2 hasAnchor" number="6.327">
<h2><span class="header-section-number">6.327</span> ForestsSoil_MesotrophicMineral_r10000<a href="Ch06.html#ch06.327" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_MesotrophicMineral_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_327</code></p>
<p><strong>English name:</strong> Fractional cover of Mesotrophic Forests on undrained Mineral Soils within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Mezotrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="Ch06.html#cb368-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.328" class="section level2 hasAnchor" number="6.328">
<h2><span class="header-section-number">6.328</span> ForestsSoil_OligotrophicDrained_cell<a href="Ch06.html#ch06.328" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicDrained_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_328</code></p>
<p><strong>English name:</strong> Fractional cover of Drained Oligotrophic Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Susinātu oligotrofu mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="Ch06.html#cb369-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.329" class="section level2 hasAnchor" number="6.329">
<h2><span class="header-section-number">6.329</span> ForestsSoil_OligotrophicDrained_r500<a href="Ch06.html#ch06.329" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicDrained_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_329</code></p>
<p><strong>English name:</strong> Fractional cover of Drained Oligotrophic Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Susinātu oligotrofu mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="Ch06.html#cb370-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.330" class="section level2 hasAnchor" number="6.330">
<h2><span class="header-section-number">6.330</span> ForestsSoil_OligotrophicDrained_r1250<a href="Ch06.html#ch06.330" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicDrained_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_330</code></p>
<p><strong>English name:</strong> Fractional cover of Drained Oligotrophic Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Susinātu oligotrofu mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="Ch06.html#cb371-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.331" class="section level2 hasAnchor" number="6.331">
<h2><span class="header-section-number">6.331</span> ForestsSoil_OligotrophicDrained_r3000<a href="Ch06.html#ch06.331" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicDrained_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_331</code></p>
<p><strong>English name:</strong> Fractional cover of Drained Oligotrophic Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Susinātu oligotrofu mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="Ch06.html#cb372-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.332" class="section level2 hasAnchor" number="6.332">
<h2><span class="header-section-number">6.332</span> ForestsSoil_OligotrophicDrained_r10000<a href="Ch06.html#ch06.332" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicDrained_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_332</code></p>
<p><strong>English name:</strong> Fractional cover of Drained Oligotrophic Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Susinātu oligotrofu mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="Ch06.html#cb373-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.333" class="section level2 hasAnchor" number="6.333">
<h2><span class="header-section-number">6.333</span> ForestsSoil_OligotrophicMineral_cell<a href="Ch06.html#ch06.333" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicMineral_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_333</code></p>
<p><strong>English name:</strong> Fractional cover of Oligotrophic Forests on undrained Mineral Soils within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Oligotrofu mežu nesusinātās minerālaugsnēs platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="Ch06.html#cb374-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.334" class="section level2 hasAnchor" number="6.334">
<h2><span class="header-section-number">6.334</span> ForestsSoil_OligotrophicMineral_r500<a href="Ch06.html#ch06.334" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicMineral_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_334</code></p>
<p><strong>English name:</strong> Fractional cover of Oligotrophic Forests on undrained Mineral Soils within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Oligotrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="Ch06.html#cb375-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.335" class="section level2 hasAnchor" number="6.335">
<h2><span class="header-section-number">6.335</span> ForestsSoil_OligotrophicMineral_r1250<a href="Ch06.html#ch06.335" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicMineral_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_335</code></p>
<p><strong>English name:</strong> Fractional cover of Oligotrophic Forests on undrained Mineral Soils within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Oligotrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="Ch06.html#cb376-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.336" class="section level2 hasAnchor" number="6.336">
<h2><span class="header-section-number">6.336</span> ForestsSoil_OligotrophicMineral_r3000<a href="Ch06.html#ch06.336" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicMineral_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_336</code></p>
<p><strong>English name:</strong> Fractional cover of Oligotrophic Forests on undrained Mineral Soils within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Oligotrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="Ch06.html#cb377-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.337" class="section level2 hasAnchor" number="6.337">
<h2><span class="header-section-number">6.337</span> ForestsSoil_OligotrophicMineral_r10000<a href="Ch06.html#ch06.337" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicMineral_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_337</code></p>
<p><strong>English name:</strong> Fractional cover of Oligotrophic Forests on undrained Mineral Soils within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Oligotrofu mežu nesusinātās minerālaugsnēs platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="Ch06.html#cb378-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.338" class="section level2 hasAnchor" number="6.338">
<h2><span class="header-section-number">6.338</span> ForestsSoil_OligotrophicOrganic_cell<a href="Ch06.html#ch06.338" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicOrganic_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_338</code></p>
<p><strong>English name:</strong> Fractional cover of Oligotrophic Forests on undrained Organic Soils within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Oligotrofu mežu nesusinātās organiskajās augsnēs platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="Ch06.html#cb379-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.339" class="section level2 hasAnchor" number="6.339">
<h2><span class="header-section-number">6.339</span> ForestsSoil_OligotrophicOrganic_r500<a href="Ch06.html#ch06.339" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicOrganic_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_339</code></p>
<p><strong>English name:</strong> Fractional cover of Oligotrophic Forests on undrained Organic Soils within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Oligotrofu mežu nesusinātās organiskajās augsnēs platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="Ch06.html#cb380-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.340" class="section level2 hasAnchor" number="6.340">
<h2><span class="header-section-number">6.340</span> ForestsSoil_OligotrophicOrganic_r1250<a href="Ch06.html#ch06.340" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicOrganic_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_340</code></p>
<p><strong>English name:</strong> Fractional cover of Oligotrophic Forests on undrained Organic Soils within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Oligotrofu mežu nesusinātās organiskajās augsnēs platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="Ch06.html#cb381-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.341" class="section level2 hasAnchor" number="6.341">
<h2><span class="header-section-number">6.341</span> ForestsSoil_OligotrophicOrganic_r3000<a href="Ch06.html#ch06.341" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicOrganic_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_341</code></p>
<p><strong>English name:</strong> Fractional cover of Oligotrophic Forests on undrained Organic Soils within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Oligotrofu mežu nesusinātās organiskajās augsnēs platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="Ch06.html#cb382-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.342" class="section level2 hasAnchor" number="6.342">
<h2><span class="header-section-number">6.342</span> ForestsSoil_OligotrophicOrganic_r10000<a href="Ch06.html#ch06.342" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsSoil_OligotrophicOrganic_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_342</code></p>
<p><strong>English name:</strong> Fractional cover of Oligotrophic Forests on undrained Organic Soils within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Oligotrofu mežu nesusinātās organiskajās augsnēs platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="Ch06.html#cb383-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.343" class="section level2 hasAnchor" number="6.343">
<h2><span class="header-section-number">6.343</span> ForestsTreesAge_BorealDeciduousOld_cell<a href="Ch06.html#ch06.343" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_BorealDeciduousOld_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_343</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Boreal Deciduous Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) šaurlapju mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="Ch06.html#cb384-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.344" class="section level2 hasAnchor" number="6.344">
<h2><span class="header-section-number">6.344</span> ForestsTreesAge_BorealDeciduousOld_r500<a href="Ch06.html#ch06.344" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_BorealDeciduousOld_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_344</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Boreal Deciduous Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) šaurlapju mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="Ch06.html#cb385-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.345" class="section level2 hasAnchor" number="6.345">
<h2><span class="header-section-number">6.345</span> ForestsTreesAge_BorealDeciduousOld_r1250<a href="Ch06.html#ch06.345" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_BorealDeciduousOld_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_345</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Boreal Deciduous Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) šaurlapju mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="Ch06.html#cb386-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.346" class="section level2 hasAnchor" number="6.346">
<h2><span class="header-section-number">6.346</span> ForestsTreesAge_BorealDeciduousOld_r3000<a href="Ch06.html#ch06.346" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_BorealDeciduousOld_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_346</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Boreal Deciduous Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) šaurlapju mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="Ch06.html#cb387-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.347" class="section level2 hasAnchor" number="6.347">
<h2><span class="header-section-number">6.347</span> ForestsTreesAge_BorealDeciduousOld_r10000<a href="Ch06.html#ch06.347" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_BorealDeciduousOld_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_347</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Boreal Deciduous Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) šaurlapju mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="Ch06.html#cb388-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.348" class="section level2 hasAnchor" number="6.348">
<h2><span class="header-section-number">6.348</span> ForestsTreesAge_BorealDeciduousYoung_cell<a href="Ch06.html#ch06.348" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_BorealDeciduousYoung_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_348</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Boreal Deciduous Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) šaurlapju mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="Ch06.html#cb389-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.349" class="section level2 hasAnchor" number="6.349">
<h2><span class="header-section-number">6.349</span> ForestsTreesAge_BorealDeciduousYoung_r500<a href="Ch06.html#ch06.349" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_BorealDeciduousYoung_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_349</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Boreal Deciduous Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) šaurlapju mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="Ch06.html#cb390-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.350" class="section level2 hasAnchor" number="6.350">
<h2><span class="header-section-number">6.350</span> ForestsTreesAge_BorealDeciduousYoung_r1250<a href="Ch06.html#ch06.350" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_BorealDeciduousYoung_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_350</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Boreal Deciduous Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) šaurlapju mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="Ch06.html#cb391-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.351" class="section level2 hasAnchor" number="6.351">
<h2><span class="header-section-number">6.351</span> ForestsTreesAge_BorealDeciduousYoung_r3000<a href="Ch06.html#ch06.351" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_BorealDeciduousYoung_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_351</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Boreal Deciduous Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) šaurlapju mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="Ch06.html#cb392-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.352" class="section level2 hasAnchor" number="6.352">
<h2><span class="header-section-number">6.352</span> ForestsTreesAge_BorealDeciduousYoung_r10000<a href="Ch06.html#ch06.352" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_BorealDeciduousYoung_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_352</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Boreal Deciduous Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) šaurlapju mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="Ch06.html#cb393-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.353" class="section level2 hasAnchor" number="6.353">
<h2><span class="header-section-number">6.353</span> ForestsTreesAge_ConiferousOld_cell<a href="Ch06.html#ch06.353" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_ConiferousOld_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_353</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Coniferous Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) skujkoku mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="Ch06.html#cb394-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.354" class="section level2 hasAnchor" number="6.354">
<h2><span class="header-section-number">6.354</span> ForestsTreesAge_ConiferousOld_r500<a href="Ch06.html#ch06.354" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_ConiferousOld_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_354</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Coniferous Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) skujkoku mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="Ch06.html#cb395-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.355" class="section level2 hasAnchor" number="6.355">
<h2><span class="header-section-number">6.355</span> ForestsTreesAge_ConiferousOld_r1250<a href="Ch06.html#ch06.355" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_ConiferousOld_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_355</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Coniferous Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) skujkoku mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="Ch06.html#cb396-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.356" class="section level2 hasAnchor" number="6.356">
<h2><span class="header-section-number">6.356</span> ForestsTreesAge_ConiferousOld_r3000<a href="Ch06.html#ch06.356" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_ConiferousOld_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_356</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Coniferous Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) skujkoku mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="Ch06.html#cb397-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.357" class="section level2 hasAnchor" number="6.357">
<h2><span class="header-section-number">6.357</span> ForestsTreesAge_ConiferousOld_r10000<a href="Ch06.html#ch06.357" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_ConiferousOld_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_357</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Coniferous Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) skujkoku mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="Ch06.html#cb398-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.358" class="section level2 hasAnchor" number="6.358">
<h2><span class="header-section-number">6.358</span> ForestsTreesAge_ConiferousYoung_cell<a href="Ch06.html#ch06.358" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_ConiferousYoung_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_358</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Coniferous Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) skujkoku mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="Ch06.html#cb399-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.359" class="section level2 hasAnchor" number="6.359">
<h2><span class="header-section-number">6.359</span> ForestsTreesAge_ConiferousYoung_r500<a href="Ch06.html#ch06.359" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_ConiferousYoung_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_359</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Coniferous Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) skujkoku mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="Ch06.html#cb400-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.360" class="section level2 hasAnchor" number="6.360">
<h2><span class="header-section-number">6.360</span> ForestsTreesAge_ConiferousYoung_r1250<a href="Ch06.html#ch06.360" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_ConiferousYoung_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_360</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Coniferous Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) skujkoku mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="Ch06.html#cb401-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.361" class="section level2 hasAnchor" number="6.361">
<h2><span class="header-section-number">6.361</span> ForestsTreesAge_ConiferousYoung_r3000<a href="Ch06.html#ch06.361" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_ConiferousYoung_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_361</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Coniferous Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) skujkoku mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="Ch06.html#cb402-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.362" class="section level2 hasAnchor" number="6.362">
<h2><span class="header-section-number">6.362</span> ForestsTreesAge_ConiferousYoung_r10000<a href="Ch06.html#ch06.362" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_ConiferousYoung_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_362</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Coniferous Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) skujkoku mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="Ch06.html#cb403-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.363" class="section level2 hasAnchor" number="6.363">
<h2><span class="header-section-number">6.363</span> ForestsTreesAge_MixedOld_cell<a href="Ch06.html#ch06.363" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_MixedOld_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_363</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Mixed Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) jauktu koku mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="Ch06.html#cb404-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.364" class="section level2 hasAnchor" number="6.364">
<h2><span class="header-section-number">6.364</span> ForestsTreesAge_MixedOld_r500<a href="Ch06.html#ch06.364" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_MixedOld_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_364</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Mixed Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) jauktu koku mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="Ch06.html#cb405-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.365" class="section level2 hasAnchor" number="6.365">
<h2><span class="header-section-number">6.365</span> ForestsTreesAge_MixedOld_r1250<a href="Ch06.html#ch06.365" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_MixedOld_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_365</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Mixed Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) jauktu koku mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="Ch06.html#cb406-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.366" class="section level2 hasAnchor" number="6.366">
<h2><span class="header-section-number">6.366</span> ForestsTreesAge_MixedOld_r3000<a href="Ch06.html#ch06.366" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_MixedOld_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_366</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Mixed Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) jauktu koku mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="Ch06.html#cb407-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.367" class="section level2 hasAnchor" number="6.367">
<h2><span class="header-section-number">6.367</span> ForestsTreesAge_MixedOld_r10000<a href="Ch06.html#ch06.367" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_MixedOld_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_367</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Mixed Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) jauktu koku mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="Ch06.html#cb408-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.368" class="section level2 hasAnchor" number="6.368">
<h2><span class="header-section-number">6.368</span> ForestsTreesAge_MixedYoung_cell<a href="Ch06.html#ch06.368" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_MixedYoung_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_368</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Mixed Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) jauktu koku mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="Ch06.html#cb409-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.369" class="section level2 hasAnchor" number="6.369">
<h2><span class="header-section-number">6.369</span> ForestsTreesAge_MixedYoung_r500<a href="Ch06.html#ch06.369" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_MixedYoung_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_369</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Mixed Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) jauktu koku mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="Ch06.html#cb410-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.370" class="section level2 hasAnchor" number="6.370">
<h2><span class="header-section-number">6.370</span> ForestsTreesAge_MixedYoung_r1250<a href="Ch06.html#ch06.370" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_MixedYoung_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_370</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Mixed Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) jauktu koku mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="Ch06.html#cb411-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.371" class="section level2 hasAnchor" number="6.371">
<h2><span class="header-section-number">6.371</span> ForestsTreesAge_MixedYoung_r3000<a href="Ch06.html#ch06.371" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_MixedYoung_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_371</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Mixed Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) jauktu koku mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="Ch06.html#cb412-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.372" class="section level2 hasAnchor" number="6.372">
<h2><span class="header-section-number">6.372</span> ForestsTreesAge_MixedYoung_r10000<a href="Ch06.html#ch06.372" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_MixedYoung_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_372</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Mixed Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) jauktu koku mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="Ch06.html#cb413-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.373" class="section level2 hasAnchor" number="6.373">
<h2><span class="header-section-number">6.373</span> ForestsTreesAge_TemperateDeciduousOld_cell<a href="Ch06.html#ch06.373" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_TemperateDeciduousOld_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_373</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Temperate Deciduous Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) platlapju mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="Ch06.html#cb414-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.374" class="section level2 hasAnchor" number="6.374">
<h2><span class="header-section-number">6.374</span> ForestsTreesAge_TemperateDeciduousOld_r500<a href="Ch06.html#ch06.374" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_TemperateDeciduousOld_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_374</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Temperate Deciduous Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) platlapju mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="Ch06.html#cb415-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.375" class="section level2 hasAnchor" number="6.375">
<h2><span class="header-section-number">6.375</span> ForestsTreesAge_TemperateDeciduousOld_r1250<a href="Ch06.html#ch06.375" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_TemperateDeciduousOld_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_375</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Temperate Deciduous Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) platlapju mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="Ch06.html#cb416-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.376" class="section level2 hasAnchor" number="6.376">
<h2><span class="header-section-number">6.376</span> ForestsTreesAge_TemperateDeciduousOld_r3000<a href="Ch06.html#ch06.376" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_TemperateDeciduousOld_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_376</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Temperate Deciduous Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) platlapju mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="Ch06.html#cb417-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.377" class="section level2 hasAnchor" number="6.377">
<h2><span class="header-section-number">6.377</span> ForestsTreesAge_TemperateDeciduousOld_r10000<a href="Ch06.html#ch06.377" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_TemperateDeciduousOld_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_377</code></p>
<p><strong>English name:</strong> Fractional cover of Old (over rotation age) Temperate Deciduous Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vecu (kopš cirtmeta) platlapju mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="Ch06.html#cb418-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.378" class="section level2 hasAnchor" number="6.378">
<h2><span class="header-section-number">6.378</span> ForestsTreesAge_TemperateDeciduousYoung_cell<a href="Ch06.html#ch06.378" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_TemperateDeciduousYoung_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_378</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Temperate Deciduous Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) platlapju mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="Ch06.html#cb419-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.379" class="section level2 hasAnchor" number="6.379">
<h2><span class="header-section-number">6.379</span> ForestsTreesAge_TemperateDeciduousYoung_r500<a href="Ch06.html#ch06.379" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_TemperateDeciduousYoung_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_379</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Temperate Deciduous Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) platlapju mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="Ch06.html#cb420-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.380" class="section level2 hasAnchor" number="6.380">
<h2><span class="header-section-number">6.380</span> ForestsTreesAge_TemperateDeciduousYoung_r1250<a href="Ch06.html#ch06.380" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_TemperateDeciduousYoung_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_380</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Temperate Deciduous Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) platlapju mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="Ch06.html#cb421-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.381" class="section level2 hasAnchor" number="6.381">
<h2><span class="header-section-number">6.381</span> ForestsTreesAge_TemperateDeciduousYoung_r3000<a href="Ch06.html#ch06.381" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_TemperateDeciduousYoung_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_381</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Temperate Deciduous Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) platlapju mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="Ch06.html#cb422-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.382" class="section level2 hasAnchor" number="6.382">
<h2><span class="header-section-number">6.382</span> ForestsTreesAge_TemperateDeciduousYoung_r10000<a href="Ch06.html#ch06.382" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTreesAge_TemperateDeciduousYoung_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_382</code></p>
<p><strong>English name:</strong> Fractional cover of Young (pre-rotation age) Temperate Deciduous Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Jaunu (pirms cirtmeta) platlapju mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="Ch06.html#cb423-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.383" class="section level2 hasAnchor" number="6.383">
<h2><span class="header-section-number">6.383</span> ForestsTrees_BorealDeciduous_cell<a href="Ch06.html#ch06.383" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_BorealDeciduous_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_383</code></p>
<p><strong>English name:</strong> Fractional cover of Boeral Deciduous Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Šaurlapju mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="Ch06.html#cb424-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.384" class="section level2 hasAnchor" number="6.384">
<h2><span class="header-section-number">6.384</span> ForestsTrees_BorealDeciduous_r500<a href="Ch06.html#ch06.384" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_BorealDeciduous_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_384</code></p>
<p><strong>English name:</strong> Fractional cover of Boreal Deciduous Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Šaurlapju mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="Ch06.html#cb425-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.385" class="section level2 hasAnchor" number="6.385">
<h2><span class="header-section-number">6.385</span> ForestsTrees_BorealDeciduous_r1250<a href="Ch06.html#ch06.385" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_BorealDeciduous_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_385</code></p>
<p><strong>English name:</strong> Fractional cover of Boreal Deciduous Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Šaurlapju mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="Ch06.html#cb426-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.386" class="section level2 hasAnchor" number="6.386">
<h2><span class="header-section-number">6.386</span> ForestsTrees_BorealDeciduous_r3000<a href="Ch06.html#ch06.386" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_BorealDeciduous_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_386</code></p>
<p><strong>English name:</strong> Fractional cover of Boreal Deciduous Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Šaurlapju mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="Ch06.html#cb427-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.387" class="section level2 hasAnchor" number="6.387">
<h2><span class="header-section-number">6.387</span> ForestsTrees_BorealDeciduous_r10000<a href="Ch06.html#ch06.387" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_BorealDeciduous_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_387</code></p>
<p><strong>English name:</strong> Fractional cover of Boreal Deciduous Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Šaurlapju mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="Ch06.html#cb428-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.388" class="section level2 hasAnchor" number="6.388">
<h2><span class="header-section-number">6.388</span> ForestsTrees_Coniferous_cell<a href="Ch06.html#ch06.388" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_Coniferous_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_388</code></p>
<p><strong>English name:</strong> Fractional cover of Coniferous Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Skujkoku mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="Ch06.html#cb429-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.389" class="section level2 hasAnchor" number="6.389">
<h2><span class="header-section-number">6.389</span> ForestsTrees_Coniferous_r500<a href="Ch06.html#ch06.389" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_Coniferous_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_389</code></p>
<p><strong>English name:</strong> Fractional cover of Coniferous Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Skujkoku mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="Ch06.html#cb430-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.390" class="section level2 hasAnchor" number="6.390">
<h2><span class="header-section-number">6.390</span> ForestsTrees_Coniferous_r1250<a href="Ch06.html#ch06.390" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_Coniferous_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_390</code></p>
<p><strong>English name:</strong> Fractional cover of Coniferous Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Skujkoku mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="Ch06.html#cb431-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.391" class="section level2 hasAnchor" number="6.391">
<h2><span class="header-section-number">6.391</span> ForestsTrees_Coniferous_r3000<a href="Ch06.html#ch06.391" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_Coniferous_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_391</code></p>
<p><strong>English name:</strong> Fractional cover of Coniferous Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Skujkoku mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="Ch06.html#cb432-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.392" class="section level2 hasAnchor" number="6.392">
<h2><span class="header-section-number">6.392</span> ForestsTrees_Coniferous_r10000<a href="Ch06.html#ch06.392" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_Coniferous_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_392</code></p>
<p><strong>English name:</strong> Fractional cover of Coniferous Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Skujkoku mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="Ch06.html#cb433-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.393" class="section level2 hasAnchor" number="6.393">
<h2><span class="header-section-number">6.393</span> ForestsTrees_Mixed_cell<a href="Ch06.html#ch06.393" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_Mixed_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_393</code></p>
<p><strong>English name:</strong> Fractional cover of Mixed Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Jauktu koku mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="Ch06.html#cb434-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.394" class="section level2 hasAnchor" number="6.394">
<h2><span class="header-section-number">6.394</span> ForestsTrees_Mixed_r500<a href="Ch06.html#ch06.394" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_Mixed_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_394</code></p>
<p><strong>English name:</strong> Fractional cover of Mixed Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Jauktu koku mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="Ch06.html#cb435-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.395" class="section level2 hasAnchor" number="6.395">
<h2><span class="header-section-number">6.395</span> ForestsTrees_Mixed_r1250<a href="Ch06.html#ch06.395" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_Mixed_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_395</code></p>
<p><strong>English name:</strong> Fractional cover of Mixed Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Jauktu koku mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="Ch06.html#cb436-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.396" class="section level2 hasAnchor" number="6.396">
<h2><span class="header-section-number">6.396</span> ForestsTrees_Mixed_r3000<a href="Ch06.html#ch06.396" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_Mixed_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_396</code></p>
<p><strong>English name:</strong> Fractional cover of Mixed Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Jauktu koku mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="Ch06.html#cb437-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.397" class="section level2 hasAnchor" number="6.397">
<h2><span class="header-section-number">6.397</span> ForestsTrees_Mixed_r10000<a href="Ch06.html#ch06.397" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_Mixed_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_397</code></p>
<p><strong>English name:</strong> Fractional cover of Mixed Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Jauktu koku mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="Ch06.html#cb438-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.398" class="section level2 hasAnchor" number="6.398">
<h2><span class="header-section-number">6.398</span> ForestsTrees_TemperateDeciduous_cell<a href="Ch06.html#ch06.398" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_TemperateDeciduous_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_398</code></p>
<p><strong>English name:</strong> Fractional cover of Temperate Deciduous Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Platlapju mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="Ch06.html#cb439-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.399" class="section level2 hasAnchor" number="6.399">
<h2><span class="header-section-number">6.399</span> ForestsTrees_TemperateDeciduous_r500<a href="Ch06.html#ch06.399" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_TemperateDeciduous_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_399</code></p>
<p><strong>English name:</strong> Fractional cover of Temperate Deciduous Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Platlapju mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="Ch06.html#cb440-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.400" class="section level2 hasAnchor" number="6.400">
<h2><span class="header-section-number">6.400</span> ForestsTrees_TemperateDeciduous_r1250<a href="Ch06.html#ch06.400" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_TemperateDeciduous_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_400</code></p>
<p><strong>English name:</strong> Fractional cover of Temperate Deciduous Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Platlapju mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="Ch06.html#cb441-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.401" class="section level2 hasAnchor" number="6.401">
<h2><span class="header-section-number">6.401</span> ForestsTrees_TemperateDeciduous_r3000<a href="Ch06.html#ch06.401" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_TemperateDeciduous_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_401</code></p>
<p><strong>English name:</strong> Fractional cover of Temperate Deciduous Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Platlapju mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="Ch06.html#cb442-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.402" class="section level2 hasAnchor" number="6.402">
<h2><span class="header-section-number">6.402</span> ForestsTrees_TemperateDeciduous_r10000<a href="Ch06.html#ch06.402" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>ForestsTrees_TemperateDeciduous_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_402</code></p>
<p><strong>English name:</strong> Fractional cover of Temperate Deciduous Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Platlapju mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="Ch06.html#cb443-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.403" class="section level2 hasAnchor" number="6.403">
<h2><span class="header-section-number">6.403</span> General_AllotmentGardens_cell<a href="Ch06.html#ch06.403" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_AllotmentGardens_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_403</code></p>
<p><strong>English name:</strong> Fractional cover of Allotment gardens within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vasarnīcu kompleksu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="Ch06.html#cb444-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.404" class="section level2 hasAnchor" number="6.404">
<h2><span class="header-section-number">6.404</span> General_AllotmentGardens_r500<a href="Ch06.html#ch06.404" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_AllotmentGardens_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_404</code></p>
<p><strong>English name:</strong> Fractional cover of Allotment gardens within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vasarnīcu kompleksu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="Ch06.html#cb445-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.405" class="section level2 hasAnchor" number="6.405">
<h2><span class="header-section-number">6.405</span> General_AllotmentGardens_r1250<a href="Ch06.html#ch06.405" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_AllotmentGardens_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_405</code></p>
<p><strong>English name:</strong> Fractional cover of Allotment gardens within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vasarnīcu kompleksu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="Ch06.html#cb446-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.406" class="section level2 hasAnchor" number="6.406">
<h2><span class="header-section-number">6.406</span> General_AllotmentGardens_r3000<a href="Ch06.html#ch06.406" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_AllotmentGardens_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_406</code></p>
<p><strong>English name:</strong> Fractional cover of Allotment gardens within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vasarnīcu kompleksu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="Ch06.html#cb447-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.407" class="section level2 hasAnchor" number="6.407">
<h2><span class="header-section-number">6.407</span> General_AllotmentGardens_r10000<a href="Ch06.html#ch06.407" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_AllotmentGardens_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_407</code></p>
<p><strong>English name:</strong> Fractional cover of Allotment gardens within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vasarnīcu kompleksu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="Ch06.html#cb448-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.408" class="section level2 hasAnchor" number="6.408">
<h2><span class="header-section-number">6.408</span> General_BareSoilQuarry_cell<a href="Ch06.html#ch06.408" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_BareSoilQuarry_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_408</code></p>
<p><strong>English name:</strong> Fractional cover of areas with Bare Soil, Quarries within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Atklātas augsnes un karjeru platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="Ch06.html#cb449-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.409" class="section level2 hasAnchor" number="6.409">
<h2><span class="header-section-number">6.409</span> General_BareSoilQuarry_r500<a href="Ch06.html#ch06.409" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_BareSoilQuarry_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_409</code></p>
<p><strong>English name:</strong> Fractional cover of areas with Bare Soil, Quarries within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Atklātas augsnes un karjeru platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="Ch06.html#cb450-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.410" class="section level2 hasAnchor" number="6.410">
<h2><span class="header-section-number">6.410</span> General_BareSoilQuarry_r1250<a href="Ch06.html#ch06.410" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_BareSoilQuarry_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_410</code></p>
<p><strong>English name:</strong> Fractional cover of areas with Bare Soil, Quarries within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Atklātas augsnes un karjeru platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="Ch06.html#cb451-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.411" class="section level2 hasAnchor" number="6.411">
<h2><span class="header-section-number">6.411</span> General_BareSoilQuarry_r3000<a href="Ch06.html#ch06.411" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_BareSoilQuarry_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_411</code></p>
<p><strong>English name:</strong> Fractional cover of areas with Bare Soil, Quarries within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Atklātas augsnes un karjeru platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="Ch06.html#cb452-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.412" class="section level2 hasAnchor" number="6.412">
<h2><span class="header-section-number">6.412</span> General_BareSoilQuarry_r10000<a href="Ch06.html#ch06.412" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_BareSoilQuarry_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_412</code></p>
<p><strong>English name:</strong> Fractional cover of areas with Bare Soil, Quarries within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Atklātas augsnes un karjeru platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="Ch06.html#cb453-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.413" class="section level2 hasAnchor" number="6.413">
<h2><span class="header-section-number">6.413</span> General_Builtup_cell<a href="Ch06.html#ch06.413" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Builtup_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_413</code></p>
<p><strong>English name:</strong> Fractional cover of Built-Up areas within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Apbūves platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="Ch06.html#cb454-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.414" class="section level2 hasAnchor" number="6.414">
<h2><span class="header-section-number">6.414</span> General_Builtup_r500<a href="Ch06.html#ch06.414" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Builtup_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_414</code></p>
<p><strong>English name:</strong> Fractional cover of Built-Up areas within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Apbūves platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="Ch06.html#cb455-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.415" class="section level2 hasAnchor" number="6.415">
<h2><span class="header-section-number">6.415</span> General_Builtup_r1250<a href="Ch06.html#ch06.415" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Builtup_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_415</code></p>
<p><strong>English name:</strong> Fractional cover of Built-Up areas within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Apbūves platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="Ch06.html#cb456-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.416" class="section level2 hasAnchor" number="6.416">
<h2><span class="header-section-number">6.416</span> General_Builtup_r3000<a href="Ch06.html#ch06.416" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Builtup_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_416</code></p>
<p><strong>English name:</strong> Fractional cover of Built-Up areas within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Apbūves platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="Ch06.html#cb457-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.417" class="section level2 hasAnchor" number="6.417">
<h2><span class="header-section-number">6.417</span> General_Builtup_r10000<a href="Ch06.html#ch06.417" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Builtup_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_417</code></p>
<p><strong>English name:</strong> Fractional cover of Built-Up areas within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Apbūves platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="Ch06.html#cb458-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.418" class="section level2 hasAnchor" number="6.418">
<h2><span class="header-section-number">6.418</span> General_Farmland_cell<a href="Ch06.html#ch06.418" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Farmland_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_418</code></p>
<p><strong>English name:</strong> Fractional cover of Farmland within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Lauksaimniecībā izmantojamo zemju platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="Ch06.html#cb459-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.419" class="section level2 hasAnchor" number="6.419">
<h2><span class="header-section-number">6.419</span> General_Farmland_r500<a href="Ch06.html#ch06.419" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Farmland_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_419</code></p>
<p><strong>English name:</strong> Fractional cover of Farmland within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecībā izmantojamo zemju platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="Ch06.html#cb460-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.420" class="section level2 hasAnchor" number="6.420">
<h2><span class="header-section-number">6.420</span> General_Farmland_r1250<a href="Ch06.html#ch06.420" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Farmland_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_420</code></p>
<p><strong>English name:</strong> Fractional cover of Farmland within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecībā izmantojamo zemju platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="Ch06.html#cb461-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.421" class="section level2 hasAnchor" number="6.421">
<h2><span class="header-section-number">6.421</span> General_Farmland_r3000<a href="Ch06.html#ch06.421" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Farmland_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_421</code></p>
<p><strong>English name:</strong> Fractional cover of Farmland within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecībā izmantojamo zemju platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="Ch06.html#cb462-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.422" class="section level2 hasAnchor" number="6.422">
<h2><span class="header-section-number">6.422</span> General_Farmland_r10000<a href="Ch06.html#ch06.422" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Farmland_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_422</code></p>
<p><strong>English name:</strong> Fractional cover of Farmland within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Lauksaimniecībā izmantojamo zemju platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="Ch06.html#cb463-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.423" class="section level2 hasAnchor" number="6.423">
<h2><span class="header-section-number">6.423</span> General_ForestsWithoutInventory_cell<a href="Ch06.html#ch06.423" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ForestsWithoutInventory_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_423</code></p>
<p><strong>English name:</strong> Fractional cover of Forests Without Inventory within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Netaksēto mežu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="Ch06.html#cb464-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.424" class="section level2 hasAnchor" number="6.424">
<h2><span class="header-section-number">6.424</span> General_ForestsWithoutInventory_r500<a href="Ch06.html#ch06.424" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ForestsWithoutInventory_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_424</code></p>
<p><strong>English name:</strong> Fractional cover of Forests Without Inventory within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Netaksēto mežu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="Ch06.html#cb465-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.425" class="section level2 hasAnchor" number="6.425">
<h2><span class="header-section-number">6.425</span> General_ForestsWithoutInventory_r1250<a href="Ch06.html#ch06.425" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ForestsWithoutInventory_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_425</code></p>
<p><strong>English name:</strong> Fractional cover of Forests Without Inventory within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Netaksēto mežu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="Ch06.html#cb466-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.426" class="section level2 hasAnchor" number="6.426">
<h2><span class="header-section-number">6.426</span> General_ForestsWithoutInventory_r3000<a href="Ch06.html#ch06.426" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ForestsWithoutInventory_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_426</code></p>
<p><strong>English name:</strong> Fractional cover of Forests Without Inventory within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Netaksēto mežu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="Ch06.html#cb467-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.427" class="section level2 hasAnchor" number="6.427">
<h2><span class="header-section-number">6.427</span> General_ForestsWithoutInventory_r10000<a href="Ch06.html#ch06.427" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ForestsWithoutInventory_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_427</code></p>
<p><strong>English name:</strong> Fractional cover of Forests Without Inventory within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Netaksēto mežu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="Ch06.html#cb468-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.428" class="section level2 hasAnchor" number="6.428">
<h2><span class="header-section-number">6.428</span> General_GardensOrchards_cell<a href="Ch06.html#ch06.428" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_GardensOrchards_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_428</code></p>
<p><strong>English name:</strong> Fractional cover of Allotment gardens, Orchards within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Vasarnīcu kompleksu un augļudārzu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="Ch06.html#cb469-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.429" class="section level2 hasAnchor" number="6.429">
<h2><span class="header-section-number">6.429</span> General_GardensOrchards_r500<a href="Ch06.html#ch06.429" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_GardensOrchards_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_429</code></p>
<p><strong>English name:</strong> Fractional cover of Allotment gardens, Orchards within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Vasarnīcu kompleksu un augļudārzu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="Ch06.html#cb470-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.430" class="section level2 hasAnchor" number="6.430">
<h2><span class="header-section-number">6.430</span> General_GardensOrchards_r1250<a href="Ch06.html#ch06.430" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_GardensOrchards_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_430</code></p>
<p><strong>English name:</strong> Fractional cover of Allotment gardens, Orchards within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Vasarnīcu kompleksu un augļudārzu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="Ch06.html#cb471-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.431" class="section level2 hasAnchor" number="6.431">
<h2><span class="header-section-number">6.431</span> General_GardensOrchards_r3000<a href="Ch06.html#ch06.431" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_GardensOrchards_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_431</code></p>
<p><strong>English name:</strong> Fractional cover of Allotment gardens, Orchards within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Vasarnīcu kompleksu un augļudārzu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="Ch06.html#cb472-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.432" class="section level2 hasAnchor" number="6.432">
<h2><span class="header-section-number">6.432</span> General_GardensOrchards_r10000<a href="Ch06.html#ch06.432" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_GardensOrchards_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_432</code></p>
<p><strong>English name:</strong> Fractional cover of Allotment gardens, Orchards within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Vasarnīcu kompleksu un augļudārzu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="Ch06.html#cb473-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.433" class="section level2 hasAnchor" number="6.433">
<h2><span class="header-section-number">6.433</span> General_Roads_cell<a href="Ch06.html#ch06.433" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Roads_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_433</code></p>
<p><strong>English name:</strong> Fractional cover of Roads within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ceļu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="Ch06.html#cb474-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.434" class="section level2 hasAnchor" number="6.434">
<h2><span class="header-section-number">6.434</span> General_ShrubsOrchards_cell<a href="Ch06.html#ch06.434" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ShrubsOrchards_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_434</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young stands, Orchards within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Krūmāju, jaunaudžu un augļudārzu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="Ch06.html#cb475-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.435" class="section level2 hasAnchor" number="6.435">
<h2><span class="header-section-number">6.435</span> General_ShrubsOrchards_r500<a href="Ch06.html#ch06.435" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ShrubsOrchards_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_435</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young stands, Orchards within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju, jaunaudžu un augļudārzu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="Ch06.html#cb476-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.436" class="section level2 hasAnchor" number="6.436">
<h2><span class="header-section-number">6.436</span> General_ShrubsOrchards_r1250<a href="Ch06.html#ch06.436" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ShrubsOrchards_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_436</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young stands, Orchards within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju, jaunaudžu un augļudārzu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="Ch06.html#cb477-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.437" class="section level2 hasAnchor" number="6.437">
<h2><span class="header-section-number">6.437</span> General_ShrubsOrchards_r3000<a href="Ch06.html#ch06.437" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ShrubsOrchards_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_437</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young stands, Orchards within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju, jaunaudžu un augļudārzu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="Ch06.html#cb478-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.438" class="section level2 hasAnchor" number="6.438">
<h2><span class="header-section-number">6.438</span> General_ShrubsOrchards_r10000<a href="Ch06.html#ch06.438" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ShrubsOrchards_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_438</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young stands, Orchards within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju, jaunaudžu un augļudārzu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="Ch06.html#cb479-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.439" class="section level2 hasAnchor" number="6.439">
<h2><span class="header-section-number">6.439</span> General_ShrubsOrchardsGardens_cell<a href="Ch06.html#ch06.439" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ShrubsOrchardsGardens_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_439</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young stands, Orchards, Allotment gardens within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Krūmāju, jaunaudžu, augļudārzu un vasarnīcu kompleksu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="Ch06.html#cb480-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.440" class="section level2 hasAnchor" number="6.440">
<h2><span class="header-section-number">6.440</span> General_ShrubsOrchardsGardens_r500<a href="Ch06.html#ch06.440" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ShrubsOrchardsGardens_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_440</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young stands, Orchards, Allotment gardens within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju, jaunaudžu, augļudārzu un vasarnīcu kompleksu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="Ch06.html#cb481-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.441" class="section level2 hasAnchor" number="6.441">
<h2><span class="header-section-number">6.441</span> General_ShrubsOrchardsGardens_r1250<a href="Ch06.html#ch06.441" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ShrubsOrchardsGardens_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_441</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young stands, Orchards, Allotment gardens within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju, jaunaudžu, augļudārzu un vasarnīcu kompleksu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="Ch06.html#cb482-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.442" class="section level2 hasAnchor" number="6.442">
<h2><span class="header-section-number">6.442</span> General_ShrubsOrchardsGardens_r3000<a href="Ch06.html#ch06.442" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ShrubsOrchardsGardens_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_442</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young stands, Orchards, Allotment gardens within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju, jaunaudžu, augļudārzu un vasarnīcu kompleksu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="Ch06.html#cb483-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.443" class="section level2 hasAnchor" number="6.443">
<h2><span class="header-section-number">6.443</span> General_ShrubsOrchardsGardens_r10000<a href="Ch06.html#ch06.443" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_ShrubsOrchardsGardens_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_443</code></p>
<p><strong>English name:</strong> Fractional cover of Shrubs, Young stands, Orchards, Allotment gardens within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Krūmāju, jaunaudžu, augļudārzu un vasarnīcu kompleksu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="Ch06.html#cb484-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.444" class="section level2 hasAnchor" number="6.444">
<h2><span class="header-section-number">6.444</span> General_SwampsMiresBogsHelophytes_cell<a href="Ch06.html#ch06.444" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_SwampsMiresBogsHelophytes_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_444</code></p>
<p><strong>English name:</strong> Fractional cover of Swamps, Mires, Bogs, Reed-, Sedge-, Rush- Beds within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Purvu, niedrāju, grīslāju, meldrāju platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="Ch06.html#cb485-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.445" class="section level2 hasAnchor" number="6.445">
<h2><span class="header-section-number">6.445</span> General_SwampsMiresBogsHelophytes_r500<a href="Ch06.html#ch06.445" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_SwampsMiresBogsHelophytes_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_445</code></p>
<p><strong>English name:</strong> Fractional cover of Swamps, Mires, Bogs, Reed-, Sedge-, Rush- Beds within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Purvu, niedrāju, grīslāju, meldrāju platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="Ch06.html#cb486-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.446" class="section level2 hasAnchor" number="6.446">
<h2><span class="header-section-number">6.446</span> General_SwampsMiresBogsHelophytes_r1250<a href="Ch06.html#ch06.446" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_SwampsMiresBogsHelophytes_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_446</code></p>
<p><strong>English name:</strong> Fractional cover of Swamps, Mires, Bogs, Reed-, Sedge-, Rush- Beds within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Purvu, niedrāju, grīslāju, meldrāju platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="Ch06.html#cb487-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.447" class="section level2 hasAnchor" number="6.447">
<h2><span class="header-section-number">6.447</span> General_SwampsMiresBogsHelophytes_r3000<a href="Ch06.html#ch06.447" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_SwampsMiresBogsHelophytes_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_447</code></p>
<p><strong>English name:</strong> Fractional cover of Swamps, Mires, Bogs, Reed-, Sedge-, Rush- Beds within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Purvu, niedrāju, grīslāju, meldrāju platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="Ch06.html#cb488-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.448" class="section level2 hasAnchor" number="6.448">
<h2><span class="header-section-number">6.448</span> General_SwampsMiresBogsHelophytes_r10000<a href="Ch06.html#ch06.448" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_SwampsMiresBogsHelophytes_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_448</code></p>
<p><strong>English name:</strong> Fractional cover of Swamps, Mires, Bogs, Reed-, Sedge-, Rush- Beds within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Purvu, niedrāju, grīslāju, meldrāju platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="Ch06.html#cb489-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.449" class="section level2 hasAnchor" number="6.449">
<h2><span class="header-section-number">6.449</span> General_Trees_cell<a href="Ch06.html#ch06.449" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Trees_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_449</code></p>
<p><strong>English name:</strong> Fractional cover of Trees, Shrubs, Clear-cuts within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Koku, krūmu un izcirtumu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="Ch06.html#cb490-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.450" class="section level2 hasAnchor" number="6.450">
<h2><span class="header-section-number">6.450</span> General_Trees_r500<a href="Ch06.html#ch06.450" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Trees_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_450</code></p>
<p><strong>English name:</strong> Fractional cover of Trees, Shrubs, Clear-cuts within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Koku, krūmu un izcirtumu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="Ch06.html#cb491-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.451" class="section level2 hasAnchor" number="6.451">
<h2><span class="header-section-number">6.451</span> General_Trees_r1250<a href="Ch06.html#ch06.451" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Trees_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_451</code></p>
<p><strong>English name:</strong> Fractional cover of Trees, Shrubs, Clear-cuts within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Koku, krūmu un izcirtumu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="Ch06.html#cb492-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.452" class="section level2 hasAnchor" number="6.452">
<h2><span class="header-section-number">6.452</span> General_Trees_r3000<a href="Ch06.html#ch06.452" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Trees_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_452</code></p>
<p><strong>English name:</strong> Fractional cover of Trees, Shrubs, Clear-cuts within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Koku, krūmu un izcirtumu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="Ch06.html#cb493-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.453" class="section level2 hasAnchor" number="6.453">
<h2><span class="header-section-number">6.453</span> General_Trees_r10000<a href="Ch06.html#ch06.453" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Trees_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_453</code></p>
<p><strong>English name:</strong> Fractional cover of Trees, Shrubs, Clear-cuts within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Koku, krūmu un izcirtumu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="Ch06.html#cb494-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.454" class="section level2 hasAnchor" number="6.454">
<h2><span class="header-section-number">6.454</span> General_TreesOutsideForests_cell<a href="Ch06.html#ch06.454" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_TreesOutsideForests_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_454</code></p>
<p><strong>English name:</strong> Fractional cover of Tree covered areas Outside Forests within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ar kokiem klāto teritoriju ārpus mežiem platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="Ch06.html#cb495-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.455" class="section level2 hasAnchor" number="6.455">
<h2><span class="header-section-number">6.455</span> General_TreesOutsideForests_r500<a href="Ch06.html#ch06.455" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_TreesOutsideForests_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_455</code></p>
<p><strong>English name:</strong> Fractional cover of Tree covered areas Outside Forests within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Ar kokiem klāto teritoriju ārpus mežiem platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="Ch06.html#cb496-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.456" class="section level2 hasAnchor" number="6.456">
<h2><span class="header-section-number">6.456</span> General_TreesOutsideForests_r1250<a href="Ch06.html#ch06.456" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_TreesOutsideForests_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_456</code></p>
<p><strong>English name:</strong> Fractional cover of Tree covered areas Outside Forests within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Ar kokiem klāto teritoriju ārpus mežiem platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="Ch06.html#cb497-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.457" class="section level2 hasAnchor" number="6.457">
<h2><span class="header-section-number">6.457</span> General_TreesOutsideForests_r3000<a href="Ch06.html#ch06.457" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_TreesOutsideForests_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_457</code></p>
<p><strong>English name:</strong> Fractional cover of Tree covered areas Outside Forests within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Ar kokiem klāto teritoriju ārpus mežiem platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="Ch06.html#cb498-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.458" class="section level2 hasAnchor" number="6.458">
<h2><span class="header-section-number">6.458</span> General_TreesOutsideForests_r10000<a href="Ch06.html#ch06.458" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_TreesOutsideForests_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_458</code></p>
<p><strong>English name:</strong> Fractional cover of Tree covered areas Outside Forests within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Ar kokiem klāto teritoriju ārpus mežiem platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="Ch06.html#cb499-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.459" class="section level2 hasAnchor" number="6.459">
<h2><span class="header-section-number">6.459</span> General_Water_cell<a href="Ch06.html#ch06.459" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Water_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_459</code></p>
<p><strong>English name:</strong> Fractional cover of Waterbodies within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Ūdenstilpju platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="Ch06.html#cb500-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.460" class="section level2 hasAnchor" number="6.460">
<h2><span class="header-section-number">6.460</span> General_Water_r500<a href="Ch06.html#ch06.460" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Water_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_460</code></p>
<p><strong>English name:</strong> Fractional cover of Waterbodies within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpju platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="Ch06.html#cb501-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.461" class="section level2 hasAnchor" number="6.461">
<h2><span class="header-section-number">6.461</span> General_Water_r1250<a href="Ch06.html#ch06.461" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Water_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_461</code></p>
<p><strong>English name:</strong> Fractional cover of Waterbodies within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpju platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="Ch06.html#cb502-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.462" class="section level2 hasAnchor" number="6.462">
<h2><span class="header-section-number">6.462</span> General_Water_r3000<a href="Ch06.html#ch06.462" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Water_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_462</code></p>
<p><strong>English name:</strong> Fractional cover of Waterbodies within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpju platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="Ch06.html#cb503-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.463" class="section level2 hasAnchor" number="6.463">
<h2><span class="header-section-number">6.463</span> General_Water_r10000<a href="Ch06.html#ch06.463" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>General_Water_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_463</code></p>
<p><strong>English name:</strong> Fractional cover of Waterbodies within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Ūdenstilpju platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="Ch06.html#cb504-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.464" class="section level2 hasAnchor" number="6.464">
<h2><span class="header-section-number">6.464</span> Wetlands_Bogs_cell<a href="Ch06.html#ch06.464" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_Bogs_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_464</code></p>
<p><strong>English name:</strong> Fractional cover of Raised Bogs within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsto purvu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="Ch06.html#cb505-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.465" class="section level2 hasAnchor" number="6.465">
<h2><span class="header-section-number">6.465</span> Wetlands_Bogs_r500<a href="Ch06.html#ch06.465" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_Bogs_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_465</code></p>
<p><strong>English name:</strong> Fractional cover of Raised Bogs within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Augsto purvu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="Ch06.html#cb506-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.466" class="section level2 hasAnchor" number="6.466">
<h2><span class="header-section-number">6.466</span> Wetlands_Bogs_r1250<a href="Ch06.html#ch06.466" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_Bogs_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_466</code></p>
<p><strong>English name:</strong> Fractional cover of Raised Bogs within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Augsto purvu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="Ch06.html#cb507-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.467" class="section level2 hasAnchor" number="6.467">
<h2><span class="header-section-number">6.467</span> Wetlands_Bogs_r3000<a href="Ch06.html#ch06.467" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_Bogs_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_467</code></p>
<p><strong>English name:</strong> Fractional cover of Raised Bogs within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Augsto purvu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="Ch06.html#cb508-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.468" class="section level2 hasAnchor" number="6.468">
<h2><span class="header-section-number">6.468</span> Wetlands_Bogs_r10000<a href="Ch06.html#ch06.468" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_Bogs_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_468</code></p>
<p><strong>English name:</strong> Fractional cover of Raised Bogs within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Augsto purvu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="Ch06.html#cb509-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.469" class="section level2 hasAnchor" number="6.469">
<h2><span class="header-section-number">6.469</span> Wetlands_Mires_cell<a href="Ch06.html#ch06.469" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_Mires_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_469</code></p>
<p><strong>English name:</strong> Fractional cover of Transitional Mires within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Pārejas purvu platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="Ch06.html#cb510-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.470" class="section level2 hasAnchor" number="6.470">
<h2><span class="header-section-number">6.470</span> Wetlands_Mires_r500<a href="Ch06.html#ch06.470" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_Mires_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_470</code></p>
<p><strong>English name:</strong> Fractional cover of Transitional Mires within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Pārejas purvu platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="Ch06.html#cb511-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.471" class="section level2 hasAnchor" number="6.471">
<h2><span class="header-section-number">6.471</span> Wetlands_Mires_r1250<a href="Ch06.html#ch06.471" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_Mires_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_471</code></p>
<p><strong>English name:</strong> Fractional cover of Transitional Mires within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Pārejas purvu platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="Ch06.html#cb512-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.472" class="section level2 hasAnchor" number="6.472">
<h2><span class="header-section-number">6.472</span> Wetlands_Mires_r3000<a href="Ch06.html#ch06.472" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_Mires_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_472</code></p>
<p><strong>English name:</strong> Fractional cover of Transitional Mires within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Pārejas purvu platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="Ch06.html#cb513-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.473" class="section level2 hasAnchor" number="6.473">
<h2><span class="header-section-number">6.473</span> Wetlands_Mires_r10000<a href="Ch06.html#ch06.473" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_Mires_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_473</code></p>
<p><strong>English name:</strong> Fractional cover of Transitional Mires within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Pārejas purvu platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="Ch06.html#cb514-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.474" class="section level2 hasAnchor" number="6.474">
<h2><span class="header-section-number">6.474</span> Wetlands_ReedSedgeRushBeds_cell<a href="Ch06.html#ch06.474" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_ReedSedgeRushBeds_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_474</code></p>
<p><strong>English name:</strong> Fractional cover of Reed-, Sedge-, Rush-, Beds within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Niedrāju, grīslāju, meldrāju platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="Ch06.html#cb515-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.475" class="section level2 hasAnchor" number="6.475">
<h2><span class="header-section-number">6.475</span> Wetlands_ReedSedgeRushBeds_r500<a href="Ch06.html#ch06.475" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_ReedSedgeRushBeds_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_475</code></p>
<p><strong>English name:</strong> Fractional cover of Reed-, Sedge-, Rush-, Beds within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Niedrāju, grīslāju, meldrāju platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="Ch06.html#cb516-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.476" class="section level2 hasAnchor" number="6.476">
<h2><span class="header-section-number">6.476</span> Wetlands_ReedSedgeRushBeds_r1250<a href="Ch06.html#ch06.476" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_ReedSedgeRushBeds_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_476</code></p>
<p><strong>English name:</strong> Fractional cover of Reed-, Sedge-, Rush-, Beds within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Niedrāju, grīslāju, meldrāju platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="Ch06.html#cb517-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.477" class="section level2 hasAnchor" number="6.477">
<h2><span class="header-section-number">6.477</span> Wetlands_ReedSedgeRushBeds_r3000<a href="Ch06.html#ch06.477" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_ReedSedgeRushBeds_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_477</code></p>
<p><strong>English name:</strong> Fractional cover of Reed-, Sedge-, Rush-, Beds within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Niedrāju, grīslāju, meldrāju platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="Ch06.html#cb518-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.478" class="section level2 hasAnchor" number="6.478">
<h2><span class="header-section-number">6.478</span> Wetlands_ReedSedgeRushBeds_r10000<a href="Ch06.html#ch06.478" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Wetlands_ReedSedgeRushBeds_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_478</code></p>
<p><strong>English name:</strong> Fractional cover of Reed-, Sedge-, Rush-, Beds within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Niedrāju, grīslāju, meldrāju platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="Ch06.html#cb519-1" tabindex="-1"></a><span class="co"># libs ----</span></span></code></pre></div>
</details>
</div>
<div id="ch06.479" class="section level2 hasAnchor" number="6.479">
<h2><span class="header-section-number">6.479</span> EO_NDMI-LYmed-average_cell<a href="Ch06.html#ch06.479" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDMI-LYmed-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_479</code></p>
<p><strong>English name:</strong> Median vegetation water content (NDMI) for the last year within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Mediānā pēdējā gada ūdens satura veģetācijā indeksa (NDMI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Arithmetic mean value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Last year is 2024.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="Ch06.html#cb520-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb520-2"><a href="Ch06.html#cb520-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb520-3"><a href="Ch06.html#cb520-3" tabindex="-1"></a></span>
<span id="cb520-4"><a href="Ch06.html#cb520-4" tabindex="-1"></a><span class="co"># EO_NDMI-LYmed-average_cell.tif ----</span></span>
<span id="cb520-5"><a href="Ch06.html#cb520-5" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDMI-LYmedian.tif&quot;</span>,</span>
<span id="cb520-6"><a href="Ch06.html#cb520-6" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb520-7"><a href="Ch06.html#cb520-7" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb520-8"><a href="Ch06.html#cb520-8" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb520-9"><a href="Ch06.html#cb520-9" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb520-10"><a href="Ch06.html#cb520-10" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDMI-LYmed-average_cell.tif&quot;</span>,</span>
<span id="cb520-11"><a href="Ch06.html#cb520-11" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_479&quot;</span>,</span>
<span id="cb520-12"><a href="Ch06.html#cb520-12" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb520-13"><a href="Ch06.html#cb520-13" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb520-14"><a href="Ch06.html#cb520-14" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb520-15"><a href="Ch06.html#cb520-15" tabindex="-1"></a>egvrez</span>
<span id="cb520-16"><a href="Ch06.html#cb520-16" tabindex="-1"></a></span>
<span id="cb520-17"><a href="Ch06.html#cb520-17" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb520-18"><a href="Ch06.html#cb520-18" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb520-19"><a href="Ch06.html#cb520-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb520-20"><a href="Ch06.html#cb520-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb520-21"><a href="Ch06.html#cb520-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb520-22"><a href="Ch06.html#cb520-22" tabindex="-1"></a></span>
<span id="cb520-23"><a href="Ch06.html#cb520-23" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDMI-LYmed-average_cell.tif&quot;</span></span>
<span id="cb520-24"><a href="Ch06.html#cb520-24" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb520-25"><a href="Ch06.html#cb520-25" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb520-26"><a href="Ch06.html#cb520-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb520-27"><a href="Ch06.html#cb520-27" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb520-28"><a href="Ch06.html#cb520-28" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb520-29"><a href="Ch06.html#cb520-29" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb520-30"><a href="Ch06.html#cb520-30" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb520-31"><a href="Ch06.html#cb520-31" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb520-32"><a href="Ch06.html#cb520-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb520-33"><a href="Ch06.html#cb520-33" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb520-34"><a href="Ch06.html#cb520-34" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb520-35"><a href="Ch06.html#cb520-35" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_479.png" width="100%" /></p>
</div>
<div id="ch06.480" class="section level2 hasAnchor" number="6.480">
<h2><span class="header-section-number">6.480</span> EO_NDMI-LYmedian-iqr_cell<a href="Ch06.html#ch06.480" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDMI-LYmedian-iqr_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_480</code></p>
<p><strong>English name:</strong> Spatial variability of last year’s median vegetation water content (NDMI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Telpiskā variabilitāte pēdējā gada mediānajai ūdens saturam veģetācijā indeksa (NDMI) vērtībai, starpkvartiļu apgabals analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. First Q1 and then Q3
is calculated for every cell with <code>egvtools::input2egv()</code>. Finally, subtracting
Q1 from Q3 and writing final raster with specified layername. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Last year is 2024.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="Ch06.html#cb521-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb521-2"><a href="Ch06.html#cb521-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb521-3"><a href="Ch06.html#cb521-3" tabindex="-1"></a></span>
<span id="cb521-4"><a href="Ch06.html#cb521-4" tabindex="-1"></a><span class="co"># EO_NDMI-LYmedian-iqr_cell.tif ----</span></span>
<span id="cb521-5"><a href="Ch06.html#cb521-5" tabindex="-1"></a></span>
<span id="cb521-6"><a href="Ch06.html#cb521-6" tabindex="-1"></a>p25rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDMI-LYmedian.tif&quot;</span>,</span>
<span id="cb521-7"><a href="Ch06.html#cb521-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb521-8"><a href="Ch06.html#cb521-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q1&quot;</span>,</span>
<span id="cb521-9"><a href="Ch06.html#cb521-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb521-10"><a href="Ch06.html#cb521-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb521-11"><a href="Ch06.html#cb521-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p25.tif&quot;</span>,</span>
<span id="cb521-12"><a href="Ch06.html#cb521-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_480&quot;</span>,</span>
<span id="cb521-13"><a href="Ch06.html#cb521-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb521-14"><a href="Ch06.html#cb521-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb521-15"><a href="Ch06.html#cb521-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb521-16"><a href="Ch06.html#cb521-16" tabindex="-1"></a>p25rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb521-17"><a href="Ch06.html#cb521-17" tabindex="-1"></a></span>
<span id="cb521-18"><a href="Ch06.html#cb521-18" tabindex="-1"></a></span>
<span id="cb521-19"><a href="Ch06.html#cb521-19" tabindex="-1"></a>p75rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDMI-LYmedian.tif&quot;</span>,</span>
<span id="cb521-20"><a href="Ch06.html#cb521-20" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb521-21"><a href="Ch06.html#cb521-21" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q3&quot;</span>,</span>
<span id="cb521-22"><a href="Ch06.html#cb521-22" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb521-23"><a href="Ch06.html#cb521-23" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb521-24"><a href="Ch06.html#cb521-24" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p75.tif&quot;</span>,</span>
<span id="cb521-25"><a href="Ch06.html#cb521-25" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_480&quot;</span>,</span>
<span id="cb521-26"><a href="Ch06.html#cb521-26" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb521-27"><a href="Ch06.html#cb521-27" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb521-28"><a href="Ch06.html#cb521-28" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb521-29"><a href="Ch06.html#cb521-29" tabindex="-1"></a>p75rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb521-30"><a href="Ch06.html#cb521-30" tabindex="-1"></a></span>
<span id="cb521-31"><a href="Ch06.html#cb521-31" tabindex="-1"></a>iqr_rez<span class="ot">=</span>p75rez_r<span class="sc">-</span>p25rez_r</span>
<span id="cb521-32"><a href="Ch06.html#cb521-32" tabindex="-1"></a>iqr_rez</span>
<span id="cb521-33"><a href="Ch06.html#cb521-33" tabindex="-1"></a><span class="fu">plot</span>(iqr_rez)</span>
<span id="cb521-34"><a href="Ch06.html#cb521-34" tabindex="-1"></a></span>
<span id="cb521-35"><a href="Ch06.html#cb521-35" tabindex="-1"></a><span class="fu">writeRaster</span>(iqr_rez,</span>
<span id="cb521-36"><a href="Ch06.html#cb521-36" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/EO_NDMI-LYmedian-iqr_cell.tif&quot;</span>,</span>
<span id="cb521-37"><a href="Ch06.html#cb521-37" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb521-38"><a href="Ch06.html#cb521-38" tabindex="-1"></a></span>
<span id="cb521-39"><a href="Ch06.html#cb521-39" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb521-40"><a href="Ch06.html#cb521-40" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb521-41"><a href="Ch06.html#cb521-41" tabindex="-1"></a></span>
<span id="cb521-42"><a href="Ch06.html#cb521-42" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb521-43"><a href="Ch06.html#cb521-43" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb521-44"><a href="Ch06.html#cb521-44" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb521-45"><a href="Ch06.html#cb521-45" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb521-46"><a href="Ch06.html#cb521-46" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb521-47"><a href="Ch06.html#cb521-47" tabindex="-1"></a></span>
<span id="cb521-48"><a href="Ch06.html#cb521-48" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDMI-LYmedian-iqr_cell.tif&quot;</span></span>
<span id="cb521-49"><a href="Ch06.html#cb521-49" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb521-50"><a href="Ch06.html#cb521-50" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb521-51"><a href="Ch06.html#cb521-51" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb521-52"><a href="Ch06.html#cb521-52" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb521-53"><a href="Ch06.html#cb521-53" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb521-54"><a href="Ch06.html#cb521-54" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb521-55"><a href="Ch06.html#cb521-55" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb521-56"><a href="Ch06.html#cb521-56" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb521-57"><a href="Ch06.html#cb521-57" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb521-58"><a href="Ch06.html#cb521-58" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb521-59"><a href="Ch06.html#cb521-59" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb521-60"><a href="Ch06.html#cb521-60" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_480.png" width="100%" /></p>
</div>
<div id="ch06.481" class="section level2 hasAnchor" number="6.481">
<h2><span class="header-section-number">6.481</span> EO_NDMI-STiqr-median_cell<a href="Ch06.html#ch06.481" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDMI-STiqr-median_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_481</code></p>
<p><strong>English name:</strong> Average short-term seasonality of vegetation water content (NDMI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sezonalitāte pēdējo piecu gadu vidējam ūdens satura veģetācijā indeksa (NDMI) vērtībai, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Arithmetic mean value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="Ch06.html#cb522-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb522-2"><a href="Ch06.html#cb522-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb522-3"><a href="Ch06.html#cb522-3" tabindex="-1"></a></span>
<span id="cb522-4"><a href="Ch06.html#cb522-4" tabindex="-1"></a></span>
<span id="cb522-5"><a href="Ch06.html#cb522-5" tabindex="-1"></a><span class="co"># EO_NDMI-STiqr-median_cell.tif ----</span></span>
<span id="cb522-6"><a href="Ch06.html#cb522-6" tabindex="-1"></a></span>
<span id="cb522-7"><a href="Ch06.html#cb522-7" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDMI-STiqr.tif&quot;</span>,</span>
<span id="cb522-8"><a href="Ch06.html#cb522-8" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb522-9"><a href="Ch06.html#cb522-9" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb522-10"><a href="Ch06.html#cb522-10" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb522-11"><a href="Ch06.html#cb522-11" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb522-12"><a href="Ch06.html#cb522-12" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDMI-STiqr-median_cell.tif&quot;</span>,</span>
<span id="cb522-13"><a href="Ch06.html#cb522-13" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_481&quot;</span>,</span>
<span id="cb522-14"><a href="Ch06.html#cb522-14" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb522-15"><a href="Ch06.html#cb522-15" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb522-16"><a href="Ch06.html#cb522-16" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb522-17"><a href="Ch06.html#cb522-17" tabindex="-1"></a>egvrez</span>
<span id="cb522-18"><a href="Ch06.html#cb522-18" tabindex="-1"></a></span>
<span id="cb522-19"><a href="Ch06.html#cb522-19" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb522-20"><a href="Ch06.html#cb522-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb522-21"><a href="Ch06.html#cb522-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb522-22"><a href="Ch06.html#cb522-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb522-23"><a href="Ch06.html#cb522-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb522-24"><a href="Ch06.html#cb522-24" tabindex="-1"></a></span>
<span id="cb522-25"><a href="Ch06.html#cb522-25" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDMI-STiqr-median_cell.tif&quot;</span></span>
<span id="cb522-26"><a href="Ch06.html#cb522-26" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb522-27"><a href="Ch06.html#cb522-27" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb522-28"><a href="Ch06.html#cb522-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb522-29"><a href="Ch06.html#cb522-29" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb522-30"><a href="Ch06.html#cb522-30" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb522-31"><a href="Ch06.html#cb522-31" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb522-32"><a href="Ch06.html#cb522-32" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb522-33"><a href="Ch06.html#cb522-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb522-34"><a href="Ch06.html#cb522-34" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb522-35"><a href="Ch06.html#cb522-35" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb522-36"><a href="Ch06.html#cb522-36" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb522-37"><a href="Ch06.html#cb522-37" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_481.png" width="100%" /></p>
</div>
<div id="ch06.482" class="section level2 hasAnchor" number="6.482">
<h2><span class="header-section-number">6.482</span> EO_NDMI-STmedian-average_cell<a href="Ch06.html#ch06.482" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDMI-STmedian-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_482</code></p>
<p><strong>English name:</strong> Median short-term vegetation water content (NDMI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Mediānā pēdējo piecu gadu ūdens satura veģetācijā indeksa (NDMI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Arithmetic mean value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="Ch06.html#cb523-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb523-2"><a href="Ch06.html#cb523-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb523-3"><a href="Ch06.html#cb523-3" tabindex="-1"></a></span>
<span id="cb523-4"><a href="Ch06.html#cb523-4" tabindex="-1"></a><span class="co"># EO_NDMI-STmedian-average_cell.tif ----</span></span>
<span id="cb523-5"><a href="Ch06.html#cb523-5" tabindex="-1"></a></span>
<span id="cb523-6"><a href="Ch06.html#cb523-6" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDMI-STmedian.tif&quot;</span>,</span>
<span id="cb523-7"><a href="Ch06.html#cb523-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb523-8"><a href="Ch06.html#cb523-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb523-9"><a href="Ch06.html#cb523-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb523-10"><a href="Ch06.html#cb523-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb523-11"><a href="Ch06.html#cb523-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDMI-STmedian-average_cell.tif&quot;</span>,</span>
<span id="cb523-12"><a href="Ch06.html#cb523-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_482&quot;</span>,</span>
<span id="cb523-13"><a href="Ch06.html#cb523-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb523-14"><a href="Ch06.html#cb523-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb523-15"><a href="Ch06.html#cb523-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb523-16"><a href="Ch06.html#cb523-16" tabindex="-1"></a>egvrez</span>
<span id="cb523-17"><a href="Ch06.html#cb523-17" tabindex="-1"></a></span>
<span id="cb523-18"><a href="Ch06.html#cb523-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb523-19"><a href="Ch06.html#cb523-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb523-20"><a href="Ch06.html#cb523-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb523-21"><a href="Ch06.html#cb523-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb523-22"><a href="Ch06.html#cb523-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb523-23"><a href="Ch06.html#cb523-23" tabindex="-1"></a></span>
<span id="cb523-24"><a href="Ch06.html#cb523-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDMI-STmedian-average_cell.tif&quot;</span></span>
<span id="cb523-25"><a href="Ch06.html#cb523-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb523-26"><a href="Ch06.html#cb523-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb523-27"><a href="Ch06.html#cb523-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb523-28"><a href="Ch06.html#cb523-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb523-29"><a href="Ch06.html#cb523-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb523-30"><a href="Ch06.html#cb523-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb523-31"><a href="Ch06.html#cb523-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb523-32"><a href="Ch06.html#cb523-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb523-33"><a href="Ch06.html#cb523-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb523-34"><a href="Ch06.html#cb523-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb523-35"><a href="Ch06.html#cb523-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb523-36"><a href="Ch06.html#cb523-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_482.png" width="100%" /></p>
</div>
<div id="ch06.483" class="section level2 hasAnchor" number="6.483">
<h2><span class="header-section-number">6.483</span> EO_NDMI-STmedian-iqr_cell<a href="Ch06.html#ch06.483" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDMI-STmedian-iqr_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_483</code></p>
<p><strong>English name:</strong> Spatial variability of short-term median vegetation water content (NDMI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Telpiskā variabilitāte pēdējo piecu gadu mediānajai ūdens saturam veģetācijā indeksa (NDMI) vērtībai, starpkvartiļu apgabals analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. First Q1 and then Q3
is calculated for every cell with <code>egvtools::input2egv()</code>. Finally, subtracting
Q1 from Q3 and writing final raster with specified layername. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term corresponds
to last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="Ch06.html#cb524-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb524-2"><a href="Ch06.html#cb524-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb524-3"><a href="Ch06.html#cb524-3" tabindex="-1"></a></span>
<span id="cb524-4"><a href="Ch06.html#cb524-4" tabindex="-1"></a></span>
<span id="cb524-5"><a href="Ch06.html#cb524-5" tabindex="-1"></a><span class="co"># EO_NDMI-STmedian-iqr_cell.tif ----</span></span>
<span id="cb524-6"><a href="Ch06.html#cb524-6" tabindex="-1"></a></span>
<span id="cb524-7"><a href="Ch06.html#cb524-7" tabindex="-1"></a></span>
<span id="cb524-8"><a href="Ch06.html#cb524-8" tabindex="-1"></a>p25rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDMI-STmedian.tif&quot;</span>,</span>
<span id="cb524-9"><a href="Ch06.html#cb524-9" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb524-10"><a href="Ch06.html#cb524-10" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q1&quot;</span>,</span>
<span id="cb524-11"><a href="Ch06.html#cb524-11" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb524-12"><a href="Ch06.html#cb524-12" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb524-13"><a href="Ch06.html#cb524-13" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p25.tif&quot;</span>,</span>
<span id="cb524-14"><a href="Ch06.html#cb524-14" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_483&quot;</span>,</span>
<span id="cb524-15"><a href="Ch06.html#cb524-15" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb524-16"><a href="Ch06.html#cb524-16" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb524-17"><a href="Ch06.html#cb524-17" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb524-18"><a href="Ch06.html#cb524-18" tabindex="-1"></a>p25rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb524-19"><a href="Ch06.html#cb524-19" tabindex="-1"></a></span>
<span id="cb524-20"><a href="Ch06.html#cb524-20" tabindex="-1"></a></span>
<span id="cb524-21"><a href="Ch06.html#cb524-21" tabindex="-1"></a>p75rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDMI-STmedian.tif&quot;</span>,</span>
<span id="cb524-22"><a href="Ch06.html#cb524-22" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb524-23"><a href="Ch06.html#cb524-23" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q3&quot;</span>,</span>
<span id="cb524-24"><a href="Ch06.html#cb524-24" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb524-25"><a href="Ch06.html#cb524-25" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb524-26"><a href="Ch06.html#cb524-26" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p75.tif&quot;</span>,</span>
<span id="cb524-27"><a href="Ch06.html#cb524-27" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_483&quot;</span>,</span>
<span id="cb524-28"><a href="Ch06.html#cb524-28" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb524-29"><a href="Ch06.html#cb524-29" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb524-30"><a href="Ch06.html#cb524-30" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb524-31"><a href="Ch06.html#cb524-31" tabindex="-1"></a>p75rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb524-32"><a href="Ch06.html#cb524-32" tabindex="-1"></a></span>
<span id="cb524-33"><a href="Ch06.html#cb524-33" tabindex="-1"></a>iqr_rez<span class="ot">=</span>p75rez_r<span class="sc">-</span>p25rez_r</span>
<span id="cb524-34"><a href="Ch06.html#cb524-34" tabindex="-1"></a>iqr_rez</span>
<span id="cb524-35"><a href="Ch06.html#cb524-35" tabindex="-1"></a><span class="fu">plot</span>(iqr_rez)</span>
<span id="cb524-36"><a href="Ch06.html#cb524-36" tabindex="-1"></a></span>
<span id="cb524-37"><a href="Ch06.html#cb524-37" tabindex="-1"></a><span class="fu">writeRaster</span>(iqr_rez,</span>
<span id="cb524-38"><a href="Ch06.html#cb524-38" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/EO_NDMI-STmedian-iqr_cell.tif&quot;</span>,</span>
<span id="cb524-39"><a href="Ch06.html#cb524-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb524-40"><a href="Ch06.html#cb524-40" tabindex="-1"></a></span>
<span id="cb524-41"><a href="Ch06.html#cb524-41" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb524-42"><a href="Ch06.html#cb524-42" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb524-43"><a href="Ch06.html#cb524-43" tabindex="-1"></a></span>
<span id="cb524-44"><a href="Ch06.html#cb524-44" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb524-45"><a href="Ch06.html#cb524-45" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb524-46"><a href="Ch06.html#cb524-46" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb524-47"><a href="Ch06.html#cb524-47" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb524-48"><a href="Ch06.html#cb524-48" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb524-49"><a href="Ch06.html#cb524-49" tabindex="-1"></a></span>
<span id="cb524-50"><a href="Ch06.html#cb524-50" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDMI-STmedian-iqr_cell.tif&quot;</span></span>
<span id="cb524-51"><a href="Ch06.html#cb524-51" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb524-52"><a href="Ch06.html#cb524-52" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb524-53"><a href="Ch06.html#cb524-53" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb524-54"><a href="Ch06.html#cb524-54" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb524-55"><a href="Ch06.html#cb524-55" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb524-56"><a href="Ch06.html#cb524-56" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb524-57"><a href="Ch06.html#cb524-57" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb524-58"><a href="Ch06.html#cb524-58" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb524-59"><a href="Ch06.html#cb524-59" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb524-60"><a href="Ch06.html#cb524-60" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb524-61"><a href="Ch06.html#cb524-61" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb524-62"><a href="Ch06.html#cb524-62" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_483.png" width="100%" /></p>
</div>
<div id="ch06.484" class="section level2 hasAnchor" number="6.484">
<h2><span class="header-section-number">6.484</span> EO_NDMI-STp25-min_cell<a href="Ch06.html#ch06.484" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDMI-STp25-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_484</code></p>
<p><strong>English name:</strong> Minimum short-term 25th percentile of vegetation water content (NDMI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Minimālā 25. procentiles pēdējo piecu gadu ūdens satura veģetācijā indeksa (NDMI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Minimum value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="Ch06.html#cb525-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb525-2"><a href="Ch06.html#cb525-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb525-3"><a href="Ch06.html#cb525-3" tabindex="-1"></a></span>
<span id="cb525-4"><a href="Ch06.html#cb525-4" tabindex="-1"></a></span>
<span id="cb525-5"><a href="Ch06.html#cb525-5" tabindex="-1"></a><span class="co"># EO_NDMI-STp25-min_cell.tif ----</span></span>
<span id="cb525-6"><a href="Ch06.html#cb525-6" tabindex="-1"></a></span>
<span id="cb525-7"><a href="Ch06.html#cb525-7" tabindex="-1"></a></span>
<span id="cb525-8"><a href="Ch06.html#cb525-8" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDMI-STp25.tif&quot;</span>,</span>
<span id="cb525-9"><a href="Ch06.html#cb525-9" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb525-10"><a href="Ch06.html#cb525-10" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;min&quot;</span>,</span>
<span id="cb525-11"><a href="Ch06.html#cb525-11" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb525-12"><a href="Ch06.html#cb525-12" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb525-13"><a href="Ch06.html#cb525-13" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDMI-STp25-min_cell.tif&quot;</span>,</span>
<span id="cb525-14"><a href="Ch06.html#cb525-14" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_484&quot;</span>,</span>
<span id="cb525-15"><a href="Ch06.html#cb525-15" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb525-16"><a href="Ch06.html#cb525-16" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb525-17"><a href="Ch06.html#cb525-17" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb525-18"><a href="Ch06.html#cb525-18" tabindex="-1"></a>egvrez</span>
<span id="cb525-19"><a href="Ch06.html#cb525-19" tabindex="-1"></a></span>
<span id="cb525-20"><a href="Ch06.html#cb525-20" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb525-21"><a href="Ch06.html#cb525-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb525-22"><a href="Ch06.html#cb525-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb525-23"><a href="Ch06.html#cb525-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb525-24"><a href="Ch06.html#cb525-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb525-25"><a href="Ch06.html#cb525-25" tabindex="-1"></a></span>
<span id="cb525-26"><a href="Ch06.html#cb525-26" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDMI-STp25-min_cell.tif&quot;</span></span>
<span id="cb525-27"><a href="Ch06.html#cb525-27" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb525-28"><a href="Ch06.html#cb525-28" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb525-29"><a href="Ch06.html#cb525-29" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb525-30"><a href="Ch06.html#cb525-30" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb525-31"><a href="Ch06.html#cb525-31" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb525-32"><a href="Ch06.html#cb525-32" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb525-33"><a href="Ch06.html#cb525-33" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb525-34"><a href="Ch06.html#cb525-34" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb525-35"><a href="Ch06.html#cb525-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb525-36"><a href="Ch06.html#cb525-36" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb525-37"><a href="Ch06.html#cb525-37" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb525-38"><a href="Ch06.html#cb525-38" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_484.png" width="100%" /></p>
</div>
<div id="ch06.485" class="section level2 hasAnchor" number="6.485">
<h2><span class="header-section-number">6.485</span> EO_NDMI-STp75-max_cell<a href="Ch06.html#ch06.485" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDMI-STp75-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_485</code></p>
<p><strong>English name:</strong> Maximum short-term 75th percentile of vegetation water content (NDMI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Maksimālā 75. procentiles pēdējo piecu gadu ūdens satura veģetācijā indeksa (NDMI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Maximum value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="Ch06.html#cb526-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb526-2"><a href="Ch06.html#cb526-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb526-3"><a href="Ch06.html#cb526-3" tabindex="-1"></a></span>
<span id="cb526-4"><a href="Ch06.html#cb526-4" tabindex="-1"></a><span class="co"># EO_NDMI-STp75-max_cell.tif ----</span></span>
<span id="cb526-5"><a href="Ch06.html#cb526-5" tabindex="-1"></a></span>
<span id="cb526-6"><a href="Ch06.html#cb526-6" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDMI-STp75.tif&quot;</span>,</span>
<span id="cb526-7"><a href="Ch06.html#cb526-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb526-8"><a href="Ch06.html#cb526-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;min&quot;</span>,</span>
<span id="cb526-9"><a href="Ch06.html#cb526-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb526-10"><a href="Ch06.html#cb526-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb526-11"><a href="Ch06.html#cb526-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDMI-STp75-max_cell.tif&quot;</span>,</span>
<span id="cb526-12"><a href="Ch06.html#cb526-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_485&quot;</span>,</span>
<span id="cb526-13"><a href="Ch06.html#cb526-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb526-14"><a href="Ch06.html#cb526-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb526-15"><a href="Ch06.html#cb526-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb526-16"><a href="Ch06.html#cb526-16" tabindex="-1"></a>egvrez</span>
<span id="cb526-17"><a href="Ch06.html#cb526-17" tabindex="-1"></a></span>
<span id="cb526-18"><a href="Ch06.html#cb526-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb526-19"><a href="Ch06.html#cb526-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb526-20"><a href="Ch06.html#cb526-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb526-21"><a href="Ch06.html#cb526-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb526-22"><a href="Ch06.html#cb526-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb526-23"><a href="Ch06.html#cb526-23" tabindex="-1"></a></span>
<span id="cb526-24"><a href="Ch06.html#cb526-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDMI-STp75-max_cell.tif&quot;</span></span>
<span id="cb526-25"><a href="Ch06.html#cb526-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb526-26"><a href="Ch06.html#cb526-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb526-27"><a href="Ch06.html#cb526-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb526-28"><a href="Ch06.html#cb526-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb526-29"><a href="Ch06.html#cb526-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb526-30"><a href="Ch06.html#cb526-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb526-31"><a href="Ch06.html#cb526-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb526-32"><a href="Ch06.html#cb526-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb526-33"><a href="Ch06.html#cb526-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb526-34"><a href="Ch06.html#cb526-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb526-35"><a href="Ch06.html#cb526-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb526-36"><a href="Ch06.html#cb526-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_485.png" width="100%" /></p>
</div>
<div id="ch06.486" class="section level2 hasAnchor" number="6.486">
<h2><span class="header-section-number">6.486</span> EO_NDVI-LYmedian-average_cell<a href="Ch06.html#ch06.486" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDVI-LYmedian-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_486</code></p>
<p><strong>English name:</strong> Median vegetation index (NDVI) for the last year within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Mediānā pēdējā gada veģetācijas indeksa (NDVI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Arithmetic mean value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Last year is 2024.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="Ch06.html#cb527-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb527-2"><a href="Ch06.html#cb527-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb527-3"><a href="Ch06.html#cb527-3" tabindex="-1"></a></span>
<span id="cb527-4"><a href="Ch06.html#cb527-4" tabindex="-1"></a><span class="co"># EO_NDVI-LYmedian-average_cell.tif ----</span></span>
<span id="cb527-5"><a href="Ch06.html#cb527-5" tabindex="-1"></a></span>
<span id="cb527-6"><a href="Ch06.html#cb527-6" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDVI-LYmedian.tif&quot;</span>,</span>
<span id="cb527-7"><a href="Ch06.html#cb527-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb527-8"><a href="Ch06.html#cb527-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb527-9"><a href="Ch06.html#cb527-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb527-10"><a href="Ch06.html#cb527-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb527-11"><a href="Ch06.html#cb527-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDVI-LYmedian-average_cell.tif&quot;</span>,</span>
<span id="cb527-12"><a href="Ch06.html#cb527-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_486&quot;</span>,</span>
<span id="cb527-13"><a href="Ch06.html#cb527-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb527-14"><a href="Ch06.html#cb527-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb527-15"><a href="Ch06.html#cb527-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb527-16"><a href="Ch06.html#cb527-16" tabindex="-1"></a>egvrez</span>
<span id="cb527-17"><a href="Ch06.html#cb527-17" tabindex="-1"></a></span>
<span id="cb527-18"><a href="Ch06.html#cb527-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb527-19"><a href="Ch06.html#cb527-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb527-20"><a href="Ch06.html#cb527-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb527-21"><a href="Ch06.html#cb527-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb527-22"><a href="Ch06.html#cb527-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb527-23"><a href="Ch06.html#cb527-23" tabindex="-1"></a></span>
<span id="cb527-24"><a href="Ch06.html#cb527-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDVI-LYmedian-average_cell.tif&quot;</span></span>
<span id="cb527-25"><a href="Ch06.html#cb527-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb527-26"><a href="Ch06.html#cb527-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb527-27"><a href="Ch06.html#cb527-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb527-28"><a href="Ch06.html#cb527-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb527-29"><a href="Ch06.html#cb527-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb527-30"><a href="Ch06.html#cb527-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb527-31"><a href="Ch06.html#cb527-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb527-32"><a href="Ch06.html#cb527-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb527-33"><a href="Ch06.html#cb527-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb527-34"><a href="Ch06.html#cb527-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb527-35"><a href="Ch06.html#cb527-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb527-36"><a href="Ch06.html#cb527-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_486.png" width="100%" /></p>
</div>
<div id="ch06.487" class="section level2 hasAnchor" number="6.487">
<h2><span class="header-section-number">6.487</span> EO_NDVI-LYmedian-iqr_cell<a href="Ch06.html#ch06.487" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDVI-LYmedian-iqr_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_487</code></p>
<p><strong>English name:</strong> Spatial variability of last year’s median vegetation index (NDVI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Telpiskā variabilitāte pēdējā gada mediānajai veģetācijas indeksa (NDVI) vērtībai, starpkvartiļu apgabals analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. First Q1 and then Q3
is calculated for every cell with <code>egvtools::input2egv()</code>. Finally, subtracting
Q1 from Q3 and writing final raster with specified layername. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Last year is 2024.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="Ch06.html#cb528-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb528-2"><a href="Ch06.html#cb528-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb528-3"><a href="Ch06.html#cb528-3" tabindex="-1"></a></span>
<span id="cb528-4"><a href="Ch06.html#cb528-4" tabindex="-1"></a></span>
<span id="cb528-5"><a href="Ch06.html#cb528-5" tabindex="-1"></a><span class="co"># EO_NDVI-LYmedian-iqr_cell.tif ----</span></span>
<span id="cb528-6"><a href="Ch06.html#cb528-6" tabindex="-1"></a></span>
<span id="cb528-7"><a href="Ch06.html#cb528-7" tabindex="-1"></a></span>
<span id="cb528-8"><a href="Ch06.html#cb528-8" tabindex="-1"></a>p25rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDVI-LYmedian.tif&quot;</span>,</span>
<span id="cb528-9"><a href="Ch06.html#cb528-9" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb528-10"><a href="Ch06.html#cb528-10" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q1&quot;</span>,</span>
<span id="cb528-11"><a href="Ch06.html#cb528-11" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb528-12"><a href="Ch06.html#cb528-12" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb528-13"><a href="Ch06.html#cb528-13" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p25.tif&quot;</span>,</span>
<span id="cb528-14"><a href="Ch06.html#cb528-14" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_487&quot;</span>,</span>
<span id="cb528-15"><a href="Ch06.html#cb528-15" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb528-16"><a href="Ch06.html#cb528-16" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb528-17"><a href="Ch06.html#cb528-17" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb528-18"><a href="Ch06.html#cb528-18" tabindex="-1"></a>p25rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb528-19"><a href="Ch06.html#cb528-19" tabindex="-1"></a></span>
<span id="cb528-20"><a href="Ch06.html#cb528-20" tabindex="-1"></a></span>
<span id="cb528-21"><a href="Ch06.html#cb528-21" tabindex="-1"></a>p75rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDVI-LYmedian.tif&quot;</span>,</span>
<span id="cb528-22"><a href="Ch06.html#cb528-22" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb528-23"><a href="Ch06.html#cb528-23" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q3&quot;</span>,</span>
<span id="cb528-24"><a href="Ch06.html#cb528-24" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb528-25"><a href="Ch06.html#cb528-25" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb528-26"><a href="Ch06.html#cb528-26" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p75.tif&quot;</span>,</span>
<span id="cb528-27"><a href="Ch06.html#cb528-27" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_487&quot;</span>,</span>
<span id="cb528-28"><a href="Ch06.html#cb528-28" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb528-29"><a href="Ch06.html#cb528-29" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb528-30"><a href="Ch06.html#cb528-30" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb528-31"><a href="Ch06.html#cb528-31" tabindex="-1"></a>p75rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb528-32"><a href="Ch06.html#cb528-32" tabindex="-1"></a></span>
<span id="cb528-33"><a href="Ch06.html#cb528-33" tabindex="-1"></a>iqr_rez<span class="ot">=</span>p75rez_r<span class="sc">-</span>p25rez_r</span>
<span id="cb528-34"><a href="Ch06.html#cb528-34" tabindex="-1"></a>iqr_rez</span>
<span id="cb528-35"><a href="Ch06.html#cb528-35" tabindex="-1"></a><span class="fu">plot</span>(iqr_rez)</span>
<span id="cb528-36"><a href="Ch06.html#cb528-36" tabindex="-1"></a></span>
<span id="cb528-37"><a href="Ch06.html#cb528-37" tabindex="-1"></a><span class="fu">writeRaster</span>(iqr_rez,</span>
<span id="cb528-38"><a href="Ch06.html#cb528-38" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/EO_NDVI-LYmedian-iqr_cell.tif&quot;</span>,</span>
<span id="cb528-39"><a href="Ch06.html#cb528-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb528-40"><a href="Ch06.html#cb528-40" tabindex="-1"></a></span>
<span id="cb528-41"><a href="Ch06.html#cb528-41" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb528-42"><a href="Ch06.html#cb528-42" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb528-43"><a href="Ch06.html#cb528-43" tabindex="-1"></a></span>
<span id="cb528-44"><a href="Ch06.html#cb528-44" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb528-45"><a href="Ch06.html#cb528-45" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb528-46"><a href="Ch06.html#cb528-46" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb528-47"><a href="Ch06.html#cb528-47" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb528-48"><a href="Ch06.html#cb528-48" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb528-49"><a href="Ch06.html#cb528-49" tabindex="-1"></a></span>
<span id="cb528-50"><a href="Ch06.html#cb528-50" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDVI-LYmedian-iqr_cell.tif&quot;</span></span>
<span id="cb528-51"><a href="Ch06.html#cb528-51" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb528-52"><a href="Ch06.html#cb528-52" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb528-53"><a href="Ch06.html#cb528-53" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb528-54"><a href="Ch06.html#cb528-54" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb528-55"><a href="Ch06.html#cb528-55" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb528-56"><a href="Ch06.html#cb528-56" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb528-57"><a href="Ch06.html#cb528-57" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb528-58"><a href="Ch06.html#cb528-58" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb528-59"><a href="Ch06.html#cb528-59" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb528-60"><a href="Ch06.html#cb528-60" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb528-61"><a href="Ch06.html#cb528-61" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb528-62"><a href="Ch06.html#cb528-62" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_487.png" width="100%" /></p>
</div>
<div id="ch06.488" class="section level2 hasAnchor" number="6.488">
<h2><span class="header-section-number">6.488</span> EO_NDVI-STiqr-median_cell<a href="Ch06.html#ch06.488" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDVI-STiqr-median_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_488</code></p>
<p><strong>English name:</strong> Average short-term seasonality of vegetation index (NDVI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sezonalitāte pēdējo piecu gadu vidējam veģetācijas indeksa (NDVI) vērtībai, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Arithmetic mean value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="Ch06.html#cb529-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb529-2"><a href="Ch06.html#cb529-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb529-3"><a href="Ch06.html#cb529-3" tabindex="-1"></a></span>
<span id="cb529-4"><a href="Ch06.html#cb529-4" tabindex="-1"></a><span class="co"># EO_NDVI-STiqr-median_cell.tif ----</span></span>
<span id="cb529-5"><a href="Ch06.html#cb529-5" tabindex="-1"></a></span>
<span id="cb529-6"><a href="Ch06.html#cb529-6" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDVI-STiqr.tif&quot;</span>,</span>
<span id="cb529-7"><a href="Ch06.html#cb529-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb529-8"><a href="Ch06.html#cb529-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb529-9"><a href="Ch06.html#cb529-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb529-10"><a href="Ch06.html#cb529-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb529-11"><a href="Ch06.html#cb529-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDVI-STiqr-median_cell.tif&quot;</span>,</span>
<span id="cb529-12"><a href="Ch06.html#cb529-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_488&quot;</span>,</span>
<span id="cb529-13"><a href="Ch06.html#cb529-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb529-14"><a href="Ch06.html#cb529-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb529-15"><a href="Ch06.html#cb529-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb529-16"><a href="Ch06.html#cb529-16" tabindex="-1"></a>egvrez</span>
<span id="cb529-17"><a href="Ch06.html#cb529-17" tabindex="-1"></a></span>
<span id="cb529-18"><a href="Ch06.html#cb529-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb529-19"><a href="Ch06.html#cb529-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb529-20"><a href="Ch06.html#cb529-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb529-21"><a href="Ch06.html#cb529-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb529-22"><a href="Ch06.html#cb529-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb529-23"><a href="Ch06.html#cb529-23" tabindex="-1"></a></span>
<span id="cb529-24"><a href="Ch06.html#cb529-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDVI-STiqr-median_cell.tif&quot;</span></span>
<span id="cb529-25"><a href="Ch06.html#cb529-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb529-26"><a href="Ch06.html#cb529-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb529-27"><a href="Ch06.html#cb529-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb529-28"><a href="Ch06.html#cb529-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb529-29"><a href="Ch06.html#cb529-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb529-30"><a href="Ch06.html#cb529-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb529-31"><a href="Ch06.html#cb529-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb529-32"><a href="Ch06.html#cb529-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb529-33"><a href="Ch06.html#cb529-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb529-34"><a href="Ch06.html#cb529-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb529-35"><a href="Ch06.html#cb529-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb529-36"><a href="Ch06.html#cb529-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_488.png" width="100%" /></p>
</div>
<div id="ch06.489" class="section level2 hasAnchor" number="6.489">
<h2><span class="header-section-number">6.489</span> EO_NDVI-STmedian-average_cell<a href="Ch06.html#ch06.489" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDVI-STmedian-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_489</code></p>
<p><strong>English name:</strong> Median short-term vegetation index (NDVI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Mediānā pēdējo piecu gadu veģetācijas indeksa (NDVI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Arithmetic mean value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="Ch06.html#cb530-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb530-2"><a href="Ch06.html#cb530-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb530-3"><a href="Ch06.html#cb530-3" tabindex="-1"></a></span>
<span id="cb530-4"><a href="Ch06.html#cb530-4" tabindex="-1"></a><span class="co"># EO_NDVI-STmedian-average_cell.tif ----</span></span>
<span id="cb530-5"><a href="Ch06.html#cb530-5" tabindex="-1"></a></span>
<span id="cb530-6"><a href="Ch06.html#cb530-6" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDVI-STmedian.tif&quot;</span>,</span>
<span id="cb530-7"><a href="Ch06.html#cb530-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb530-8"><a href="Ch06.html#cb530-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb530-9"><a href="Ch06.html#cb530-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb530-10"><a href="Ch06.html#cb530-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb530-11"><a href="Ch06.html#cb530-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDVI-STmedian-average_cell.tif&quot;</span>,</span>
<span id="cb530-12"><a href="Ch06.html#cb530-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_489&quot;</span>,</span>
<span id="cb530-13"><a href="Ch06.html#cb530-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb530-14"><a href="Ch06.html#cb530-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb530-15"><a href="Ch06.html#cb530-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb530-16"><a href="Ch06.html#cb530-16" tabindex="-1"></a>egvrez</span>
<span id="cb530-17"><a href="Ch06.html#cb530-17" tabindex="-1"></a></span>
<span id="cb530-18"><a href="Ch06.html#cb530-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb530-19"><a href="Ch06.html#cb530-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb530-20"><a href="Ch06.html#cb530-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb530-21"><a href="Ch06.html#cb530-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb530-22"><a href="Ch06.html#cb530-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb530-23"><a href="Ch06.html#cb530-23" tabindex="-1"></a></span>
<span id="cb530-24"><a href="Ch06.html#cb530-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDVI-STmedian-average_cell.tif&quot;</span></span>
<span id="cb530-25"><a href="Ch06.html#cb530-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb530-26"><a href="Ch06.html#cb530-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb530-27"><a href="Ch06.html#cb530-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb530-28"><a href="Ch06.html#cb530-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb530-29"><a href="Ch06.html#cb530-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb530-30"><a href="Ch06.html#cb530-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb530-31"><a href="Ch06.html#cb530-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb530-32"><a href="Ch06.html#cb530-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb530-33"><a href="Ch06.html#cb530-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb530-34"><a href="Ch06.html#cb530-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb530-35"><a href="Ch06.html#cb530-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb530-36"><a href="Ch06.html#cb530-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_489.png" width="100%" /></p>
</div>
<div id="ch06.490" class="section level2 hasAnchor" number="6.490">
<h2><span class="header-section-number">6.490</span> EO_NDVI-STmedian-iqr_cell<a href="Ch06.html#ch06.490" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDVI-STmedian-iqr_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_490</code></p>
<p><strong>English name:</strong> Spatial variability of short-term median vegetation index (NDVI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Telpiskā variabilitāte pēdējo piecu gadu mediānajai veģetācijas indeksa (NDVI) vērtībai, starpkvartiļu apgabals analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. First Q1 and then Q3
is calculated for every cell with <code>egvtools::input2egv()</code>. Finally, subtracting
Q1 from Q3 and writing final raster with specified layername. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term corresponds
to last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="Ch06.html#cb531-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb531-2"><a href="Ch06.html#cb531-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb531-3"><a href="Ch06.html#cb531-3" tabindex="-1"></a></span>
<span id="cb531-4"><a href="Ch06.html#cb531-4" tabindex="-1"></a></span>
<span id="cb531-5"><a href="Ch06.html#cb531-5" tabindex="-1"></a><span class="co"># EO_NDVI-STmedian-iqr_cell.tif ----</span></span>
<span id="cb531-6"><a href="Ch06.html#cb531-6" tabindex="-1"></a></span>
<span id="cb531-7"><a href="Ch06.html#cb531-7" tabindex="-1"></a></span>
<span id="cb531-8"><a href="Ch06.html#cb531-8" tabindex="-1"></a>p25rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDVI-STmedian.tif&quot;</span>,</span>
<span id="cb531-9"><a href="Ch06.html#cb531-9" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb531-10"><a href="Ch06.html#cb531-10" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q1&quot;</span>,</span>
<span id="cb531-11"><a href="Ch06.html#cb531-11" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb531-12"><a href="Ch06.html#cb531-12" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb531-13"><a href="Ch06.html#cb531-13" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p25.tif&quot;</span>,</span>
<span id="cb531-14"><a href="Ch06.html#cb531-14" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_490&quot;</span>,</span>
<span id="cb531-15"><a href="Ch06.html#cb531-15" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb531-16"><a href="Ch06.html#cb531-16" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb531-17"><a href="Ch06.html#cb531-17" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb531-18"><a href="Ch06.html#cb531-18" tabindex="-1"></a>p25rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb531-19"><a href="Ch06.html#cb531-19" tabindex="-1"></a></span>
<span id="cb531-20"><a href="Ch06.html#cb531-20" tabindex="-1"></a></span>
<span id="cb531-21"><a href="Ch06.html#cb531-21" tabindex="-1"></a>p75rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDVI-STmedian.tif&quot;</span>,</span>
<span id="cb531-22"><a href="Ch06.html#cb531-22" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb531-23"><a href="Ch06.html#cb531-23" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q3&quot;</span>,</span>
<span id="cb531-24"><a href="Ch06.html#cb531-24" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb531-25"><a href="Ch06.html#cb531-25" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb531-26"><a href="Ch06.html#cb531-26" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p75.tif&quot;</span>,</span>
<span id="cb531-27"><a href="Ch06.html#cb531-27" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_490&quot;</span>,</span>
<span id="cb531-28"><a href="Ch06.html#cb531-28" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb531-29"><a href="Ch06.html#cb531-29" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb531-30"><a href="Ch06.html#cb531-30" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb531-31"><a href="Ch06.html#cb531-31" tabindex="-1"></a>p75rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb531-32"><a href="Ch06.html#cb531-32" tabindex="-1"></a></span>
<span id="cb531-33"><a href="Ch06.html#cb531-33" tabindex="-1"></a>iqr_rez<span class="ot">=</span>p75rez_r<span class="sc">-</span>p25rez_r</span>
<span id="cb531-34"><a href="Ch06.html#cb531-34" tabindex="-1"></a>iqr_rez</span>
<span id="cb531-35"><a href="Ch06.html#cb531-35" tabindex="-1"></a><span class="fu">plot</span>(iqr_rez)</span>
<span id="cb531-36"><a href="Ch06.html#cb531-36" tabindex="-1"></a></span>
<span id="cb531-37"><a href="Ch06.html#cb531-37" tabindex="-1"></a><span class="fu">writeRaster</span>(iqr_rez,</span>
<span id="cb531-38"><a href="Ch06.html#cb531-38" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/EO_NDVI-STmedian-iqr_cell.tif&quot;</span>,</span>
<span id="cb531-39"><a href="Ch06.html#cb531-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb531-40"><a href="Ch06.html#cb531-40" tabindex="-1"></a></span>
<span id="cb531-41"><a href="Ch06.html#cb531-41" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb531-42"><a href="Ch06.html#cb531-42" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb531-43"><a href="Ch06.html#cb531-43" tabindex="-1"></a></span>
<span id="cb531-44"><a href="Ch06.html#cb531-44" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb531-45"><a href="Ch06.html#cb531-45" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb531-46"><a href="Ch06.html#cb531-46" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb531-47"><a href="Ch06.html#cb531-47" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb531-48"><a href="Ch06.html#cb531-48" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb531-49"><a href="Ch06.html#cb531-49" tabindex="-1"></a></span>
<span id="cb531-50"><a href="Ch06.html#cb531-50" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDVI-STmedian-iqr_cell.tif&quot;</span></span>
<span id="cb531-51"><a href="Ch06.html#cb531-51" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb531-52"><a href="Ch06.html#cb531-52" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb531-53"><a href="Ch06.html#cb531-53" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb531-54"><a href="Ch06.html#cb531-54" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb531-55"><a href="Ch06.html#cb531-55" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb531-56"><a href="Ch06.html#cb531-56" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb531-57"><a href="Ch06.html#cb531-57" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb531-58"><a href="Ch06.html#cb531-58" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb531-59"><a href="Ch06.html#cb531-59" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb531-60"><a href="Ch06.html#cb531-60" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb531-61"><a href="Ch06.html#cb531-61" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb531-62"><a href="Ch06.html#cb531-62" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_490.png" width="100%" /></p>
</div>
<div id="ch06.491" class="section level2 hasAnchor" number="6.491">
<h2><span class="header-section-number">6.491</span> EO_NDVI-STp25-min_cell<a href="Ch06.html#ch06.491" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDVI-STp25-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_491</code></p>
<p><strong>English name:</strong> Minimum short-term 25th percentile of vegetation index (NDVI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Minimālā 25. procentiles pēdējo piecu gadu veģetācijas indeksa (NDVI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Minimum value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="Ch06.html#cb532-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb532-2"><a href="Ch06.html#cb532-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb532-3"><a href="Ch06.html#cb532-3" tabindex="-1"></a></span>
<span id="cb532-4"><a href="Ch06.html#cb532-4" tabindex="-1"></a><span class="co"># EO_NDVI-STp25-min_cell.tif ----</span></span>
<span id="cb532-5"><a href="Ch06.html#cb532-5" tabindex="-1"></a></span>
<span id="cb532-6"><a href="Ch06.html#cb532-6" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDVI-STp25.tif&quot;</span>,</span>
<span id="cb532-7"><a href="Ch06.html#cb532-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb532-8"><a href="Ch06.html#cb532-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;min&quot;</span>,</span>
<span id="cb532-9"><a href="Ch06.html#cb532-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb532-10"><a href="Ch06.html#cb532-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb532-11"><a href="Ch06.html#cb532-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDVI-STp25-min_cell.tif&quot;</span>,</span>
<span id="cb532-12"><a href="Ch06.html#cb532-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_491&quot;</span>,</span>
<span id="cb532-13"><a href="Ch06.html#cb532-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb532-14"><a href="Ch06.html#cb532-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb532-15"><a href="Ch06.html#cb532-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb532-16"><a href="Ch06.html#cb532-16" tabindex="-1"></a>egvrez</span>
<span id="cb532-17"><a href="Ch06.html#cb532-17" tabindex="-1"></a></span>
<span id="cb532-18"><a href="Ch06.html#cb532-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb532-19"><a href="Ch06.html#cb532-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb532-20"><a href="Ch06.html#cb532-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb532-21"><a href="Ch06.html#cb532-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb532-22"><a href="Ch06.html#cb532-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb532-23"><a href="Ch06.html#cb532-23" tabindex="-1"></a></span>
<span id="cb532-24"><a href="Ch06.html#cb532-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDVI-STp25-min_cell.tif&quot;</span></span>
<span id="cb532-25"><a href="Ch06.html#cb532-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb532-26"><a href="Ch06.html#cb532-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb532-27"><a href="Ch06.html#cb532-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb532-28"><a href="Ch06.html#cb532-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb532-29"><a href="Ch06.html#cb532-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb532-30"><a href="Ch06.html#cb532-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb532-31"><a href="Ch06.html#cb532-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb532-32"><a href="Ch06.html#cb532-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb532-33"><a href="Ch06.html#cb532-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb532-34"><a href="Ch06.html#cb532-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb532-35"><a href="Ch06.html#cb532-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb532-36"><a href="Ch06.html#cb532-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_491.png" width="100%" /></p>
</div>
<div id="ch06.492" class="section level2 hasAnchor" number="6.492">
<h2><span class="header-section-number">6.492</span> EO_NDVI-STp75-max_cell<a href="Ch06.html#ch06.492" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDVI-STp75-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_492</code></p>
<p><strong>English name:</strong> Maximum short-term 75th percentile of vegetation index (NDVI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Maksimālā 75. procentiles pēdējo piecu gadu veģetācijas indeksa (NDVI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Maximum value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="Ch06.html#cb533-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb533-2"><a href="Ch06.html#cb533-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb533-3"><a href="Ch06.html#cb533-3" tabindex="-1"></a></span>
<span id="cb533-4"><a href="Ch06.html#cb533-4" tabindex="-1"></a><span class="co"># EO_NDVI-STp75-max_cell.tif ----</span></span>
<span id="cb533-5"><a href="Ch06.html#cb533-5" tabindex="-1"></a></span>
<span id="cb533-6"><a href="Ch06.html#cb533-6" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDVI-STp75.tif&quot;</span>,</span>
<span id="cb533-7"><a href="Ch06.html#cb533-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb533-8"><a href="Ch06.html#cb533-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;min&quot;</span>,</span>
<span id="cb533-9"><a href="Ch06.html#cb533-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb533-10"><a href="Ch06.html#cb533-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb533-11"><a href="Ch06.html#cb533-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDVI-STp75-max_cell.tif&quot;</span>,</span>
<span id="cb533-12"><a href="Ch06.html#cb533-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_492&quot;</span>,</span>
<span id="cb533-13"><a href="Ch06.html#cb533-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb533-14"><a href="Ch06.html#cb533-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb533-15"><a href="Ch06.html#cb533-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb533-16"><a href="Ch06.html#cb533-16" tabindex="-1"></a>egvrez</span>
<span id="cb533-17"><a href="Ch06.html#cb533-17" tabindex="-1"></a></span>
<span id="cb533-18"><a href="Ch06.html#cb533-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb533-19"><a href="Ch06.html#cb533-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb533-20"><a href="Ch06.html#cb533-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb533-21"><a href="Ch06.html#cb533-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb533-22"><a href="Ch06.html#cb533-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb533-23"><a href="Ch06.html#cb533-23" tabindex="-1"></a></span>
<span id="cb533-24"><a href="Ch06.html#cb533-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDVI-STp75-max_cell.tif&quot;</span></span>
<span id="cb533-25"><a href="Ch06.html#cb533-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb533-26"><a href="Ch06.html#cb533-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb533-27"><a href="Ch06.html#cb533-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb533-28"><a href="Ch06.html#cb533-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb533-29"><a href="Ch06.html#cb533-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb533-30"><a href="Ch06.html#cb533-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb533-31"><a href="Ch06.html#cb533-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb533-32"><a href="Ch06.html#cb533-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb533-33"><a href="Ch06.html#cb533-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb533-34"><a href="Ch06.html#cb533-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb533-35"><a href="Ch06.html#cb533-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb533-36"><a href="Ch06.html#cb533-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_492.png" width="100%" /></p>
</div>
<div id="ch06.493" class="section level2 hasAnchor" number="6.493">
<h2><span class="header-section-number">6.493</span> EO_NDWI-LYmedian-average_cell<a href="Ch06.html#ch06.493" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDWI-LYmedian-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_493</code></p>
<p><strong>English name:</strong> Median water index (NDWI) for the last year within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Mediānā pēdējā gada ūdens indeksa (NDWI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Arithmetic mean value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Last year is 2024.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="Ch06.html#cb534-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb534-2"><a href="Ch06.html#cb534-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb534-3"><a href="Ch06.html#cb534-3" tabindex="-1"></a></span>
<span id="cb534-4"><a href="Ch06.html#cb534-4" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDWI-LYmedian.tif&quot;</span>,</span>
<span id="cb534-5"><a href="Ch06.html#cb534-5" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb534-6"><a href="Ch06.html#cb534-6" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb534-7"><a href="Ch06.html#cb534-7" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb534-8"><a href="Ch06.html#cb534-8" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb534-9"><a href="Ch06.html#cb534-9" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDWI-LYmedian-average_cell.tif&quot;</span>,</span>
<span id="cb534-10"><a href="Ch06.html#cb534-10" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_493&quot;</span>,</span>
<span id="cb534-11"><a href="Ch06.html#cb534-11" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb534-12"><a href="Ch06.html#cb534-12" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb534-13"><a href="Ch06.html#cb534-13" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb534-14"><a href="Ch06.html#cb534-14" tabindex="-1"></a>egvrez</span>
<span id="cb534-15"><a href="Ch06.html#cb534-15" tabindex="-1"></a></span>
<span id="cb534-16"><a href="Ch06.html#cb534-16" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb534-17"><a href="Ch06.html#cb534-17" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb534-18"><a href="Ch06.html#cb534-18" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb534-19"><a href="Ch06.html#cb534-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb534-20"><a href="Ch06.html#cb534-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb534-21"><a href="Ch06.html#cb534-21" tabindex="-1"></a></span>
<span id="cb534-22"><a href="Ch06.html#cb534-22" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDWI-LYmedian-average_cell.tif&quot;</span></span>
<span id="cb534-23"><a href="Ch06.html#cb534-23" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb534-24"><a href="Ch06.html#cb534-24" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb534-25"><a href="Ch06.html#cb534-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb534-26"><a href="Ch06.html#cb534-26" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb534-27"><a href="Ch06.html#cb534-27" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb534-28"><a href="Ch06.html#cb534-28" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb534-29"><a href="Ch06.html#cb534-29" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb534-30"><a href="Ch06.html#cb534-30" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb534-31"><a href="Ch06.html#cb534-31" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb534-32"><a href="Ch06.html#cb534-32" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb534-33"><a href="Ch06.html#cb534-33" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb534-34"><a href="Ch06.html#cb534-34" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_493.png" width="100%" /></p>
</div>
<div id="ch06.494" class="section level2 hasAnchor" number="6.494">
<h2><span class="header-section-number">6.494</span> EO_NDWI-LYmedian-iqr_cell<a href="Ch06.html#ch06.494" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDWI-LYmedian-iqr_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_494</code></p>
<p><strong>English name:</strong> Spatial variability of last year’s median water index (NDWI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Telpiskā variabilitāte pēdējā gada mediānajai ūdens indeksa (NDWI) vērtībai, starpkvartiļu apgabals analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. First Q1 and then Q3
is calculated for every cell with <code>egvtools::input2egv()</code>. Finally, subtracting
Q1 from Q3 and writing final raster with specified layername. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Last year is 2024.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="Ch06.html#cb535-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb535-2"><a href="Ch06.html#cb535-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb535-3"><a href="Ch06.html#cb535-3" tabindex="-1"></a></span>
<span id="cb535-4"><a href="Ch06.html#cb535-4" tabindex="-1"></a><span class="co"># EO_NDWI-LYmedian-iqr_cell.tif ----</span></span>
<span id="cb535-5"><a href="Ch06.html#cb535-5" tabindex="-1"></a></span>
<span id="cb535-6"><a href="Ch06.html#cb535-6" tabindex="-1"></a></span>
<span id="cb535-7"><a href="Ch06.html#cb535-7" tabindex="-1"></a>p25rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDWI-LYmedian.tif&quot;</span>,</span>
<span id="cb535-8"><a href="Ch06.html#cb535-8" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb535-9"><a href="Ch06.html#cb535-9" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q1&quot;</span>,</span>
<span id="cb535-10"><a href="Ch06.html#cb535-10" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb535-11"><a href="Ch06.html#cb535-11" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb535-12"><a href="Ch06.html#cb535-12" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p25.tif&quot;</span>,</span>
<span id="cb535-13"><a href="Ch06.html#cb535-13" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_494&quot;</span>,</span>
<span id="cb535-14"><a href="Ch06.html#cb535-14" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb535-15"><a href="Ch06.html#cb535-15" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb535-16"><a href="Ch06.html#cb535-16" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb535-17"><a href="Ch06.html#cb535-17" tabindex="-1"></a>p25rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb535-18"><a href="Ch06.html#cb535-18" tabindex="-1"></a></span>
<span id="cb535-19"><a href="Ch06.html#cb535-19" tabindex="-1"></a></span>
<span id="cb535-20"><a href="Ch06.html#cb535-20" tabindex="-1"></a>p75rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDWI-LYmedian.tif&quot;</span>,</span>
<span id="cb535-21"><a href="Ch06.html#cb535-21" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb535-22"><a href="Ch06.html#cb535-22" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q3&quot;</span>,</span>
<span id="cb535-23"><a href="Ch06.html#cb535-23" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb535-24"><a href="Ch06.html#cb535-24" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb535-25"><a href="Ch06.html#cb535-25" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p75.tif&quot;</span>,</span>
<span id="cb535-26"><a href="Ch06.html#cb535-26" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_494&quot;</span>,</span>
<span id="cb535-27"><a href="Ch06.html#cb535-27" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb535-28"><a href="Ch06.html#cb535-28" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb535-29"><a href="Ch06.html#cb535-29" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb535-30"><a href="Ch06.html#cb535-30" tabindex="-1"></a>p75rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb535-31"><a href="Ch06.html#cb535-31" tabindex="-1"></a></span>
<span id="cb535-32"><a href="Ch06.html#cb535-32" tabindex="-1"></a>iqr_rez<span class="ot">=</span>p75rez_r<span class="sc">-</span>p25rez_r</span>
<span id="cb535-33"><a href="Ch06.html#cb535-33" tabindex="-1"></a>iqr_rez</span>
<span id="cb535-34"><a href="Ch06.html#cb535-34" tabindex="-1"></a><span class="fu">plot</span>(iqr_rez)</span>
<span id="cb535-35"><a href="Ch06.html#cb535-35" tabindex="-1"></a></span>
<span id="cb535-36"><a href="Ch06.html#cb535-36" tabindex="-1"></a><span class="fu">writeRaster</span>(iqr_rez,</span>
<span id="cb535-37"><a href="Ch06.html#cb535-37" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/EO_NDWI-LYmedian-iqr_cell.tif&quot;</span>,</span>
<span id="cb535-38"><a href="Ch06.html#cb535-38" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb535-39"><a href="Ch06.html#cb535-39" tabindex="-1"></a></span>
<span id="cb535-40"><a href="Ch06.html#cb535-40" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb535-41"><a href="Ch06.html#cb535-41" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb535-42"><a href="Ch06.html#cb535-42" tabindex="-1"></a></span>
<span id="cb535-43"><a href="Ch06.html#cb535-43" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb535-44"><a href="Ch06.html#cb535-44" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb535-45"><a href="Ch06.html#cb535-45" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb535-46"><a href="Ch06.html#cb535-46" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb535-47"><a href="Ch06.html#cb535-47" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb535-48"><a href="Ch06.html#cb535-48" tabindex="-1"></a></span>
<span id="cb535-49"><a href="Ch06.html#cb535-49" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDWI-LYmedian-iqr_cell.tif&quot;</span></span>
<span id="cb535-50"><a href="Ch06.html#cb535-50" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb535-51"><a href="Ch06.html#cb535-51" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb535-52"><a href="Ch06.html#cb535-52" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb535-53"><a href="Ch06.html#cb535-53" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb535-54"><a href="Ch06.html#cb535-54" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb535-55"><a href="Ch06.html#cb535-55" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb535-56"><a href="Ch06.html#cb535-56" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb535-57"><a href="Ch06.html#cb535-57" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb535-58"><a href="Ch06.html#cb535-58" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb535-59"><a href="Ch06.html#cb535-59" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb535-60"><a href="Ch06.html#cb535-60" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb535-61"><a href="Ch06.html#cb535-61" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_494.png" width="100%" /></p>
</div>
<div id="ch06.495" class="section level2 hasAnchor" number="6.495">
<h2><span class="header-section-number">6.495</span> EO_NDWI-STiqr-median_cell<a href="Ch06.html#ch06.495" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDWI-STiqr-median_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_495</code></p>
<p><strong>English name:</strong> Average short-term seasonality of water index (NDWI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Sezonalitāte pēdējo piecu gadu vidējam ūdens indeksa (NDWI) vērtībai, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Arithmetic mean value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="Ch06.html#cb536-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb536-2"><a href="Ch06.html#cb536-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb536-3"><a href="Ch06.html#cb536-3" tabindex="-1"></a></span>
<span id="cb536-4"><a href="Ch06.html#cb536-4" tabindex="-1"></a><span class="co"># EO_NDWI-STiqr-median_cell.tif ----</span></span>
<span id="cb536-5"><a href="Ch06.html#cb536-5" tabindex="-1"></a></span>
<span id="cb536-6"><a href="Ch06.html#cb536-6" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDWI-STiqr.tif&quot;</span>,</span>
<span id="cb536-7"><a href="Ch06.html#cb536-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb536-8"><a href="Ch06.html#cb536-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb536-9"><a href="Ch06.html#cb536-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb536-10"><a href="Ch06.html#cb536-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb536-11"><a href="Ch06.html#cb536-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDWI-STiqr-median_cell.tif&quot;</span>,</span>
<span id="cb536-12"><a href="Ch06.html#cb536-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_495&quot;</span>,</span>
<span id="cb536-13"><a href="Ch06.html#cb536-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb536-14"><a href="Ch06.html#cb536-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb536-15"><a href="Ch06.html#cb536-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb536-16"><a href="Ch06.html#cb536-16" tabindex="-1"></a>egvrez</span>
<span id="cb536-17"><a href="Ch06.html#cb536-17" tabindex="-1"></a></span>
<span id="cb536-18"><a href="Ch06.html#cb536-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb536-19"><a href="Ch06.html#cb536-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb536-20"><a href="Ch06.html#cb536-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb536-21"><a href="Ch06.html#cb536-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb536-22"><a href="Ch06.html#cb536-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb536-23"><a href="Ch06.html#cb536-23" tabindex="-1"></a></span>
<span id="cb536-24"><a href="Ch06.html#cb536-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDWI-STiqr-median_cell.tif&quot;</span></span>
<span id="cb536-25"><a href="Ch06.html#cb536-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb536-26"><a href="Ch06.html#cb536-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb536-27"><a href="Ch06.html#cb536-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb536-28"><a href="Ch06.html#cb536-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb536-29"><a href="Ch06.html#cb536-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb536-30"><a href="Ch06.html#cb536-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb536-31"><a href="Ch06.html#cb536-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb536-32"><a href="Ch06.html#cb536-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb536-33"><a href="Ch06.html#cb536-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb536-34"><a href="Ch06.html#cb536-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb536-35"><a href="Ch06.html#cb536-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb536-36"><a href="Ch06.html#cb536-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_495.png" width="100%" /></p>
</div>
<div id="ch06.496" class="section level2 hasAnchor" number="6.496">
<h2><span class="header-section-number">6.496</span> EO_NDWI-STmedian-average_cell<a href="Ch06.html#ch06.496" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDWI-STmedian-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_496</code></p>
<p><strong>English name:</strong> Median short-term water index (NDWI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Mediānā pēdējo piecu gadu ūdens indeksa (NDWI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Arithmetic mean value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="Ch06.html#cb537-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb537-2"><a href="Ch06.html#cb537-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb537-3"><a href="Ch06.html#cb537-3" tabindex="-1"></a></span>
<span id="cb537-4"><a href="Ch06.html#cb537-4" tabindex="-1"></a><span class="co"># EO_NDWI-STmedian-average_cell.tif ----</span></span>
<span id="cb537-5"><a href="Ch06.html#cb537-5" tabindex="-1"></a></span>
<span id="cb537-6"><a href="Ch06.html#cb537-6" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDWI-STmedian.tif&quot;</span>,</span>
<span id="cb537-7"><a href="Ch06.html#cb537-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb537-8"><a href="Ch06.html#cb537-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb537-9"><a href="Ch06.html#cb537-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb537-10"><a href="Ch06.html#cb537-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb537-11"><a href="Ch06.html#cb537-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDWI-STmedian-average_cell.tif&quot;</span>,</span>
<span id="cb537-12"><a href="Ch06.html#cb537-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_496&quot;</span>,</span>
<span id="cb537-13"><a href="Ch06.html#cb537-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb537-14"><a href="Ch06.html#cb537-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb537-15"><a href="Ch06.html#cb537-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb537-16"><a href="Ch06.html#cb537-16" tabindex="-1"></a>egvrez</span>
<span id="cb537-17"><a href="Ch06.html#cb537-17" tabindex="-1"></a></span>
<span id="cb537-18"><a href="Ch06.html#cb537-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb537-19"><a href="Ch06.html#cb537-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb537-20"><a href="Ch06.html#cb537-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb537-21"><a href="Ch06.html#cb537-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb537-22"><a href="Ch06.html#cb537-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb537-23"><a href="Ch06.html#cb537-23" tabindex="-1"></a></span>
<span id="cb537-24"><a href="Ch06.html#cb537-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDWI-STmedian-average_cell.tif&quot;</span></span>
<span id="cb537-25"><a href="Ch06.html#cb537-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb537-26"><a href="Ch06.html#cb537-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb537-27"><a href="Ch06.html#cb537-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb537-28"><a href="Ch06.html#cb537-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb537-29"><a href="Ch06.html#cb537-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb537-30"><a href="Ch06.html#cb537-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb537-31"><a href="Ch06.html#cb537-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb537-32"><a href="Ch06.html#cb537-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb537-33"><a href="Ch06.html#cb537-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb537-34"><a href="Ch06.html#cb537-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb537-35"><a href="Ch06.html#cb537-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb537-36"><a href="Ch06.html#cb537-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_496.png" width="100%" /></p>
</div>
<div id="ch06.497" class="section level2 hasAnchor" number="6.497">
<h2><span class="header-section-number">6.497</span> EO_NDWI-STmedian-iqr_cell<a href="Ch06.html#ch06.497" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDWI-STmedian-iqr_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_497</code></p>
<p><strong>English name:</strong> Spatial variability of short-term median water index (NDWI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Telpiskā variabilitāte pēdējo piecu gadu mediānajai ūdens indeksa (NDWI) vērtībai, starpkvartiļu apgabals analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. First Q1 and then Q3
is calculated for every cell with <code>egvtools::input2egv()</code>. Finally, subtracting
Q1 from Q3 and writing final raster with specified layername. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term corresponds
to last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="Ch06.html#cb538-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb538-2"><a href="Ch06.html#cb538-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb538-3"><a href="Ch06.html#cb538-3" tabindex="-1"></a></span>
<span id="cb538-4"><a href="Ch06.html#cb538-4" tabindex="-1"></a></span>
<span id="cb538-5"><a href="Ch06.html#cb538-5" tabindex="-1"></a><span class="co"># EO_NDWI-STmedian-iqr_cell.tif ----</span></span>
<span id="cb538-6"><a href="Ch06.html#cb538-6" tabindex="-1"></a></span>
<span id="cb538-7"><a href="Ch06.html#cb538-7" tabindex="-1"></a>p25rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDWI-STmedian.tif&quot;</span>,</span>
<span id="cb538-8"><a href="Ch06.html#cb538-8" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb538-9"><a href="Ch06.html#cb538-9" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q1&quot;</span>,</span>
<span id="cb538-10"><a href="Ch06.html#cb538-10" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb538-11"><a href="Ch06.html#cb538-11" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb538-12"><a href="Ch06.html#cb538-12" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p25.tif&quot;</span>,</span>
<span id="cb538-13"><a href="Ch06.html#cb538-13" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_497&quot;</span>,</span>
<span id="cb538-14"><a href="Ch06.html#cb538-14" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb538-15"><a href="Ch06.html#cb538-15" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb538-16"><a href="Ch06.html#cb538-16" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb538-17"><a href="Ch06.html#cb538-17" tabindex="-1"></a>p25rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb538-18"><a href="Ch06.html#cb538-18" tabindex="-1"></a></span>
<span id="cb538-19"><a href="Ch06.html#cb538-19" tabindex="-1"></a></span>
<span id="cb538-20"><a href="Ch06.html#cb538-20" tabindex="-1"></a>p75rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDWI-STmedian.tif&quot;</span>,</span>
<span id="cb538-21"><a href="Ch06.html#cb538-21" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb538-22"><a href="Ch06.html#cb538-22" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q3&quot;</span>,</span>
<span id="cb538-23"><a href="Ch06.html#cb538-23" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb538-24"><a href="Ch06.html#cb538-24" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb538-25"><a href="Ch06.html#cb538-25" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p75.tif&quot;</span>,</span>
<span id="cb538-26"><a href="Ch06.html#cb538-26" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_497&quot;</span>,</span>
<span id="cb538-27"><a href="Ch06.html#cb538-27" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb538-28"><a href="Ch06.html#cb538-28" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb538-29"><a href="Ch06.html#cb538-29" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb538-30"><a href="Ch06.html#cb538-30" tabindex="-1"></a>p75rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb538-31"><a href="Ch06.html#cb538-31" tabindex="-1"></a></span>
<span id="cb538-32"><a href="Ch06.html#cb538-32" tabindex="-1"></a>iqr_rez<span class="ot">=</span>p75rez_r<span class="sc">-</span>p25rez_r</span>
<span id="cb538-33"><a href="Ch06.html#cb538-33" tabindex="-1"></a>iqr_rez</span>
<span id="cb538-34"><a href="Ch06.html#cb538-34" tabindex="-1"></a><span class="fu">plot</span>(iqr_rez)</span>
<span id="cb538-35"><a href="Ch06.html#cb538-35" tabindex="-1"></a></span>
<span id="cb538-36"><a href="Ch06.html#cb538-36" tabindex="-1"></a><span class="fu">writeRaster</span>(iqr_rez,</span>
<span id="cb538-37"><a href="Ch06.html#cb538-37" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/EO_NDWI-STmedian-iqr_cell.tif&quot;</span>,</span>
<span id="cb538-38"><a href="Ch06.html#cb538-38" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb538-39"><a href="Ch06.html#cb538-39" tabindex="-1"></a></span>
<span id="cb538-40"><a href="Ch06.html#cb538-40" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb538-41"><a href="Ch06.html#cb538-41" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb538-42"><a href="Ch06.html#cb538-42" tabindex="-1"></a></span>
<span id="cb538-43"><a href="Ch06.html#cb538-43" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb538-44"><a href="Ch06.html#cb538-44" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb538-45"><a href="Ch06.html#cb538-45" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb538-46"><a href="Ch06.html#cb538-46" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb538-47"><a href="Ch06.html#cb538-47" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb538-48"><a href="Ch06.html#cb538-48" tabindex="-1"></a></span>
<span id="cb538-49"><a href="Ch06.html#cb538-49" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDWI-STmedian-iqr_cell.tif&quot;</span></span>
<span id="cb538-50"><a href="Ch06.html#cb538-50" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb538-51"><a href="Ch06.html#cb538-51" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb538-52"><a href="Ch06.html#cb538-52" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb538-53"><a href="Ch06.html#cb538-53" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb538-54"><a href="Ch06.html#cb538-54" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb538-55"><a href="Ch06.html#cb538-55" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb538-56"><a href="Ch06.html#cb538-56" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb538-57"><a href="Ch06.html#cb538-57" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb538-58"><a href="Ch06.html#cb538-58" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb538-59"><a href="Ch06.html#cb538-59" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb538-60"><a href="Ch06.html#cb538-60" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb538-61"><a href="Ch06.html#cb538-61" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_497.png" width="100%" /></p>
</div>
<div id="ch06.498" class="section level2 hasAnchor" number="6.498">
<h2><span class="header-section-number">6.498</span> EO_NDWI-STp25-min_cell<a href="Ch06.html#ch06.498" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDWI-STp25-min_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_498</code></p>
<p><strong>English name:</strong> Minimum short-term 25th percentile of water index (NDWI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Minimālā 25. procentiles pēdējo piecu gadu ūdens indeksa (NDWI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Minimum value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="Ch06.html#cb539-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb539-2"><a href="Ch06.html#cb539-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb539-3"><a href="Ch06.html#cb539-3" tabindex="-1"></a></span>
<span id="cb539-4"><a href="Ch06.html#cb539-4" tabindex="-1"></a><span class="co"># EO_NDWI-STp25-min_cell.tif ----</span></span>
<span id="cb539-5"><a href="Ch06.html#cb539-5" tabindex="-1"></a></span>
<span id="cb539-6"><a href="Ch06.html#cb539-6" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDWI-STp25.tif&quot;</span>,</span>
<span id="cb539-7"><a href="Ch06.html#cb539-7" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb539-8"><a href="Ch06.html#cb539-8" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;min&quot;</span>,</span>
<span id="cb539-9"><a href="Ch06.html#cb539-9" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb539-10"><a href="Ch06.html#cb539-10" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb539-11"><a href="Ch06.html#cb539-11" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDWI-STp25-min_cell.tif&quot;</span>,</span>
<span id="cb539-12"><a href="Ch06.html#cb539-12" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_498&quot;</span>,</span>
<span id="cb539-13"><a href="Ch06.html#cb539-13" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb539-14"><a href="Ch06.html#cb539-14" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb539-15"><a href="Ch06.html#cb539-15" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb539-16"><a href="Ch06.html#cb539-16" tabindex="-1"></a>egvrez</span>
<span id="cb539-17"><a href="Ch06.html#cb539-17" tabindex="-1"></a></span>
<span id="cb539-18"><a href="Ch06.html#cb539-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb539-19"><a href="Ch06.html#cb539-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb539-20"><a href="Ch06.html#cb539-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb539-21"><a href="Ch06.html#cb539-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb539-22"><a href="Ch06.html#cb539-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb539-23"><a href="Ch06.html#cb539-23" tabindex="-1"></a></span>
<span id="cb539-24"><a href="Ch06.html#cb539-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDWI-STp25-min_cell.tif&quot;</span></span>
<span id="cb539-25"><a href="Ch06.html#cb539-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb539-26"><a href="Ch06.html#cb539-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb539-27"><a href="Ch06.html#cb539-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb539-28"><a href="Ch06.html#cb539-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb539-29"><a href="Ch06.html#cb539-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb539-30"><a href="Ch06.html#cb539-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb539-31"><a href="Ch06.html#cb539-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb539-32"><a href="Ch06.html#cb539-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb539-33"><a href="Ch06.html#cb539-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb539-34"><a href="Ch06.html#cb539-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb539-35"><a href="Ch06.html#cb539-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb539-36"><a href="Ch06.html#cb539-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_498.png" width="100%" /></p>
</div>
<div id="ch06.499" class="section level2 hasAnchor" number="6.499">
<h2><span class="header-section-number">6.499</span> EO_NDWI-STp75-max_cell<a href="Ch06.html#ch06.499" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>EO_NDWI-STp75-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_499</code></p>
<p><strong>English name:</strong> Maximum short-term 75th percentile of water index (NDWI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Maksimālā 75. procentiles pēdējo piecu gadu ūdens indeksa (NDWI) vērtība, vidējais analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly follows <a href="Ch04.html#Ch04.13">preprocessing</a>. Maximum value at analysis cell
calculated with <code>egvtools::input2egv()</code>. To protect against possible data loss at edge cells,
inverse distance weighted (power = 2) gap filling is implemented. Short-term is last five years (2020-2024).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="Ch06.html#cb540-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb540-2"><a href="Ch06.html#cb540-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb540-3"><a href="Ch06.html#cb540-3" tabindex="-1"></a></span>
<span id="cb540-4"><a href="Ch06.html#cb540-4" tabindex="-1"></a></span>
<span id="cb540-5"><a href="Ch06.html#cb540-5" tabindex="-1"></a><span class="co"># EO_NDWI-STp75-max_cell.tif ----</span></span>
<span id="cb540-6"><a href="Ch06.html#cb540-6" tabindex="-1"></a></span>
<span id="cb540-7"><a href="Ch06.html#cb540-7" tabindex="-1"></a>egvrez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/S2indices/Mosaics/EO_NDWI-STp75.tif&quot;</span>,</span>
<span id="cb540-8"><a href="Ch06.html#cb540-8" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb540-9"><a href="Ch06.html#cb540-9" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;min&quot;</span>,</span>
<span id="cb540-10"><a href="Ch06.html#cb540-10" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb540-11"><a href="Ch06.html#cb540-11" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb540-12"><a href="Ch06.html#cb540-12" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;EO_NDWI-STp75-max_cell.tif&quot;</span>,</span>
<span id="cb540-13"><a href="Ch06.html#cb540-13" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_499&quot;</span>,</span>
<span id="cb540-14"><a href="Ch06.html#cb540-14" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb540-15"><a href="Ch06.html#cb540-15" tabindex="-1"></a>                 <span class="at">plot_gaps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb540-16"><a href="Ch06.html#cb540-16" tabindex="-1"></a>                 <span class="at">plot_final =</span> <span class="cn">FALSE</span>)</span>
<span id="cb540-17"><a href="Ch06.html#cb540-17" tabindex="-1"></a>egvrez</span>
<span id="cb540-18"><a href="Ch06.html#cb540-18" tabindex="-1"></a></span>
<span id="cb540-19"><a href="Ch06.html#cb540-19" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb540-20"><a href="Ch06.html#cb540-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb540-21"><a href="Ch06.html#cb540-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb540-22"><a href="Ch06.html#cb540-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb540-23"><a href="Ch06.html#cb540-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb540-24"><a href="Ch06.html#cb540-24" tabindex="-1"></a></span>
<span id="cb540-25"><a href="Ch06.html#cb540-25" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;EO_NDWI-STp75-max_cell.tif&quot;</span></span>
<span id="cb540-26"><a href="Ch06.html#cb540-26" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb540-27"><a href="Ch06.html#cb540-27" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb540-28"><a href="Ch06.html#cb540-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb540-29"><a href="Ch06.html#cb540-29" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb540-30"><a href="Ch06.html#cb540-30" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb540-31"><a href="Ch06.html#cb540-31" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb540-32"><a href="Ch06.html#cb540-32" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb540-33"><a href="Ch06.html#cb540-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb540-34"><a href="Ch06.html#cb540-34" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb540-35"><a href="Ch06.html#cb540-35" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb540-36"><a href="Ch06.html#cb540-36" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb540-37"><a href="Ch06.html#cb540-37" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_499.png" width="100%" /></p>
</div>
<div id="ch06.500" class="section level2 hasAnchor" number="6.500">
<h2><span class="header-section-number">6.500</span> SoilChemistry_ESDAC-CN_cell<a href="Ch06.html#ch06.500" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilChemistry_ESDAC-CN_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_500</code></p>
<p><strong>English name:</strong> Average value of Topsoil Carbon-Nitrogen ratio (ESDAC v2.0) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsnes virskārtas oglekļa-slāpekļa attiecība (ESDAC v2.0) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly derived from <a href="Ch04.html#Ch04.07.01">Soil chemistry</a>. Processed
with <code>egvtools::downscale2egv()</code> with <code>fill gaps = TRUE</code> performing inverse
distance weighted (power = 2) filling of gaps at the border and <code>smooth = FALSE</code>
to keep as original values as reasonable (there is bilinear interpolation
involved when projecting from 500 m to 100 m resolution of different CRS).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="Ch06.html#cb541-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb541-2"><a href="Ch06.html#cb541-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb541-3"><a href="Ch06.html#cb541-3" tabindex="-1"></a></span>
<span id="cb541-4"><a href="Ch06.html#cb541-4" tabindex="-1"></a></span>
<span id="cb541-5"><a href="Ch06.html#cb541-5" tabindex="-1"></a><span class="co"># CN ----</span></span>
<span id="cb541-6"><a href="Ch06.html#cb541-6" tabindex="-1"></a></span>
<span id="cb541-7"><a href="Ch06.html#cb541-7" tabindex="-1"></a>egv<span class="ot">=</span><span class="fu">downscale2egv</span>(</span>
<span id="cb541-8"><a href="Ch06.html#cb541-8" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb541-9"><a href="Ch06.html#cb541-9" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb541-10"><a href="Ch06.html#cb541-10" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> <span class="st">&quot;./Geodata/2024/Soils/ESDAC/chemistry/chemistry/CN/CN.tif&quot;</span>,</span>
<span id="cb541-11"><a href="Ch06.html#cb541-11" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb541-12"><a href="Ch06.html#cb541-12" tabindex="-1"></a>  <span class="at">file_name     =</span> <span class="st">&quot;SoilChemistry_ESDAC-CN_cell.tif&quot;</span>,</span>
<span id="cb541-13"><a href="Ch06.html#cb541-13" tabindex="-1"></a>  <span class="at">layer_name    =</span> <span class="st">&quot;egv_500&quot;</span>,</span>
<span id="cb541-14"><a href="Ch06.html#cb541-14" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb541-15"><a href="Ch06.html#cb541-15" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">FALSE</span>,</span>
<span id="cb541-16"><a href="Ch06.html#cb541-16" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb541-17"><a href="Ch06.html#cb541-17" tabindex="-1"></a>egv</span>
<span id="cb541-18"><a href="Ch06.html#cb541-18" tabindex="-1"></a></span>
<span id="cb541-19"><a href="Ch06.html#cb541-19" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb541-20"><a href="Ch06.html#cb541-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb541-21"><a href="Ch06.html#cb541-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb541-22"><a href="Ch06.html#cb541-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb541-23"><a href="Ch06.html#cb541-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb541-24"><a href="Ch06.html#cb541-24" tabindex="-1"></a></span>
<span id="cb541-25"><a href="Ch06.html#cb541-25" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilChemistry_ESDAC-CN_cell.tif&quot;</span></span>
<span id="cb541-26"><a href="Ch06.html#cb541-26" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb541-27"><a href="Ch06.html#cb541-27" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb541-28"><a href="Ch06.html#cb541-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb541-29"><a href="Ch06.html#cb541-29" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb541-30"><a href="Ch06.html#cb541-30" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb541-31"><a href="Ch06.html#cb541-31" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb541-32"><a href="Ch06.html#cb541-32" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb541-33"><a href="Ch06.html#cb541-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb541-34"><a href="Ch06.html#cb541-34" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb541-35"><a href="Ch06.html#cb541-35" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb541-36"><a href="Ch06.html#cb541-36" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb541-37"><a href="Ch06.html#cb541-37" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_500.png" width="100%" /></p>
</div>
<div id="ch06.501" class="section level2 hasAnchor" number="6.501">
<h2><span class="header-section-number">6.501</span> SoilChemistry_ESDAC-CaCo3_cell<a href="Ch06.html#ch06.501" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilChemistry_ESDAC-CaCo3_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_501</code></p>
<p><strong>English name:</strong> Average value of Topsoil Calcium Carbonates Content (ESDAC v2.0) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsnes virskārtas kalcija karbonātu apjoms (ESDAC v2.0) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly derived from <a href="Ch04.html#Ch04.07.01">Soil chemistry</a>. Processed
with <code>egvtools::downscale2egv()</code> with <code>fill gaps = TRUE</code> performing inverse
distance weighted (power = 2) filling of gaps at the border and <code>smooth = FALSE</code>
to keep as original values as reasonable (there is bilinear interpolation
involved when projecting from 500 m to 100 m resolution of different CRS).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="Ch06.html#cb542-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb542-2"><a href="Ch06.html#cb542-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb542-3"><a href="Ch06.html#cb542-3" tabindex="-1"></a></span>
<span id="cb542-4"><a href="Ch06.html#cb542-4" tabindex="-1"></a></span>
<span id="cb542-5"><a href="Ch06.html#cb542-5" tabindex="-1"></a><span class="co"># CaCO3 ----</span></span>
<span id="cb542-6"><a href="Ch06.html#cb542-6" tabindex="-1"></a></span>
<span id="cb542-7"><a href="Ch06.html#cb542-7" tabindex="-1"></a></span>
<span id="cb542-8"><a href="Ch06.html#cb542-8" tabindex="-1"></a>egv<span class="ot">=</span><span class="fu">downscale2egv</span>(</span>
<span id="cb542-9"><a href="Ch06.html#cb542-9" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb542-10"><a href="Ch06.html#cb542-10" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb542-11"><a href="Ch06.html#cb542-11" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> <span class="st">&quot;./Geodata/2024/Soils/ESDAC/chemistry/chemistry/Caco3/CaCO3.tif&quot;</span>,</span>
<span id="cb542-12"><a href="Ch06.html#cb542-12" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb542-13"><a href="Ch06.html#cb542-13" tabindex="-1"></a>  <span class="at">file_name     =</span> <span class="st">&quot;SoilChemistry_ESDAC-CaCo3_cell.tif&quot;</span>,</span>
<span id="cb542-14"><a href="Ch06.html#cb542-14" tabindex="-1"></a>  <span class="at">layer_name    =</span> <span class="st">&quot;egv_501&quot;</span>,</span>
<span id="cb542-15"><a href="Ch06.html#cb542-15" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb542-16"><a href="Ch06.html#cb542-16" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">FALSE</span>,</span>
<span id="cb542-17"><a href="Ch06.html#cb542-17" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb542-18"><a href="Ch06.html#cb542-18" tabindex="-1"></a>egv</span>
<span id="cb542-19"><a href="Ch06.html#cb542-19" tabindex="-1"></a></span>
<span id="cb542-20"><a href="Ch06.html#cb542-20" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb542-21"><a href="Ch06.html#cb542-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb542-22"><a href="Ch06.html#cb542-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb542-23"><a href="Ch06.html#cb542-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb542-24"><a href="Ch06.html#cb542-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb542-25"><a href="Ch06.html#cb542-25" tabindex="-1"></a></span>
<span id="cb542-26"><a href="Ch06.html#cb542-26" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilChemistry_ESDAC-CaCo3_cell.tif&quot;</span></span>
<span id="cb542-27"><a href="Ch06.html#cb542-27" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb542-28"><a href="Ch06.html#cb542-28" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb542-29"><a href="Ch06.html#cb542-29" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb542-30"><a href="Ch06.html#cb542-30" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb542-31"><a href="Ch06.html#cb542-31" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb542-32"><a href="Ch06.html#cb542-32" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb542-33"><a href="Ch06.html#cb542-33" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb542-34"><a href="Ch06.html#cb542-34" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb542-35"><a href="Ch06.html#cb542-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb542-36"><a href="Ch06.html#cb542-36" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb542-37"><a href="Ch06.html#cb542-37" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb542-38"><a href="Ch06.html#cb542-38" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_501.png" width="100%" /></p>
</div>
<div id="ch06.502" class="section level2 hasAnchor" number="6.502">
<h2><span class="header-section-number">6.502</span> SoilChemistry_ESDAC-K_cell<a href="Ch06.html#ch06.502" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilChemistry_ESDAC-K_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_502</code></p>
<p><strong>English name:</strong> Average value of Topsoil Sodium Content (ESDAC v2.0) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsnes virskārtas kālija apjoms (ESDAC v2.0) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly derived from <a href="Ch04.html#Ch04.07.01">Soil chemistry</a>. Processed
with <code>egvtools::downscale2egv()</code> with <code>fill gaps = TRUE</code> performing inverse
distance weighted (power = 2) filling of gaps at the border and <code>smooth = FALSE</code>
to keep as original values as reasonable (there is bilinear interpolation
involved when projecting from 500 m to 100 m resolution of different CRS).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="Ch06.html#cb543-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb543-2"><a href="Ch06.html#cb543-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb543-3"><a href="Ch06.html#cb543-3" tabindex="-1"></a></span>
<span id="cb543-4"><a href="Ch06.html#cb543-4" tabindex="-1"></a></span>
<span id="cb543-5"><a href="Ch06.html#cb543-5" tabindex="-1"></a><span class="co"># K ----</span></span>
<span id="cb543-6"><a href="Ch06.html#cb543-6" tabindex="-1"></a></span>
<span id="cb543-7"><a href="Ch06.html#cb543-7" tabindex="-1"></a>egv<span class="ot">=</span><span class="fu">downscale2egv</span>(</span>
<span id="cb543-8"><a href="Ch06.html#cb543-8" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb543-9"><a href="Ch06.html#cb543-9" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb543-10"><a href="Ch06.html#cb543-10" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> <span class="st">&quot;./Geodata/2024/Soils/ESDAC/chemistry/chemistry/K/K.tif&quot;</span>,</span>
<span id="cb543-11"><a href="Ch06.html#cb543-11" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb543-12"><a href="Ch06.html#cb543-12" tabindex="-1"></a>  <span class="at">file_name     =</span> <span class="st">&quot;SoilChemistry_ESDAC-K_cell.tif&quot;</span>,</span>
<span id="cb543-13"><a href="Ch06.html#cb543-13" tabindex="-1"></a>  <span class="at">layer_name    =</span> <span class="st">&quot;egv_502&quot;</span>,</span>
<span id="cb543-14"><a href="Ch06.html#cb543-14" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb543-15"><a href="Ch06.html#cb543-15" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">FALSE</span>,</span>
<span id="cb543-16"><a href="Ch06.html#cb543-16" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb543-17"><a href="Ch06.html#cb543-17" tabindex="-1"></a>egv</span>
<span id="cb543-18"><a href="Ch06.html#cb543-18" tabindex="-1"></a></span>
<span id="cb543-19"><a href="Ch06.html#cb543-19" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb543-20"><a href="Ch06.html#cb543-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb543-21"><a href="Ch06.html#cb543-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb543-22"><a href="Ch06.html#cb543-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb543-23"><a href="Ch06.html#cb543-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb543-24"><a href="Ch06.html#cb543-24" tabindex="-1"></a></span>
<span id="cb543-25"><a href="Ch06.html#cb543-25" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilChemistry_ESDAC-K_cell.tif&quot;</span></span>
<span id="cb543-26"><a href="Ch06.html#cb543-26" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb543-27"><a href="Ch06.html#cb543-27" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb543-28"><a href="Ch06.html#cb543-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb543-29"><a href="Ch06.html#cb543-29" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb543-30"><a href="Ch06.html#cb543-30" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb543-31"><a href="Ch06.html#cb543-31" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb543-32"><a href="Ch06.html#cb543-32" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb543-33"><a href="Ch06.html#cb543-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb543-34"><a href="Ch06.html#cb543-34" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb543-35"><a href="Ch06.html#cb543-35" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb543-36"><a href="Ch06.html#cb543-36" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb543-37"><a href="Ch06.html#cb543-37" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_502.png" width="100%" /></p>
</div>
<div id="ch06.503" class="section level2 hasAnchor" number="6.503">
<h2><span class="header-section-number">6.503</span> SoilChemistry_ESDAC-N_cell<a href="Ch06.html#ch06.503" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilChemistry_ESDAC-N_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_503</code></p>
<p><strong>English name:</strong> Average value of Topsoil Nitrogen Content (ESDAC v2.0) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsnes virskārtas slāpekļa apjoms (ESDAC v2.0) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly derived from <a href="Ch04.html#Ch04.07.01">Soil chemistry</a>. Processed
with <code>egvtools::downscale2egv()</code> with <code>fill gaps = TRUE</code> performing inverse
distance weighted (power = 2) filling of gaps at the border and <code>smooth = FALSE</code>
to keep as original values as reasonable (there is bilinear interpolation
involved when projecting from 500 m to 100 m resolution of different CRS).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="Ch06.html#cb544-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb544-2"><a href="Ch06.html#cb544-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb544-3"><a href="Ch06.html#cb544-3" tabindex="-1"></a></span>
<span id="cb544-4"><a href="Ch06.html#cb544-4" tabindex="-1"></a></span>
<span id="cb544-5"><a href="Ch06.html#cb544-5" tabindex="-1"></a><span class="co"># N ----</span></span>
<span id="cb544-6"><a href="Ch06.html#cb544-6" tabindex="-1"></a></span>
<span id="cb544-7"><a href="Ch06.html#cb544-7" tabindex="-1"></a>egv<span class="ot">=</span><span class="fu">downscale2egv</span>(</span>
<span id="cb544-8"><a href="Ch06.html#cb544-8" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb544-9"><a href="Ch06.html#cb544-9" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb544-10"><a href="Ch06.html#cb544-10" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> <span class="st">&quot;./Geodata/2024/Soils/ESDAC/chemistry/chemistry/N/N.tif&quot;</span>,</span>
<span id="cb544-11"><a href="Ch06.html#cb544-11" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb544-12"><a href="Ch06.html#cb544-12" tabindex="-1"></a>  <span class="at">file_name     =</span> <span class="st">&quot;SoilChemistry_ESDAC-N_cell.tif&quot;</span>,</span>
<span id="cb544-13"><a href="Ch06.html#cb544-13" tabindex="-1"></a>  <span class="at">layer_name    =</span> <span class="st">&quot;egv_503&quot;</span>,</span>
<span id="cb544-14"><a href="Ch06.html#cb544-14" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb544-15"><a href="Ch06.html#cb544-15" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">FALSE</span>,</span>
<span id="cb544-16"><a href="Ch06.html#cb544-16" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb544-17"><a href="Ch06.html#cb544-17" tabindex="-1"></a>egv</span>
<span id="cb544-18"><a href="Ch06.html#cb544-18" tabindex="-1"></a></span>
<span id="cb544-19"><a href="Ch06.html#cb544-19" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb544-20"><a href="Ch06.html#cb544-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb544-21"><a href="Ch06.html#cb544-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb544-22"><a href="Ch06.html#cb544-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb544-23"><a href="Ch06.html#cb544-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb544-24"><a href="Ch06.html#cb544-24" tabindex="-1"></a></span>
<span id="cb544-25"><a href="Ch06.html#cb544-25" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilChemistry_ESDAC-N_cell.tif&quot;</span></span>
<span id="cb544-26"><a href="Ch06.html#cb544-26" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb544-27"><a href="Ch06.html#cb544-27" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb544-28"><a href="Ch06.html#cb544-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb544-29"><a href="Ch06.html#cb544-29" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb544-30"><a href="Ch06.html#cb544-30" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb544-31"><a href="Ch06.html#cb544-31" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb544-32"><a href="Ch06.html#cb544-32" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb544-33"><a href="Ch06.html#cb544-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb544-34"><a href="Ch06.html#cb544-34" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb544-35"><a href="Ch06.html#cb544-35" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb544-36"><a href="Ch06.html#cb544-36" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb544-37"><a href="Ch06.html#cb544-37" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_503.png" width="100%" /></p>
</div>
<div id="ch06.504" class="section level2 hasAnchor" number="6.504">
<h2><span class="header-section-number">6.504</span> SoilChemistry_ESDAC-P_cell<a href="Ch06.html#ch06.504" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilChemistry_ESDAC-P_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_504</code></p>
<p><strong>English name:</strong> Average value of Topsoil Phosphorous Content (ESDAC v2.0) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsnes virskārtas fosfora apjoms (ESDAC v2.0) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly derived from <a href="Ch04.html#Ch04.07.01">Soil chemistry</a>. Processed
with <code>egvtools::downscale2egv()</code> with <code>fill gaps = TRUE</code> performing inverse
distance weighted (power = 2) filling of gaps at the border and <code>smooth = FALSE</code>
to keep as original values as reasonable (there is bilinear interpolation
involved when projecting from 500 m to 100 m resolution of different CRS).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="Ch06.html#cb545-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb545-2"><a href="Ch06.html#cb545-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb545-3"><a href="Ch06.html#cb545-3" tabindex="-1"></a></span>
<span id="cb545-4"><a href="Ch06.html#cb545-4" tabindex="-1"></a><span class="co"># P ----</span></span>
<span id="cb545-5"><a href="Ch06.html#cb545-5" tabindex="-1"></a></span>
<span id="cb545-6"><a href="Ch06.html#cb545-6" tabindex="-1"></a>egv<span class="ot">=</span><span class="fu">downscale2egv</span>(</span>
<span id="cb545-7"><a href="Ch06.html#cb545-7" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb545-8"><a href="Ch06.html#cb545-8" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb545-9"><a href="Ch06.html#cb545-9" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> <span class="st">&quot;./Geodata/2024/Soils/ESDAC/chemistry/chemistry/P/P.tif&quot;</span>,</span>
<span id="cb545-10"><a href="Ch06.html#cb545-10" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb545-11"><a href="Ch06.html#cb545-11" tabindex="-1"></a>  <span class="at">file_name     =</span> <span class="st">&quot;SoilChemistry_ESDAC-P_cell.tif&quot;</span>,</span>
<span id="cb545-12"><a href="Ch06.html#cb545-12" tabindex="-1"></a>  <span class="at">layer_name    =</span> <span class="st">&quot;egv_504&quot;</span>,</span>
<span id="cb545-13"><a href="Ch06.html#cb545-13" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb545-14"><a href="Ch06.html#cb545-14" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">FALSE</span>,</span>
<span id="cb545-15"><a href="Ch06.html#cb545-15" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb545-16"><a href="Ch06.html#cb545-16" tabindex="-1"></a>egv</span>
<span id="cb545-17"><a href="Ch06.html#cb545-17" tabindex="-1"></a></span>
<span id="cb545-18"><a href="Ch06.html#cb545-18" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb545-19"><a href="Ch06.html#cb545-19" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb545-20"><a href="Ch06.html#cb545-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb545-21"><a href="Ch06.html#cb545-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb545-22"><a href="Ch06.html#cb545-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb545-23"><a href="Ch06.html#cb545-23" tabindex="-1"></a></span>
<span id="cb545-24"><a href="Ch06.html#cb545-24" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilChemistry_ESDAC-P_cell.tif&quot;</span></span>
<span id="cb545-25"><a href="Ch06.html#cb545-25" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb545-26"><a href="Ch06.html#cb545-26" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb545-27"><a href="Ch06.html#cb545-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb545-28"><a href="Ch06.html#cb545-28" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb545-29"><a href="Ch06.html#cb545-29" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb545-30"><a href="Ch06.html#cb545-30" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb545-31"><a href="Ch06.html#cb545-31" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb545-32"><a href="Ch06.html#cb545-32" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb545-33"><a href="Ch06.html#cb545-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb545-34"><a href="Ch06.html#cb545-34" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb545-35"><a href="Ch06.html#cb545-35" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb545-36"><a href="Ch06.html#cb545-36" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_504.png" width="100%" /></p>
</div>
<div id="ch06.505" class="section level2 hasAnchor" number="6.505">
<h2><span class="header-section-number">6.505</span> SoilChemistry_ESDAC-phH2O_cell<a href="Ch06.html#ch06.505" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilChemistry_ESDAC-phH2O_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_505</code></p>
<p><strong>English name:</strong> Average value of Topsoil pH reaction in water (ESDAC v2.0) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsnes virskārtas reakcija (pH) ūdens šķīdumā (ESDAC v2.0) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Directly derived from <a href="Ch04.html#Ch04.07.01">Soil chemistry</a>. Processed
with <code>egvtools::downscale2egv()</code> with <code>fill gaps = TRUE</code> performing inverse
distance weighted (power = 2) filling of gaps at the border and <code>smooth = FALSE</code>
to keep as original values as reasonable (there is bilinear interpolation
involved when projecting from 500 m to 100 m resolution of different CRS).</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="Ch06.html#cb546-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb546-2"><a href="Ch06.html#cb546-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb546-3"><a href="Ch06.html#cb546-3" tabindex="-1"></a></span>
<span id="cb546-4"><a href="Ch06.html#cb546-4" tabindex="-1"></a></span>
<span id="cb546-5"><a href="Ch06.html#cb546-5" tabindex="-1"></a><span class="co"># pH_H2O ----</span></span>
<span id="cb546-6"><a href="Ch06.html#cb546-6" tabindex="-1"></a></span>
<span id="cb546-7"><a href="Ch06.html#cb546-7" tabindex="-1"></a>egv<span class="ot">=</span><span class="fu">downscale2egv</span>(</span>
<span id="cb546-8"><a href="Ch06.html#cb546-8" tabindex="-1"></a>  <span class="at">template_path =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb546-9"><a href="Ch06.html#cb546-9" tabindex="-1"></a>  <span class="at">grid_path     =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls1km_sauzeme.parquet&quot;</span>,</span>
<span id="cb546-10"><a href="Ch06.html#cb546-10" tabindex="-1"></a>  <span class="at">rawfile_path  =</span> <span class="st">&quot;./Geodata/2024/Soils/ESDAC/chemistry/chemistry/pH_H2O/pH_H2O.tif&quot;</span>,</span>
<span id="cb546-11"><a href="Ch06.html#cb546-11" tabindex="-1"></a>  <span class="at">out_path      =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb546-12"><a href="Ch06.html#cb546-12" tabindex="-1"></a>  <span class="at">file_name     =</span> <span class="st">&quot;SoilChemistry_ESDAC-phH2O_cell.tif&quot;</span>,</span>
<span id="cb546-13"><a href="Ch06.html#cb546-13" tabindex="-1"></a>  <span class="at">layer_name    =</span> <span class="st">&quot;egv_505&quot;</span>,</span>
<span id="cb546-14"><a href="Ch06.html#cb546-14" tabindex="-1"></a>  <span class="at">fill_gaps     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb546-15"><a href="Ch06.html#cb546-15" tabindex="-1"></a>  <span class="at">smooth        =</span> <span class="cn">FALSE</span>,</span>
<span id="cb546-16"><a href="Ch06.html#cb546-16" tabindex="-1"></a>  <span class="at">plot_result   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb546-17"><a href="Ch06.html#cb546-17" tabindex="-1"></a>egv</span>
<span id="cb546-18"><a href="Ch06.html#cb546-18" tabindex="-1"></a></span>
<span id="cb546-19"><a href="Ch06.html#cb546-19" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb546-20"><a href="Ch06.html#cb546-20" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb546-21"><a href="Ch06.html#cb546-21" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb546-22"><a href="Ch06.html#cb546-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb546-23"><a href="Ch06.html#cb546-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb546-24"><a href="Ch06.html#cb546-24" tabindex="-1"></a></span>
<span id="cb546-25"><a href="Ch06.html#cb546-25" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilChemistry_ESDAC-phH2O_cell.tif&quot;</span></span>
<span id="cb546-26"><a href="Ch06.html#cb546-26" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb546-27"><a href="Ch06.html#cb546-27" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb546-28"><a href="Ch06.html#cb546-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb546-29"><a href="Ch06.html#cb546-29" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb546-30"><a href="Ch06.html#cb546-30" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb546-31"><a href="Ch06.html#cb546-31" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb546-32"><a href="Ch06.html#cb546-32" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb546-33"><a href="Ch06.html#cb546-33" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb546-34"><a href="Ch06.html#cb546-34" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb546-35"><a href="Ch06.html#cb546-35" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb546-36"><a href="Ch06.html#cb546-36" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb546-37"><a href="Ch06.html#cb546-37" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_505.png" width="100%" /></p>
</div>
<div id="ch06.506" class="section level2 hasAnchor" number="6.506">
<h2><span class="header-section-number">6.506</span> SoilTexture_Clay_cell<a href="Ch06.html#ch06.506" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Clay_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_506</code></p>
<p><strong>English name:</strong> Fractional cover of Clay Soils within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “māls” platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.02">Soil texture product</a>. First, layer is
reclassified so that class of interest is 1, other classes are 0. Then processed
with <code>egvtools::input2egv()</code> with <code>fill gaps = TRUE</code> performing inverse
distance weighted (power = 2) filling of gaps at the border.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="Ch06.html#cb547-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb547-2"><a href="Ch06.html#cb547-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb547-3"><a href="Ch06.html#cb547-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb547-4"><a href="Ch06.html#cb547-4" tabindex="-1"></a></span>
<span id="cb547-5"><a href="Ch06.html#cb547-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb547-6"><a href="Ch06.html#cb547-6" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb547-7"><a href="Ch06.html#cb547-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb547-8"><a href="Ch06.html#cb547-8" tabindex="-1"></a></span>
<span id="cb547-9"><a href="Ch06.html#cb547-9" tabindex="-1"></a><span class="co"># input ----</span></span>
<span id="cb547-10"><a href="Ch06.html#cb547-10" tabindex="-1"></a>combtext<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/SoilTXT_combined.tif&quot;</span>)</span>
<span id="cb547-11"><a href="Ch06.html#cb547-11" tabindex="-1"></a></span>
<span id="cb547-12"><a href="Ch06.html#cb547-12" tabindex="-1"></a><span class="co"># EGVs cell ----</span></span>
<span id="cb547-13"><a href="Ch06.html#cb547-13" tabindex="-1"></a></span>
<span id="cb547-14"><a href="Ch06.html#cb547-14" tabindex="-1"></a><span class="co"># SoilTexture_Clay_cell.tif egv_506</span></span>
<span id="cb547-15"><a href="Ch06.html#cb547-15" tabindex="-1"></a></span>
<span id="cb547-16"><a href="Ch06.html#cb547-16" tabindex="-1"></a>clay10<span class="ot">=</span><span class="fu">ifel</span>(combtext<span class="sc">==</span><span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb547-17"><a href="Ch06.html#cb547-17" tabindex="-1"></a></span>
<span id="cb547-18"><a href="Ch06.html#cb547-18" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span>clay10,</span>
<span id="cb547-19"><a href="Ch06.html#cb547-19" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb547-20"><a href="Ch06.html#cb547-20" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb547-21"><a href="Ch06.html#cb547-21" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb547-22"><a href="Ch06.html#cb547-22" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb547-23"><a href="Ch06.html#cb547-23" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb547-24"><a href="Ch06.html#cb547-24" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;SoilTexture_Clay_cell.tif&quot;</span>,</span>
<span id="cb547-25"><a href="Ch06.html#cb547-25" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_506&quot;</span>,</span>
<span id="cb547-26"><a href="Ch06.html#cb547-26" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>)</span>
<span id="cb547-27"><a href="Ch06.html#cb547-27" tabindex="-1"></a></span>
<span id="cb547-28"><a href="Ch06.html#cb547-28" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb547-29"><a href="Ch06.html#cb547-29" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb547-30"><a href="Ch06.html#cb547-30" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb547-31"><a href="Ch06.html#cb547-31" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb547-32"><a href="Ch06.html#cb547-32" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb547-33"><a href="Ch06.html#cb547-33" tabindex="-1"></a></span>
<span id="cb547-34"><a href="Ch06.html#cb547-34" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Clay_cell.tif&quot;</span></span>
<span id="cb547-35"><a href="Ch06.html#cb547-35" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb547-36"><a href="Ch06.html#cb547-36" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb547-37"><a href="Ch06.html#cb547-37" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb547-38"><a href="Ch06.html#cb547-38" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb547-39"><a href="Ch06.html#cb547-39" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb547-40"><a href="Ch06.html#cb547-40" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb547-41"><a href="Ch06.html#cb547-41" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb547-42"><a href="Ch06.html#cb547-42" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb547-43"><a href="Ch06.html#cb547-43" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb547-44"><a href="Ch06.html#cb547-44" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb547-45"><a href="Ch06.html#cb547-45" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb547-46"><a href="Ch06.html#cb547-46" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_506.png" width="100%" /></p>
</div>
<div id="ch06.507" class="section level2 hasAnchor" number="6.507">
<h2><span class="header-section-number">6.507</span> SoilTexture_Clay_r500<a href="Ch06.html#ch06.507" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Clay_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_507</code></p>
<p><strong>English name:</strong> Fractional cover of Clay Soils within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “māls” platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.506">SoilTexture_Clay_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="Ch06.html#cb548-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb548-2"><a href="Ch06.html#cb548-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb548-3"><a href="Ch06.html#cb548-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb548-4"><a href="Ch06.html#cb548-4" tabindex="-1"></a></span>
<span id="cb548-5"><a href="Ch06.html#cb548-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb548-6"><a href="Ch06.html#cb548-6" tabindex="-1"></a></span>
<span id="cb548-7"><a href="Ch06.html#cb548-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb548-8"><a href="Ch06.html#cb548-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb548-9"><a href="Ch06.html#cb548-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb548-10"><a href="Ch06.html#cb548-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb548-11"><a href="Ch06.html#cb548-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb548-12"><a href="Ch06.html#cb548-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_cell.tif&quot;</span>),</span>
<span id="cb548-13"><a href="Ch06.html#cb548-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Clay&quot;</span>),</span>
<span id="cb548-14"><a href="Ch06.html#cb548-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb548-15"><a href="Ch06.html#cb548-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb548-16"><a href="Ch06.html#cb548-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb548-17"><a href="Ch06.html#cb548-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb548-18"><a href="Ch06.html#cb548-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb548-19"><a href="Ch06.html#cb548-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb548-20"><a href="Ch06.html#cb548-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb548-21"><a href="Ch06.html#cb548-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb548-22"><a href="Ch06.html#cb548-22" tabindex="-1"></a></span>
<span id="cb548-23"><a href="Ch06.html#cb548-23" tabindex="-1"></a><span class="co"># SoilTexture_Clay_r500.tif egv_507</span></span>
<span id="cb548-24"><a href="Ch06.html#cb548-24" tabindex="-1"></a></span>
<span id="cb548-25"><a href="Ch06.html#cb548-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_r500.tif&quot;</span>)</span>
<span id="cb548-26"><a href="Ch06.html#cb548-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_507&quot;</span></span>
<span id="cb548-27"><a href="Ch06.html#cb548-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb548-28"><a href="Ch06.html#cb548-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb548-29"><a href="Ch06.html#cb548-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_r500.tif&quot;</span>,</span>
<span id="cb548-30"><a href="Ch06.html#cb548-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb548-31"><a href="Ch06.html#cb548-31" tabindex="-1"></a></span>
<span id="cb548-32"><a href="Ch06.html#cb548-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb548-33"><a href="Ch06.html#cb548-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb548-34"><a href="Ch06.html#cb548-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb548-35"><a href="Ch06.html#cb548-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb548-36"><a href="Ch06.html#cb548-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb548-37"><a href="Ch06.html#cb548-37" tabindex="-1"></a></span>
<span id="cb548-38"><a href="Ch06.html#cb548-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Clay_r500.tif&quot;</span></span>
<span id="cb548-39"><a href="Ch06.html#cb548-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb548-40"><a href="Ch06.html#cb548-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb548-41"><a href="Ch06.html#cb548-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb548-42"><a href="Ch06.html#cb548-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb548-43"><a href="Ch06.html#cb548-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb548-44"><a href="Ch06.html#cb548-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb548-45"><a href="Ch06.html#cb548-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb548-46"><a href="Ch06.html#cb548-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb548-47"><a href="Ch06.html#cb548-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb548-48"><a href="Ch06.html#cb548-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb548-49"><a href="Ch06.html#cb548-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb548-50"><a href="Ch06.html#cb548-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_507.png" width="100%" /></p>
</div>
<div id="ch06.508" class="section level2 hasAnchor" number="6.508">
<h2><span class="header-section-number">6.508</span> SoilTexture_Clay_r1250<a href="Ch06.html#ch06.508" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Clay_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_508</code></p>
<p><strong>English name:</strong> Fractional cover of Clay Soils within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “māls” platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.506">SoilTexture_Clay_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="Ch06.html#cb549-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb549-2"><a href="Ch06.html#cb549-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb549-3"><a href="Ch06.html#cb549-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb549-4"><a href="Ch06.html#cb549-4" tabindex="-1"></a></span>
<span id="cb549-5"><a href="Ch06.html#cb549-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb549-6"><a href="Ch06.html#cb549-6" tabindex="-1"></a></span>
<span id="cb549-7"><a href="Ch06.html#cb549-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb549-8"><a href="Ch06.html#cb549-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb549-9"><a href="Ch06.html#cb549-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb549-10"><a href="Ch06.html#cb549-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb549-11"><a href="Ch06.html#cb549-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb549-12"><a href="Ch06.html#cb549-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_cell.tif&quot;</span>),</span>
<span id="cb549-13"><a href="Ch06.html#cb549-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Clay&quot;</span>),</span>
<span id="cb549-14"><a href="Ch06.html#cb549-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb549-15"><a href="Ch06.html#cb549-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb549-16"><a href="Ch06.html#cb549-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb549-17"><a href="Ch06.html#cb549-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb549-18"><a href="Ch06.html#cb549-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb549-19"><a href="Ch06.html#cb549-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb549-20"><a href="Ch06.html#cb549-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb549-21"><a href="Ch06.html#cb549-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb549-22"><a href="Ch06.html#cb549-22" tabindex="-1"></a></span>
<span id="cb549-23"><a href="Ch06.html#cb549-23" tabindex="-1"></a></span>
<span id="cb549-24"><a href="Ch06.html#cb549-24" tabindex="-1"></a><span class="co"># SoilTexture_Clay_r1250.tif    egv_508</span></span>
<span id="cb549-25"><a href="Ch06.html#cb549-25" tabindex="-1"></a></span>
<span id="cb549-26"><a href="Ch06.html#cb549-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_r1250.tif&quot;</span>)</span>
<span id="cb549-27"><a href="Ch06.html#cb549-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_508&quot;</span></span>
<span id="cb549-28"><a href="Ch06.html#cb549-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb549-29"><a href="Ch06.html#cb549-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb549-30"><a href="Ch06.html#cb549-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_r1250.tif&quot;</span>,</span>
<span id="cb549-31"><a href="Ch06.html#cb549-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb549-32"><a href="Ch06.html#cb549-32" tabindex="-1"></a></span>
<span id="cb549-33"><a href="Ch06.html#cb549-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb549-34"><a href="Ch06.html#cb549-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb549-35"><a href="Ch06.html#cb549-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb549-36"><a href="Ch06.html#cb549-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb549-37"><a href="Ch06.html#cb549-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb549-38"><a href="Ch06.html#cb549-38" tabindex="-1"></a></span>
<span id="cb549-39"><a href="Ch06.html#cb549-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Clay_r1250.tif&quot;</span></span>
<span id="cb549-40"><a href="Ch06.html#cb549-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb549-41"><a href="Ch06.html#cb549-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb549-42"><a href="Ch06.html#cb549-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb549-43"><a href="Ch06.html#cb549-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb549-44"><a href="Ch06.html#cb549-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb549-45"><a href="Ch06.html#cb549-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb549-46"><a href="Ch06.html#cb549-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb549-47"><a href="Ch06.html#cb549-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb549-48"><a href="Ch06.html#cb549-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb549-49"><a href="Ch06.html#cb549-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb549-50"><a href="Ch06.html#cb549-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb549-51"><a href="Ch06.html#cb549-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_508.png" width="100%" /></p>
</div>
<div id="ch06.509" class="section level2 hasAnchor" number="6.509">
<h2><span class="header-section-number">6.509</span> SoilTexture_Clay_r3000<a href="Ch06.html#ch06.509" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Clay_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_509</code></p>
<p><strong>English name:</strong> Fractional cover of Clay Soils within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “māls” platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.506">SoilTexture_Clay_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="Ch06.html#cb550-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb550-2"><a href="Ch06.html#cb550-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb550-3"><a href="Ch06.html#cb550-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb550-4"><a href="Ch06.html#cb550-4" tabindex="-1"></a></span>
<span id="cb550-5"><a href="Ch06.html#cb550-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb550-6"><a href="Ch06.html#cb550-6" tabindex="-1"></a></span>
<span id="cb550-7"><a href="Ch06.html#cb550-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb550-8"><a href="Ch06.html#cb550-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb550-9"><a href="Ch06.html#cb550-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb550-10"><a href="Ch06.html#cb550-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb550-11"><a href="Ch06.html#cb550-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb550-12"><a href="Ch06.html#cb550-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_cell.tif&quot;</span>),</span>
<span id="cb550-13"><a href="Ch06.html#cb550-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Clay&quot;</span>),</span>
<span id="cb550-14"><a href="Ch06.html#cb550-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb550-15"><a href="Ch06.html#cb550-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb550-16"><a href="Ch06.html#cb550-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb550-17"><a href="Ch06.html#cb550-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb550-18"><a href="Ch06.html#cb550-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb550-19"><a href="Ch06.html#cb550-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb550-20"><a href="Ch06.html#cb550-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb550-21"><a href="Ch06.html#cb550-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb550-22"><a href="Ch06.html#cb550-22" tabindex="-1"></a></span>
<span id="cb550-23"><a href="Ch06.html#cb550-23" tabindex="-1"></a><span class="co"># SoilTexture_Clay_r3000.tif    egv_509</span></span>
<span id="cb550-24"><a href="Ch06.html#cb550-24" tabindex="-1"></a></span>
<span id="cb550-25"><a href="Ch06.html#cb550-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_r3000.tif&quot;</span>)</span>
<span id="cb550-26"><a href="Ch06.html#cb550-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_509&quot;</span></span>
<span id="cb550-27"><a href="Ch06.html#cb550-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb550-28"><a href="Ch06.html#cb550-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb550-29"><a href="Ch06.html#cb550-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_r3000.tif&quot;</span>,</span>
<span id="cb550-30"><a href="Ch06.html#cb550-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb550-31"><a href="Ch06.html#cb550-31" tabindex="-1"></a></span>
<span id="cb550-32"><a href="Ch06.html#cb550-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb550-33"><a href="Ch06.html#cb550-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb550-34"><a href="Ch06.html#cb550-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb550-35"><a href="Ch06.html#cb550-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb550-36"><a href="Ch06.html#cb550-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb550-37"><a href="Ch06.html#cb550-37" tabindex="-1"></a></span>
<span id="cb550-38"><a href="Ch06.html#cb550-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Clay_r3000.tif&quot;</span></span>
<span id="cb550-39"><a href="Ch06.html#cb550-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb550-40"><a href="Ch06.html#cb550-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb550-41"><a href="Ch06.html#cb550-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb550-42"><a href="Ch06.html#cb550-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb550-43"><a href="Ch06.html#cb550-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb550-44"><a href="Ch06.html#cb550-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb550-45"><a href="Ch06.html#cb550-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb550-46"><a href="Ch06.html#cb550-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb550-47"><a href="Ch06.html#cb550-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb550-48"><a href="Ch06.html#cb550-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb550-49"><a href="Ch06.html#cb550-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb550-50"><a href="Ch06.html#cb550-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_509.png" width="100%" /></p>
</div>
<div id="ch06.510" class="section level2 hasAnchor" number="6.510">
<h2><span class="header-section-number">6.510</span> SoilTexture_Clay_r10000<a href="Ch06.html#ch06.510" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Clay_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_510</code></p>
<p><strong>English name:</strong> Fractional cover of Clay Soils within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “māls” platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.506">SoilTexture_Clay_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="Ch06.html#cb551-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb551-2"><a href="Ch06.html#cb551-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb551-3"><a href="Ch06.html#cb551-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb551-4"><a href="Ch06.html#cb551-4" tabindex="-1"></a></span>
<span id="cb551-5"><a href="Ch06.html#cb551-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb551-6"><a href="Ch06.html#cb551-6" tabindex="-1"></a></span>
<span id="cb551-7"><a href="Ch06.html#cb551-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb551-8"><a href="Ch06.html#cb551-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb551-9"><a href="Ch06.html#cb551-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb551-10"><a href="Ch06.html#cb551-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb551-11"><a href="Ch06.html#cb551-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb551-12"><a href="Ch06.html#cb551-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_cell.tif&quot;</span>),</span>
<span id="cb551-13"><a href="Ch06.html#cb551-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Clay&quot;</span>),</span>
<span id="cb551-14"><a href="Ch06.html#cb551-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb551-15"><a href="Ch06.html#cb551-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb551-16"><a href="Ch06.html#cb551-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb551-17"><a href="Ch06.html#cb551-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb551-18"><a href="Ch06.html#cb551-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb551-19"><a href="Ch06.html#cb551-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb551-20"><a href="Ch06.html#cb551-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb551-21"><a href="Ch06.html#cb551-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb551-22"><a href="Ch06.html#cb551-22" tabindex="-1"></a></span>
<span id="cb551-23"><a href="Ch06.html#cb551-23" tabindex="-1"></a></span>
<span id="cb551-24"><a href="Ch06.html#cb551-24" tabindex="-1"></a><span class="co"># SoilTexture_Clay_r10000.tif   egv_510</span></span>
<span id="cb551-25"><a href="Ch06.html#cb551-25" tabindex="-1"></a></span>
<span id="cb551-26"><a href="Ch06.html#cb551-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_r10000.tif&quot;</span>)</span>
<span id="cb551-27"><a href="Ch06.html#cb551-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_510&quot;</span></span>
<span id="cb551-28"><a href="Ch06.html#cb551-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb551-29"><a href="Ch06.html#cb551-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb551-30"><a href="Ch06.html#cb551-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Clay_r10000.tif&quot;</span>,</span>
<span id="cb551-31"><a href="Ch06.html#cb551-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb551-32"><a href="Ch06.html#cb551-32" tabindex="-1"></a></span>
<span id="cb551-33"><a href="Ch06.html#cb551-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb551-34"><a href="Ch06.html#cb551-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb551-35"><a href="Ch06.html#cb551-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb551-36"><a href="Ch06.html#cb551-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb551-37"><a href="Ch06.html#cb551-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb551-38"><a href="Ch06.html#cb551-38" tabindex="-1"></a></span>
<span id="cb551-39"><a href="Ch06.html#cb551-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Clay_r10000.tif&quot;</span></span>
<span id="cb551-40"><a href="Ch06.html#cb551-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb551-41"><a href="Ch06.html#cb551-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb551-42"><a href="Ch06.html#cb551-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb551-43"><a href="Ch06.html#cb551-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb551-44"><a href="Ch06.html#cb551-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb551-45"><a href="Ch06.html#cb551-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb551-46"><a href="Ch06.html#cb551-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb551-47"><a href="Ch06.html#cb551-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb551-48"><a href="Ch06.html#cb551-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb551-49"><a href="Ch06.html#cb551-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb551-50"><a href="Ch06.html#cb551-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb551-51"><a href="Ch06.html#cb551-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_510.png" width="100%" /></p>
</div>
<div id="ch06.511" class="section level2 hasAnchor" number="6.511">
<h2><span class="header-section-number">6.511</span> SoilTexture_Organic_cell<a href="Ch06.html#ch06.511" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Organic_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_511</code></p>
<p><strong>English name:</strong> Fractional cover of Organic Soils within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “organiskās augsnes” platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.02">Soil texture product</a>. First, layer is
reclassified so that class of interest is 1, other classes are 0. Then processed
with <code>egvtools::input2egv()</code> with <code>fill gaps = TRUE</code> performing inverse
distance weighted (power = 2) filling of gaps at the border.</p>
<p>At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="Ch06.html#cb552-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb552-2"><a href="Ch06.html#cb552-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb552-3"><a href="Ch06.html#cb552-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb552-4"><a href="Ch06.html#cb552-4" tabindex="-1"></a></span>
<span id="cb552-5"><a href="Ch06.html#cb552-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb552-6"><a href="Ch06.html#cb552-6" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb552-7"><a href="Ch06.html#cb552-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb552-8"><a href="Ch06.html#cb552-8" tabindex="-1"></a></span>
<span id="cb552-9"><a href="Ch06.html#cb552-9" tabindex="-1"></a><span class="co"># input ----</span></span>
<span id="cb552-10"><a href="Ch06.html#cb552-10" tabindex="-1"></a>combtext<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/SoilTXT_combined.tif&quot;</span>)</span>
<span id="cb552-11"><a href="Ch06.html#cb552-11" tabindex="-1"></a></span>
<span id="cb552-12"><a href="Ch06.html#cb552-12" tabindex="-1"></a><span class="co"># EGVs cell ----</span></span>
<span id="cb552-13"><a href="Ch06.html#cb552-13" tabindex="-1"></a></span>
<span id="cb552-14"><a href="Ch06.html#cb552-14" tabindex="-1"></a><span class="co"># SoilTexture_Organic_cell.tif  egv_511</span></span>
<span id="cb552-15"><a href="Ch06.html#cb552-15" tabindex="-1"></a></span>
<span id="cb552-16"><a href="Ch06.html#cb552-16" tabindex="-1"></a>org10<span class="ot">=</span><span class="fu">ifel</span>(combtext<span class="sc">==</span><span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb552-17"><a href="Ch06.html#cb552-17" tabindex="-1"></a></span>
<span id="cb552-18"><a href="Ch06.html#cb552-18" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span>org10,</span>
<span id="cb552-19"><a href="Ch06.html#cb552-19" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb552-20"><a href="Ch06.html#cb552-20" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb552-21"><a href="Ch06.html#cb552-21" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb552-22"><a href="Ch06.html#cb552-22" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb552-23"><a href="Ch06.html#cb552-23" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb552-24"><a href="Ch06.html#cb552-24" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;SoilTexture_Organic_cell.tif&quot;</span>,</span>
<span id="cb552-25"><a href="Ch06.html#cb552-25" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_511&quot;</span>,</span>
<span id="cb552-26"><a href="Ch06.html#cb552-26" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>)</span>
<span id="cb552-27"><a href="Ch06.html#cb552-27" tabindex="-1"></a></span>
<span id="cb552-28"><a href="Ch06.html#cb552-28" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb552-29"><a href="Ch06.html#cb552-29" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb552-30"><a href="Ch06.html#cb552-30" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb552-31"><a href="Ch06.html#cb552-31" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb552-32"><a href="Ch06.html#cb552-32" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb552-33"><a href="Ch06.html#cb552-33" tabindex="-1"></a></span>
<span id="cb552-34"><a href="Ch06.html#cb552-34" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Organic_cell.tif&quot;</span></span>
<span id="cb552-35"><a href="Ch06.html#cb552-35" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb552-36"><a href="Ch06.html#cb552-36" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb552-37"><a href="Ch06.html#cb552-37" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb552-38"><a href="Ch06.html#cb552-38" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb552-39"><a href="Ch06.html#cb552-39" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb552-40"><a href="Ch06.html#cb552-40" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb552-41"><a href="Ch06.html#cb552-41" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb552-42"><a href="Ch06.html#cb552-42" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb552-43"><a href="Ch06.html#cb552-43" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb552-44"><a href="Ch06.html#cb552-44" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb552-45"><a href="Ch06.html#cb552-45" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb552-46"><a href="Ch06.html#cb552-46" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_511.png" width="100%" /></p>
</div>
<div id="ch06.512" class="section level2 hasAnchor" number="6.512">
<h2><span class="header-section-number">6.512</span> SoilTexture_Organic_r500<a href="Ch06.html#ch06.512" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Organic_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_512</code></p>
<p><strong>English name:</strong> Fractional cover of Organic Soils within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “organiskās augsnes” platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.511">SoilTexture_Organic_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="Ch06.html#cb553-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb553-2"><a href="Ch06.html#cb553-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb553-3"><a href="Ch06.html#cb553-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb553-4"><a href="Ch06.html#cb553-4" tabindex="-1"></a></span>
<span id="cb553-5"><a href="Ch06.html#cb553-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb553-6"><a href="Ch06.html#cb553-6" tabindex="-1"></a></span>
<span id="cb553-7"><a href="Ch06.html#cb553-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb553-8"><a href="Ch06.html#cb553-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb553-9"><a href="Ch06.html#cb553-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb553-10"><a href="Ch06.html#cb553-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb553-11"><a href="Ch06.html#cb553-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb553-12"><a href="Ch06.html#cb553-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_cell.tif&quot;</span>),</span>
<span id="cb553-13"><a href="Ch06.html#cb553-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Organic&quot;</span>),</span>
<span id="cb553-14"><a href="Ch06.html#cb553-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb553-15"><a href="Ch06.html#cb553-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb553-16"><a href="Ch06.html#cb553-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb553-17"><a href="Ch06.html#cb553-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb553-18"><a href="Ch06.html#cb553-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb553-19"><a href="Ch06.html#cb553-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb553-20"><a href="Ch06.html#cb553-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb553-21"><a href="Ch06.html#cb553-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb553-22"><a href="Ch06.html#cb553-22" tabindex="-1"></a></span>
<span id="cb553-23"><a href="Ch06.html#cb553-23" tabindex="-1"></a><span class="co"># SoilTexture_Organic_r500.tif  egv_512</span></span>
<span id="cb553-24"><a href="Ch06.html#cb553-24" tabindex="-1"></a></span>
<span id="cb553-25"><a href="Ch06.html#cb553-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_r500.tif&quot;</span>)</span>
<span id="cb553-26"><a href="Ch06.html#cb553-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_512&quot;</span></span>
<span id="cb553-27"><a href="Ch06.html#cb553-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb553-28"><a href="Ch06.html#cb553-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb553-29"><a href="Ch06.html#cb553-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_r500.tif&quot;</span>,</span>
<span id="cb553-30"><a href="Ch06.html#cb553-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb553-31"><a href="Ch06.html#cb553-31" tabindex="-1"></a></span>
<span id="cb553-32"><a href="Ch06.html#cb553-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb553-33"><a href="Ch06.html#cb553-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb553-34"><a href="Ch06.html#cb553-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb553-35"><a href="Ch06.html#cb553-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb553-36"><a href="Ch06.html#cb553-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb553-37"><a href="Ch06.html#cb553-37" tabindex="-1"></a></span>
<span id="cb553-38"><a href="Ch06.html#cb553-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Organic_r500.tif&quot;</span></span>
<span id="cb553-39"><a href="Ch06.html#cb553-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb553-40"><a href="Ch06.html#cb553-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb553-41"><a href="Ch06.html#cb553-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb553-42"><a href="Ch06.html#cb553-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb553-43"><a href="Ch06.html#cb553-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb553-44"><a href="Ch06.html#cb553-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb553-45"><a href="Ch06.html#cb553-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb553-46"><a href="Ch06.html#cb553-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb553-47"><a href="Ch06.html#cb553-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb553-48"><a href="Ch06.html#cb553-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb553-49"><a href="Ch06.html#cb553-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb553-50"><a href="Ch06.html#cb553-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_512.png" width="100%" /></p>
</div>
<div id="ch06.513" class="section level2 hasAnchor" number="6.513">
<h2><span class="header-section-number">6.513</span> SoilTexture_Organic_r1250<a href="Ch06.html#ch06.513" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Organic_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_513</code></p>
<p><strong>English name:</strong> Fractional cover of Organic Soils within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “organiskās augsnes” platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.511">SoilTexture_Organic_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="Ch06.html#cb554-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb554-2"><a href="Ch06.html#cb554-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb554-3"><a href="Ch06.html#cb554-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb554-4"><a href="Ch06.html#cb554-4" tabindex="-1"></a></span>
<span id="cb554-5"><a href="Ch06.html#cb554-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb554-6"><a href="Ch06.html#cb554-6" tabindex="-1"></a></span>
<span id="cb554-7"><a href="Ch06.html#cb554-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb554-8"><a href="Ch06.html#cb554-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb554-9"><a href="Ch06.html#cb554-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb554-10"><a href="Ch06.html#cb554-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb554-11"><a href="Ch06.html#cb554-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb554-12"><a href="Ch06.html#cb554-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_cell.tif&quot;</span>),</span>
<span id="cb554-13"><a href="Ch06.html#cb554-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Organic&quot;</span>),</span>
<span id="cb554-14"><a href="Ch06.html#cb554-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb554-15"><a href="Ch06.html#cb554-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb554-16"><a href="Ch06.html#cb554-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb554-17"><a href="Ch06.html#cb554-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb554-18"><a href="Ch06.html#cb554-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb554-19"><a href="Ch06.html#cb554-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb554-20"><a href="Ch06.html#cb554-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb554-21"><a href="Ch06.html#cb554-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb554-22"><a href="Ch06.html#cb554-22" tabindex="-1"></a></span>
<span id="cb554-23"><a href="Ch06.html#cb554-23" tabindex="-1"></a></span>
<span id="cb554-24"><a href="Ch06.html#cb554-24" tabindex="-1"></a><span class="co"># SoilTexture_Organic_r1250.tif egv_513</span></span>
<span id="cb554-25"><a href="Ch06.html#cb554-25" tabindex="-1"></a></span>
<span id="cb554-26"><a href="Ch06.html#cb554-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_r1250.tif&quot;</span>)</span>
<span id="cb554-27"><a href="Ch06.html#cb554-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_513&quot;</span></span>
<span id="cb554-28"><a href="Ch06.html#cb554-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb554-29"><a href="Ch06.html#cb554-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb554-30"><a href="Ch06.html#cb554-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_r1250.tif&quot;</span>,</span>
<span id="cb554-31"><a href="Ch06.html#cb554-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb554-32"><a href="Ch06.html#cb554-32" tabindex="-1"></a></span>
<span id="cb554-33"><a href="Ch06.html#cb554-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb554-34"><a href="Ch06.html#cb554-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb554-35"><a href="Ch06.html#cb554-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb554-36"><a href="Ch06.html#cb554-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb554-37"><a href="Ch06.html#cb554-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb554-38"><a href="Ch06.html#cb554-38" tabindex="-1"></a></span>
<span id="cb554-39"><a href="Ch06.html#cb554-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Organic_r1250.tif&quot;</span></span>
<span id="cb554-40"><a href="Ch06.html#cb554-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb554-41"><a href="Ch06.html#cb554-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb554-42"><a href="Ch06.html#cb554-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb554-43"><a href="Ch06.html#cb554-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb554-44"><a href="Ch06.html#cb554-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb554-45"><a href="Ch06.html#cb554-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb554-46"><a href="Ch06.html#cb554-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb554-47"><a href="Ch06.html#cb554-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb554-48"><a href="Ch06.html#cb554-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb554-49"><a href="Ch06.html#cb554-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb554-50"><a href="Ch06.html#cb554-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb554-51"><a href="Ch06.html#cb554-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_513.png" width="100%" /></p>
</div>
<div id="ch06.514" class="section level2 hasAnchor" number="6.514">
<h2><span class="header-section-number">6.514</span> SoilTexture_Organic_r3000<a href="Ch06.html#ch06.514" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Organic_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_514</code></p>
<p><strong>English name:</strong> Fractional cover of Organic Soils within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “organiskās augsnes” platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.511">SoilTexture_Organic_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="Ch06.html#cb555-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb555-2"><a href="Ch06.html#cb555-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb555-3"><a href="Ch06.html#cb555-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb555-4"><a href="Ch06.html#cb555-4" tabindex="-1"></a></span>
<span id="cb555-5"><a href="Ch06.html#cb555-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb555-6"><a href="Ch06.html#cb555-6" tabindex="-1"></a></span>
<span id="cb555-7"><a href="Ch06.html#cb555-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb555-8"><a href="Ch06.html#cb555-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb555-9"><a href="Ch06.html#cb555-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb555-10"><a href="Ch06.html#cb555-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb555-11"><a href="Ch06.html#cb555-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb555-12"><a href="Ch06.html#cb555-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_cell.tif&quot;</span>),</span>
<span id="cb555-13"><a href="Ch06.html#cb555-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Organic&quot;</span>),</span>
<span id="cb555-14"><a href="Ch06.html#cb555-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb555-15"><a href="Ch06.html#cb555-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb555-16"><a href="Ch06.html#cb555-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb555-17"><a href="Ch06.html#cb555-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb555-18"><a href="Ch06.html#cb555-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb555-19"><a href="Ch06.html#cb555-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb555-20"><a href="Ch06.html#cb555-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb555-21"><a href="Ch06.html#cb555-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb555-22"><a href="Ch06.html#cb555-22" tabindex="-1"></a></span>
<span id="cb555-23"><a href="Ch06.html#cb555-23" tabindex="-1"></a><span class="co"># SoilTexture_Organic_r3000.tif egv_514</span></span>
<span id="cb555-24"><a href="Ch06.html#cb555-24" tabindex="-1"></a></span>
<span id="cb555-25"><a href="Ch06.html#cb555-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_r3000.tif&quot;</span>)</span>
<span id="cb555-26"><a href="Ch06.html#cb555-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_514&quot;</span></span>
<span id="cb555-27"><a href="Ch06.html#cb555-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb555-28"><a href="Ch06.html#cb555-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb555-29"><a href="Ch06.html#cb555-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_r3000.tif&quot;</span>,</span>
<span id="cb555-30"><a href="Ch06.html#cb555-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb555-31"><a href="Ch06.html#cb555-31" tabindex="-1"></a></span>
<span id="cb555-32"><a href="Ch06.html#cb555-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb555-33"><a href="Ch06.html#cb555-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb555-34"><a href="Ch06.html#cb555-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb555-35"><a href="Ch06.html#cb555-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb555-36"><a href="Ch06.html#cb555-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb555-37"><a href="Ch06.html#cb555-37" tabindex="-1"></a></span>
<span id="cb555-38"><a href="Ch06.html#cb555-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Organic_r3000.tif&quot;</span></span>
<span id="cb555-39"><a href="Ch06.html#cb555-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb555-40"><a href="Ch06.html#cb555-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb555-41"><a href="Ch06.html#cb555-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb555-42"><a href="Ch06.html#cb555-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb555-43"><a href="Ch06.html#cb555-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb555-44"><a href="Ch06.html#cb555-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb555-45"><a href="Ch06.html#cb555-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb555-46"><a href="Ch06.html#cb555-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb555-47"><a href="Ch06.html#cb555-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb555-48"><a href="Ch06.html#cb555-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb555-49"><a href="Ch06.html#cb555-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb555-50"><a href="Ch06.html#cb555-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_514.png" width="100%" /></p>
</div>
<div id="ch06.515" class="section level2 hasAnchor" number="6.515">
<h2><span class="header-section-number">6.515</span> SoilTexture_Organic_r10000<a href="Ch06.html#ch06.515" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Organic_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_515</code></p>
<p><strong>English name:</strong> Fractional cover of Organic Soils within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “organiskās augsnes” platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.511">SoilTexture_Organic_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="Ch06.html#cb556-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb556-2"><a href="Ch06.html#cb556-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb556-3"><a href="Ch06.html#cb556-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb556-4"><a href="Ch06.html#cb556-4" tabindex="-1"></a></span>
<span id="cb556-5"><a href="Ch06.html#cb556-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb556-6"><a href="Ch06.html#cb556-6" tabindex="-1"></a></span>
<span id="cb556-7"><a href="Ch06.html#cb556-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb556-8"><a href="Ch06.html#cb556-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb556-9"><a href="Ch06.html#cb556-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb556-10"><a href="Ch06.html#cb556-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb556-11"><a href="Ch06.html#cb556-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb556-12"><a href="Ch06.html#cb556-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_cell.tif&quot;</span>),</span>
<span id="cb556-13"><a href="Ch06.html#cb556-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Organic&quot;</span>),</span>
<span id="cb556-14"><a href="Ch06.html#cb556-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb556-15"><a href="Ch06.html#cb556-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb556-16"><a href="Ch06.html#cb556-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb556-17"><a href="Ch06.html#cb556-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb556-18"><a href="Ch06.html#cb556-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb556-19"><a href="Ch06.html#cb556-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb556-20"><a href="Ch06.html#cb556-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb556-21"><a href="Ch06.html#cb556-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb556-22"><a href="Ch06.html#cb556-22" tabindex="-1"></a></span>
<span id="cb556-23"><a href="Ch06.html#cb556-23" tabindex="-1"></a><span class="co"># SoilTexture_Organic_r10000.tif    egv_515</span></span>
<span id="cb556-24"><a href="Ch06.html#cb556-24" tabindex="-1"></a></span>
<span id="cb556-25"><a href="Ch06.html#cb556-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_r10000.tif&quot;</span>)</span>
<span id="cb556-26"><a href="Ch06.html#cb556-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_515&quot;</span></span>
<span id="cb556-27"><a href="Ch06.html#cb556-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb556-28"><a href="Ch06.html#cb556-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb556-29"><a href="Ch06.html#cb556-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Organic_r10000.tif&quot;</span>,</span>
<span id="cb556-30"><a href="Ch06.html#cb556-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb556-31"><a href="Ch06.html#cb556-31" tabindex="-1"></a></span>
<span id="cb556-32"><a href="Ch06.html#cb556-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb556-33"><a href="Ch06.html#cb556-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb556-34"><a href="Ch06.html#cb556-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb556-35"><a href="Ch06.html#cb556-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb556-36"><a href="Ch06.html#cb556-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb556-37"><a href="Ch06.html#cb556-37" tabindex="-1"></a></span>
<span id="cb556-38"><a href="Ch06.html#cb556-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Organic_r10000.tif&quot;</span></span>
<span id="cb556-39"><a href="Ch06.html#cb556-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb556-40"><a href="Ch06.html#cb556-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb556-41"><a href="Ch06.html#cb556-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb556-42"><a href="Ch06.html#cb556-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb556-43"><a href="Ch06.html#cb556-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb556-44"><a href="Ch06.html#cb556-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb556-45"><a href="Ch06.html#cb556-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb556-46"><a href="Ch06.html#cb556-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb556-47"><a href="Ch06.html#cb556-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb556-48"><a href="Ch06.html#cb556-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb556-49"><a href="Ch06.html#cb556-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb556-50"><a href="Ch06.html#cb556-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_515.png" width="100%" /></p>
</div>
<div id="ch06.516" class="section level2 hasAnchor" number="6.516">
<h2><span class="header-section-number">6.516</span> SoilTexture_Sand_cell<a href="Ch06.html#ch06.516" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Sand_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_516</code></p>
<p><strong>English name:</strong> Fractional cover of Sand Soils within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “smilts” platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.02">Soil texture product</a>. First, layer is
reclassified so that class of interest is 1, other classes are 0. Then processed
with <code>egvtools::input2egv()</code> with <code>fill gaps = TRUE</code> performing inverse
distance weighted (power = 2) filling of gaps at the border.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="Ch06.html#cb557-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb557-2"><a href="Ch06.html#cb557-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb557-3"><a href="Ch06.html#cb557-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb557-4"><a href="Ch06.html#cb557-4" tabindex="-1"></a></span>
<span id="cb557-5"><a href="Ch06.html#cb557-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb557-6"><a href="Ch06.html#cb557-6" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb557-7"><a href="Ch06.html#cb557-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb557-8"><a href="Ch06.html#cb557-8" tabindex="-1"></a></span>
<span id="cb557-9"><a href="Ch06.html#cb557-9" tabindex="-1"></a><span class="co"># input ----</span></span>
<span id="cb557-10"><a href="Ch06.html#cb557-10" tabindex="-1"></a>combtext<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/SoilTXT_combined.tif&quot;</span>)</span>
<span id="cb557-11"><a href="Ch06.html#cb557-11" tabindex="-1"></a></span>
<span id="cb557-12"><a href="Ch06.html#cb557-12" tabindex="-1"></a><span class="co"># EGVs cell ----</span></span>
<span id="cb557-13"><a href="Ch06.html#cb557-13" tabindex="-1"></a></span>
<span id="cb557-14"><a href="Ch06.html#cb557-14" tabindex="-1"></a><span class="co"># SoilTexture_Sand_cell.tif egv_516</span></span>
<span id="cb557-15"><a href="Ch06.html#cb557-15" tabindex="-1"></a></span>
<span id="cb557-16"><a href="Ch06.html#cb557-16" tabindex="-1"></a>sand10<span class="ot">=</span><span class="fu">ifel</span>(combtext<span class="sc">==</span><span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb557-17"><a href="Ch06.html#cb557-17" tabindex="-1"></a><span class="fu">plot</span>(sand10)</span>
<span id="cb557-18"><a href="Ch06.html#cb557-18" tabindex="-1"></a></span>
<span id="cb557-19"><a href="Ch06.html#cb557-19" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span>sand10,</span>
<span id="cb557-20"><a href="Ch06.html#cb557-20" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb557-21"><a href="Ch06.html#cb557-21" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb557-22"><a href="Ch06.html#cb557-22" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb557-23"><a href="Ch06.html#cb557-23" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb557-24"><a href="Ch06.html#cb557-24" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb557-25"><a href="Ch06.html#cb557-25" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;SoilTexture_Sand_cell.tif&quot;</span>,</span>
<span id="cb557-26"><a href="Ch06.html#cb557-26" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_516&quot;</span>,</span>
<span id="cb557-27"><a href="Ch06.html#cb557-27" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>)</span>
<span id="cb557-28"><a href="Ch06.html#cb557-28" tabindex="-1"></a></span>
<span id="cb557-29"><a href="Ch06.html#cb557-29" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb557-30"><a href="Ch06.html#cb557-30" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb557-31"><a href="Ch06.html#cb557-31" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb557-32"><a href="Ch06.html#cb557-32" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb557-33"><a href="Ch06.html#cb557-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb557-34"><a href="Ch06.html#cb557-34" tabindex="-1"></a></span>
<span id="cb557-35"><a href="Ch06.html#cb557-35" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Sand_cell.tif&quot;</span></span>
<span id="cb557-36"><a href="Ch06.html#cb557-36" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb557-37"><a href="Ch06.html#cb557-37" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb557-38"><a href="Ch06.html#cb557-38" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb557-39"><a href="Ch06.html#cb557-39" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb557-40"><a href="Ch06.html#cb557-40" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb557-41"><a href="Ch06.html#cb557-41" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb557-42"><a href="Ch06.html#cb557-42" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb557-43"><a href="Ch06.html#cb557-43" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb557-44"><a href="Ch06.html#cb557-44" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb557-45"><a href="Ch06.html#cb557-45" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb557-46"><a href="Ch06.html#cb557-46" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb557-47"><a href="Ch06.html#cb557-47" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_516.png" width="100%" /></p>
</div>
<div id="ch06.517" class="section level2 hasAnchor" number="6.517">
<h2><span class="header-section-number">6.517</span> SoilTexture_Sand_r500<a href="Ch06.html#ch06.517" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Sand_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_517</code></p>
<p><strong>English name:</strong> Fractional cover of Sand Soils within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “smilts” platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.516">SoilTexture_Sand_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="Ch06.html#cb558-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb558-2"><a href="Ch06.html#cb558-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb558-3"><a href="Ch06.html#cb558-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb558-4"><a href="Ch06.html#cb558-4" tabindex="-1"></a></span>
<span id="cb558-5"><a href="Ch06.html#cb558-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb558-6"><a href="Ch06.html#cb558-6" tabindex="-1"></a></span>
<span id="cb558-7"><a href="Ch06.html#cb558-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb558-8"><a href="Ch06.html#cb558-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb558-9"><a href="Ch06.html#cb558-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb558-10"><a href="Ch06.html#cb558-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb558-11"><a href="Ch06.html#cb558-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb558-12"><a href="Ch06.html#cb558-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_cell.tif&quot;</span>),</span>
<span id="cb558-13"><a href="Ch06.html#cb558-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Sand&quot;</span>),</span>
<span id="cb558-14"><a href="Ch06.html#cb558-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb558-15"><a href="Ch06.html#cb558-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb558-16"><a href="Ch06.html#cb558-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb558-17"><a href="Ch06.html#cb558-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb558-18"><a href="Ch06.html#cb558-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb558-19"><a href="Ch06.html#cb558-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb558-20"><a href="Ch06.html#cb558-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb558-21"><a href="Ch06.html#cb558-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb558-22"><a href="Ch06.html#cb558-22" tabindex="-1"></a></span>
<span id="cb558-23"><a href="Ch06.html#cb558-23" tabindex="-1"></a><span class="co"># SoilTexture_Sand_r500.tif egv_517</span></span>
<span id="cb558-24"><a href="Ch06.html#cb558-24" tabindex="-1"></a></span>
<span id="cb558-25"><a href="Ch06.html#cb558-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_r500.tif&quot;</span>)</span>
<span id="cb558-26"><a href="Ch06.html#cb558-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_517&quot;</span></span>
<span id="cb558-27"><a href="Ch06.html#cb558-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb558-28"><a href="Ch06.html#cb558-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb558-29"><a href="Ch06.html#cb558-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_r500.tif&quot;</span>,</span>
<span id="cb558-30"><a href="Ch06.html#cb558-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb558-31"><a href="Ch06.html#cb558-31" tabindex="-1"></a></span>
<span id="cb558-32"><a href="Ch06.html#cb558-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb558-33"><a href="Ch06.html#cb558-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb558-34"><a href="Ch06.html#cb558-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb558-35"><a href="Ch06.html#cb558-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb558-36"><a href="Ch06.html#cb558-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb558-37"><a href="Ch06.html#cb558-37" tabindex="-1"></a></span>
<span id="cb558-38"><a href="Ch06.html#cb558-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Sand_r500.tif&quot;</span></span>
<span id="cb558-39"><a href="Ch06.html#cb558-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb558-40"><a href="Ch06.html#cb558-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb558-41"><a href="Ch06.html#cb558-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb558-42"><a href="Ch06.html#cb558-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb558-43"><a href="Ch06.html#cb558-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb558-44"><a href="Ch06.html#cb558-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb558-45"><a href="Ch06.html#cb558-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb558-46"><a href="Ch06.html#cb558-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb558-47"><a href="Ch06.html#cb558-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb558-48"><a href="Ch06.html#cb558-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb558-49"><a href="Ch06.html#cb558-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb558-50"><a href="Ch06.html#cb558-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_517.png" width="100%" /></p>
</div>
<div id="ch06.518" class="section level2 hasAnchor" number="6.518">
<h2><span class="header-section-number">6.518</span> SoilTexture_Sand_r1250<a href="Ch06.html#ch06.518" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Sand_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_518</code></p>
<p><strong>English name:</strong> Fractional cover of Sand Soils within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “smilts” platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.516">SoilTexture_Sand_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="Ch06.html#cb559-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb559-2"><a href="Ch06.html#cb559-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb559-3"><a href="Ch06.html#cb559-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb559-4"><a href="Ch06.html#cb559-4" tabindex="-1"></a></span>
<span id="cb559-5"><a href="Ch06.html#cb559-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb559-6"><a href="Ch06.html#cb559-6" tabindex="-1"></a></span>
<span id="cb559-7"><a href="Ch06.html#cb559-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb559-8"><a href="Ch06.html#cb559-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb559-9"><a href="Ch06.html#cb559-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb559-10"><a href="Ch06.html#cb559-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb559-11"><a href="Ch06.html#cb559-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb559-12"><a href="Ch06.html#cb559-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_cell.tif&quot;</span>),</span>
<span id="cb559-13"><a href="Ch06.html#cb559-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Sand&quot;</span>),</span>
<span id="cb559-14"><a href="Ch06.html#cb559-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb559-15"><a href="Ch06.html#cb559-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb559-16"><a href="Ch06.html#cb559-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb559-17"><a href="Ch06.html#cb559-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb559-18"><a href="Ch06.html#cb559-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb559-19"><a href="Ch06.html#cb559-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb559-20"><a href="Ch06.html#cb559-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb559-21"><a href="Ch06.html#cb559-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb559-22"><a href="Ch06.html#cb559-22" tabindex="-1"></a></span>
<span id="cb559-23"><a href="Ch06.html#cb559-23" tabindex="-1"></a><span class="co"># SoilTexture_Sand_r1250.tif    egv_518</span></span>
<span id="cb559-24"><a href="Ch06.html#cb559-24" tabindex="-1"></a></span>
<span id="cb559-25"><a href="Ch06.html#cb559-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_r1250.tif&quot;</span>)</span>
<span id="cb559-26"><a href="Ch06.html#cb559-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_518&quot;</span></span>
<span id="cb559-27"><a href="Ch06.html#cb559-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb559-28"><a href="Ch06.html#cb559-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb559-29"><a href="Ch06.html#cb559-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_r1250.tif&quot;</span>,</span>
<span id="cb559-30"><a href="Ch06.html#cb559-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb559-31"><a href="Ch06.html#cb559-31" tabindex="-1"></a></span>
<span id="cb559-32"><a href="Ch06.html#cb559-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb559-33"><a href="Ch06.html#cb559-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb559-34"><a href="Ch06.html#cb559-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb559-35"><a href="Ch06.html#cb559-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb559-36"><a href="Ch06.html#cb559-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb559-37"><a href="Ch06.html#cb559-37" tabindex="-1"></a></span>
<span id="cb559-38"><a href="Ch06.html#cb559-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Sand_r1250.tif&quot;</span></span>
<span id="cb559-39"><a href="Ch06.html#cb559-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb559-40"><a href="Ch06.html#cb559-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb559-41"><a href="Ch06.html#cb559-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb559-42"><a href="Ch06.html#cb559-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb559-43"><a href="Ch06.html#cb559-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb559-44"><a href="Ch06.html#cb559-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb559-45"><a href="Ch06.html#cb559-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb559-46"><a href="Ch06.html#cb559-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb559-47"><a href="Ch06.html#cb559-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb559-48"><a href="Ch06.html#cb559-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb559-49"><a href="Ch06.html#cb559-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb559-50"><a href="Ch06.html#cb559-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_518.png" width="100%" /></p>
</div>
<div id="ch06.519" class="section level2 hasAnchor" number="6.519">
<h2><span class="header-section-number">6.519</span> SoilTexture_Sand_r3000<a href="Ch06.html#ch06.519" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Sand_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_519</code></p>
<p><strong>English name:</strong> Fractional cover of Sand Soils within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “smilts” platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.516">SoilTexture_Sand_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="Ch06.html#cb560-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb560-2"><a href="Ch06.html#cb560-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb560-3"><a href="Ch06.html#cb560-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb560-4"><a href="Ch06.html#cb560-4" tabindex="-1"></a></span>
<span id="cb560-5"><a href="Ch06.html#cb560-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb560-6"><a href="Ch06.html#cb560-6" tabindex="-1"></a></span>
<span id="cb560-7"><a href="Ch06.html#cb560-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb560-8"><a href="Ch06.html#cb560-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb560-9"><a href="Ch06.html#cb560-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb560-10"><a href="Ch06.html#cb560-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb560-11"><a href="Ch06.html#cb560-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb560-12"><a href="Ch06.html#cb560-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_cell.tif&quot;</span>),</span>
<span id="cb560-13"><a href="Ch06.html#cb560-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Sand&quot;</span>),</span>
<span id="cb560-14"><a href="Ch06.html#cb560-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb560-15"><a href="Ch06.html#cb560-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb560-16"><a href="Ch06.html#cb560-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb560-17"><a href="Ch06.html#cb560-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb560-18"><a href="Ch06.html#cb560-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb560-19"><a href="Ch06.html#cb560-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb560-20"><a href="Ch06.html#cb560-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb560-21"><a href="Ch06.html#cb560-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb560-22"><a href="Ch06.html#cb560-22" tabindex="-1"></a></span>
<span id="cb560-23"><a href="Ch06.html#cb560-23" tabindex="-1"></a><span class="co"># SoilTexture_Sand_r3000.tif    egv_519</span></span>
<span id="cb560-24"><a href="Ch06.html#cb560-24" tabindex="-1"></a></span>
<span id="cb560-25"><a href="Ch06.html#cb560-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_r3000.tif&quot;</span>)</span>
<span id="cb560-26"><a href="Ch06.html#cb560-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_519&quot;</span></span>
<span id="cb560-27"><a href="Ch06.html#cb560-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb560-28"><a href="Ch06.html#cb560-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb560-29"><a href="Ch06.html#cb560-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_r3000.tif&quot;</span>,</span>
<span id="cb560-30"><a href="Ch06.html#cb560-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb560-31"><a href="Ch06.html#cb560-31" tabindex="-1"></a></span>
<span id="cb560-32"><a href="Ch06.html#cb560-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb560-33"><a href="Ch06.html#cb560-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb560-34"><a href="Ch06.html#cb560-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb560-35"><a href="Ch06.html#cb560-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb560-36"><a href="Ch06.html#cb560-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb560-37"><a href="Ch06.html#cb560-37" tabindex="-1"></a></span>
<span id="cb560-38"><a href="Ch06.html#cb560-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Sand_r3000.tif&quot;</span></span>
<span id="cb560-39"><a href="Ch06.html#cb560-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb560-40"><a href="Ch06.html#cb560-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb560-41"><a href="Ch06.html#cb560-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb560-42"><a href="Ch06.html#cb560-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb560-43"><a href="Ch06.html#cb560-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb560-44"><a href="Ch06.html#cb560-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb560-45"><a href="Ch06.html#cb560-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb560-46"><a href="Ch06.html#cb560-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb560-47"><a href="Ch06.html#cb560-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb560-48"><a href="Ch06.html#cb560-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb560-49"><a href="Ch06.html#cb560-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb560-50"><a href="Ch06.html#cb560-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_519.png" width="100%" /></p>
</div>
<div id="ch06.520" class="section level2 hasAnchor" number="6.520">
<h2><span class="header-section-number">6.520</span> SoilTexture_Sand_r10000<a href="Ch06.html#ch06.520" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Sand_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_520</code></p>
<p><strong>English name:</strong> Fractional cover of Sand Soils within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “smilts” platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.516">SoilTexture_Sand_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="Ch06.html#cb561-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb561-2"><a href="Ch06.html#cb561-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb561-3"><a href="Ch06.html#cb561-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb561-4"><a href="Ch06.html#cb561-4" tabindex="-1"></a></span>
<span id="cb561-5"><a href="Ch06.html#cb561-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb561-6"><a href="Ch06.html#cb561-6" tabindex="-1"></a></span>
<span id="cb561-7"><a href="Ch06.html#cb561-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb561-8"><a href="Ch06.html#cb561-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb561-9"><a href="Ch06.html#cb561-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb561-10"><a href="Ch06.html#cb561-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb561-11"><a href="Ch06.html#cb561-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb561-12"><a href="Ch06.html#cb561-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_cell.tif&quot;</span>),</span>
<span id="cb561-13"><a href="Ch06.html#cb561-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Sand&quot;</span>),</span>
<span id="cb561-14"><a href="Ch06.html#cb561-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb561-15"><a href="Ch06.html#cb561-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb561-16"><a href="Ch06.html#cb561-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb561-17"><a href="Ch06.html#cb561-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb561-18"><a href="Ch06.html#cb561-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb561-19"><a href="Ch06.html#cb561-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb561-20"><a href="Ch06.html#cb561-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb561-21"><a href="Ch06.html#cb561-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb561-22"><a href="Ch06.html#cb561-22" tabindex="-1"></a></span>
<span id="cb561-23"><a href="Ch06.html#cb561-23" tabindex="-1"></a><span class="co"># SoilTexture_Sand_r10000.tif   egv_520</span></span>
<span id="cb561-24"><a href="Ch06.html#cb561-24" tabindex="-1"></a></span>
<span id="cb561-25"><a href="Ch06.html#cb561-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_r10000.tif&quot;</span>)</span>
<span id="cb561-26"><a href="Ch06.html#cb561-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_520&quot;</span></span>
<span id="cb561-27"><a href="Ch06.html#cb561-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb561-28"><a href="Ch06.html#cb561-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb561-29"><a href="Ch06.html#cb561-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Sand_r10000.tif&quot;</span>,</span>
<span id="cb561-30"><a href="Ch06.html#cb561-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb561-31"><a href="Ch06.html#cb561-31" tabindex="-1"></a></span>
<span id="cb561-32"><a href="Ch06.html#cb561-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb561-33"><a href="Ch06.html#cb561-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb561-34"><a href="Ch06.html#cb561-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb561-35"><a href="Ch06.html#cb561-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb561-36"><a href="Ch06.html#cb561-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb561-37"><a href="Ch06.html#cb561-37" tabindex="-1"></a></span>
<span id="cb561-38"><a href="Ch06.html#cb561-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Sand_r10000.tif&quot;</span></span>
<span id="cb561-39"><a href="Ch06.html#cb561-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb561-40"><a href="Ch06.html#cb561-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb561-41"><a href="Ch06.html#cb561-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb561-42"><a href="Ch06.html#cb561-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb561-43"><a href="Ch06.html#cb561-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb561-44"><a href="Ch06.html#cb561-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb561-45"><a href="Ch06.html#cb561-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb561-46"><a href="Ch06.html#cb561-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb561-47"><a href="Ch06.html#cb561-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb561-48"><a href="Ch06.html#cb561-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb561-49"><a href="Ch06.html#cb561-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb561-50"><a href="Ch06.html#cb561-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_520.png" width="100%" /></p>
</div>
<div id="ch06.521" class="section level2 hasAnchor" number="6.521">
<h2><span class="header-section-number">6.521</span> SoilTexture_Silt_cell<a href="Ch06.html#ch06.521" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Silt_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_521</code></p>
<p><strong>English name:</strong> Fractional cover of Silt Soils within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “smilšmāls un mālsmilts” platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.02">Soil texture product</a>. First, layer is
reclassified so that class of interest is 1, other classes are 0. Then processed
with <code>egvtools::input2egv()</code> with <code>fill gaps = TRUE</code> performing inverse
distance weighted (power = 2) filling of gaps at the border.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="Ch06.html#cb562-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb562-2"><a href="Ch06.html#cb562-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb562-3"><a href="Ch06.html#cb562-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb562-4"><a href="Ch06.html#cb562-4" tabindex="-1"></a></span>
<span id="cb562-5"><a href="Ch06.html#cb562-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb562-6"><a href="Ch06.html#cb562-6" tabindex="-1"></a>template10<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV10m_10km.tif&quot;</span>)</span>
<span id="cb562-7"><a href="Ch06.html#cb562-7" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb562-8"><a href="Ch06.html#cb562-8" tabindex="-1"></a></span>
<span id="cb562-9"><a href="Ch06.html#cb562-9" tabindex="-1"></a><span class="co"># input ----</span></span>
<span id="cb562-10"><a href="Ch06.html#cb562-10" tabindex="-1"></a>combtext<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/SoilTXT_combined.tif&quot;</span>)</span>
<span id="cb562-11"><a href="Ch06.html#cb562-11" tabindex="-1"></a></span>
<span id="cb562-12"><a href="Ch06.html#cb562-12" tabindex="-1"></a><span class="co"># EGVs cell ----</span></span>
<span id="cb562-13"><a href="Ch06.html#cb562-13" tabindex="-1"></a></span>
<span id="cb562-14"><a href="Ch06.html#cb562-14" tabindex="-1"></a><span class="co"># SoilTexture_Silt_cell.tif egv_521</span></span>
<span id="cb562-15"><a href="Ch06.html#cb562-15" tabindex="-1"></a></span>
<span id="cb562-16"><a href="Ch06.html#cb562-16" tabindex="-1"></a>silt10<span class="ot">=</span><span class="fu">ifel</span>(combtext<span class="sc">==</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb562-17"><a href="Ch06.html#cb562-17" tabindex="-1"></a></span>
<span id="cb562-18"><a href="Ch06.html#cb562-18" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span>silt10,</span>
<span id="cb562-19"><a href="Ch06.html#cb562-19" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb562-20"><a href="Ch06.html#cb562-20" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb562-21"><a href="Ch06.html#cb562-21" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb562-22"><a href="Ch06.html#cb562-22" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb562-23"><a href="Ch06.html#cb562-23" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb562-24"><a href="Ch06.html#cb562-24" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;SoilTexture_Silt_cell.tif&quot;</span>,</span>
<span id="cb562-25"><a href="Ch06.html#cb562-25" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_521&quot;</span>,</span>
<span id="cb562-26"><a href="Ch06.html#cb562-26" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>)</span>
<span id="cb562-27"><a href="Ch06.html#cb562-27" tabindex="-1"></a></span>
<span id="cb562-28"><a href="Ch06.html#cb562-28" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb562-29"><a href="Ch06.html#cb562-29" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb562-30"><a href="Ch06.html#cb562-30" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb562-31"><a href="Ch06.html#cb562-31" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb562-32"><a href="Ch06.html#cb562-32" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb562-33"><a href="Ch06.html#cb562-33" tabindex="-1"></a></span>
<span id="cb562-34"><a href="Ch06.html#cb562-34" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Silt_cell.tif&quot;</span></span>
<span id="cb562-35"><a href="Ch06.html#cb562-35" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb562-36"><a href="Ch06.html#cb562-36" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb562-37"><a href="Ch06.html#cb562-37" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb562-38"><a href="Ch06.html#cb562-38" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb562-39"><a href="Ch06.html#cb562-39" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb562-40"><a href="Ch06.html#cb562-40" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb562-41"><a href="Ch06.html#cb562-41" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb562-42"><a href="Ch06.html#cb562-42" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb562-43"><a href="Ch06.html#cb562-43" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb562-44"><a href="Ch06.html#cb562-44" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb562-45"><a href="Ch06.html#cb562-45" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb562-46"><a href="Ch06.html#cb562-46" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_521.png" width="100%" /></p>
</div>
<div id="ch06.522" class="section level2 hasAnchor" number="6.522">
<h2><span class="header-section-number">6.522</span> SoilTexture_Silt_r500<a href="Ch06.html#ch06.522" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Silt_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_522</code></p>
<p><strong>English name:</strong> Fractional cover of Silt Soils within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “smilšmāls un mālsmilts” platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.521">SoilTexture_Silt_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="Ch06.html#cb563-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb563-2"><a href="Ch06.html#cb563-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb563-3"><a href="Ch06.html#cb563-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb563-4"><a href="Ch06.html#cb563-4" tabindex="-1"></a></span>
<span id="cb563-5"><a href="Ch06.html#cb563-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb563-6"><a href="Ch06.html#cb563-6" tabindex="-1"></a></span>
<span id="cb563-7"><a href="Ch06.html#cb563-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb563-8"><a href="Ch06.html#cb563-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb563-9"><a href="Ch06.html#cb563-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb563-10"><a href="Ch06.html#cb563-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb563-11"><a href="Ch06.html#cb563-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb563-12"><a href="Ch06.html#cb563-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_cell.tif&quot;</span>),</span>
<span id="cb563-13"><a href="Ch06.html#cb563-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Silt&quot;</span>),</span>
<span id="cb563-14"><a href="Ch06.html#cb563-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb563-15"><a href="Ch06.html#cb563-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb563-16"><a href="Ch06.html#cb563-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb563-17"><a href="Ch06.html#cb563-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb563-18"><a href="Ch06.html#cb563-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb563-19"><a href="Ch06.html#cb563-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb563-20"><a href="Ch06.html#cb563-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb563-21"><a href="Ch06.html#cb563-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb563-22"><a href="Ch06.html#cb563-22" tabindex="-1"></a></span>
<span id="cb563-23"><a href="Ch06.html#cb563-23" tabindex="-1"></a><span class="co"># SoilTexture_Silt_r500.tif egv_522</span></span>
<span id="cb563-24"><a href="Ch06.html#cb563-24" tabindex="-1"></a></span>
<span id="cb563-25"><a href="Ch06.html#cb563-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_r500.tif&quot;</span>)</span>
<span id="cb563-26"><a href="Ch06.html#cb563-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_522&quot;</span></span>
<span id="cb563-27"><a href="Ch06.html#cb563-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb563-28"><a href="Ch06.html#cb563-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb563-29"><a href="Ch06.html#cb563-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_r500.tif&quot;</span>,</span>
<span id="cb563-30"><a href="Ch06.html#cb563-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb563-31"><a href="Ch06.html#cb563-31" tabindex="-1"></a></span>
<span id="cb563-32"><a href="Ch06.html#cb563-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb563-33"><a href="Ch06.html#cb563-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb563-34"><a href="Ch06.html#cb563-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb563-35"><a href="Ch06.html#cb563-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb563-36"><a href="Ch06.html#cb563-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb563-37"><a href="Ch06.html#cb563-37" tabindex="-1"></a></span>
<span id="cb563-38"><a href="Ch06.html#cb563-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Silt_r500.tif&quot;</span></span>
<span id="cb563-39"><a href="Ch06.html#cb563-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb563-40"><a href="Ch06.html#cb563-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb563-41"><a href="Ch06.html#cb563-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb563-42"><a href="Ch06.html#cb563-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb563-43"><a href="Ch06.html#cb563-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb563-44"><a href="Ch06.html#cb563-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb563-45"><a href="Ch06.html#cb563-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb563-46"><a href="Ch06.html#cb563-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb563-47"><a href="Ch06.html#cb563-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb563-48"><a href="Ch06.html#cb563-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb563-49"><a href="Ch06.html#cb563-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb563-50"><a href="Ch06.html#cb563-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_522.png" width="100%" /></p>
</div>
<div id="ch06.523" class="section level2 hasAnchor" number="6.523">
<h2><span class="header-section-number">6.523</span> SoilTexture_Silt_r1250<a href="Ch06.html#ch06.523" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Silt_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_523</code></p>
<p><strong>English name:</strong> Fractional cover of Silt Soils within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “smilšmāls un mālsmilts” platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.521">SoilTexture_Silt_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="Ch06.html#cb564-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb564-2"><a href="Ch06.html#cb564-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb564-3"><a href="Ch06.html#cb564-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb564-4"><a href="Ch06.html#cb564-4" tabindex="-1"></a></span>
<span id="cb564-5"><a href="Ch06.html#cb564-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb564-6"><a href="Ch06.html#cb564-6" tabindex="-1"></a></span>
<span id="cb564-7"><a href="Ch06.html#cb564-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb564-8"><a href="Ch06.html#cb564-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb564-9"><a href="Ch06.html#cb564-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb564-10"><a href="Ch06.html#cb564-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb564-11"><a href="Ch06.html#cb564-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb564-12"><a href="Ch06.html#cb564-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_cell.tif&quot;</span>),</span>
<span id="cb564-13"><a href="Ch06.html#cb564-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Silt&quot;</span>),</span>
<span id="cb564-14"><a href="Ch06.html#cb564-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb564-15"><a href="Ch06.html#cb564-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb564-16"><a href="Ch06.html#cb564-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb564-17"><a href="Ch06.html#cb564-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb564-18"><a href="Ch06.html#cb564-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb564-19"><a href="Ch06.html#cb564-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb564-20"><a href="Ch06.html#cb564-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb564-21"><a href="Ch06.html#cb564-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb564-22"><a href="Ch06.html#cb564-22" tabindex="-1"></a></span>
<span id="cb564-23"><a href="Ch06.html#cb564-23" tabindex="-1"></a><span class="co"># SoilTexture_Silt_r1250.tif    egv_523</span></span>
<span id="cb564-24"><a href="Ch06.html#cb564-24" tabindex="-1"></a></span>
<span id="cb564-25"><a href="Ch06.html#cb564-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_r1250.tif&quot;</span>)</span>
<span id="cb564-26"><a href="Ch06.html#cb564-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_523&quot;</span></span>
<span id="cb564-27"><a href="Ch06.html#cb564-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb564-28"><a href="Ch06.html#cb564-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb564-29"><a href="Ch06.html#cb564-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_r1250.tif&quot;</span>,</span>
<span id="cb564-30"><a href="Ch06.html#cb564-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb564-31"><a href="Ch06.html#cb564-31" tabindex="-1"></a></span>
<span id="cb564-32"><a href="Ch06.html#cb564-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb564-33"><a href="Ch06.html#cb564-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb564-34"><a href="Ch06.html#cb564-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb564-35"><a href="Ch06.html#cb564-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb564-36"><a href="Ch06.html#cb564-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb564-37"><a href="Ch06.html#cb564-37" tabindex="-1"></a></span>
<span id="cb564-38"><a href="Ch06.html#cb564-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Silt_r1250.tif&quot;</span></span>
<span id="cb564-39"><a href="Ch06.html#cb564-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb564-40"><a href="Ch06.html#cb564-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb564-41"><a href="Ch06.html#cb564-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb564-42"><a href="Ch06.html#cb564-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb564-43"><a href="Ch06.html#cb564-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb564-44"><a href="Ch06.html#cb564-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb564-45"><a href="Ch06.html#cb564-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb564-46"><a href="Ch06.html#cb564-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb564-47"><a href="Ch06.html#cb564-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb564-48"><a href="Ch06.html#cb564-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb564-49"><a href="Ch06.html#cb564-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb564-50"><a href="Ch06.html#cb564-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_523.png" width="100%" /></p>
</div>
<div id="ch06.524" class="section level2 hasAnchor" number="6.524">
<h2><span class="header-section-number">6.524</span> SoilTexture_Silt_r3000<a href="Ch06.html#ch06.524" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Silt_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_524</code></p>
<p><strong>English name:</strong> Fractional cover of Silt Soils within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “smilšmāls un mālsmilts” platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.521">SoilTexture_Silt_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="Ch06.html#cb565-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb565-2"><a href="Ch06.html#cb565-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb565-3"><a href="Ch06.html#cb565-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb565-4"><a href="Ch06.html#cb565-4" tabindex="-1"></a></span>
<span id="cb565-5"><a href="Ch06.html#cb565-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb565-6"><a href="Ch06.html#cb565-6" tabindex="-1"></a></span>
<span id="cb565-7"><a href="Ch06.html#cb565-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb565-8"><a href="Ch06.html#cb565-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb565-9"><a href="Ch06.html#cb565-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb565-10"><a href="Ch06.html#cb565-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb565-11"><a href="Ch06.html#cb565-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb565-12"><a href="Ch06.html#cb565-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_cell.tif&quot;</span>),</span>
<span id="cb565-13"><a href="Ch06.html#cb565-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Silt&quot;</span>),</span>
<span id="cb565-14"><a href="Ch06.html#cb565-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb565-15"><a href="Ch06.html#cb565-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb565-16"><a href="Ch06.html#cb565-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb565-17"><a href="Ch06.html#cb565-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb565-18"><a href="Ch06.html#cb565-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb565-19"><a href="Ch06.html#cb565-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb565-20"><a href="Ch06.html#cb565-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb565-21"><a href="Ch06.html#cb565-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb565-22"><a href="Ch06.html#cb565-22" tabindex="-1"></a></span>
<span id="cb565-23"><a href="Ch06.html#cb565-23" tabindex="-1"></a></span>
<span id="cb565-24"><a href="Ch06.html#cb565-24" tabindex="-1"></a><span class="co"># SoilTexture_Silt_r3000.tif    egv_524</span></span>
<span id="cb565-25"><a href="Ch06.html#cb565-25" tabindex="-1"></a></span>
<span id="cb565-26"><a href="Ch06.html#cb565-26" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_r3000.tif&quot;</span>)</span>
<span id="cb565-27"><a href="Ch06.html#cb565-27" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_524&quot;</span></span>
<span id="cb565-28"><a href="Ch06.html#cb565-28" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb565-29"><a href="Ch06.html#cb565-29" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb565-30"><a href="Ch06.html#cb565-30" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_r3000.tif&quot;</span>,</span>
<span id="cb565-31"><a href="Ch06.html#cb565-31" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb565-32"><a href="Ch06.html#cb565-32" tabindex="-1"></a></span>
<span id="cb565-33"><a href="Ch06.html#cb565-33" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb565-34"><a href="Ch06.html#cb565-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb565-35"><a href="Ch06.html#cb565-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb565-36"><a href="Ch06.html#cb565-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb565-37"><a href="Ch06.html#cb565-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb565-38"><a href="Ch06.html#cb565-38" tabindex="-1"></a></span>
<span id="cb565-39"><a href="Ch06.html#cb565-39" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Silt_r3000.tif&quot;</span></span>
<span id="cb565-40"><a href="Ch06.html#cb565-40" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb565-41"><a href="Ch06.html#cb565-41" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb565-42"><a href="Ch06.html#cb565-42" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb565-43"><a href="Ch06.html#cb565-43" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb565-44"><a href="Ch06.html#cb565-44" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb565-45"><a href="Ch06.html#cb565-45" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb565-46"><a href="Ch06.html#cb565-46" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb565-47"><a href="Ch06.html#cb565-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb565-48"><a href="Ch06.html#cb565-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb565-49"><a href="Ch06.html#cb565-49" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb565-50"><a href="Ch06.html#cb565-50" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb565-51"><a href="Ch06.html#cb565-51" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_524.png" width="100%" /></p>
</div>
<div id="ch06.525" class="section level2 hasAnchor" number="6.525">
<h2><span class="header-section-number">6.525</span> SoilTexture_Silt_r10000<a href="Ch06.html#ch06.525" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>SoilTexture_Silt_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_525</code></p>
<p><strong>English name:</strong> Fractional cover of Silt Soils within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Augsnes granulometriskās klases “smilšmāls un mālsmilts” platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch06.html#ch06.521">SoilTexture_Silt_cell</a>. First processed
with <code>egvtools::radius_function()</code>, then rewritten to ensure layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="Ch06.html#cb566-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb566-2"><a href="Ch06.html#cb566-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb566-3"><a href="Ch06.html#cb566-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb566-4"><a href="Ch06.html#cb566-4" tabindex="-1"></a></span>
<span id="cb566-5"><a href="Ch06.html#cb566-5" tabindex="-1"></a><span class="co"># EGVs radii ----</span></span>
<span id="cb566-6"><a href="Ch06.html#cb566-6" tabindex="-1"></a></span>
<span id="cb566-7"><a href="Ch06.html#cb566-7" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb566-8"><a href="Ch06.html#cb566-8" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb566-9"><a href="Ch06.html#cb566-9" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb566-10"><a href="Ch06.html#cb566-10" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb566-11"><a href="Ch06.html#cb566-11" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb566-12"><a href="Ch06.html#cb566-12" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_cell.tif&quot;</span>),</span>
<span id="cb566-13"><a href="Ch06.html#cb566-13" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;SoilTexture_Silt&quot;</span>),</span>
<span id="cb566-14"><a href="Ch06.html#cb566-14" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb566-15"><a href="Ch06.html#cb566-15" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb566-16"><a href="Ch06.html#cb566-16" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb566-17"><a href="Ch06.html#cb566-17" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb566-18"><a href="Ch06.html#cb566-18" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb566-19"><a href="Ch06.html#cb566-19" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb566-20"><a href="Ch06.html#cb566-20" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb566-21"><a href="Ch06.html#cb566-21" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb566-22"><a href="Ch06.html#cb566-22" tabindex="-1"></a></span>
<span id="cb566-23"><a href="Ch06.html#cb566-23" tabindex="-1"></a><span class="co"># SoilTexture_Silt_r10000.tif   egv_525</span></span>
<span id="cb566-24"><a href="Ch06.html#cb566-24" tabindex="-1"></a></span>
<span id="cb566-25"><a href="Ch06.html#cb566-25" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_r10000.tif&quot;</span>)</span>
<span id="cb566-26"><a href="Ch06.html#cb566-26" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_525&quot;</span></span>
<span id="cb566-27"><a href="Ch06.html#cb566-27" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb566-28"><a href="Ch06.html#cb566-28" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb566-29"><a href="Ch06.html#cb566-29" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/SoilTexture_Silt_r10000.tif&quot;</span>,</span>
<span id="cb566-30"><a href="Ch06.html#cb566-30" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb566-31"><a href="Ch06.html#cb566-31" tabindex="-1"></a></span>
<span id="cb566-32"><a href="Ch06.html#cb566-32" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb566-33"><a href="Ch06.html#cb566-33" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb566-34"><a href="Ch06.html#cb566-34" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb566-35"><a href="Ch06.html#cb566-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb566-36"><a href="Ch06.html#cb566-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb566-37"><a href="Ch06.html#cb566-37" tabindex="-1"></a></span>
<span id="cb566-38"><a href="Ch06.html#cb566-38" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;SoilTexture_Silt_r10000.tif&quot;</span></span>
<span id="cb566-39"><a href="Ch06.html#cb566-39" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb566-40"><a href="Ch06.html#cb566-40" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb566-41"><a href="Ch06.html#cb566-41" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb566-42"><a href="Ch06.html#cb566-42" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb566-43"><a href="Ch06.html#cb566-43" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb566-44"><a href="Ch06.html#cb566-44" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb566-45"><a href="Ch06.html#cb566-45" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb566-46"><a href="Ch06.html#cb566-46" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb566-47"><a href="Ch06.html#cb566-47" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb566-48"><a href="Ch06.html#cb566-48" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb566-49"><a href="Ch06.html#cb566-49" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb566-50"><a href="Ch06.html#cb566-50" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_525.png" width="100%" /></p>
</div>
<div id="ch06.526" class="section level2 hasAnchor" number="6.526">
<h2><span class="header-section-number">6.526</span> Terrain_ASL-average_cell<a href="Ch06.html#ch06.526" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_ASL-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_526</code></p>
<p><strong>English name:</strong> Average value of height Above Sea Level (m) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Augstums virs jūras līmeņa (m) analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch04.html#Ch04.15">Digital elevation/terrain models</a>. Processed
with <code>egvtools::input2egv()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="Ch06.html#cb567-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb567-2"><a href="Ch06.html#cb567-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb567-3"><a href="Ch06.html#cb567-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb567-4"><a href="Ch06.html#cb567-4" tabindex="-1"></a></span>
<span id="cb567-5"><a href="Ch06.html#cb567-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb567-6"><a href="Ch06.html#cb567-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb567-7"><a href="Ch06.html#cb567-7" tabindex="-1"></a></span>
<span id="cb567-8"><a href="Ch06.html#cb567-8" tabindex="-1"></a><span class="co"># Terrain_ASL-average_cell.tif  egv_526</span></span>
<span id="cb567-9"><a href="Ch06.html#cb567-9" tabindex="-1"></a></span>
<span id="cb567-10"><a href="Ch06.html#cb567-10" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./Geodata/2024/DEM/mozDEM_10m.tif&quot;</span>,</span>
<span id="cb567-11"><a href="Ch06.html#cb567-11" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb567-12"><a href="Ch06.html#cb567-12" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb567-13"><a href="Ch06.html#cb567-13" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb567-14"><a href="Ch06.html#cb567-14" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb567-15"><a href="Ch06.html#cb567-15" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb567-16"><a href="Ch06.html#cb567-16" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;Terrain_ASL-average_cell.tif&quot;</span>,</span>
<span id="cb567-17"><a href="Ch06.html#cb567-17" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_526&quot;</span>,</span>
<span id="cb567-18"><a href="Ch06.html#cb567-18" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb567-19"><a href="Ch06.html#cb567-19" tabindex="-1"></a>          <span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb567-20"><a href="Ch06.html#cb567-20" tabindex="-1"></a></span>
<span id="cb567-21"><a href="Ch06.html#cb567-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb567-22"><a href="Ch06.html#cb567-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb567-23"><a href="Ch06.html#cb567-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb567-24"><a href="Ch06.html#cb567-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb567-25"><a href="Ch06.html#cb567-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb567-26"><a href="Ch06.html#cb567-26" tabindex="-1"></a></span>
<span id="cb567-27"><a href="Ch06.html#cb567-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_ASL-average_cell.tif&quot;</span></span>
<span id="cb567-28"><a href="Ch06.html#cb567-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb567-29"><a href="Ch06.html#cb567-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb567-30"><a href="Ch06.html#cb567-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb567-31"><a href="Ch06.html#cb567-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb567-32"><a href="Ch06.html#cb567-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb567-33"><a href="Ch06.html#cb567-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb567-34"><a href="Ch06.html#cb567-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb567-35"><a href="Ch06.html#cb567-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb567-36"><a href="Ch06.html#cb567-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb567-37"><a href="Ch06.html#cb567-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb567-38"><a href="Ch06.html#cb567-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb567-39"><a href="Ch06.html#cb567-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_526.png" width="100%" /></p>
</div>
<div id="ch06.527" class="section level2 hasAnchor" number="6.527">
<h2><span class="header-section-number">6.527</span> Terrain_Aspect-average_cell<a href="Ch06.html#ch06.527" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_Aspect-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_527</code></p>
<p><strong>English name:</strong> Average value of Terrain Aspect (degree) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Nogāzes vidējais vērsuma virziens analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. Processed
with <code>egvtools::input2egv()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="Ch06.html#cb568-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb568-2"><a href="Ch06.html#cb568-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb568-3"><a href="Ch06.html#cb568-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb568-4"><a href="Ch06.html#cb568-4" tabindex="-1"></a></span>
<span id="cb568-5"><a href="Ch06.html#cb568-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb568-6"><a href="Ch06.html#cb568-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb568-7"><a href="Ch06.html#cb568-7" tabindex="-1"></a></span>
<span id="cb568-8"><a href="Ch06.html#cb568-8" tabindex="-1"></a></span>
<span id="cb568-9"><a href="Ch06.html#cb568-9" tabindex="-1"></a><span class="co"># Terrain_Aspect-average_cell.tif   egv_527</span></span>
<span id="cb568-10"><a href="Ch06.html#cb568-10" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./RasterGrids_10m/2024/Terrain_Aspect_udeni2_10m.tif&quot;</span>,</span>
<span id="cb568-11"><a href="Ch06.html#cb568-11" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb568-12"><a href="Ch06.html#cb568-12" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb568-13"><a href="Ch06.html#cb568-13" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb568-14"><a href="Ch06.html#cb568-14" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb568-15"><a href="Ch06.html#cb568-15" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb568-16"><a href="Ch06.html#cb568-16" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;Terrain_Aspect-average_cell.tif&quot;</span>,</span>
<span id="cb568-17"><a href="Ch06.html#cb568-17" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_527&quot;</span>,</span>
<span id="cb568-18"><a href="Ch06.html#cb568-18" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb568-19"><a href="Ch06.html#cb568-19" tabindex="-1"></a>          <span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb568-20"><a href="Ch06.html#cb568-20" tabindex="-1"></a></span>
<span id="cb568-21"><a href="Ch06.html#cb568-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb568-22"><a href="Ch06.html#cb568-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb568-23"><a href="Ch06.html#cb568-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb568-24"><a href="Ch06.html#cb568-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb568-25"><a href="Ch06.html#cb568-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb568-26"><a href="Ch06.html#cb568-26" tabindex="-1"></a></span>
<span id="cb568-27"><a href="Ch06.html#cb568-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_Aspect-average_cell.tif&quot;</span></span>
<span id="cb568-28"><a href="Ch06.html#cb568-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb568-29"><a href="Ch06.html#cb568-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb568-30"><a href="Ch06.html#cb568-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb568-31"><a href="Ch06.html#cb568-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb568-32"><a href="Ch06.html#cb568-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb568-33"><a href="Ch06.html#cb568-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb568-34"><a href="Ch06.html#cb568-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb568-35"><a href="Ch06.html#cb568-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb568-36"><a href="Ch06.html#cb568-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb568-37"><a href="Ch06.html#cb568-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb568-38"><a href="Ch06.html#cb568-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb568-39"><a href="Ch06.html#cb568-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_527.png" width="100%" /></p>
</div>
<div id="ch06.528" class="section level2 hasAnchor" number="6.528">
<h2><span class="header-section-number">6.528</span> Terrain_Aspect-iqr_cell<a href="Ch06.html#ch06.528" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_Aspect-iqr_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_528</code></p>
<p><strong>English name:</strong> Variability of Terrain Aspect (degree) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Nogāzes vērsuma variabilitāte analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. First Q1 and then Q3
is calculated for every cell with <code>egvtools::input2egv()</code>. Finally, subtracting
Q1 from Q3 and writing final raster with specified layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="Ch06.html#cb569-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb569-2"><a href="Ch06.html#cb569-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb569-3"><a href="Ch06.html#cb569-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb569-4"><a href="Ch06.html#cb569-4" tabindex="-1"></a></span>
<span id="cb569-5"><a href="Ch06.html#cb569-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb569-6"><a href="Ch06.html#cb569-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb569-7"><a href="Ch06.html#cb569-7" tabindex="-1"></a></span>
<span id="cb569-8"><a href="Ch06.html#cb569-8" tabindex="-1"></a></span>
<span id="cb569-9"><a href="Ch06.html#cb569-9" tabindex="-1"></a><span class="co"># Terrain_Aspect-iqr_cell.tif   egv_528</span></span>
<span id="cb569-10"><a href="Ch06.html#cb569-10" tabindex="-1"></a>p25rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./RasterGrids_10m/2024/Terrain_Aspect_udeni2_10m.tif&quot;</span>,</span>
<span id="cb569-11"><a href="Ch06.html#cb569-11" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb569-12"><a href="Ch06.html#cb569-12" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q1&quot;</span>,</span>
<span id="cb569-13"><a href="Ch06.html#cb569-13" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb569-14"><a href="Ch06.html#cb569-14" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb569-15"><a href="Ch06.html#cb569-15" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p25.tif&quot;</span>,</span>
<span id="cb569-16"><a href="Ch06.html#cb569-16" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_528&quot;</span>,</span>
<span id="cb569-17"><a href="Ch06.html#cb569-17" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>)</span>
<span id="cb569-18"><a href="Ch06.html#cb569-18" tabindex="-1"></a>p25rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb569-19"><a href="Ch06.html#cb569-19" tabindex="-1"></a></span>
<span id="cb569-20"><a href="Ch06.html#cb569-20" tabindex="-1"></a></span>
<span id="cb569-21"><a href="Ch06.html#cb569-21" tabindex="-1"></a>p75rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./RasterGrids_10m/2024/Terrain_Aspect_udeni2_10m.tif&quot;</span>,</span>
<span id="cb569-22"><a href="Ch06.html#cb569-22" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb569-23"><a href="Ch06.html#cb569-23" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q3&quot;</span>,</span>
<span id="cb569-24"><a href="Ch06.html#cb569-24" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb569-25"><a href="Ch06.html#cb569-25" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb569-26"><a href="Ch06.html#cb569-26" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p75.tif&quot;</span>,</span>
<span id="cb569-27"><a href="Ch06.html#cb569-27" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_528&quot;</span>,</span>
<span id="cb569-28"><a href="Ch06.html#cb569-28" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>)</span>
<span id="cb569-29"><a href="Ch06.html#cb569-29" tabindex="-1"></a>p75rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb569-30"><a href="Ch06.html#cb569-30" tabindex="-1"></a></span>
<span id="cb569-31"><a href="Ch06.html#cb569-31" tabindex="-1"></a>iqr_rez<span class="ot">=</span>p75rez_r<span class="sc">-</span>p25rez_r</span>
<span id="cb569-32"><a href="Ch06.html#cb569-32" tabindex="-1"></a>iqr_rez</span>
<span id="cb569-33"><a href="Ch06.html#cb569-33" tabindex="-1"></a><span class="fu">plot</span>(iqr_rez)</span>
<span id="cb569-34"><a href="Ch06.html#cb569-34" tabindex="-1"></a></span>
<span id="cb569-35"><a href="Ch06.html#cb569-35" tabindex="-1"></a><span class="fu">writeRaster</span>(iqr_rez,</span>
<span id="cb569-36"><a href="Ch06.html#cb569-36" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_Aspect-iqr_cell.tif&quot;</span>,</span>
<span id="cb569-37"><a href="Ch06.html#cb569-37" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb569-38"><a href="Ch06.html#cb569-38" tabindex="-1"></a></span>
<span id="cb569-39"><a href="Ch06.html#cb569-39" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb569-40"><a href="Ch06.html#cb569-40" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb569-41"><a href="Ch06.html#cb569-41" tabindex="-1"></a></span>
<span id="cb569-42"><a href="Ch06.html#cb569-42" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb569-43"><a href="Ch06.html#cb569-43" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb569-44"><a href="Ch06.html#cb569-44" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb569-45"><a href="Ch06.html#cb569-45" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb569-46"><a href="Ch06.html#cb569-46" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb569-47"><a href="Ch06.html#cb569-47" tabindex="-1"></a></span>
<span id="cb569-48"><a href="Ch06.html#cb569-48" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_Aspect-iqr_cell.tif&quot;</span></span>
<span id="cb569-49"><a href="Ch06.html#cb569-49" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb569-50"><a href="Ch06.html#cb569-50" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb569-51"><a href="Ch06.html#cb569-51" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb569-52"><a href="Ch06.html#cb569-52" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb569-53"><a href="Ch06.html#cb569-53" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb569-54"><a href="Ch06.html#cb569-54" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb569-55"><a href="Ch06.html#cb569-55" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb569-56"><a href="Ch06.html#cb569-56" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb569-57"><a href="Ch06.html#cb569-57" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb569-58"><a href="Ch06.html#cb569-58" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb569-59"><a href="Ch06.html#cb569-59" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb569-60"><a href="Ch06.html#cb569-60" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_528.png" width="100%" /></p>
</div>
<div id="ch06.529" class="section level2 hasAnchor" number="6.529">
<h2><span class="header-section-number">6.529</span> Terrain_DiS-area_cell<a href="Ch06.html#ch06.529" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_DiS-area_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_529</code></p>
<p><strong>English name:</strong> Fractional cover of Terrain Sinks within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Reljefa depresiju bez virszemes noteces platības īpatsvars analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. Processed
with <code>egvtools::input2egv()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="Ch06.html#cb570-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb570-2"><a href="Ch06.html#cb570-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb570-3"><a href="Ch06.html#cb570-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb570-4"><a href="Ch06.html#cb570-4" tabindex="-1"></a></span>
<span id="cb570-5"><a href="Ch06.html#cb570-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb570-6"><a href="Ch06.html#cb570-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb570-7"><a href="Ch06.html#cb570-7" tabindex="-1"></a></span>
<span id="cb570-8"><a href="Ch06.html#cb570-8" tabindex="-1"></a></span>
<span id="cb570-9"><a href="Ch06.html#cb570-9" tabindex="-1"></a><span class="co"># Terrain_DiS-area_cell.tif egv_529</span></span>
<span id="cb570-10"><a href="Ch06.html#cb570-10" tabindex="-1"></a>dis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_10m/2024/Terrain_DiS_udeni2_10m.tif&quot;</span>)</span>
<span id="cb570-11"><a href="Ch06.html#cb570-11" tabindex="-1"></a>dis2<span class="ot">=</span><span class="fu">ifel</span>(dis<span class="sc">&gt;</span><span class="dv">0</span>,<span class="dv">1</span>,dis)</span>
<span id="cb570-12"><a href="Ch06.html#cb570-12" tabindex="-1"></a></span>
<span id="cb570-13"><a href="Ch06.html#cb570-13" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span>dis2,</span>
<span id="cb570-14"><a href="Ch06.html#cb570-14" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb570-15"><a href="Ch06.html#cb570-15" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb570-16"><a href="Ch06.html#cb570-16" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb570-17"><a href="Ch06.html#cb570-17" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb570-18"><a href="Ch06.html#cb570-18" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb570-19"><a href="Ch06.html#cb570-19" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;Terrain_DiS-area_cell.tif&quot;</span>,</span>
<span id="cb570-20"><a href="Ch06.html#cb570-20" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_529&quot;</span>,</span>
<span id="cb570-21"><a href="Ch06.html#cb570-21" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb570-22"><a href="Ch06.html#cb570-22" tabindex="-1"></a>          <span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb570-23"><a href="Ch06.html#cb570-23" tabindex="-1"></a></span>
<span id="cb570-24"><a href="Ch06.html#cb570-24" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb570-25"><a href="Ch06.html#cb570-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb570-26"><a href="Ch06.html#cb570-26" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb570-27"><a href="Ch06.html#cb570-27" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb570-28"><a href="Ch06.html#cb570-28" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb570-29"><a href="Ch06.html#cb570-29" tabindex="-1"></a></span>
<span id="cb570-30"><a href="Ch06.html#cb570-30" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_DiS-area_cell.tif&quot;</span></span>
<span id="cb570-31"><a href="Ch06.html#cb570-31" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb570-32"><a href="Ch06.html#cb570-32" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb570-33"><a href="Ch06.html#cb570-33" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb570-34"><a href="Ch06.html#cb570-34" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb570-35"><a href="Ch06.html#cb570-35" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb570-36"><a href="Ch06.html#cb570-36" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb570-37"><a href="Ch06.html#cb570-37" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb570-38"><a href="Ch06.html#cb570-38" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb570-39"><a href="Ch06.html#cb570-39" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb570-40"><a href="Ch06.html#cb570-40" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb570-41"><a href="Ch06.html#cb570-41" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb570-42"><a href="Ch06.html#cb570-42" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_529.png" width="100%" /></p>
</div>
<div id="ch06.530" class="section level2 hasAnchor" number="6.530">
<h2><span class="header-section-number">6.530</span> Terrain_DiS-area_r500<a href="Ch06.html#ch06.530" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_DiS-area_r500.tif</code></p>
<p><strong>layername:</strong> <code>egv_530</code></p>
<p><strong>English name:</strong> Fractional cover of Terrain Sinks within the 0.5 km landscape</p>
<p><strong>Latvian name:</strong> Reljefa depresiju bez virszemes noteces platības īpatsvars 0,5 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. Processed
with <code>egvtools::radius_function()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented. After zonal statistics, file is rewritten to ensure layername.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="Ch06.html#cb571-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb571-2"><a href="Ch06.html#cb571-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb571-3"><a href="Ch06.html#cb571-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb571-4"><a href="Ch06.html#cb571-4" tabindex="-1"></a></span>
<span id="cb571-5"><a href="Ch06.html#cb571-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb571-6"><a href="Ch06.html#cb571-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb571-7"><a href="Ch06.html#cb571-7" tabindex="-1"></a></span>
<span id="cb571-8"><a href="Ch06.html#cb571-8" tabindex="-1"></a></span>
<span id="cb571-9"><a href="Ch06.html#cb571-9" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb571-10"><a href="Ch06.html#cb571-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb571-11"><a href="Ch06.html#cb571-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb571-12"><a href="Ch06.html#cb571-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb571-13"><a href="Ch06.html#cb571-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb571-14"><a href="Ch06.html#cb571-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb571-15"><a href="Ch06.html#cb571-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_cell.tif&quot;</span>),</span>
<span id="cb571-16"><a href="Ch06.html#cb571-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Terrain_DiS-area&quot;</span>),</span>
<span id="cb571-17"><a href="Ch06.html#cb571-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb571-18"><a href="Ch06.html#cb571-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb571-19"><a href="Ch06.html#cb571-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r500&quot;</span>),</span>
<span id="cb571-20"><a href="Ch06.html#cb571-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb571-21"><a href="Ch06.html#cb571-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb571-22"><a href="Ch06.html#cb571-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb571-23"><a href="Ch06.html#cb571-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb571-24"><a href="Ch06.html#cb571-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb571-25"><a href="Ch06.html#cb571-25" tabindex="-1"></a></span>
<span id="cb571-26"><a href="Ch06.html#cb571-26" tabindex="-1"></a></span>
<span id="cb571-27"><a href="Ch06.html#cb571-27" tabindex="-1"></a><span class="co"># Terrain_DiS-area_r500.tif egv_530</span></span>
<span id="cb571-28"><a href="Ch06.html#cb571-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_r500.tif&quot;</span>)</span>
<span id="cb571-29"><a href="Ch06.html#cb571-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_530&quot;</span></span>
<span id="cb571-30"><a href="Ch06.html#cb571-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb571-31"><a href="Ch06.html#cb571-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb571-32"><a href="Ch06.html#cb571-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_r500.tif&quot;</span>,</span>
<span id="cb571-33"><a href="Ch06.html#cb571-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb571-34"><a href="Ch06.html#cb571-34" tabindex="-1"></a></span>
<span id="cb571-35"><a href="Ch06.html#cb571-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb571-36"><a href="Ch06.html#cb571-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb571-37"><a href="Ch06.html#cb571-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb571-38"><a href="Ch06.html#cb571-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb571-39"><a href="Ch06.html#cb571-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb571-40"><a href="Ch06.html#cb571-40" tabindex="-1"></a></span>
<span id="cb571-41"><a href="Ch06.html#cb571-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_DiS-area_r500.tif&quot;</span></span>
<span id="cb571-42"><a href="Ch06.html#cb571-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb571-43"><a href="Ch06.html#cb571-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb571-44"><a href="Ch06.html#cb571-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb571-45"><a href="Ch06.html#cb571-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb571-46"><a href="Ch06.html#cb571-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb571-47"><a href="Ch06.html#cb571-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb571-48"><a href="Ch06.html#cb571-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb571-49"><a href="Ch06.html#cb571-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb571-50"><a href="Ch06.html#cb571-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb571-51"><a href="Ch06.html#cb571-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb571-52"><a href="Ch06.html#cb571-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb571-53"><a href="Ch06.html#cb571-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_530.png" width="100%" /></p>
</div>
<div id="ch06.531" class="section level2 hasAnchor" number="6.531">
<h2><span class="header-section-number">6.531</span> Terrain_DiS-area_r1250<a href="Ch06.html#ch06.531" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_DiS-area_r1250.tif</code></p>
<p><strong>layername:</strong> <code>egv_531</code></p>
<p><strong>English name:</strong> Fractional cover of Terrain Sinks within the 1.25 km landscape</p>
<p><strong>Latvian name:</strong> Reljefa depresiju bez virszemes noteces platības īpatsvars 1,25 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. Processed
with <code>egvtools::radius_function()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented. After zonal statistics, file is rewritten to ensure layername.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="Ch06.html#cb572-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb572-2"><a href="Ch06.html#cb572-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb572-3"><a href="Ch06.html#cb572-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb572-4"><a href="Ch06.html#cb572-4" tabindex="-1"></a></span>
<span id="cb572-5"><a href="Ch06.html#cb572-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb572-6"><a href="Ch06.html#cb572-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb572-7"><a href="Ch06.html#cb572-7" tabindex="-1"></a></span>
<span id="cb572-8"><a href="Ch06.html#cb572-8" tabindex="-1"></a></span>
<span id="cb572-9"><a href="Ch06.html#cb572-9" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb572-10"><a href="Ch06.html#cb572-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb572-11"><a href="Ch06.html#cb572-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb572-12"><a href="Ch06.html#cb572-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb572-13"><a href="Ch06.html#cb572-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb572-14"><a href="Ch06.html#cb572-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb572-15"><a href="Ch06.html#cb572-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_cell.tif&quot;</span>),</span>
<span id="cb572-16"><a href="Ch06.html#cb572-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Terrain_DiS-area&quot;</span>),</span>
<span id="cb572-17"><a href="Ch06.html#cb572-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb572-18"><a href="Ch06.html#cb572-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb572-19"><a href="Ch06.html#cb572-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r1250&quot;</span>),</span>
<span id="cb572-20"><a href="Ch06.html#cb572-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb572-21"><a href="Ch06.html#cb572-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb572-22"><a href="Ch06.html#cb572-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb572-23"><a href="Ch06.html#cb572-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb572-24"><a href="Ch06.html#cb572-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb572-25"><a href="Ch06.html#cb572-25" tabindex="-1"></a></span>
<span id="cb572-26"><a href="Ch06.html#cb572-26" tabindex="-1"></a><span class="co"># Terrain_DiS-area_r1250.tif    egv_531</span></span>
<span id="cb572-27"><a href="Ch06.html#cb572-27" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_r1250.tif&quot;</span>)</span>
<span id="cb572-28"><a href="Ch06.html#cb572-28" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_531&quot;</span></span>
<span id="cb572-29"><a href="Ch06.html#cb572-29" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb572-30"><a href="Ch06.html#cb572-30" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb572-31"><a href="Ch06.html#cb572-31" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_r1250.tif&quot;</span>,</span>
<span id="cb572-32"><a href="Ch06.html#cb572-32" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb572-33"><a href="Ch06.html#cb572-33" tabindex="-1"></a></span>
<span id="cb572-34"><a href="Ch06.html#cb572-34" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb572-35"><a href="Ch06.html#cb572-35" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb572-36"><a href="Ch06.html#cb572-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb572-37"><a href="Ch06.html#cb572-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb572-38"><a href="Ch06.html#cb572-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb572-39"><a href="Ch06.html#cb572-39" tabindex="-1"></a></span>
<span id="cb572-40"><a href="Ch06.html#cb572-40" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_DiS-area_r1250.tif&quot;</span></span>
<span id="cb572-41"><a href="Ch06.html#cb572-41" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb572-42"><a href="Ch06.html#cb572-42" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb572-43"><a href="Ch06.html#cb572-43" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb572-44"><a href="Ch06.html#cb572-44" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb572-45"><a href="Ch06.html#cb572-45" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb572-46"><a href="Ch06.html#cb572-46" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb572-47"><a href="Ch06.html#cb572-47" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb572-48"><a href="Ch06.html#cb572-48" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb572-49"><a href="Ch06.html#cb572-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb572-50"><a href="Ch06.html#cb572-50" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb572-51"><a href="Ch06.html#cb572-51" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb572-52"><a href="Ch06.html#cb572-52" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_531.png" width="100%" /></p>
</div>
<div id="ch06.532" class="section level2 hasAnchor" number="6.532">
<h2><span class="header-section-number">6.532</span> Terrain_DiS-area_r3000<a href="Ch06.html#ch06.532" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_DiS-area_r3000.tif</code></p>
<p><strong>layername:</strong> <code>egv_532</code></p>
<p><strong>English name:</strong> Fractional cover of Terrain Sinks within the 3 km landscape</p>
<p><strong>Latvian name:</strong> Reljefa depresiju bez virszemes noteces platības īpatsvars 3 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. Processed
with <code>egvtools::radius_function()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented. After zonal statistics, file is rewritten to ensure layername.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="Ch06.html#cb573-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb573-2"><a href="Ch06.html#cb573-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb573-3"><a href="Ch06.html#cb573-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb573-4"><a href="Ch06.html#cb573-4" tabindex="-1"></a></span>
<span id="cb573-5"><a href="Ch06.html#cb573-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb573-6"><a href="Ch06.html#cb573-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb573-7"><a href="Ch06.html#cb573-7" tabindex="-1"></a></span>
<span id="cb573-8"><a href="Ch06.html#cb573-8" tabindex="-1"></a></span>
<span id="cb573-9"><a href="Ch06.html#cb573-9" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb573-10"><a href="Ch06.html#cb573-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb573-11"><a href="Ch06.html#cb573-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb573-12"><a href="Ch06.html#cb573-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb573-13"><a href="Ch06.html#cb573-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb573-14"><a href="Ch06.html#cb573-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb573-15"><a href="Ch06.html#cb573-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_cell.tif&quot;</span>),</span>
<span id="cb573-16"><a href="Ch06.html#cb573-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Terrain_DiS-area&quot;</span>),</span>
<span id="cb573-17"><a href="Ch06.html#cb573-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb573-18"><a href="Ch06.html#cb573-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb573-19"><a href="Ch06.html#cb573-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r3000&quot;</span>),</span>
<span id="cb573-20"><a href="Ch06.html#cb573-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb573-21"><a href="Ch06.html#cb573-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb573-22"><a href="Ch06.html#cb573-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb573-23"><a href="Ch06.html#cb573-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb573-24"><a href="Ch06.html#cb573-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb573-25"><a href="Ch06.html#cb573-25" tabindex="-1"></a></span>
<span id="cb573-26"><a href="Ch06.html#cb573-26" tabindex="-1"></a></span>
<span id="cb573-27"><a href="Ch06.html#cb573-27" tabindex="-1"></a><span class="co"># Terrain_DiS-area_r3000.tif    egv_532</span></span>
<span id="cb573-28"><a href="Ch06.html#cb573-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_r3000.tif&quot;</span>)</span>
<span id="cb573-29"><a href="Ch06.html#cb573-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_532&quot;</span></span>
<span id="cb573-30"><a href="Ch06.html#cb573-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb573-31"><a href="Ch06.html#cb573-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb573-32"><a href="Ch06.html#cb573-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_r3000.tif&quot;</span>,</span>
<span id="cb573-33"><a href="Ch06.html#cb573-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb573-34"><a href="Ch06.html#cb573-34" tabindex="-1"></a></span>
<span id="cb573-35"><a href="Ch06.html#cb573-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb573-36"><a href="Ch06.html#cb573-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb573-37"><a href="Ch06.html#cb573-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb573-38"><a href="Ch06.html#cb573-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb573-39"><a href="Ch06.html#cb573-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb573-40"><a href="Ch06.html#cb573-40" tabindex="-1"></a></span>
<span id="cb573-41"><a href="Ch06.html#cb573-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_DiS-area_r3000.tif&quot;</span></span>
<span id="cb573-42"><a href="Ch06.html#cb573-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb573-43"><a href="Ch06.html#cb573-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb573-44"><a href="Ch06.html#cb573-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb573-45"><a href="Ch06.html#cb573-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb573-46"><a href="Ch06.html#cb573-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb573-47"><a href="Ch06.html#cb573-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb573-48"><a href="Ch06.html#cb573-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb573-49"><a href="Ch06.html#cb573-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb573-50"><a href="Ch06.html#cb573-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb573-51"><a href="Ch06.html#cb573-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb573-52"><a href="Ch06.html#cb573-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb573-53"><a href="Ch06.html#cb573-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_532.png" width="100%" /></p>
</div>
<div id="ch06.533" class="section level2 hasAnchor" number="6.533">
<h2><span class="header-section-number">6.533</span> Terrain_DiS-area_r10000<a href="Ch06.html#ch06.533" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_DiS-area_r10000.tif</code></p>
<p><strong>layername:</strong> <code>egv_533</code></p>
<p><strong>English name:</strong> Fractional cover of Terrain Sinks within the 10 km landscape</p>
<p><strong>Latvian name:</strong> Reljefa depresiju bez virszemes noteces platības īpatsvars 10 km ainavā</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. Processed
with <code>egvtools::radius_function()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented. After zonal statistics, file is rewritten to ensure layername.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="Ch06.html#cb574-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb574-2"><a href="Ch06.html#cb574-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb574-3"><a href="Ch06.html#cb574-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb574-4"><a href="Ch06.html#cb574-4" tabindex="-1"></a></span>
<span id="cb574-5"><a href="Ch06.html#cb574-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb574-6"><a href="Ch06.html#cb574-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb574-7"><a href="Ch06.html#cb574-7" tabindex="-1"></a></span>
<span id="cb574-8"><a href="Ch06.html#cb574-8" tabindex="-1"></a></span>
<span id="cb574-9"><a href="Ch06.html#cb574-9" tabindex="-1"></a><span class="co"># radii</span></span>
<span id="cb574-10"><a href="Ch06.html#cb574-10" tabindex="-1"></a><span class="fu">radius_function</span>(</span>
<span id="cb574-11"><a href="Ch06.html#cb574-11" tabindex="-1"></a>  <span class="at">kvadrati_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tiles/&quot;</span>,</span>
<span id="cb574-12"><a href="Ch06.html#cb574-12" tabindex="-1"></a>  <span class="at">radii_path     =</span> <span class="st">&quot;./Templates/TemplateGridPoints/tiles/&quot;</span>,</span>
<span id="cb574-13"><a href="Ch06.html#cb574-13" tabindex="-1"></a>  <span class="at">tikls100_path  =</span> <span class="st">&quot;./Templates/TemplateGrids/tikls100_sauzeme.parquet&quot;</span>,</span>
<span id="cb574-14"><a href="Ch06.html#cb574-14" tabindex="-1"></a>  <span class="at">template_path  =</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb574-15"><a href="Ch06.html#cb574-15" tabindex="-1"></a>  <span class="at">input_layers   =</span> <span class="fu">c</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_cell.tif&quot;</span>),</span>
<span id="cb574-16"><a href="Ch06.html#cb574-16" tabindex="-1"></a>  <span class="at">layer_prefixes =</span> <span class="fu">c</span>(<span class="st">&quot;Terrain_DiS-area&quot;</span>),</span>
<span id="cb574-17"><a href="Ch06.html#cb574-17" tabindex="-1"></a>  <span class="at">output_dir     =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb574-18"><a href="Ch06.html#cb574-18" tabindex="-1"></a>  <span class="at">n_workers      =</span> <span class="dv">5</span>,</span>
<span id="cb574-19"><a href="Ch06.html#cb574-19" tabindex="-1"></a>  <span class="at">radii          =</span> <span class="fu">c</span>(<span class="st">&quot;r10000&quot;</span>),</span>
<span id="cb574-20"><a href="Ch06.html#cb574-20" tabindex="-1"></a>  <span class="at">radius_mode    =</span> <span class="st">&quot;sparse&quot;</span>,</span>
<span id="cb574-21"><a href="Ch06.html#cb574-21" tabindex="-1"></a>  <span class="at">extract_fun    =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb574-22"><a href="Ch06.html#cb574-22" tabindex="-1"></a>  <span class="at">fill_missing   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb574-23"><a href="Ch06.html#cb574-23" tabindex="-1"></a>  <span class="at">IDW_weight     =</span> <span class="dv">2</span>,</span>
<span id="cb574-24"><a href="Ch06.html#cb574-24" tabindex="-1"></a>  <span class="at">future_max_size =</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">3</span>)</span>
<span id="cb574-25"><a href="Ch06.html#cb574-25" tabindex="-1"></a></span>
<span id="cb574-26"><a href="Ch06.html#cb574-26" tabindex="-1"></a></span>
<span id="cb574-27"><a href="Ch06.html#cb574-27" tabindex="-1"></a><span class="co"># Terrain_DiS-area_r10000.tif   egv_533</span></span>
<span id="cb574-28"><a href="Ch06.html#cb574-28" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_r10000.tif&quot;</span>)</span>
<span id="cb574-29"><a href="Ch06.html#cb574-29" tabindex="-1"></a><span class="fu">names</span>(slanis)<span class="ot">=</span><span class="st">&quot;egv_533&quot;</span></span>
<span id="cb574-30"><a href="Ch06.html#cb574-30" tabindex="-1"></a>slanis2<span class="ot">=</span><span class="fu">project</span>(slanis,template100)</span>
<span id="cb574-31"><a href="Ch06.html#cb574-31" tabindex="-1"></a><span class="fu">writeRaster</span>(slanis2,</span>
<span id="cb574-32"><a href="Ch06.html#cb574-32" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_DiS-area_r10000.tif&quot;</span>,</span>
<span id="cb574-33"><a href="Ch06.html#cb574-33" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb574-34"><a href="Ch06.html#cb574-34" tabindex="-1"></a></span>
<span id="cb574-35"><a href="Ch06.html#cb574-35" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb574-36"><a href="Ch06.html#cb574-36" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb574-37"><a href="Ch06.html#cb574-37" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb574-38"><a href="Ch06.html#cb574-38" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb574-39"><a href="Ch06.html#cb574-39" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb574-40"><a href="Ch06.html#cb574-40" tabindex="-1"></a></span>
<span id="cb574-41"><a href="Ch06.html#cb574-41" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_DiS-area_r10000.tif&quot;</span></span>
<span id="cb574-42"><a href="Ch06.html#cb574-42" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb574-43"><a href="Ch06.html#cb574-43" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb574-44"><a href="Ch06.html#cb574-44" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb574-45"><a href="Ch06.html#cb574-45" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb574-46"><a href="Ch06.html#cb574-46" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb574-47"><a href="Ch06.html#cb574-47" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb574-48"><a href="Ch06.html#cb574-48" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb574-49"><a href="Ch06.html#cb574-49" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb574-50"><a href="Ch06.html#cb574-50" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb574-51"><a href="Ch06.html#cb574-51" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb574-52"><a href="Ch06.html#cb574-52" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb574-53"><a href="Ch06.html#cb574-53" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_533.png" width="100%" /></p>
</div>
<div id="ch06.534" class="section level2 hasAnchor" number="6.534">
<h2><span class="header-section-number">6.534</span> Terrain_DiS-max_cell<a href="Ch06.html#ch06.534" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_DiS-max_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_534</code></p>
<p><strong>English name:</strong> Maximum Depth in Terrain Sink within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Reljefa depresiju lielākais dziļums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. Processed
with <code>egvtools::input2egv()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="Ch06.html#cb575-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb575-2"><a href="Ch06.html#cb575-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb575-3"><a href="Ch06.html#cb575-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb575-4"><a href="Ch06.html#cb575-4" tabindex="-1"></a></span>
<span id="cb575-5"><a href="Ch06.html#cb575-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb575-6"><a href="Ch06.html#cb575-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb575-7"><a href="Ch06.html#cb575-7" tabindex="-1"></a></span>
<span id="cb575-8"><a href="Ch06.html#cb575-8" tabindex="-1"></a></span>
<span id="cb575-9"><a href="Ch06.html#cb575-9" tabindex="-1"></a><span class="co"># Terrain_DiS-max_cell.tif  egv_534</span></span>
<span id="cb575-10"><a href="Ch06.html#cb575-10" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./RasterGrids_10m/2024/Terrain_DiS_udeni2_10m.tif&quot;</span>,</span>
<span id="cb575-11"><a href="Ch06.html#cb575-11" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb575-12"><a href="Ch06.html#cb575-12" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;max&quot;</span>,</span>
<span id="cb575-13"><a href="Ch06.html#cb575-13" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb575-14"><a href="Ch06.html#cb575-14" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb575-15"><a href="Ch06.html#cb575-15" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb575-16"><a href="Ch06.html#cb575-16" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;Terrain_DiS-max_cell.tif&quot;</span>,</span>
<span id="cb575-17"><a href="Ch06.html#cb575-17" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_534&quot;</span>,</span>
<span id="cb575-18"><a href="Ch06.html#cb575-18" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb575-19"><a href="Ch06.html#cb575-19" tabindex="-1"></a>          <span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb575-20"><a href="Ch06.html#cb575-20" tabindex="-1"></a></span>
<span id="cb575-21"><a href="Ch06.html#cb575-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb575-22"><a href="Ch06.html#cb575-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb575-23"><a href="Ch06.html#cb575-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb575-24"><a href="Ch06.html#cb575-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb575-25"><a href="Ch06.html#cb575-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb575-26"><a href="Ch06.html#cb575-26" tabindex="-1"></a></span>
<span id="cb575-27"><a href="Ch06.html#cb575-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_DiS-max_cell.tif&quot;</span></span>
<span id="cb575-28"><a href="Ch06.html#cb575-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb575-29"><a href="Ch06.html#cb575-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb575-30"><a href="Ch06.html#cb575-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb575-31"><a href="Ch06.html#cb575-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb575-32"><a href="Ch06.html#cb575-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb575-33"><a href="Ch06.html#cb575-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb575-34"><a href="Ch06.html#cb575-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb575-35"><a href="Ch06.html#cb575-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb575-36"><a href="Ch06.html#cb575-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb575-37"><a href="Ch06.html#cb575-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb575-38"><a href="Ch06.html#cb575-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb575-39"><a href="Ch06.html#cb575-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_534.png" width="100%" /></p>
</div>
<div id="ch06.535" class="section level2 hasAnchor" number="6.535">
<h2><span class="header-section-number">6.535</span> Terrain_DiS-mean_cell<a href="Ch06.html#ch06.535" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_DiS-mean_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_535</code></p>
<p><strong>English name:</strong> Average Depth in Terrain Sink within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Reljefa depresiju vidējais dziļums analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. Processed
with <code>egvtools::input2egv()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="Ch06.html#cb576-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb576-2"><a href="Ch06.html#cb576-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb576-3"><a href="Ch06.html#cb576-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb576-4"><a href="Ch06.html#cb576-4" tabindex="-1"></a></span>
<span id="cb576-5"><a href="Ch06.html#cb576-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb576-6"><a href="Ch06.html#cb576-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb576-7"><a href="Ch06.html#cb576-7" tabindex="-1"></a></span>
<span id="cb576-8"><a href="Ch06.html#cb576-8" tabindex="-1"></a></span>
<span id="cb576-9"><a href="Ch06.html#cb576-9" tabindex="-1"></a><span class="co"># Terrain_DiS-mean_cell.tif egv_535</span></span>
<span id="cb576-10"><a href="Ch06.html#cb576-10" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./RasterGrids_10m/2024/Terrain_DiS_udeni2_10m.tif&quot;</span>,</span>
<span id="cb576-11"><a href="Ch06.html#cb576-11" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb576-12"><a href="Ch06.html#cb576-12" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb576-13"><a href="Ch06.html#cb576-13" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb576-14"><a href="Ch06.html#cb576-14" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb576-15"><a href="Ch06.html#cb576-15" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb576-16"><a href="Ch06.html#cb576-16" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;Terrain_DiS-mean_cell.tif&quot;</span>,</span>
<span id="cb576-17"><a href="Ch06.html#cb576-17" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_535&quot;</span>,</span>
<span id="cb576-18"><a href="Ch06.html#cb576-18" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb576-19"><a href="Ch06.html#cb576-19" tabindex="-1"></a>          <span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb576-20"><a href="Ch06.html#cb576-20" tabindex="-1"></a></span>
<span id="cb576-21"><a href="Ch06.html#cb576-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb576-22"><a href="Ch06.html#cb576-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb576-23"><a href="Ch06.html#cb576-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb576-24"><a href="Ch06.html#cb576-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb576-25"><a href="Ch06.html#cb576-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb576-26"><a href="Ch06.html#cb576-26" tabindex="-1"></a></span>
<span id="cb576-27"><a href="Ch06.html#cb576-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_DiS-mean_cell.tif&quot;</span></span>
<span id="cb576-28"><a href="Ch06.html#cb576-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb576-29"><a href="Ch06.html#cb576-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb576-30"><a href="Ch06.html#cb576-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb576-31"><a href="Ch06.html#cb576-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb576-32"><a href="Ch06.html#cb576-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb576-33"><a href="Ch06.html#cb576-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb576-34"><a href="Ch06.html#cb576-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb576-35"><a href="Ch06.html#cb576-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb576-36"><a href="Ch06.html#cb576-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb576-37"><a href="Ch06.html#cb576-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb576-38"><a href="Ch06.html#cb576-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb576-39"><a href="Ch06.html#cb576-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_535.png" width="100%" /></p>
</div>
<div id="ch06.536" class="section level2 hasAnchor" number="6.536">
<h2><span class="header-section-number">6.536</span> Terrain_Slope-average_cell<a href="Ch06.html#ch06.536" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_Slope-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_536</code></p>
<p><strong>English name:</strong> Average value of Terrain Slope (degree) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Nogāzes slīpuma vidējā vērtība analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. Processed
with <code>egvtools::input2egv()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="Ch06.html#cb577-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb577-2"><a href="Ch06.html#cb577-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb577-3"><a href="Ch06.html#cb577-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb577-4"><a href="Ch06.html#cb577-4" tabindex="-1"></a></span>
<span id="cb577-5"><a href="Ch06.html#cb577-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb577-6"><a href="Ch06.html#cb577-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb577-7"><a href="Ch06.html#cb577-7" tabindex="-1"></a></span>
<span id="cb577-8"><a href="Ch06.html#cb577-8" tabindex="-1"></a></span>
<span id="cb577-9"><a href="Ch06.html#cb577-9" tabindex="-1"></a><span class="co"># Terrain_Slope-average_cell.tif    egv_536</span></span>
<span id="cb577-10"><a href="Ch06.html#cb577-10" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./RasterGrids_10m/2024/Terrain_Slope_udeni2_10m.tif&quot;</span>,</span>
<span id="cb577-11"><a href="Ch06.html#cb577-11" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb577-12"><a href="Ch06.html#cb577-12" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb577-13"><a href="Ch06.html#cb577-13" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb577-14"><a href="Ch06.html#cb577-14" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb577-15"><a href="Ch06.html#cb577-15" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb577-16"><a href="Ch06.html#cb577-16" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;Terrain_Slope-average_cell.tif&quot;</span>,</span>
<span id="cb577-17"><a href="Ch06.html#cb577-17" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_536&quot;</span>,</span>
<span id="cb577-18"><a href="Ch06.html#cb577-18" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb577-19"><a href="Ch06.html#cb577-19" tabindex="-1"></a>          <span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb577-20"><a href="Ch06.html#cb577-20" tabindex="-1"></a></span>
<span id="cb577-21"><a href="Ch06.html#cb577-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb577-22"><a href="Ch06.html#cb577-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb577-23"><a href="Ch06.html#cb577-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb577-24"><a href="Ch06.html#cb577-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb577-25"><a href="Ch06.html#cb577-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb577-26"><a href="Ch06.html#cb577-26" tabindex="-1"></a></span>
<span id="cb577-27"><a href="Ch06.html#cb577-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_Slope-average_cell.tif&quot;</span></span>
<span id="cb577-28"><a href="Ch06.html#cb577-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb577-29"><a href="Ch06.html#cb577-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb577-30"><a href="Ch06.html#cb577-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb577-31"><a href="Ch06.html#cb577-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb577-32"><a href="Ch06.html#cb577-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb577-33"><a href="Ch06.html#cb577-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb577-34"><a href="Ch06.html#cb577-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb577-35"><a href="Ch06.html#cb577-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb577-36"><a href="Ch06.html#cb577-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb577-37"><a href="Ch06.html#cb577-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb577-38"><a href="Ch06.html#cb577-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb577-39"><a href="Ch06.html#cb577-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_536.png" width="100%" /></p>
</div>
<div id="ch06.537" class="section level2 hasAnchor" number="6.537">
<h2><span class="header-section-number">6.537</span> Terrain_Slope-iqr_cell<a href="Ch06.html#ch06.537" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_Slope-iqr_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_537</code></p>
<p><strong>English name:</strong> Variability of Terrain Slope (degree) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Nogāzes slīpuma variabilitāte analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. First Q1 and then Q3
is calculated for every cell with <code>egvtools::input2egv()</code>. Finally, subtracting
Q1 from Q3 and writing final raster with specified layername. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented.
At the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="Ch06.html#cb578-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb578-2"><a href="Ch06.html#cb578-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb578-3"><a href="Ch06.html#cb578-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb578-4"><a href="Ch06.html#cb578-4" tabindex="-1"></a></span>
<span id="cb578-5"><a href="Ch06.html#cb578-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb578-6"><a href="Ch06.html#cb578-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb578-7"><a href="Ch06.html#cb578-7" tabindex="-1"></a></span>
<span id="cb578-8"><a href="Ch06.html#cb578-8" tabindex="-1"></a></span>
<span id="cb578-9"><a href="Ch06.html#cb578-9" tabindex="-1"></a><span class="co"># Terrain_Slope-iqr_cell.tif    egv_537</span></span>
<span id="cb578-10"><a href="Ch06.html#cb578-10" tabindex="-1"></a>p25rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./RasterGrids_10m/2024/Terrain_Slope_udeni2_10m.tif&quot;</span>,</span>
<span id="cb578-11"><a href="Ch06.html#cb578-11" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb578-12"><a href="Ch06.html#cb578-12" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q1&quot;</span>,</span>
<span id="cb578-13"><a href="Ch06.html#cb578-13" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb578-14"><a href="Ch06.html#cb578-14" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb578-15"><a href="Ch06.html#cb578-15" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p25.tif&quot;</span>,</span>
<span id="cb578-16"><a href="Ch06.html#cb578-16" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_537&quot;</span>,</span>
<span id="cb578-17"><a href="Ch06.html#cb578-17" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>)</span>
<span id="cb578-18"><a href="Ch06.html#cb578-18" tabindex="-1"></a>p25rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb578-19"><a href="Ch06.html#cb578-19" tabindex="-1"></a></span>
<span id="cb578-20"><a href="Ch06.html#cb578-20" tabindex="-1"></a></span>
<span id="cb578-21"><a href="Ch06.html#cb578-21" tabindex="-1"></a>p75rez<span class="ot">=</span><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./RasterGrids_10m/2024/Terrain_Slope_udeni2_10m.tif&quot;</span>,</span>
<span id="cb578-22"><a href="Ch06.html#cb578-22" tabindex="-1"></a>                 <span class="at">egv_template=</span> <span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb578-23"><a href="Ch06.html#cb578-23" tabindex="-1"></a>                 <span class="at">summary_function =</span> <span class="st">&quot;q3&quot;</span>,</span>
<span id="cb578-24"><a href="Ch06.html#cb578-24" tabindex="-1"></a>                 <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb578-25"><a href="Ch06.html#cb578-25" tabindex="-1"></a>                 <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/&quot;</span>,</span>
<span id="cb578-26"><a href="Ch06.html#cb578-26" tabindex="-1"></a>                 <span class="at">outfilename =</span> <span class="st">&quot;draza_p75.tif&quot;</span>,</span>
<span id="cb578-27"><a href="Ch06.html#cb578-27" tabindex="-1"></a>                 <span class="at">layername =</span> <span class="st">&quot;egv_537&quot;</span>,</span>
<span id="cb578-28"><a href="Ch06.html#cb578-28" tabindex="-1"></a>                 <span class="at">idw_weight =</span> <span class="dv">2</span>)</span>
<span id="cb578-29"><a href="Ch06.html#cb578-29" tabindex="-1"></a>p75rez_r<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb578-30"><a href="Ch06.html#cb578-30" tabindex="-1"></a></span>
<span id="cb578-31"><a href="Ch06.html#cb578-31" tabindex="-1"></a>iqr_rez<span class="ot">=</span>p75rez_r<span class="sc">-</span>p25rez_r</span>
<span id="cb578-32"><a href="Ch06.html#cb578-32" tabindex="-1"></a>iqr_rez</span>
<span id="cb578-33"><a href="Ch06.html#cb578-33" tabindex="-1"></a><span class="fu">plot</span>(iqr_rez)</span>
<span id="cb578-34"><a href="Ch06.html#cb578-34" tabindex="-1"></a></span>
<span id="cb578-35"><a href="Ch06.html#cb578-35" tabindex="-1"></a><span class="fu">writeRaster</span>(iqr_rez,</span>
<span id="cb578-36"><a href="Ch06.html#cb578-36" tabindex="-1"></a>            <span class="st">&quot;./RasterGrids_100m/2024/RAW/Terrain_Slope-iqr_cell.tif&quot;</span>,</span>
<span id="cb578-37"><a href="Ch06.html#cb578-37" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb578-38"><a href="Ch06.html#cb578-38" tabindex="-1"></a></span>
<span id="cb578-39"><a href="Ch06.html#cb578-39" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p75.tif&quot;</span>)</span>
<span id="cb578-40"><a href="Ch06.html#cb578-40" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;./RasterGrids_100m/2024/draza_p25.tif&quot;</span>)</span>
<span id="cb578-41"><a href="Ch06.html#cb578-41" tabindex="-1"></a></span>
<span id="cb578-42"><a href="Ch06.html#cb578-42" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb578-43"><a href="Ch06.html#cb578-43" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb578-44"><a href="Ch06.html#cb578-44" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb578-45"><a href="Ch06.html#cb578-45" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb578-46"><a href="Ch06.html#cb578-46" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb578-47"><a href="Ch06.html#cb578-47" tabindex="-1"></a></span>
<span id="cb578-48"><a href="Ch06.html#cb578-48" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_Slope-iqr_cell.tif&quot;</span></span>
<span id="cb578-49"><a href="Ch06.html#cb578-49" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb578-50"><a href="Ch06.html#cb578-50" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb578-51"><a href="Ch06.html#cb578-51" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb578-52"><a href="Ch06.html#cb578-52" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb578-53"><a href="Ch06.html#cb578-53" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb578-54"><a href="Ch06.html#cb578-54" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb578-55"><a href="Ch06.html#cb578-55" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb578-56"><a href="Ch06.html#cb578-56" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb578-57"><a href="Ch06.html#cb578-57" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb578-58"><a href="Ch06.html#cb578-58" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb578-59"><a href="Ch06.html#cb578-59" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb578-60"><a href="Ch06.html#cb578-60" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_537.png" width="100%" /></p>
</div>
<div id="ch06.538" class="section level2 hasAnchor" number="6.538">
<h2><span class="header-section-number">6.538</span> Terrain_TWI-average_cell<a href="Ch06.html#ch06.538" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>filename:</strong> <code>Terrain_TWI-average_cell.tif</code></p>
<p><strong>layername:</strong> <code>egv_538</code></p>
<p><strong>English name:</strong> Average value of Topographic Wetness Index (TWI) within the analysis cell (1 ha)</p>
<p><strong>Latvian name:</strong> Topogrāfiskā mitruma indeksa vidējā vērtība analīzes šūnā (1 ha)</p>
<p><strong>Procedure:</strong> Derived from <a href="Ch05.html#Ch05.01">Terrain products</a>. Processed
with <code>egvtools::input2egv()</code>. To protect against
possible data loss at edge cells, inverse distance weighted (power = 2) gap filling
is implemented. At
the very end, layer is standardized by subtracting arithmetic mean and dividing
by root mean squared error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="Ch06.html#cb579-1" tabindex="-1"></a><span class="co"># libs ----</span></span>
<span id="cb579-2"><a href="Ch06.html#cb579-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb579-3"><a href="Ch06.html#cb579-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(egvtools)) {remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;aavotins/egvtools&quot;</span>); <span class="fu">require</span>(egvtools)}</span>
<span id="cb579-4"><a href="Ch06.html#cb579-4" tabindex="-1"></a></span>
<span id="cb579-5"><a href="Ch06.html#cb579-5" tabindex="-1"></a><span class="co"># templates ----</span></span>
<span id="cb579-6"><a href="Ch06.html#cb579-6" tabindex="-1"></a>template100<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>)</span>
<span id="cb579-7"><a href="Ch06.html#cb579-7" tabindex="-1"></a></span>
<span id="cb579-8"><a href="Ch06.html#cb579-8" tabindex="-1"></a></span>
<span id="cb579-9"><a href="Ch06.html#cb579-9" tabindex="-1"></a><span class="co"># Terrain_TWI-average_cell.tif  egv_538</span></span>
<span id="cb579-10"><a href="Ch06.html#cb579-10" tabindex="-1"></a><span class="fu">input2egv</span>(<span class="at">input=</span><span class="st">&quot;./RasterGrids_10m/2024/Terrain_TWI_udeni2_10m.tif&quot;</span>,</span>
<span id="cb579-11"><a href="Ch06.html#cb579-11" tabindex="-1"></a>          <span class="at">egv_template=</span><span class="st">&quot;./Templates/TemplateRasters/LV100m_10km.tif&quot;</span>,</span>
<span id="cb579-12"><a href="Ch06.html#cb579-12" tabindex="-1"></a>          <span class="at">summary_function =</span> <span class="st">&quot;average&quot;</span>,</span>
<span id="cb579-13"><a href="Ch06.html#cb579-13" tabindex="-1"></a>          <span class="at">missing_job =</span> <span class="st">&quot;FillOutput&quot;</span>,</span>
<span id="cb579-14"><a href="Ch06.html#cb579-14" tabindex="-1"></a>          <span class="at">idw_weight =</span> <span class="dv">2</span>,</span>
<span id="cb579-15"><a href="Ch06.html#cb579-15" tabindex="-1"></a>          <span class="at">outlocation =</span> <span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,</span>
<span id="cb579-16"><a href="Ch06.html#cb579-16" tabindex="-1"></a>          <span class="at">outfilename =</span> <span class="st">&quot;Terrain_TWI-average_cell.tif&quot;</span>,</span>
<span id="cb579-17"><a href="Ch06.html#cb579-17" tabindex="-1"></a>          <span class="at">layername=</span><span class="st">&quot;egv_538&quot;</span>,</span>
<span id="cb579-18"><a href="Ch06.html#cb579-18" tabindex="-1"></a>          <span class="at">return_visible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb579-19"><a href="Ch06.html#cb579-19" tabindex="-1"></a>          <span class="at">plot_final =</span> <span class="cn">TRUE</span>)</span>
<span id="cb579-20"><a href="Ch06.html#cb579-20" tabindex="-1"></a></span>
<span id="cb579-21"><a href="Ch06.html#cb579-21" tabindex="-1"></a><span class="co"># standardization ----</span></span>
<span id="cb579-22"><a href="Ch06.html#cb579-22" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb579-23"><a href="Ch06.html#cb579-23" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb579-24"><a href="Ch06.html#cb579-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb579-25"><a href="Ch06.html#cb579-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb579-26"><a href="Ch06.html#cb579-26" tabindex="-1"></a></span>
<span id="cb579-27"><a href="Ch06.html#cb579-27" tabindex="-1"></a>nosaukums<span class="ot">=</span><span class="st">&quot;Terrain_TWI-average_cell.tif&quot;</span></span>
<span id="cb579-28"><a href="Ch06.html#cb579-28" tabindex="-1"></a>ielasisanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/RAW/&quot;</span>,nosaukums)</span>
<span id="cb579-29"><a href="Ch06.html#cb579-29" tabindex="-1"></a>saglabasanas_cels<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./RasterGrids_100m/2024/Scaled/&quot;</span>,nosaukums)</span>
<span id="cb579-30"><a href="Ch06.html#cb579-30" tabindex="-1"></a>slanis<span class="ot">=</span><span class="fu">rast</span>(ielasisanas_cels)</span>
<span id="cb579-31"><a href="Ch06.html#cb579-31" tabindex="-1"></a>videjais<span class="ot">=</span><span class="fu">global</span>(slanis,<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb579-32"><a href="Ch06.html#cb579-32" tabindex="-1"></a>centrets<span class="ot">=</span>slanis<span class="sc">-</span>videjais[,<span class="dv">1</span>]</span>
<span id="cb579-33"><a href="Ch06.html#cb579-33" tabindex="-1"></a>standartnovirze<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">global</span>(centrets,<span class="at">fun=</span><span class="st">&quot;rms&quot;</span>,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb579-34"><a href="Ch06.html#cb579-34" tabindex="-1"></a>merogots<span class="ot">=</span>centrets<span class="sc">/</span>standartnovirze[,<span class="dv">1</span>]</span>
<span id="cb579-35"><a href="Ch06.html#cb579-35" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_mean[i]<span class="ot">=</span>videjais</span>
<span id="cb579-36"><a href="Ch06.html#cb579-36" tabindex="-1"></a>nosaukumiem<span class="sc">$</span>egv_rms[i]<span class="ot">=</span>standartnovirze</span>
<span id="cb579-37"><a href="Ch06.html#cb579-37" tabindex="-1"></a><span class="fu">writeRaster</span>(merogots,</span>
<span id="cb579-38"><a href="Ch06.html#cb579-38" tabindex="-1"></a>            <span class="at">filename=</span>saglabasanas_cels,</span>
<span id="cb579-39"><a href="Ch06.html#cb579-39" tabindex="-1"></a>            <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</details>
<p><img src="Figures/maps4book/egv_538.png" width="100%" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Ch05.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Ch07.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": false,
    "twitter": false,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/aavotins/HiQBioDiv_EGVs/edit/main/book/06-EGVs.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["HiQBioDiv-EGVs.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section",
    "scroll_highlight": true
  }
});
});
</script>

</body>

</html>
